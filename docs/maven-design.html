<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">


    <!-- ====================================================================== -->
    <!-- GENERATED FILE, DO NOT EDIT, EDIT THE XML FILE IN xdocs INSTEAD! -->
    <!-- ====================================================================== -->
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
            <style type="text/css">@import "stylesheets/base.css";</style>
                                          <meta name="author" value="
 UIMA Documentation Team">
  <meta name="email" value="dev@uima.apache.org">
                        
            
                        
                        <title>Apache UIMA - How we use Maven for building</title>
        </head>

        <body>
          <div class="topLogos">        
            <table border="0" width="100%" cellspacing="0">
                <!-- TOP IMAGE -->
                <tr>
                    <td align='LEFT'>
                      <a href="index.html">
                                    <img style="border: 1px solid black;" src="./images/UIMA_banner2tlp.png" alt="UIMA project logo" border="0"/>
                            </a>
                    </td>
                    <td align='CENTER'>
                          <div class="pageBanner">How we use Maven for building</div>
                    </td>
                    <td align='RIGHT'>
                                  <a href="http://www.apache.org">
        <img src="./images/asf-logo-on-white-small.png" alt="Apache UIMA" border="0"/>
      </a>
                          </td>
                </tr>
            </table>
            <hr noshade="" size="1"/>
            </div>
            <table border="0" width="100%" cellspacing="4">
              <tr>
                <td align='RIGHT' colspan="2">
                  <form method="get" action="http://www.google.com/search">
                    Search the site
                    <input type="text"   name="q" size="25" maxlength="255" value="" />
                    <input type="hidden" name="sitesearch" value="http://uima.apache.org/" />
                    <input name="Search" value="Search Site" type="submit"/>
                  </form>
                </td>
              </tr>
              <tr> <!-- LEFT SIDE NAVIGATION -->
                <td width="20%" valign="top">






                   <!-- regular menu -->
                      <div class="navBar">
                  <br/>
            <div class="navBarItem">      <div class="navPartHeading">General</div>
                </div>
                <div class="navBar">
                  <div class="navBarItem">      <a href="./index.html">Home</a>
                </div>
                          <div class="navBarItem">      <a href="./downloads.cgi">Downloads</a>
                </div>
                          <div class="navBarItem">      <a href="./documentation.html">Documentation</a>
                </div>
                          <div class="navBarItem">      <a href="./news.html">News</a>
                </div>
                    <br style="line-height: .5em"/>
                          <div class="navBarItem">      <a href="./mail-lists.html">Mailing Lists</a>
                </div>
                          <div class="navBarItem">      <a href="./mail-lists.html#Apache_UIMA_Forums">Forums</a>
                    <a href="http://news.gmane.org/gmane.comp.apache.uima.general" target="_blank"><em> Users</em> <img src="images/offsitelink.png" /></a>
                  <a href="http://news.gmane.org/gmane.comp.apache.uima.devel" target="_blank"><em>Dev</em> <img src="images/offsitelink.png" /></a>
              </div>
                    <br style="line-height: .5em"/>
                          <div class="navBarItem">      <a href="http://issues.apache.org/jira/browse/uima" target="_blank">Issue tracker <img src="images/offsitelink.png"</a>
                </div>
                          <div class="navBarItem">      <a href="http://cwiki.apache.org/UIMA/" target="_blank">Wiki <img src="images/offsitelink.png"</a>
                </div>
            </div>
                      <br/>
            <div class="navBarItem">      <div class="navPartHeading">Components & Tools</div>
                </div>
                <div class="navBar">
                  <div class="navBarItem">      <a href="./annotators.html">Annotators</a>
                </div>
                          <div class="navBarItem">      <a href="./toolsServers.html">Tools & Servers</a>
                </div>
                          <div class="navBarItem">      <a href="./sandbox.html">Sandbox</a>
                </div>
                          <div class="navBarItem">      <a href="./external-resources.html">External Resources</a>
                </div>
            </div>
                      <br/>
            <div class="navBarItem">      <div class="navPartHeading">Community</div>
                </div>
                <div class="navBar">
                  <div class="navBarItem">      <a href="./get-involved.html">Get Involved</a>
                </div>
                          <div class="navBarItem">      <a href="./contribution-policy.html">Contribution Policies</a>
                </div>
                          <div class="navBarItem">      <a href="./faq.html">FAQ</a>
                </div>
                          <div class="navBarItem">      <a href="./project-guidelines.html">Project Guidelines</a>
                </div>
            </div>
                      <br/>
            <div class="navBarItem">      <div class="navPartHeading">Development</div>
                </div>
                <div class="navBar">
                  <div class="navBarItem">      <a href="./one-time-setup.html">One-time setups</a>
                </div>
                          <div class="navBarItem">      <a href="./svn.html">Source Code</a>
                </div>
                          <div class="navBarItem">      <a href="./building-uima.html">Building from Source</a>
                </div>
                          <div class="navBarItem">      <a href="./distribution.html">Creating a Distribution</a>
                </div>
                          <div class="navBarItem">      <a href="./release.html">Doing a UIMA release</a>
                </div>
                          <div class="navBarItem">      <a href="./codeConventions.html">Code Conventions</a>
                </div>
                          <div class="navBarItem">      <a href="./uima-specification.html">UIMA Specification (OASIS)</a>
                </div>
                          <div class="navBarItem">      <a href="./team-list.html">Project Team</a>
                </div>
            </div>
                      <br/>
            <div class="navBarItem">      <div class="navPartHeading">Events and Conferences</div>
                </div>
                <div class="navBar">
                  <div class="navBarItem">      <a href="./iks09.html">IKS 2009</a>
                </div>
                          <div class="navBarItem">      <a href="./gscl09.html">GSCL 2009</a>
                </div>
                          <div class="navBarItem">      <a href="./lsm09.html">LSM 2009</a>
                </div>
                          <div class="navBarItem">      <a href="./lrec08.html">LREC 2008</a>
                </div>
                          <div class="navBarItem">      <a href="./gldv07.html">GLDV 2007</a>
                </div>
            </div>
                      <br/>
            <div class="navBarItem">      <div class="navPartHeading">ASF</div>
                </div>
                <div class="navBar">
                  <div class="navBarItem">      <a href="./license.html">License</a>
                </div>
                          <div class="navBarItem">      <a href="http://apache.org/foundataion/thanks.html" target="_blank">ASF Sponsors <img src="images/offsitelink.png"</a>
                </div>
                          <div class="navBarItem">      <a href="http://www.apache.org/foundation/sponsorship.html" target="_blank">ASF Sponsorship <img src="images/offsitelink.png"</a>
                </div>
            </div>
        </div>
                </td>
                <td width="80%" align="left" valign="top">
                                                          <div class="sectionTable">
      <table class="sectionTable">
        <tr><td>
        <a name="POM Conventions"><h1><img src="images/UIMA_4sq50tightCropSolid.png"/>&nbsp;POM Conventions</h1></a>
      </td></tr>
      <tr><td>
        <blockquote class="sectionBody">
                                    <p>We follow the conventions regarding the layout of the POM as specified 
    <a target="_blank" href="http://maven.apache.org/developers/conventions/code.html#POM_Code_Convention">
      here</a>.</p>
                            </blockquote>
        </p>
      </td></tr>
    </table>
                                        <div class="sectionTable">
      <table class="sectionTable">
        <tr><td>
        <a name="Our POM hierarchy"><h1><img src="images/UIMA_4sq50tightCropSolid.png"/>&nbsp;Our POM hierarchy</h1></a>
      </td></tr>
      <tr><td>
        <blockquote class="sectionBody">
                                    <p>POMs have two kinds of hierarchy. The main one is used for factoring out common 
things and arranges POMs in a parent-child hierarchy, by having the child 
identify the parent POM.  The other kind is aggregation - POMs which specify sub-modules
for purposes of building multi-module things, and releasing them all at once.  For clarity,
we mostly keep these two uses in separate POMs:  parent POMs do not do aggregation, 
and aggregation POMs do not do common factoring.</p>
                                                <p>Our parent poms are kept in a folder, under a top level SCM node called "build", which holds things
  needed for building, but which are not part of normal aggregate distributions.
  Aggregation POMs are kept with the SCM node focused on those modules being aggregated.</p>
                            </blockquote>
        </p>
      </td></tr>
    </table>
                                        <div class="sectionTable">
      <table class="sectionTable">
        <tr><td>
        <a name="POM style"><h1><img src="images/UIMA_4sq50tightCropSolid.png"/>&nbsp;POM style</h1></a>
      </td></tr>
      <tr><td>
        <blockquote class="sectionBody">
                                    <p>When writing a new POM, it is best to start with an existing POM for a similar
    kind of project, and derive the new POM from that.  Some points:
    <ul>
      <li>POMs contain a &lt;url&gt; element.  If they don't, they will inherit from their parent
        following an assumption that the url is the parent url value followed by "/" and
        this POMs artifactId.  If this does not correspond to how the website is set up,
        please specify the url that is correct for the new project.
        In the Maven spirit of convention over configuration, 
        web pages for specific projects (such as the
        individual annotators) will be set up this way, so the &lt;url&gt; element can be
        omitted.</li>
      <li>The SCM connection is needed for releasing - and needs to be accurate for this
        component.</li>
      <li>The POM's "version" is stated literally, not via a "property", etc.  Maven 3 
        will complain if you use properties here, and the release mechanism for maven
        manipulates these values (removing SNAPSHOT, incrementing things, etc.)</li>
      <li>The POM's groupId is omitted if it is the same as the parent pom's; it inherits from the
        parent.</li>
      <li>The packaging is omitted if it is "jar".</li>      
    </ul>
    </p>
                                                <p>Maven 3 has more requirements on POMs
    <p>A transition to Maven 3 is occuring in 2010.  The Eclipse plugin, m2eclipse, "embeds" 
      Maven 3 already.</p>
    <ul>
      <li>Build variable names have to include their path from project, etc.   For instance, you cannot use
        ${version}, you have to use ${project.version}.</li>
    </ul></p>
                            </blockquote>
        </p>
      </td></tr>
    </table>
                                        <div class="sectionTable">
      <table class="sectionTable">
        <tr><td>
        <a name="Handling Documentation"><h1><img src="images/UIMA_4sq50tightCropSolid.png"/>&nbsp;Handling Documentation</h1></a>
      </td></tr>
      <tr><td>
        <blockquote class="sectionBody">
                                    <p>Kinds of documentation:</p>
                                                <ul>
    <li>Javadoc</li>
    <li>The source itself</li>
    <li>Docbook</li>
    <li>UIMA Website (Anakia)</li>
    </ul>
                                                <p>We use Docbook style for much of our other documentation, 
    the main exception being our website, which uses Anakia.
    See <a href="dev-docbook.html">the development docbook page</a> for details.</p>
                                                <p>For each Java source artifact, when the apache-release profile is specified (usually during the
    release process), the Apache standard parent POM builds and attaches 
    a <ul><li>source zip, and a</li><li>Javadocs zip</li></ul>
  to the main Jar artifact.  It doesn't do any standard actions for other documentation (e.g., docbook style).
    Docbooks are built during the normal lifecycle.</p>
                                                <p>Normally, all website-ready content is kept in SVN in the uima/site/trunk/uima-website/docs directory; this directory is
    checked out into the right spot on people.apache.org.  For large generated documents, 
    we have the option to generate them from sources in svn, and deploy them directly to the right spot on people.apache.org.  
    This avoids using SVN for large generated files.  This satisfies the 
    <a href="http://apache.org/dev/project-site.html" target="_blank">requirements</a>
    for Apache websites.</p>
                            </blockquote>
        </p>
      </td></tr>
    </table>
                                        <div class="sectionTable">
      <table class="sectionTable">
        <tr><td>
        <a name="Packaging Individual Projects"><h1><img src="images/UIMA_4sq50tightCropSolid.png"/>&nbsp;Packaging Individual Projects</h1></a>
      </td></tr>
      <tr><td>
        <blockquote class="sectionBody">
                                    <p>
    The UIMA Project, in addition to the main frameworks, has Annotators and other components and tools 
    (such as the SimpleServer) that it releases.  These in the past have been released as a big
    assembly we called the Sandbox, but now are are being supported as individual items.
  </p>
                                                <p>
    There are two kinds of packaging for these supported, by using one of the following parent-poms:
    <ul><li>parent-pom-annotator - this packages things as a PEAR</li>
      <li>parent-pom-single-project - this packages things as a tar / zip file having a lib/ directory
        with the generated Jar and dependencies, plus other files (see below).</li></ul>
  </p>
                                                <p>
    The individual Annotators are mostly packaged as a 
    <a href="http://uima.apache.org/downloads/releaseDocs/2.3.0-incubating/docs/html/references/references.html#ugr.ref.pear">
      PEAR</a> file, which is the UIMA standard for annotator component packaging and distribution.
    The Pear is generated using the PearPackagingMavenPlugin, which generates automatically a
    conventional Pear Installation Descriptor, from the information in the project.    
    The PEAR artifact is generated in addition to Jar of the code, and includes
    other items such as the generated documentation, data, and a lib/ directory with other Jars
    needed for the PEAR to operate.  This PEAR is the packaged equivalent of a binary distribution
    artifact produced for the main framework, and comes with a license and notice that
    covers any included libraries.  Generated PEARs are included in the artifacts that are managed by
    Maven, and are available in the Maven repository system.
  </p>
                                                <p class="note">
    The PEAR internal folder "src" is not used by components here; the source is instead available 
    via the standard Maven source packaging.
  </p>
                                                <p>
    Projects indicate they want PEAR packaging by making the parent pom be parent-pom-annotator.
  </p>
                                                <p>
    PEARs must have a "main" descriptor, which is the one normally used to configure and run 
    the annotator.  When using the parent-pom-annotator to indicate PEAR packaging, you must include a property called
    &lt;pearMainDescriptor&gt; in the Annotator's POM, whose value is the path from the project base directory
    identifying the main descriptor.  For example, if the folder "desc" was at the root of your project, the 
    value might be something like "desc/my-main-descriptor.xml".
  </p>
                                                <p>If an annotator isn't suitable for PEAR packaging, perhaps because it is inappropriate to have 
    one pre-done main descriptor, then the annotator can be packaged as a single-project, instead, by 
    making the POM's parent parent-pom-single-project.</p>
                                                <h2>Conventions for structuring individually releaseable projects</h2>
                                                <p>Use these conventions to get your annotator properly packaged when you use the parent-pom-annotator or 
    the parent-pom-single-project as your parent pom:
    <ul>
      <li>Use &lt;package&gt;jar&lt;/package&gt; (which is the default, so it should be omitted), if there
        is a Jar that should be built (as is usually the case).  This will cause the main
       annotator Jar to be built, including any resources (plus the top-level desc folder, if it exists), as normal.</li>
      <li>Create the required License, Notice, and optional Readme, and Release Notes files 
        in the project directory at the top level; these will be included in the
        PEAR or simple project binary assembly at the top level.  
        The License and Notice files should be for the entire project, including
        all third-party Jars etc. being distributed.
        <p style="margin-left: 2em">The generated Jar, which only has Apache-developed code, includes
          the normal Apache License and Notice files.</p></li>
      <li>Dependencies: those marked with scope "compile" (the default) or "runtime"
        are copied to the PEAR or single-project's lib/ directory.  To keep a dependency needed for compiling
        from being included in the lib/, give it a scope of "provided".</li>
      <li>Using the following folders at the top level of your project (which is the "conventional" PEAR layout, 
        will cause the contents of these folders to be added to the corresponding files in the PEAR or binary zip/tar:
        <ul>
          <li>desc - for descriptiors, including the main descriptor</li>
          <li>bin - (optional) for extra executables</li>
          <li>lib - (optional) for libraries (not being included via the Maven dependencies mechanism)</li>
          <li>doc - (optional) not normally used, but can have additional user-ready documentation</li>
          <li>data - (optional) for arbitrary data</li>
          <li>resources - (optional) not normally used, but can have additional data which should be on the classpath</li>
          <li>conf - (optional) for extra configuration files</li>
          <li>src - not-used</li> 
        </ul>
        <p>The following Maven conventional information will be added to the above:
        <ul>
          <li>lib - dependencies with scope "compile" or "runtime" are resolved from maven repositories and added to the lib/</li>
          <li>doc - docbook sources under src/docbook are processed and the html and pdf forms are added</li>
          <li>Maven resources - (not the top level resources directory described above) 
            are by convention included in the Jar, and are not included in this folder</li>
        </ul>
        </p>  
      </li>
    </ul>
  </p>
                            </blockquote>
        </p>
      </td></tr>
    </table>
                                        <div class="sectionTable">
      <table class="sectionTable">
        <tr><td>
        <a name="Building Assemblies for Distribution"><h1><img src="images/UIMA_4sq50tightCropSolid.png"/>&nbsp;Building Assemblies for Distribution</h1></a>
      </td></tr>
      <tr><td>
        <blockquote class="sectionBody">
                                    <p>The normal operation of Maven is concerned with the building of individual modules.  Each module
    when built produces maven artifacts in repositories (your local repository, or perhaps uploaded 
    to a snapshot or staging repository).</p>
                                                <p>When releases are done, additional artifacts are constructed using the distribution assemblies.
    We have these for
    <ul>
      <li>UIMA - the base Java framework</li>
      <li>UIMA-AS - the asynchronous scaleout add-on</li>
      <li>UIMA Add-ons - not decided yet, but it's likely we'll just release these as individual projects.  
        So there is no add-ons-distr project (yet).</li>
      <!--li>UIMA Add-ons - annotators and other add-on components such as the SimpleServer</li-->
      <li>UIMACPP - the C++ framework</li>
    </ul>
  </p>
                                                <h2>Distribution Pom - Clean phase</h2>
                                                <p>The clean phase of the distribution POMs includes running the dependency:purge-local-repository plugin 
    to purge the local repository of dependencies, when activated by the apache-release profiles.    
  </p>
                            </blockquote>
        </p>
      </td></tr>
    </table>
                                        <div class="sectionTable">
      <table class="sectionTable">
        <tr><td>
        <a name="Build resources"><h1><img src="images/UIMA_4sq50tightCropSolid.png"/>&nbsp;Build resources</h1></a>
      </td></tr>
      <tr><td>
        <blockquote class="sectionBody">
                                    <p>During the build process, several resources are used, and are built into Maven Artifact Jars with
    Maven coordinates:
    <ul>
      <li>uima-jar-resource-bundle - this is the standard License Notice and Dependencies from the 
        Apache common parent pom, except it allows adding post-Notice text.  We use this when 
        we need to include the IBM Copyright notice, moved here from donated code from IBM.</li>
      <li>uima-docbook-olink - this is the shared olink data.  This project's source contains the 
        information about the UIMA Bookshelf - the set of books that can cross-reference each other,
        and how they're laid out (current layout - they all are subitems of one common directory).
      </li>
      <li>uima-docbook-resource-bundle - holds common information needed by docbook builds, including
        the specification for the titlepage.</li>
      <li>uima-assembly-single-project - holds the binary assembly descriptor for single-projects.</li>
    </ul></p>
                                                <p>There is also one custom Maven plugin (uima-build-helper-maven-plugin) - to get the build month and build year into properties.
      This is used, for instance, in the common docbook frontmatter - to indicate when the book was
      built.</p>
                            </blockquote>
        </p>
      </td></tr>
    </table>
                                        <div class="sectionTable">
      <table class="sectionTable">
        <tr><td>
        <a name="Parent Pom Hierarchy"><h1><img src="images/UIMA_4sq50tightCropSolid.png"/>&nbsp;Parent Pom Hierarchy</h1></a>
      </td></tr>
      <tr><td>
        <blockquote class="sectionBody">
                                    <p>Parent pom names start with parent-pom-:</p>
                                                <pre>
  parent-pom-top
  
    parent-pom-docbook

      parent-pom-ibm-notice         
    
      parent-pom-eclipse-plugins
        
         parent-pom-eclipse-plugins-ibm-notice
      
      parent-pom-annotator
      
      parent-pom-single-project          
</pre>
                            </blockquote>
        </p>
      </td></tr>
    </table>
                                  </td>
                </tr>
                <!-- FOOTER -->
                <tr><td colspan="2">
                  <hr noshade="" size="1"/>
                </td></tr>
                <tr><td colspan="2"> 
                  <table class="pageFooter">
                    <tr>
                      <td><a href="index.html">Home</a></td>
                      <td><a href="privacy-policy.html">Privacy Policy</a></td>
                      <td>
                Copyright &#169; 2006-2009, The Apache Software Foundation
                      </td>
                      <td><a href="mailto:dev@uima.apache.org">Contact us</a></td>
                    </tr>
                  </table>                    
                </td></tr>
            </table>
        </body>
    </html>

