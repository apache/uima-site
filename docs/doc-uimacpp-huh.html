<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "https://www.w3.org/TR/html4/loose.dtd">


    <!-- ====================================================================== -->
    <!-- GENERATED FILE, DO NOT EDIT, EDIT THE XML FILE IN xdocs INSTEAD! -->
    <!-- ====================================================================== -->
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
            <style type="text/css">@import "stylesheets/base.css";</style>
                                          <meta name="author" value="
   Apache UIMA Documentation Team
  ">
  <meta name="email" value="dev@uima.apache.org">
                        
            
                        
                        <title>Apache UIMA - Getting Started: Apache UIMA C++ Framework</title>
            
            <!-- Begin Cookie Consent plugin by Silktide - https://silktide.com/cookieconsent -->
            <!-- Commented out because implied consent is not compatible with GDPR -->
            <!--
            <script type="text/javascript">
                window.cookieconsent_options = {"message":"This website uses cookies to ensure you get the best experience on our website","dismiss":"Got it!","learnMore":"More info","link":"https://uima.apache.org/privacy-policy.html","theme":"dark-bottom"};
            </script>
            
            <script type="text/javascript" src="/cookieconsent2/cookieconsent.min.js"></script>
            -->
            <!-- End Cookie Consent plugin -->
            
            <!-- Begin Google Analytics -->
            <!-- Commented out because GA requires consent according to GDPR -->
            <!--
            <script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            
              ga('create', 'UA-70846351-1', 'auto');
              ga('set', 'anonymizeIp', true);
              ga('send', 'pageview');
            
            </script>
            -->
            <!-- End Google Analytics -->
        </head>

        <body>
          <div class="topLogos">        
            <table border="0" width="100%" cellspacing="0">
                <!-- TOP IMAGE -->
                <tr>
                    <td align='LEFT'>
                      <a href="index.html">
                                    <img style="border: 1px solid black;" src="./images/UIMA_banner2tlpTm.png" alt="UIMA project logo" border="0"/>
                            </a>
                    </td>
                    <td align='CENTER'>
                          <div class="pageBanner">Getting Started: Apache UIMA C++ Framework</div>
                    </td>
                    <td align='RIGHT'>
                                  <a href="https://www.apache.org">
        <img src="./images/asf-logo-on-white-smallTm.png" alt="Apache UIMA" border="0"/>
      </a>
                          </td>
                </tr>
            </table>
            <hr noshade="" size="1"/>
            </div>
            <table border="0" width="100%" cellspacing="4">
              <tr>
                <td align='RIGHT' colspan="2">
                  <form method="get" action="https://www.google.com/search">
                    Search the site
                    <input type="text"   name="q" size="25" maxlength="255" value="" />
                    <input type="hidden" name="sitesearch" value="https://uima.apache.org/" />
                    <input name="Search" value="Search Site" type="submit"/>
                  </form>
                </td>
              </tr>
              <tr> <!-- LEFT SIDE NAVIGATION -->
                <td width="20%" valign="top">






                   <!-- regular menu -->
                      <div class="navBar">
                  <br/>
            <div class="navBarItem">      <div class="navPartHeading">General</div>
                </div>
                <div class="navBar">
                  <div class="navBarItem">      <a href="./index.html">Home</a>
                </div>
                          <div class="navBarItem">      <a href="./downloads.cgi">Downloads</a>
                </div>
                          <div class="navBarItem">      <a href="./documentation.html">Documentation</a>
                </div>
                          <div class="navBarItem">      <a href="./news.html">News</a>
                </div>
                          <div class="navBarItem">      <a href="./publications.html">Publications</a>
                </div>
                    <br style="line-height: .5em"/>
                          <div class="navBarItem">      <a href="https://issues.apache.org/jira/browse/uima" target="_blank">Issue tracker <img src="images/offsitelink.png"/></a>
                </div>
                          <div class="navBarItem">      <a href="https://cwiki.apache.org/confluence/display/UIMA/" target="_blank">Wiki <img src="images/offsitelink.png"/></a>
                </div>
                    <br style="line-height: .5em"/>
                          <div class="navBarItem">      <a href="https://cwiki.apache.org/confluence/display/UIMA/Powered+by+Apache+UIMA" target="_blank">Powered By UIMA <img src="images/offsitelink.png"/></a>
                </div>
            </div>
                      <br/>
            <div class="navBarItem">      <div class="navPartHeading">Community</div>
                </div>
                <div class="navBar">
                  <div class="navBarItem">      <a href="./get-involved.html">Get Involved</a>
                </div>
                          <div class="navBarItem">      <a href="./mail-lists.html">Mailing Lists</a>
                </div>
                          <div class="navBarItem">      <a href="./contribution-policy.html">Contribution Policies</a>
                </div>
                          <div class="navBarItem">      <a href="./faq.html">FAQ</a>
                </div>
                          <div class="navBarItem">      <a href="./project-guidelines.html">Project Guidelines</a>
                </div>
            </div>
                      <br/>
            <div class="navBarItem">      <div class="navPartHeading">Scaleout Frameworks</div>
                </div>
                <div class="navBar">
                  <div class="navBarItem">      <a href="./doc-uimaas-what.html">UIMA-AS</a>
                </div>
                          <div class="navBarItem">      <a href="./doc-uimaducc-whatitam.html">UIMA-DUCC</a>
                </div>
                          <div class="navBarItem">      <a href="./doc-uimaducc-demo.html">..Demo Page</a>
                </div>
                          <div class="navBarItem">      <a href="http://uima-ducc-demo.apache.org:42133" target="_blank">..Demo Live <img src="images/offsitelink.png"/></a>
                </div>
            </div>
                      <br/>
            <div class="navBarItem">      <div class="navPartHeading">Components & Tools</div>
                </div>
                <div class="navBar">
                  <div class="navBarItem">      <a href="./sandbox.html#uima-addons-annotators">Annotators</a>
                </div>
                          <div class="navBarItem">      <a href="./toolsServers.html">Tools & Servers</a>
                </div>
                          <div class="navBarItem">      <a href="./sandbox.html">Addons and Sandbox</a>
                </div>
                          <div class="navBarItem">      <a href="./ruta.html">UIMA Ruta</a>
                </div>
                          <div class="navBarItem">      <a href="./uimafit.html">uimaFIT</a>
                </div>
                          <div class="navBarItem">      <a href="./external-resources.html">External Resources</a>
                </div>
            </div>
                      <br/>
            <div class="navBarItem">      <div class="navPartHeading">Development</div>
                </div>
                <div class="navBar">
                  <div class="navBarItem">      <a href="./dev-quick.html">Quick Start: building</a>
                </div>
                          <div class="navBarItem">      <a href="./building-uima.html">Building from Source</a>
                </div>
                          <div class="navBarItem">      <a href="./one-time-setup.html">One-time setups</a>
                </div>
                          <div class="navBarItem">      <a href="./svn.html">Source Code</a>
                </div>
                          <div class="navBarItem">      <a href="./distribution.html">Creating a Distribution</a>
                </div>
                          <div class="navBarItem">      <a href="./release.html">Doing a UIMA release</a>
                </div>
                          <div class="navBarItem">      <a href="https://www.apache.org/security/committers.html" target="_blank">Doing a CVE (Apache) <img src="images/offsitelink.png"/></a>
                </div>
                          <div class="navBarItem">      <a href="./eclipse-update-site.html">Eclipse Update Sites</a>
                </div>
                          <div class="navBarItem">      <a href="./codeConventions.html">Code Conventions</a>
                </div>
                          <div class="navBarItem">      <a href="./uima-specification.html">UIMA Specification (OASIS)</a>
                </div>
                          <div class="navBarItem">      <a href="./team-list.html">Project Team</a>
                </div>
                          <div class="navBarItem">      <a href="./maven-design.html">Maven Use</a>
                </div>
                          <div class="navBarItem">      <a href="./updating-website.html">Updating this Website</a>
                </div>
            </div>
                      <br/>
            <div class="navBarItem">      <div class="navPartHeading">Events and Conferences</div>
                </div>
                <div class="navBar">
                  <div class="navBarItem">      <a href="./coling14.html">COLING 2014</a>
                </div>
                          <div class="navBarItem">      <a href="./gscl13.html">GSCL 2013</a>
                </div>
                          <div class="navBarItem">      <a href="./iks09.html">IKS 2009</a>
                </div>
                          <div class="navBarItem">      <a href="./gscl09.html">GSCL 2009</a>
                </div>
                          <div class="navBarItem">      <a href="./lsm09.html">LSM 2009</a>
                </div>
                          <div class="navBarItem">      <a href="./lrec08.html">LREC 2008</a>
                </div>
                          <div class="navBarItem">      <a href="./gldv07.html">GLDV 2007</a>
                </div>
            </div>
                      <br/>
            <div class="navBarItem">      <div class="navPartHeading">ASF</div>
                </div>
                <div class="navBar">
                  <div class="navBarItem">      <a href="https://www.apache.org/licenses/" target="_blank">License <img src="images/offsitelink.png"/></a>
                </div>
                          <div class="navBarItem">      <a href="https://www.apache.org/foundation/thanks.html" target="_blank">ASF Sponsors <img src="images/offsitelink.png"/></a>
                </div>
                          <div class="navBarItem">      <a href="https://www.apache.org/foundation/sponsorship.html" target="_blank">ASF Sponsorship <img src="images/offsitelink.png"/></a>
                </div>
                          <div class="navBarItem">      <a href="./security_report">Security</a>
                </div>
            </div>
        </div>
                </td>
                <td width="80%" align="left" valign="top">
                                                          <div class="sectionTable">
      <table class="sectionTable">
        <tr><td>
        <a name="Getting Started: Apache UIMA C++ Framework"><h1><img src="images/UIMA_4sq50tightCropSolid.png"/>&nbsp;Getting Started: Apache UIMA C++ Framework</h1></a>
      </td></tr>
      <tr><td>
        <blockquote class="sectionBody">
                                    <p>
     The "Getting Started: Apache UIMA&trade; C++ Framework" guide should help you to understand how UIMA C++ enables the creation of UIMA compliant Analysis Engines (AE) in C++ and other programming languages, and how these AE interact with UIMA's Java framework.
   </p>
                                                      <table class="subsectionTable">
        <tr><td>
       
       
       
          <a name="UIMA C++ Overview">
            <h2>UIMA C++ Overview
                        </h2>
          </a>
      </td></tr>
      <tr><td>
        <blockquote class="subsectionBody">
                                    <p>
    The UIMA C++ framework is designed to facilitate the creation of UIMA compliant Analysis Engines (AE) from analytics written in C++, or written in languages that can utilize C++ libraries. The UIMACPP SDK directly supports C++, and indirectly supports Perl, Python and Tcl languages via SWIG (https://www.swig.org/). Existing analytic programs in any of these languages can be wrapped with a UIMACPP annotator and integrated with other UIMA compliant analytics or UIMA-based applications.
   </p>
                                                <p>
     <table width="100%"><tr><td align="center" valign="middle">
       <img src="./images/getting-started/framework-core.png" alt="UIMA Framework Core" border="0" />
       <br>Figure 1 - UIMA Framework Core</br></td>
      </tr></table>
   </p>
                                                <p>
    Figure 1 illustrates the core functions of the UIMA framework which define a primitive AE: the CAS interface methods used to access the artifact being analyzed and any pre-existing analysis results or other metadata, and to create new analysis results; context APIs used to access configuration and logging; and finally, methods used to provide a standardized interface to a UIMA compliant AE. For Perl, Python and Tcl, SWIG is used to expose the CAS and context methods to user code in each language.
   </p>
                                                <p>
    A UIMA C++ AE can be used anywhere a UIMA Java AE can be used, for example, as a delegate in an aggregate AE, or as a UIMA service (using JMS, Vinci or SOAP protocols). When used in the Java framework, by default a C++ AE is instantiated and called via the JNI, running as part of the JVM process. This is also true for Vinci and SOAP services. For JMS services, the UIMACPP SDK includes a native service wrapper compatible with <a href="doc-uimaas-what.html">UIMA-AS</a>.
   </p>
                                                <p>
    The UIMA C++ framework supports testing and embedding UIMA components into native processes. A UIMA C++ test driver, <b>runAECpp</b>, is available so that UIMA C++ components can be fully developed and tested in the native environment, no use of Java is needed.
   </p>
                                                <p>
    UIMA C++ includes APIs to parse component descriptors, instantiate and call analysis engines, so that UIMA C++ compliant AE can be used in native applications. However, UIMA C++ components are primarily intended to be integrated into applications using UIMA's Java-based interfaces.
   </p>
                                                <p>
    The <a href="https://uima.apache.org/downloads.cgi">UIMA Download Page</a> contains UIMACPP source and 32-bit binary SDK packages for both Linux and Windows platforms. The Linux source package has been used to build and test successfully on MacOSX and on 64-bit Linux platforms.
   </p>
                            </blockquote>
        </td></tr>
    </table>
                                                      <table class="subsectionTable">
        <tr><td>
       
       
       
          <a name="UIMACPP Sample Code">
            <h2>UIMACPP Sample Code
                        </h2>
          </a>
      </td></tr>
      <tr><td>
        <blockquote class="subsectionBody">
                                    <p>
    The UIMACPP package includes several sample UIMA C++ annotators and a sample C++ application that instantiates and uses a C++ annotator. Please go to the <a href="https://uima.apache.org/downloads.cgi">UIMA Download Page</a> and get the "UIMACPP Framework" package for Linux or Windows as appropriate. For best interaoperability with the Java version of UIMA, unpack into the $UIMA_HOME directory. See the README file in the top level directory for instructions on testing the package, and follow the links there to the sample code in C++, Perl, Python and Tcl.
   </p>
                                                <p>
    A UIMA C++ annotator descriptor differs from a Java descriptor in the frameworkImplementation, specifying
<pre>&lt;frameworkImplementation&gt;org.apache.uima.cpp&lt;/frameworkImplementation&gt;</pre> 
For a C++ annotator, the annotatorImplementationName specifies the name of a dynamic link library. UIMACPP will add the OS appropriate suffix and search the active dynamic libary path: LD_LIBRARY_PATH for Linux, PATH for Windows, and DYLD_LIBRARY_PATH for MacOSX. The suffix is not automatically added when the annotatorImplementationName includes a path.
   </p>
                                                <p>
    An annotator library is derived from the UIMACPP class "Annotator" and must implement basic annotator methods. Annotators in Perl, Python and Tcl languages each use a C++ annotator to instantiate the appropriate interpreter, load the specified annotator source and call the annotator methods.
   </p>
                            </blockquote>
        </td></tr>
    </table>
                                                      <table class="subsectionTable">
        <tr><td>
       
       
       
          <a name="UIMACPP Example - Running a C++ analytic in a Native Process">
            <h2>UIMACPP Example - Running a C++ analytic in a Native Process
                        </h2>
          </a>
      </td></tr>
      <tr><td>
        <blockquote class="subsectionBody">
                                    <p>
    As in UIMA, UIMACPP includes application level methods to instantiate an Analysis Engine from a UIMA annotator descriptor, create a CAS using the AE type system, and call AE methods.
   </p>
                                                <p>
    <b>examples/src/ExampleApplication.cpp</b> is a simple program that instantiates the specified annotator, reads a directory of txt files, and for each file sets the document text in a CAS and calls the AE process method. For annotator development, this program can be modified to create arbitrary CAS content to drive the annotator. Because the entire application is C++, standard tools such as gdb or devenv can be easily used for debugging.
   </p>
                                                <p>
    <b>runAECpp</b> is a UIMA C++ application driver modeled closely after the Java tool <b>runAE</b>. Like ExampleApplication, this tool can read a directory of text files and exercise the given annotator. In addition, runAECpp can take input from XML format CAS files, call the annotator's process() method, and output the resultant CAS in XML format files. XML format CAS input files can be created from upstream UIMA components, or created manually with the content needed to develop and unit test an annotator.
   </p>
                                                <p>
     <table width="100%"><tr><td align="center" valign="middle">
       <img src="./images/getting-started/uimacppnative.png" alt="runAECpp - Native C++ Test Driver" border="0" />
       <br>Figure 2 - runAECpp - Native C++ Test Driver.</br></td>
     </tr></table>
   </p>
                            </blockquote>
        </td></tr>
    </table>
                                                      <table class="subsectionTable">
        <tr><td>
       
       
       
          <a name="UIMACPP Example - Running a C++ analytic in a JVM Process">
            <h2>UIMACPP Example - Running a C++ analytic in a JVM Process
                        </h2>
          </a>
      </td></tr>
      <tr><td>
        <blockquote class="subsectionBody">
                                    <p>
    Using the UIMA or UIMA AS packages, a UIMA C++ Analysis Engine can be used anywhere a UIMA Java AE can be used, for example, as a delegate in an aggregate AE, or as a UIMA service (using JMS, Vinci or SOAP protocols). When used in the Java framework, by default a C++ AE is instantiated and called via the JNI, running as part of the JVM process.    
   </p>
                                                <p>
    When a UIMA component descriptor specifies the frameworkImplementation as <b>org.apache.uima.cpp</b>, UIMA's Java framework instantiates a proxy annotator that transparently creates the UIMACPP component through the JNI. When the process(cas) method is called on the proxy, the CAS is binary serialized through the JNI into the native environment. The UIMA C++ annotator operates on the native copy of the CAS, and then the CAS is serialized back to the Java environment.
   </p>
                                                <p>
     <table width="100%"><tr><td align="center" valign="middle">
       <img src="./images/getting-started/uimacppthrujni.png" alt="Colocated UIMA C++ Component" border="0" />
       <br>Figure 3 - UIMA C++ Component Colocated with Java Framework.</br></td>
     </tr></table>
   </p>
                                                <p>
    There are some limitations to this configuration:
    <ol>
     <li>
      When more than one UIMA C++ component is colocated in the JVM, all must share identical versions of the UIMACPP framework.
     </li>
     <li>
      Runtime problems in the C++ code can crash the entire JVM process.
     </li>
     <li>
      Standard OS parameters for a process, such as program stack size, are different for a JVM process than a native process.
     </li>
     <li>
      Debugging native code running in a JVM process can be problematic.
     </li>
     </ol>
   </p>
                            </blockquote>
        </td></tr>
    </table>
                                                      <table class="subsectionTable">
        <tr><td>
       
       
       
          <a name="UIMACPP Example - Running a C++ analytic as a Native UIMA AS Service">
            <h2>UIMACPP Example - Running a C++ analytic as a Native UIMA AS Service
                        </h2>
          </a>
      </td></tr>
      <tr><td>
        <blockquote class="subsectionBody">
                                    <p>
    With the UIMA AS package, a UIMA C++ component can be run as a UIMA AS service using the UIMA C++ application <b>deployCppService</b>. This application instantiates a UIMA C++ AE from the specified annotator descriptor, and then connects to the specified ActiveMQ broker and input queue. In order to take advantage of multi-core hardware, deployCppService supports instantiating multiple copies of the C++ analytic, each in a different thread; this option requires the analytic to be designed for multithreaded operation.
   </p>
                                                <p>
    Once deployed, the service can be utilized from UIMA applications and aggregate analysis engines in exactly the same way as other UIMA AS services written in Java.  <!-- need link to online documenation -->
   </p>
                                                <p>
     <table width="100%"><tr><td align="center" valign="middle">
       <img src="./images/getting-started/deploycppservice.png" alt="Native UIMA AS Service" border="0" />
       <br>Figure 4 - UIMA C++ Component Running as Native UIMA AS Service.</br></td>
     </tr></table>
   </p>
                                                <br />
                                                <p>
    <b>Using Java to provide lifecycle management and monitoring</b>
   </p>
                                                <p>
    UIMA AS services written in Java are deployed using UIMA Deployment Descriptors. These descriptors, which specify the UIMA component descriptor to instantiate and the connectivity and error handling options, are used by the UIMA utility <b>deployAsyncService</b> to launch a Java service. Deployment Descriptors have special support for UIMA C++ services, with the ability to provide lifecycle management, JMX monitoring and integrated logging of C++ native services. This support is enabled when the UIMA AS Deployment Descriptor specifies
<pre>&lt;custom name="run_top_level_CPP_service_as_separate_process"/&gt;</pre>
in which case Java will launch deployCppService as a separate process on the same machine and establish socket connections for logging and monitoring.
   </p>
                                                <p>
Note that in this case the Deployment Descriptor can also specify the environment for the native process using entries such as
<pre>&lt;environmentVariable name="LD_LIBRARY_PATH"&gt;/home/user/apache-uima-as/uimacpp/lib&lt;/environmentVariable&gt;</pre>
This feature enables multiple UIMA C++ components with different levels of UIMACPP to be managed by the same JVM.
   </p>
                                                <p>
     <table width="100%"><tr><td align="center" valign="middle">
       <img src="./images/getting-started/managedcppservice.png" alt="Managed Native Service" border="0" />
       <br>Figure 5 - Java Managed UIMA C++ Service.</br></td>
     </tr></table>
   </p>
                            </blockquote>
        </td></tr>
    </table>
                            </blockquote>
        </p>
      </td></tr>
    </table>
                                  </td>
                </tr>
                <!-- FOOTER -->
                <tr><td colspan="2">
                  <hr noshade="" size="1"/>
                </td></tr>
                <tr><td colspan="2"> 
                  <table class="pageFooter">
                    <tr>
                      <td><a href="index.html">Home</a></td>
                      <td><a href="privacy-policy.html">Privacy Policy</a></td>
                      <td style="font-size:75%">
                Copyright &#169; 2006-2013, The Apache Software Foundation.<br/>
                Apache UIMA, UIMA, the Apache UIMA logo and the Apache Feather logo are trademarks of The Apache Software Foundation.<br/>
                All other marks mentioned may be trademarks or registered trademarks of their respective owners.
                      </td>
                      <td><a href="mailto:dev@uima.apache.org">Contact us</a></td>
                    </tr>
                  </table>                    
                </td></tr>
            </table>
        </body>
    </html>

