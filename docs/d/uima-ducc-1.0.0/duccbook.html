<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Distributed UIMA Cluster Computing</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html --> 
<meta name="src" content="duccbook.tex"> 
<meta name="date" content="2014-01-24 16:33:00"> 
<link rel="stylesheet" type="text/css" href="duccbook.css"> 
</head><body 
>
                                                                                                
                                                                                                
<div class="maketitle">
                                                                                                
                                                                                                
                                                                                                
                                                                                                

<h2 class="titleHead">Distributed UIMA Cluster Computing</h2>
<div class="author" ><span 
class="cmr-12">Written and maintained by the Apache</span>
<br />  <span 
class="cmr-12">UIMA</span><sup class="textsuperscript"><span 
class="cmr-9">TM</span></sup><span 
class="cmr-12">Development Community</span><br /><br /><br />
<br />             <span 
class="cmr-12">Version 1.0.0</span></div>
<br />
<div class="date" ></div>
                                                                                                
                                                                                                
</div>
<!--l. 18--><p class="noindent" >Copyright <span 
class="cmsy-10">©</span>&#x00A0; 2012 The Apache Software Foundation
<!--l. 20--><p class="noindent" >Copyright <span 
class="cmsy-10">©</span>&#x00A0; 2012 International Business Machines Corporation
     <!--l. 23--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-1000"></a><span 
class="cmbx-10">License and Disclaimer</span></span>
     The ASF licenses this documentation to you under the Apache License, Version 2.0 (the &#8221;License&#8221;); you may not
     use this documentation except in compliance with the License. You may obtain a copy of the License
     at
     <!--l. 28--><p class="noindent" ><a 
href="http://www.apache.org/licenses/LICENSE-2.0" class="url" ><span 
class="cmtt-10">http://www.apache.org/licenses/LICENSE-2.0</span></a>
     <!--l. 30--><p class="noindent" >Unless required by applicable law or agreed to in writing, this documentation and its contents are distributed under
     the License on an &#8221;AS IS&#8221; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
     or implied. See the License for the specific language governing permissions and limitations under the
     License.
     <!--l. 35--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-2000"></a><span 
class="cmbx-10">Trademarks</span></span>
     All terms mentioned in the text that are known to be trademarks or service marks have been appropriately capitalized.
     Use of such terms in this book should not be regarded as affecting the validity of the the trademark or service
     mark.
<!--l. 47--><p class="noindent" >Publication date: January&#x00A0;2014
                                                                                                
                                                                                                
<h2 class="likechapterHead"><a 
 id="x1-3000"></a>Table of Contents</h2> <div class="tableofcontents">
<span class="partToc" >I&#x00A0;&#x00A0;<a 
href="#x1-5000I" id="QQ2-1-5">DUCC Concepts</a></span>
<br /><span class="chapterToc" >1 <a 
href="#x1-60001" id="QQ2-1-6">DUCC Overview</a></span>
<br />&#x00A0;<span class="sectionToc" >1.1 <a 
href="#x1-70001.1" id="QQ2-1-7">What is DUCC?</a></span>
<br />&#x00A0;<span class="sectionToc" >1.2 <a 
href="#x1-80001.2" id="QQ2-1-8">DUCC Job Model</a></span>
<br />&#x00A0;<span class="sectionToc" >1.3 <a 
href="#x1-90001.3" id="QQ2-1-9">DUCC From UIMA to Full Scale-out</a></span>
<br />&#x00A0;<span class="sectionToc" >1.4 <a 
href="#x1-140001.4" id="QQ2-1-18">Error Management </a></span>
<br />&#x00A0;<span class="sectionToc" >1.5 <a 
href="#x1-150001.5" id="QQ2-1-19">Cluster and Job Management</a></span>
<br />&#x00A0;<span class="sectionToc" >1.6 <a 
href="#x1-160001.6" id="QQ2-1-20">Security Measures</a></span>
<br />&#x00A0;<span class="sectionToc" >1.7 <a 
href="#x1-170001.7" id="QQ2-1-21">Security Issues</a></span>
<br /><span class="chapterToc" >2 <a 
href="#x1-180002" id="QQ2-1-22">Glossary</a></span>
<br /><span class="partToc" >II&#x00A0;&#x00A0;<a 
href="#x1-19000II" id="QQ2-1-23">Ducc Users Guide</a></span>
<br /><span class="chapterToc" >3 <a 
href="#x1-200003" id="QQ2-1-24">Command Line Interface</a></span>
<br />&#x00A0;<span class="sectionToc" >3.1 <a 
href="#x1-220003.1" id="QQ2-1-26">The DUCC Job Descriptor</a></span>
<br />&#x00A0;<span class="sectionToc" >3.2 <a 
href="#x1-230003.2" id="QQ2-1-27">Operating System Limit Support</a></span>
<br />&#x00A0;<span class="sectionToc" >3.3 <a 
href="#x1-240003.3" id="QQ2-1-28">Command Line Forms</a></span>
<br />&#x00A0;<span class="sectionToc" >3.4 <a 
href="#x1-250003.4" id="QQ2-1-29">DUCC Commands</a></span>
<br />&#x00A0;<span class="sectionToc" >3.5 <a 
href="#x1-260003.5" id="QQ2-1-30">ducc_submit</a></span>
<br />&#x00A0;<span class="sectionToc" >3.6 <a 
href="#x1-310003.6" id="QQ2-1-35">ducc_cancel</a></span>
<br />&#x00A0;<span class="sectionToc" >3.7 <a 
href="#x1-360003.7" id="QQ2-1-40">ducc_reserve</a></span>
<br />&#x00A0;<span class="sectionToc" >3.8 <a 
href="#x1-410003.8" id="QQ2-1-45">ducc_unreserve</a></span>
<br />&#x00A0;<span class="sectionToc" >3.9 <a 
href="#x1-460003.9" id="QQ2-1-50">ducc_process_submit</a></span>
<br />&#x00A0;<span class="sectionToc" >3.10 <a 
href="#x1-510003.10" id="QQ2-1-55">ducc_process_cancel</a></span>
<br />&#x00A0;<span class="sectionToc" >3.11 <a 
href="#x1-560003.11" id="QQ2-1-60">ducc_services</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >3.11.1 <a 
href="#x1-600003.11.1" id="QQ2-1-64">Common Options</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >3.11.2 <a 
href="#x1-610003.11.2" id="QQ2-1-65">ducc_services &#8211;register Options</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >3.11.3 <a 
href="#x1-620003.11.3" id="QQ2-1-66">ducc_services &#8211;start Options</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >3.11.4 <a 
href="#x1-630003.11.4" id="QQ2-1-67">ducc_services &#8211;stop Options</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >3.11.5 <a 
href="#x1-640003.11.5" id="QQ2-1-68">ducc_services &#8211;modify Options</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >3.11.6 <a 
href="#x1-650003.11.6" id="QQ2-1-69">ducc_services &#8211;query Options</a></span>
<br />&#x00A0;<span class="sectionToc" >3.12 <a 
href="#x1-670003.12" id="QQ2-1-71">ducc_perf_stats</a></span>
                                                                                                
                                                                                                
<br />&#x00A0;<span class="sectionToc" >3.13 <a 
href="#x1-720003.13" id="QQ2-1-76">viaducc and java_viaducc</a></span>
<br /><span class="chapterToc" >4 <a 
href="#x1-760004" id="QQ2-1-80">The DUCC Public API</a></span>
<br />&#x00A0;<span class="sectionToc" >4.1 <a 
href="#x1-770004.1" id="QQ2-1-81">Overview Of The DUCC API</a></span>
<br />&#x00A0;<span class="sectionToc" >4.2 <a 
href="#x1-780004.2" id="QQ2-1-82">Compiling and Running With the DUCC API</a></span>
<br />&#x00A0;<span class="sectionToc" >4.3 <a 
href="#x1-790004.3" id="QQ2-1-83">Java API</a></span>
<br /><span class="chapterToc" >5 <a 
href="#x1-800005" id="QQ2-1-84">Service Management</a></span>
<br />&#x00A0;<span class="sectionToc" >5.1 <a 
href="#x1-810005.1" id="QQ2-1-85">Overview.</a></span>
<br />&#x00A0;<span class="sectionToc" >5.2 <a 
href="#x1-820005.2" id="QQ2-1-86">Service Types.</a></span>
<br />&#x00A0;<span class="sectionToc" >5.3 <a 
href="#x1-830005.3" id="QQ2-1-87">Service References and Endpoints</a></span>
<br />&#x00A0;<span class="sectionToc" >5.4 <a 
href="#x1-840005.4" id="QQ2-1-88">Service Pingers</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >5.4.1 <a 
href="#x1-850005.4.1" id="QQ2-1-89">Declaring a Pinger in A Service</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >5.4.2 <a 
href="#x1-860005.4.2" id="QQ2-1-90">Implementing a Pinger</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >5.4.3 <a 
href="#x1-870005.4.3" id="QQ2-1-94">Building And Testing Your Pinger</a></span>
<br /><span class="chapterToc" >6 <a 
href="#x1-920006" id="QQ2-1-99">Job Logs</a></span>
<br /><span class="chapterToc" >7 <a 
href="#x1-980007" id="QQ2-1-105">DUCC Web Server</a></span>
<br />&#x00A0;<span class="sectionToc" >7.1 <a 
href="#x1-1030007.1" id="QQ2-1-112">Common Links</a></span>
<br />&#x00A0;<span class="sectionToc" >7.2 <a 
href="#x1-1040007.2" id="QQ2-1-113">Jobs Page</a></span>
<br />&#x00A0;<span class="sectionToc" >7.3 <a 
href="#x1-1050007.3" id="QQ2-1-115">Job Details Page</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >7.3.1 <a 
href="#x1-1060007.3.1" id="QQ2-1-116">Processes</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >7.3.2 <a 
href="#x1-1070007.3.2" id="QQ2-1-118">Work Items</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >7.3.3 <a 
href="#x1-1080007.3.3" id="QQ2-1-120">Performance</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >7.3.4 <a 
href="#x1-1090007.3.4" id="QQ2-1-122">Specification</a></span>
<br />&#x00A0;<span class="sectionToc" >7.4 <a 
href="#x1-1100007.4" id="QQ2-1-124">Reservation Page</a></span>
<br />&#x00A0;<span class="sectionToc" >7.5 <a 
href="#x1-1110007.5" id="QQ2-1-126">Managed Reservation Details Page</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >7.5.1 <a 
href="#x1-1120007.5.1" id="QQ2-1-127">Processes</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >7.5.2 <a 
href="#x1-1130007.5.2" id="QQ2-1-128">Specification</a></span>
<br />&#x00A0;<span class="sectionToc" >7.6 <a 
href="#x1-1140007.6" id="QQ2-1-129">Services Page</a></span>
<br />&#x00A0;<span class="sectionToc" >7.7 <a 
href="#x1-1150007.7" id="QQ2-1-130">Service Details Page</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >7.7.1 <a 
href="#x1-1160007.7.1" id="QQ2-1-131">Processes</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >7.7.2 <a 
href="#x1-1170007.7.2" id="QQ2-1-132">Specification</a></span>
<br />&#x00A0;<span class="sectionToc" >7.8 <a 
href="#x1-1180007.8" id="QQ2-1-133">System Details Page</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >7.8.1 <a 
href="#x1-1190007.8.1" id="QQ2-1-134">Administration</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >7.8.2 <a 
href="#x1-1200007.8.2" id="QQ2-1-135">Classes</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >7.8.3 <a 
href="#x1-1210007.8.3" id="QQ2-1-136">Daemons</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >7.8.4 <a 
href="#x1-1220007.8.4" id="QQ2-1-137">Machines</a></span>
<br /><span class="partToc" >III&#x00A0;&#x00A0;<a 
href="#x1-123000III" id="QQ2-1-138">Programming Model And Applications</a></span>
<br /><span class="chapterToc" >8 <a 
href="#x1-1240008" id="QQ2-1-139">Building and Testing Jobs</a></span>
                                                                                                
                                                                                                
<br />&#x00A0;<span class="sectionToc" >8.1 <a 
href="#x1-1250008.1" id="QQ2-1-140">Overview</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >8.1.1 <a 
href="#x1-1260008.1.1" id="QQ2-1-141">Basic Job Process Threading Model</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >8.1.2 <a 
href="#x1-1270008.1.2" id="QQ2-1-142">Alternate Pipeline Threading Model</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >8.1.3 <a 
href="#x1-1280008.1.3" id="QQ2-1-143">Overriding UIMA Configuration Parameters</a></span>
<br />&#x00A0;<span class="sectionToc" >8.2 <a 
href="#x1-1290008.2" id="QQ2-1-144">Collection Segmentation and Artifact Extraction</a></span>
<br />&#x00A0;<span class="sectionToc" >8.3 <a 
href="#x1-1300008.3" id="QQ2-1-145">CAS Consumer Changes for DUCC</a></span>
<br />&#x00A0;<span class="sectionToc" >8.4 <a 
href="#x1-1310008.4" id="QQ2-1-146">Job Development for an Existing Pipeline Design</a></span>
<br />&#x00A0;<span class="sectionToc" >8.5 <a 
href="#x1-1320008.5" id="QQ2-1-147">Job Development for a New Pipeline Design</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >8.5.1 <a 
href="#x1-1330008.5.1" id="QQ2-1-148">Collection Reader (CR) Characteristics</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >8.5.2 <a 
href="#x1-1340008.5.2" id="QQ2-1-149">DUCC built-in Flow Controller</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >8.5.3 <a 
href="#x1-1350008.5.3" id="QQ2-1-150">Workitem Feature Structure</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >8.5.4 <a 
href="#x1-1360008.5.4" id="QQ2-1-151">Deployment Descriptor (DD) Jobs</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >8.5.5 <a 
href="#x1-1370008.5.5" id="QQ2-1-152">Debugging</a></span>
<br /><span class="chapterToc" >9 <a 
href="#x1-1380009" id="QQ2-1-153">Sample Application: Raw Text Processing</a></span>
<br />&#x00A0;<span class="sectionToc" >9.1 <a 
href="#x1-1390009.1" id="QQ2-1-154">Application Function and Design</a></span>
<br />&#x00A0;<span class="sectionToc" >9.2 <a 
href="#x1-1400009.2" id="QQ2-1-155">Configuration Parameters</a></span>
<br />&#x00A0;<span class="sectionToc" >9.3 <a 
href="#x1-1410009.3" id="QQ2-1-156">Set up a working directory</a></span>
<br />&#x00A0;<span class="sectionToc" >9.4 <a 
href="#x1-1420009.4" id="QQ2-1-157">Download and Install OpenNLP</a></span>
<br />&#x00A0;<span class="sectionToc" >9.5 <a 
href="#x1-1430009.5" id="QQ2-1-158">Get some Input Text</a></span>
<br />&#x00A0;<span class="sectionToc" >9.6 <a 
href="#x1-1440009.6" id="QQ2-1-159">Run the Job</a></span>
<br />&#x00A0;<span class="sectionToc" >9.7 <a 
href="#x1-1450009.7" id="QQ2-1-160">Job Output</a></span>
<br />&#x00A0;<span class="sectionToc" >9.8 <a 
href="#x1-1460009.8" id="QQ2-1-161">Job Performance Details</a></span>
<br /><span class="chapterToc" >10 <a 
href="#x1-14700010" id="QQ2-1-164">Sample Application: CAS Input Processing</a></span>
<br />&#x00A0;<span class="sectionToc" >10.1 <a 
href="#x1-14800010.1" id="QQ2-1-165">Application Function and Design</a></span>
<br />&#x00A0;<span class="sectionToc" >10.2 <a 
href="#x1-14900010.2" id="QQ2-1-166">Configuration Parameters</a></span>
<br />&#x00A0;<span class="sectionToc" >10.3 <a 
href="#x1-15000010.3" id="QQ2-1-167">Run the Job</a></span>
<br />&#x00A0;<span class="sectionToc" >10.4 <a 
href="#x1-15100010.4" id="QQ2-1-168">Job Performance Details</a></span>
<br />&#x00A0;<span class="sectionToc" >10.5 <a 
href="#x1-15200010.5" id="QQ2-1-170">Limiting Job Resources</a></span>
<br /><span class="partToc" >IV&#x00A0;&#x00A0;<a 
href="#x1-153000IV" id="QQ2-1-171">Ducc Administrators Guide</a></span>
<br /><span class="chapterToc" >11 <a 
href="#x1-15400011" id="QQ2-1-172">Installation, Configuration, and Verification</a></span>
<br />&#x00A0;<span class="sectionToc" >11.1 <a 
href="#x1-15500011.1" id="QQ2-1-173">Overview</a></span>
<br />&#x00A0;<span class="sectionToc" >11.2 <a 
href="#x1-15600011.2" id="QQ2-1-174">Software Prerequisites</a></span>
<br />&#x00A0;<span class="sectionToc" >11.3 <a 
href="#x1-15700011.3" id="QQ2-1-175">Building from Source</a></span>
<br />&#x00A0;<span class="sectionToc" >11.4 <a 
href="#x1-15800011.4" id="QQ2-1-176">Documentation</a></span>
<br />&#x00A0;<span class="sectionToc" >11.5 <a 
href="#x1-15900011.5" id="QQ2-1-177">Single-user Installation and Verification</a></span>
<br />&#x00A0;<span class="sectionToc" >11.6 <a 
href="#x1-16000011.6" id="QQ2-1-178">Minimal Hardware Requirements for single-user Installation</a></span>
<br />&#x00A0;<span class="sectionToc" >11.7 <a 
href="#x1-16100011.7" id="QQ2-1-179">Single-user System Installation</a></span>
                                                                                                
                                                                                                
<br />&#x00A0;<span class="sectionToc" >11.8 <a 
href="#x1-16200011.8" id="QQ2-1-180">Initial System Verification</a></span>
<br />&#x00A0;<span class="sectionToc" >11.9 <a 
href="#x1-16300011.9" id="QQ2-1-181">Logs</a></span>
<br />&#x00A0;<span class="sectionToc" >11.10 <a 
href="#x1-16400011.10" id="QQ2-1-182">Multi-User Installation and Verification</a></span>
<br />&#x00A0;<span class="sectionToc" >11.11 <a 
href="#x1-16500011.11" id="QQ2-1-183">Ducc_ling Installation</a></span>
<br />&#x00A0;<span class="sectionToc" >11.12 <a 
href="#x1-16600011.12" id="QQ2-1-184">CGroups Installation and Configuration</a></span>
<br />&#x00A0;<span class="sectionToc" >11.13 <a 
href="#x1-16700011.13" id="QQ2-1-185">Set up the full nodelists</a></span>
<br />&#x00A0;<span class="sectionToc" >11.14 <a 
href="#x1-16800011.14" id="QQ2-1-186">Full DUCC Verification</a></span>
<br />&#x00A0;<span class="sectionToc" >11.15 <a 
href="#x1-16900011.15" id="QQ2-1-187">Enable DUCC webserver login</a></span>
<br /><span class="chapterToc" >12 <a 
href="#x1-17000012" id="QQ2-1-188">Administration</a></span>
<br />&#x00A0;<span class="sectionToc" >12.1 <a 
href="#x1-17100012.1" id="QQ2-1-189">WebServer Authentication</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.1.1 <a 
href="#x1-17200012.1.1" id="QQ2-1-190">Example Implementation</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.1.2 <a 
href="#x1-17300012.1.2" id="QQ2-1-191">IAuthenticationManager</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.1.3 <a 
href="#x1-17400012.1.3" id="QQ2-1-192">IAuthenticationResult</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.1.4 <a 
href="#x1-17500012.1.4" id="QQ2-1-193">Example ANT script to build jar</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.1.5 <a 
href="#x1-17600012.1.5" id="QQ2-1-194">Example ducc.properties entries</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.1.6 <a 
href="#x1-17700012.1.6" id="QQ2-1-195">Example ducc.administrators</a></span>
<br />&#x00A0;<span class="sectionToc" >12.2 <a 
href="#x1-17800012.2" id="QQ2-1-196">ducc.properties</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.2.1 <a 
href="#x1-17900012.2.1" id="QQ2-1-197">General DUCC Properties</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.2.2 <a 
href="#x1-18000012.2.2" id="QQ2-1-198">Web Server Properties</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.2.3 <a 
href="#x1-18100012.2.3" id="QQ2-1-199">Job Driver Properties</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.2.4 <a 
href="#x1-18200012.2.4" id="QQ2-1-200">Service Manager Properties</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.2.5 <a 
href="#x1-18300012.2.5" id="QQ2-1-201">Orchestrator Properties</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.2.6 <a 
href="#x1-18400012.2.6" id="QQ2-1-202">Resource Manager Properties</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.2.7 <a 
href="#x1-18500012.2.7" id="QQ2-1-203">Agent Properties</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.2.8 <a 
href="#x1-18600012.2.8" id="QQ2-1-204">Process Manager Properties</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.2.9 <a 
href="#x1-18700012.2.9" id="QQ2-1-205">Job Process Properties</a></span>
<br />&#x00A0;<span class="sectionToc" >12.3 <a 
href="#x1-18800012.3" id="QQ2-1-206">Resource Manager Configuration: Classes and Nodepools</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.3.1 <a 
href="#x1-18900012.3.1" id="QQ2-1-207">Nodepools</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.3.2 <a 
href="#x1-19300012.3.2" id="QQ2-1-215">Class Definitions</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.3.3 <a 
href="#x1-19400012.3.3" id="QQ2-1-217">Validation</a></span>
<br />&#x00A0;<span class="sectionToc" >12.4 <a 
href="#x1-19700012.4" id="QQ2-1-220">Ducc Node Definitions</a></span>
<br />&#x00A0;<span class="sectionToc" >12.5 <a 
href="#x1-19800012.5" id="QQ2-1-222">Administrative Commands</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.5.1 <a 
href="#x1-19900012.5.1" id="QQ2-1-223">start_ducc</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.5.2 <a 
href="#x1-20600012.5.2" id="QQ2-1-230">stop_ducc</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >12.5.3 <a 
href="#x1-21100012.5.3" id="QQ2-1-235">check_ducc</a></span>
<br /><span class="chapterToc" >13 <a 
href="#x1-21500013" id="QQ2-1-239">Resource Management</a></span>
<br />&#x00A0;<span class="sectionToc" >13.1 <a 
href="#x1-21600013.1" id="QQ2-1-240">Overview</a></span>
                                                                                                
                                                                                                
<br />&#x00A0;<span class="sectionToc" >13.2 <a 
href="#x1-21700013.2" id="QQ2-1-241">Scheduling Policies</a></span>
<br />&#x00A0;<span class="sectionToc" >13.3 <a 
href="#x1-21800013.3" id="QQ2-1-242">Priority vs Weight</a></span>
<br />&#x00A0;<span class="sectionToc" >13.4 <a 
href="#x1-22100013.4" id="QQ2-1-245">Node Pools</a></span>
<br />&#x00A0;<span class="sectionToc" >13.5 <a 
href="#x1-22200013.5" id="QQ2-1-246">Job Classes</a></span>
<br /><span class="chapterToc" >14 <a 
href="#x1-22300014" id="QQ2-1-247">Simulation and System Testing</a></span>
<br />&#x00A0;<span class="sectionToc" >14.1 <a 
href="#x1-22400014.1" id="QQ2-1-248">Cluster Simulation</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >14.1.1 <a 
href="#x1-22500014.1.1" id="QQ2-1-249">Overview</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >14.1.2 <a 
href="#x1-22600014.1.2" id="QQ2-1-250">Node Configuration</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >14.1.3 <a 
href="#x1-22700014.1.3" id="QQ2-1-251">Setting up Test Mode</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >14.1.4 <a 
href="#x1-22800014.1.4" id="QQ2-1-252">Starting a Simulated Cluster</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >14.1.5 <a 
href="#x1-23200014.1.5" id="QQ2-1-256">Stopping a Simulated Cluster</a></span>
<br />&#x00A0;<span class="sectionToc" >14.2 <a 
href="#x1-23600014.2" id="QQ2-1-260">Job Simulation</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >14.2.1 <a 
href="#x1-23700014.2.1" id="QQ2-1-261">Overview</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >14.2.2 <a 
href="#x1-23800014.2.2" id="QQ2-1-262">Job meta-descriptors</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >14.2.3 <a 
href="#x1-23900014.2.3" id="QQ2-1-263"><span 
class="cmti-10">Prepare </span>Descriptors</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >14.2.4 <a 
href="#x1-24000014.2.4" id="QQ2-1-264">Services</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >14.2.5 <a 
href="#x1-24200014.2.5" id="QQ2-1-266">Generating a Job Set</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >14.2.6 <a 
href="#x1-24300014.2.6" id="QQ2-1-267">Running the Test Driver</a></span>
<br />&#x00A0;<span class="sectionToc" >14.3 <a 
href="#x1-24400014.3" id="QQ2-1-268">Pre-Packaged Tests</a></span>
<br /><span class="partToc" >V&#x00A0;&#x00A0;<a 
href="#x1-245000V" id="QQ2-1-269">Ducc Principles of Operation</a></span>
<br /><span class="chapterToc" >15 <a 
href="#x1-24600015" id="QQ2-1-270">Platform</a></span>
<br />&#x00A0;<span class="sectionToc" >15.1 <a 
href="#x1-24700015.1" id="QQ2-1-271">Highlights</a></span>
<br />&#x00A0;<span class="sectionToc" >15.2 <a 
href="#x1-24800015.2" id="QQ2-1-272">Architecture</a></span>
<br />&#x00A0;<span class="sectionToc" >15.3 <a 
href="#x1-24900015.3" id="QQ2-1-273">Jobs</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >15.3.1 <a 
href="#x1-25000015.3.1" id="QQ2-1-274">Characteristics</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >15.3.2 <a 
href="#x1-25100015.3.2" id="QQ2-1-275">Performance</a></span>
<br />&#x00A0;<span class="sectionToc" >15.4 <a 
href="#x1-25200015.4" id="QQ2-1-276">Reservations</a></span>
<br />&#x00A0;<span class="sectionToc" >15.5 <a 
href="#x1-25300015.5" id="QQ2-1-277">Services</a></span>
<br />&#x00A0;<span class="sectionToc" >15.6 <a 
href="#x1-25400015.6" id="QQ2-1-278">Management</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >15.6.1 <a 
href="#x1-25500015.6.1" id="QQ2-1-279">Memory Shares</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >15.6.2 <a 
href="#x1-25600015.6.2" id="QQ2-1-280">Linux Control Groups</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >15.6.3 <a 
href="#x1-25700015.6.3" id="QQ2-1-281">Preemption</a></span>
<br /><span class="chapterToc" >16 <a 
href="#x1-25800016" id="QQ2-1-282">System Organization</a></span>
<br />&#x00A0;<span class="sectionToc" >16.1 <a 
href="#x1-25900016.1" id="QQ2-1-283">Single System Image</a></span>
<br />&#x00A0;<span class="sectionToc" >16.2 <a 
href="#x1-26000016.2" id="QQ2-1-284">Communications</a></span>
<br />&#x00A0;<span class="sectionToc" >16.3 <a 
href="#x1-26100016.3" id="QQ2-1-285">Daemons</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >16.3.1 <a 
href="#x1-26200016.3.1" id="QQ2-1-286">Orchestrator&#x00A0;(OR)</a></span>
                                                                                                
                                                                                                
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >16.3.2 <a 
href="#x1-27500016.3.2" id="QQ2-1-299">Resource Manager&#x00A0;(RM, also known as the Scheduler)</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >16.3.3 <a 
href="#x1-28100016.3.3" id="QQ2-1-305">Services Manager&#x00A0;(SM)</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >16.3.4 <a 
href="#x1-28500016.3.4" id="QQ2-1-309">Process Manager(PM)</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >16.3.5 <a 
href="#x1-28600016.3.5" id="QQ2-1-310">Agent</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >16.3.6 <a 
href="#x1-29500016.3.6" id="QQ2-1-319">JobDriver(JD)</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >16.3.7 <a 
href="#x1-30000016.3.7" id="QQ2-1-324">User Interface (UI)</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >16.3.8 <a 
href="#x1-30600016.3.8" id="QQ2-1-330">WebServer&#x00A0;(WS)</a></span>
<br />&#x00A0;<span class="sectionToc" >16.4 <a 
href="#x1-31600016.4" id="QQ2-1-340">Interfaces</a></span>
<br /><span class="chapterToc" >17 <a 
href="#x1-31700017" id="QQ2-1-341">Runtime</a></span>
<br />&#x00A0;<span class="sectionToc" >17.1 <a 
href="#x1-31800017.1" id="QQ2-1-342">State Machines</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >17.1.1 <a 
href="#x1-31900017.1.1" id="QQ2-1-343">Job State Machine</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >17.1.2 <a 
href="#x1-32000017.1.2" id="QQ2-1-345">Service State Machine</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >17.1.3 <a 
href="#x1-32100017.1.3" id="QQ2-1-347">Reservation State Machines</a></span>
<br />&#x00A0;<span class="sectionToc" >17.2 <a 
href="#x1-32200017.2" id="QQ2-1-350">Dependencies</a></span>
<br />&#x00A0;<span class="sectionToc" >17.3 <a 
href="#x1-32300017.3" id="QQ2-1-351">Scheduling</a></span>
<br />&#x00A0;<span class="sectionToc" >17.4 <a 
href="#x1-32400017.4" id="QQ2-1-352">Monitoring and Control</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >17.4.1 <a 
href="#x1-32500017.4.1" id="QQ2-1-353">Automatic</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >17.4.2 <a 
href="#x1-32600017.4.2" id="QQ2-1-354">Manual</a></span>
<br />&#x00A0;<span class="sectionToc" >17.5 <a 
href="#x1-32700017.5" id="QQ2-1-355">Logging</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >17.5.1 <a 
href="#x1-32800017.5.1" id="QQ2-1-356">System</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >17.5.2 <a 
href="#x1-32900017.5.2" id="QQ2-1-357">User</a></span>
<br />&#x00A0;<span class="sectionToc" >17.6 <a 
href="#x1-33000017.6" id="QQ2-1-358">Recovery</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >17.6.1 <a 
href="#x1-33100017.6.1" id="QQ2-1-359">System</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" >17.6.2 <a 
href="#x1-33200017.6.2" id="QQ2-1-360">User</a></span>
</div>
                                                                                                
                                                                                                
<h2 class="likechapterHead"><a 
 id="x1-4000"></a>List of Figures</h2><div class="tableofcontents"><span class="lofToc" >1.1&#x00A0;<a 
href="#x1-10001r1">Standard UIMA Pipeline</a></span><br /><span class="lofToc" >1.2&#x00A0;<a 
href="#x1-11001r2">UIMA Pipeline As Scaled by
UIMA-AS</a></span><br /><span class="lofToc" >1.3&#x00A0;<a 
href="#x1-12001r3">UIMA Pipeline As Automatically Scaled Out By DUCC</a></span><br /><span class="lofToc" >1.4&#x00A0;<a 
href="#x1-13001r4">UIMA
Pipeline With User-Supplied DD as Automatically Scaled Out By DUCC</a></span><br /><span class="lofToc" >5.1&#x00A0;<a 
href="#x1-86001r1">Service
Ping Abstract Class</a></span><br /><span class="lofToc" >5.2&#x00A0;<a 
href="#x1-86002r2">IServiceStatistics Interface</a></span><br /><span class="lofToc" >5.3&#x00A0;<a 
href="#x1-86003r3">Sample UIMA-AS Service
Pinger</a></span><br /><span class="lofToc" >7.1&#x00A0;<a 
href="#x1-98001r1">Sample Webserver Page</a></span><br /><span class="lofToc" >7.2&#x00A0;<a 
href="#x1-102001r2">Preferences Page</a></span><br /><span class="lofToc" >7.3&#x00A0;<a 
href="#x1-104001r3">Jobs Page</a></span><br /><span class="lofToc" >7.4&#x00A0;<a 
href="#x1-106004r4">Processes
Tab</a></span><br /><span class="lofToc" >7.5&#x00A0;<a 
href="#x1-107001r5">Work Items Tab</a></span><br /><span class="lofToc" >7.6&#x00A0;<a 
href="#x1-108001r6">Performance Tab</a></span><br /><span class="lofToc" >7.7&#x00A0;<a 
href="#x1-109001r7">Specification Tab</a></span><br /><span class="lofToc" >7.8&#x00A0;<a 
href="#x1-110001r8">Reservations
Page</a></span><br /><span class="lofToc" >9.1&#x00A0;<a 
href="#x1-146001r1">OpenNLP Process Measurements</a></span><br /><span class="lofToc" >9.2&#x00A0;<a 
href="#x1-146002r2">OpenNLP Process Breakdown</a></span><br /><span class="lofToc" >10.1&#x00A0;<a 
href="#x1-151001r1">CAS
Input Processing Performacne</a></span><br /><span class="lofToc" >12.1&#x00A0;<a 
href="#x1-190004r1">Nodepool Example</a></span><br /><span class="lofToc" >12.2&#x00A0;<a 
href="#x1-190007r2">Nodepools: Overlapping
Pools are Incorrect</a></span><br /><span class="lofToc" >12.3&#x00A0;<a 
href="#x1-190008r3">Nodepools: Multiple top-level Nodepools</a></span><br /><span class="lofToc" >12.4&#x00A0;<a 
href="#x1-192007r4">Sample Nodepool
Configuration</a></span><br /><span class="lofToc" >12.5&#x00A0;<a 
href="#x1-193001r5">Sample Class Configuration</a></span><br /><span class="lofToc" >12.6&#x00A0;<a 
href="#x1-197001r6">Sample Node Configuration</a></span><br />
</div>
                                                                                                
                                                                                                
                                                                                                
                                                                                                
<!--l. 79--><p class="noindent" >
                                                                                                
                                                                                                
<h1 class="partHead"><span class="titlemark">Part&#x00A0;I<br /></span><a 
 id="x1-5000I"></a>DUCC Concepts</h1>
<!--l. 22--><p class="noindent" ><a name='DUCC_OVERVIEW'></a>
                                                                                                
                                                                                                
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;1</span><br /><a 
 id="x1-60001"></a>DUCC Overview</h2>
<h3 class="sectionHead"><span class="titlemark">1.1   </span> <a 
 id="x1-70001.1"></a>What is DUCC?</h3>
<!--l. 28--><p class="noindent" >DUCC stands for Distributed UIMA Cluster Computing. DUCC is a cluster management system providing
tooling, management, and scheduling facilities to automate the scale-out of applications written to the UIMA
framework.
<!--l. 32--><p class="noindent" >Core UIMA provides a generalized framework for applications that process unstructured information such as human
language, but does not provide a scale-out mechanism. UIMA-AS provides a scale-out mechanism to distribute UIMA
pipelines over a cluster of computing resources, but does not provide job or cluster management of the resources.
DUCC defines a formal job model that closely maps to a standard UIMA pipeline. Around this job model
DUCC provides cluster management services to automate the scale-out of UIMA pipelines over computing
clusters.
<!--l. 39--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">1.2   </span> <a 
 id="x1-80001.2"></a>DUCC Job Model</h3>
<!--l. 41--><p class="noindent" >The Job Model defines the steps necessary to scale-up a UIMA pipeline using DUCC. The goal of DUCC is to allow the
application logic to be unchanged.
<!--l. 44--><p class="noindent" >The DUCC Job model consists of standard UIMA components: a Collection Reader (CR), a CAS Multiplier (CM),
application logic as implemented one or more Analysis Engines (AE), and a CAS Consumer (CC). In theory, any CR, or CM
will work with DUCC, but DUCC is all about scale-out. In order to achieve good scale-out these components must be
constructed in a specific way.
<!--l. 49--><p class="noindent" >The Collection Reader builds input CASs and forwards them to the UIMA pipelines. In the DUCC model, the CR is run in a
process separate from the rest of the pipeline. In fact, in all but the smallest clusters it is run on a different physical machine
than the rest of the pipeline. To achieve scalability, the CR must create very small CASs that do not contain application
data, but which contain references to data; for instance, file names. Ideally, the CR should be runnable in a process
not much larger than the smallest Java virtual machine. Later sections demonstrate methods for achieving
this.
<!--l. 57--><p class="noindent" >Each pipeline must contain at least one CAS Multiplier which receives the CASs from the CR. The CMs encapsulate the
knowledge of how to receive the data references in the small CASs received from the CRs and deliver the referenced data to
the application pipeline. DUCC packages the CM, AE(s), and CC into a single process, multiple instances of which are then
deployed over the cluster.
<!--l. 63--><p class="noindent" >DUCC does not provide any mechanism for receiving output CASs. Each application must supply its own CAS
Consumer which serializes the output of the pipelines for consumption by other entities (as serialized CASs, for
example).
<!--l. 67--><p class="noindent" >A DUCC job therefore consists of a small specification containing the following items:
     <ul class="itemize1">
     <li class="itemize">The name of a resource containing the CR descriptor.
     </li>
     <li class="itemize">The name of a resource containing the CM descriptor.
     </li>
     <li class="itemize">The name of a resource containing the AE descriptor.
     </li>
     <li class="itemize">The name of a resource containing the CC descriptor.
                                                                                                
                                                                                                
     </li>
     <li class="itemize">Other  information  required  to  parametrize  the  above  and  identify  the  job  such  as  log  directory,  working
     directory, desired scale-out, etc. These are described in detail in subsequent sections.</li></ul>
<!--l. 79--><p class="noindent" >On job submission, DUCC examines the job specification and automatically creates a scaled-out UIMA-AS service with a
single process executing the CR as a UIMA-AS client and and as many processes as possible executing the combined CM,
AE, and CC pipeline as UIMA-AS service instances.
<!--l. 84--><p class="noindent" >DUCC provides other facilities in support of scale-out:
     <ul class="itemize1">
     <li class="itemize">The ability to reserve all or part of a node in the cluster.
     </li>
     <li class="itemize">Automated management of services required in support of jobs.
     </li>
     <li class="itemize">The ability to schedule and execute arbitrary processes on nodes in the cluster.
     </li>
     <li class="itemize">Debugging tools and support.
     </li>
     <li class="itemize">A web server to display and manage work and cluster status.
     </li>
     <li class="itemize">A CLI and a Java API to support the above.</li></ul>
<!--l. 95--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">1.3   </span> <a 
 id="x1-90001.3"></a>DUCC From UIMA to Full Scale-out</h3>
<!--l. 97--><p class="noindent" >In this section we demonstrate the progression of a simple UIMA pipeline to a fully scaled-out job running under
DUCC.
<!--l. 100--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-100001.3"></a><span 
class="cmbx-10">UIMA Pipelines</span></span>
A normal UIMA pipeline contains a Collection Reader, one or more Analysis Engines connected in a pipeline, and a CAS
Consumer as shown in <a 
href="#x1-10001r1">Figure &#x00A0;1.1</a>.
<!--l. 105--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-10001r1"></a>
                                                                                                
                                                                                                

<!--l. 108--><p class="noindent" ><img 
src="images/uima-pipeline.jpg" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;1.1: </span><span  
class="content">Standard UIMA Pipeline</span></div><!--tex4ht:label?: x1-10001r1 -->
                                                                                                
                                                                                                
<!--l. 111--><p class="noindent" ></div><hr class="endfigure">
<!--l. 113--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-110001.3"></a><span 
class="cmbx-10">UIMA-AS Scaled Pipeline</span></span>
With UIMA-AS the CR is separated into a discrete process and a CAS Multiplier is introduced into the pipeline as an
interface between the CR and the pipeline, as shown in <a 
href="#x1-11001r2">Figure &#x00A0;1.2</a> below. Multiple pipelines are serviced by the CR and are
scaled-out over a computing cluster. The difficulty with this model is that each user is individually responsible for finding and
scheduling computing nodes, installing communication software such as ActiveMQ, and generally managing the distributed
job and associated hardware.
<!--l. 123--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-11001r2"></a>
                                                                                                
                                                                                                

<!--l. 126--><p class="noindent" ><img 
src="images/uima-as-pipeline.jpg" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;1.2: </span><span  
class="content">UIMA Pipeline As Scaled by UIMA-AS</span></div><!--tex4ht:label?: x1-11001r2 -->
                                                                                                
                                                                                                
<!--l. 129--><p class="noindent" ></div><hr class="endfigure">
<!--l. 131--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-120001.3"></a><span 
class="cmbx-10">UIMA-AS Pipeline Scaled By DUCC</span></span>
DUCC is a UIMA and UIMA-AS-aware cluster manager. To scale out work under DUCC the developer tells DUCC what
the parts of the application are, and DUCC does the work to build the scale-out via UIMA/AS, to find and
schedule resources, to deploy the parts of the application over the cluster, and to manage the jobs while it
executes.
<!--l. 137--><p class="noindent" >On job submission, the DUCC Command Line Interface (CLI) inspects the XML defining the analytic and generates a
UIMA-AS Deployment Descriptor (DD). The DD establishes some number of pipeline threads per process (as indicated in
the DUCC job parameters), and generates job-unique queues.
<!--l. 141--><p class="noindent" >Under DUCC, the Collection Reader is executed in a process called the Job Driver (or JD). The pipelines are executed in one
or more processes called Job Processes (or JPs). The JD process provides a thin wrapper over the CR to enable
communication with DUCC. The JD uses the CR to implement a UIMA-AS client delivering CASs to the multiple
(scaled-out) pipelines, shown in <a 
href="#x1-12001r3">Figure &#x00A0;1.3</a> below.
<!--l. 147--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-12001r3"></a>
                                                                                                
                                                                                                

<!--l. 150--><p class="noindent" ><img 
src="images/ducc-sequential.jpg" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;1.3: </span><span  
class="content">UIMA Pipeline As Automatically Scaled Out By DUCC</span></div><!--tex4ht:label?: x1-12001r3 -->
                                                                                                
                                                                                                
<!--l. 153--><p class="noindent" ></div><hr class="endfigure">
<!--l. 155--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-130001.3"></a><span 
class="cmbx-10">UIMA-AS Pipeline with User-Supplied DD Scaled By DUCC</span></span>
Application programmers may supply their own Deployment Descriptors to control intra-process threading and scale-out. If a
DD is supplied in the job parameters, DUCC will use this instead of generating one as depicted in <a 
href="#x1-13001r4">Figure &#x00A0;1.4</a>
below.
<!--l. 161--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-13001r4"></a>
                                                                                                
                                                                                                

<!--l. 164--><p class="noindent" ><img 
src="images/ducc-parallel.jpg" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;1.4: </span><span  
class="content">UIMA Pipeline With User-Supplied DD as Automatically Scaled Out By DUCC</span></div><!--tex4ht:label?: x1-13001r4 -->
                                                                                                
                                                                                                
<!--l. 167--><p class="noindent" ></div><hr class="endfigure">
<h3 class="sectionHead"><span class="titlemark">1.4   </span> <a 
 id="x1-140001.4"></a>Error Management </h3>
<!--l. 171--><p class="noindent" >DUCC provides a number of facilities to assist error management:
     <ul class="itemize1">
     <li class="itemize">DUCC uses the UIMA-AS error-handling facilities to reflect errors from the Job Processes to the Job Drivers.
     The JD wrappers implement logic to enforce error thresholds, to identify and log errors, and to reflect job
     problems in the DUCC Web Server. All error thresholds are configurable both globally and on a per-job basis.
     </li>
     <li class="itemize">Error and timeout thresholds are implemented for both the initialization phase of a pipeline and the execution
     phase.
     </li>
     <li class="itemize">Retry-after-error is supported: if a process has a failure on some CAS after initialization is successful, the
     process is terminated and all affected CASs are retried, up to some configurable threshold.
     </li>
     <li class="itemize">DUCC ensures that processes can successfully initialize before fully scaling out a job, to ensure a cluster is not
     overwhelmed with errant processes.
     </li>
     <li class="itemize">Various error conditions encountered while a job is running will prevent the errant job from continuing scale
     out, and can result in termination of the job.</li></ul>
<!--l. 193--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">1.5   </span> <a 
 id="x1-150001.5"></a>Cluster and Job Management</h3>
<!--l. 194--><p class="noindent" >DUCC supports management of multiple jobs and multiple users in a distributed cluster:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Multiple User Support</span> </dt><dd 
class="description">DUCC runs all work under the identity of the submitting user. Logs are written with the
     user&#8217;s credentials into the user&#8217;s file space designated at job submission.
     </dd><dt class="description">
<span 
class="cmbx-10">Fair-Share Scheduling</span> </dt><dd 
class="description">DUCC provides a Fair-Share scheduler to equitably share resources among multiple users.
     The scheduler also supports semi-permanent reservation of full or partial machines.
     </dd><dt class="description">
<span 
class="cmbx-10">Service Management</span> </dt><dd 
class="description">DUCC  provides  a  Service  Manager  capable  of  automatically  starting,  stopping,  and
     otherwise managing and querying both UIMA-AS and non-UIMA-AS services in support of jobs.
     </dd><dt class="description">
<span 
class="cmbx-10">Job Lifetime Management and Orchestration</span> </dt><dd 
class="description">DUCC includes an Orchestrator to manage the lifetimes of all
     entities in the system.
     </dd><dt class="description">
<span 
class="cmbx-10">Node Sharing</span> </dt><dd 
class="description">DUCC allocates processes from one or more users on a node, each with a specified amount of
     memory. DUCC&#8217;s preferred mechanism for constraining memory use is Linux Control Groups, or CGroups. For
     nodes that do not suport CGroups, DUCC agents monitor RAM use and kill processes that exceed their share
     size by a settable fudge factor.
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">DUCC Agents</span> </dt><dd 
class="description">DUCC Agents manage each node&#8217;s local resources and all processes started by DUCC. Each node in a
     cluster has exactly one Agent. The Agent
         <ul class="itemize1">
         <li class="itemize">Monitors and reports node capabilities (memory, etc) and performance data (CPU busy, swap, etc).
         </li>
         <li class="itemize">Starts, stops, and monitors all processes on behalf of users.
         </li>
         <li class="itemize">Patrols the node for &#8220;foreign&#8221; (non-DUCC) processes, reporting them to the Web Server, and optionally
         reaping them.
         </li>
         <li class="itemize">Ensures job processes do not exceed their declared memory requirements through the use of Linux Cgroups.</li></ul>
     </dd><dt class="description">
<span 
class="cmbx-10">DUCC Web server</span> </dt><dd 
class="description">DUCC provides a web server displaying all aspects of the system:
         <ul class="itemize1">
         <li class="itemize">All jobs in the system, their current state, resource usage, etc.
         </li>
         <li class="itemize">All reserved resources and associated information (owner, etc.), including the ability to request and cancel
         reservations.
         </li>
         <li class="itemize">All services, including the ability to start, stop, and modify service definitions.
         </li>
         <li class="itemize">All nodes in the system and their status, usage, etc.
         </li>
         <li class="itemize">The status of all DUCC management processes.
         </li>
         <li class="itemize">Access to documentation.</li></ul>
     </dd><dt class="description">
<span 
class="cmbx-10">Cluster Management Support</span> </dt><dd 
class="description">DUCC provides system management support to:
         <ul class="itemize1">
         <li class="itemize">Start, stop, and query full DUCC systems.
         </li>
         <li class="itemize">Start, stop, and quiesce individual DUCC components.
         </li>
         <li class="itemize">Add and delete nodes from the DUCC system.
         </li>
         <li class="itemize">Discover DUCC processes (e.g. after partial failures).
         </li>
         <li class="itemize">Find and kill errant job processes belonging to individual users.
         </li>
         <li class="itemize">Monitor and display inter-DUCC messages.</li></ul>
     </dd></dl>
                                                                                                
                                                                                                
<!--l. 263--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">1.6   </span> <a 
 id="x1-160001.6"></a>Security Measures</h3>
<!--l. 264--><p class="noindent" >The following DUCC security measures are provided:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">command line interface</span> </dt><dd 
class="description">The CLI employs HTTP to send requests to the DUCC controller. The CLI creates and
     employs public and private security keys in the user&#8217;s home directory for authentication of HTTP requests.
     The controller validates requests via these same security keys.
     </dd><dt class="description">
<span 
class="cmbx-10">webserver</span> </dt><dd 
class="description">The webserver facilitates operational control and therefore authentication is desirable.
         <ul class="itemize1">
         <li class="itemize">Each user has the ability to control certain aspects of only his/her active submissions.
         </li>
         <li class="itemize">Each administrator has the ability to control certain aspects of any user&#8217;s active submissions, as well as
         modification of some DUCC operational characteristics.</li></ul>
     <!--l. 280--><p class="noindent" >A simple interface is provided so that an installation can plug-in a site specific authentication mechanism comprising
     userid and password.
     </dd><dt class="description">
<span 
class="cmbx-10">ActiveMQ</span> </dt><dd 
class="description">TBD.</dd></dl>
<!--l. 286--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">1.7   </span> <a 
 id="x1-170001.7"></a>Security Issues</h3>
<!--l. 287--><p class="noindent" >The following DUCC security issues should be considered:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">submit transmission &#8217;sniffed&#8217;</span> </dt><dd 
class="description">In  the  event  that  the  DUCC  submit  command  is  &#8217;sniffed&#8217;  then  the  user
     authentication mechanism is compromised and user masquerading is possible. That is, the userid encryption
     mechanism can be exploited such that user A can submit a job pretending to be user B.
     </dd><dt class="description">
<span 
class="cmbx-10">user </span><span 
class="cmbxti-10">ducc </span><span 
class="cmbx-10">password compromised</span> </dt><dd 
class="description">In  the  event  that  the  <span 
class="cmti-10">ducc  </span>user  password  is  compromised  then  the  root
     privileged command <span 
class="cmbx-10">ducc</span><span 
class="cmbx-10">_ling </span>can be used to become any other user except root.
     </dd><dt class="description">
<span 
class="cmbx-10">user </span><span 
class="cmbxti-10">root </span><span 
class="cmbx-10">password compromised</span> </dt><dd 
class="description">In the event that the <span 
class="cmti-10">root </span>user password is compromised DUCC provides no
     protection. That is, compromising the root user is equivalent to compromising the DUCC user password.</dd></dl>
<!--l. 22--><p class="noindent" ><a name='DUCC_TERMINOLOGY'></a>
                                                                                                
                                                                                                
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;2</span><br /><a 
 id="x1-180002"></a>Glossary</h2>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Autostarted Service</span> </dt><dd 
class="description">An autostarted service is a registered service that is started automatically by DUCC when
     the DUCC system is booted.
     </dd><dt class="description">
<span 
class="cmbx-10">Dependent service or job</span> </dt><dd 
class="description">A  dependent  service  or  job  is  a  service  or  job  that  specifies  one  or  more  service
     dependencies in their job specification. The service or job is dependent upon the referenced service being
     operational before being started by DUCC.
     </dd><dt class="description">
<span 
class="cmbx-10">DUCC</span> </dt><dd 
class="description">Distributed UIMA Cluster Computing.
     </dd><dt class="description">
<span 
class="cmbx-10">Registered service</span> </dt><dd 
class="description">A  registered  service  is  a  service  that  is  registered  with  DUCC.  DUCC  saves  the  service
     specification and fully manages the service, insuring it is running when needed, and shutdown when not.
     </dd><dt class="description">
<span 
class="cmbx-10">Service Instance</span> </dt><dd 
class="description">A service instance is one physical process which runs a CUSTOM or UIMA-AS service. UIMA-AS
     services are usually scaled-out with multiple instances implementing the same underlying service logic.
     </dd><dt class="description">
<span 
class="cmbx-10">Orchestrator (OR)</span> </dt><dd 
class="description">The Orchestrator manages the life cycle of all entities within DUCC.
     </dd><dt class="description">
<span 
class="cmbx-10">Process Manager (PM)</span>  </dt><dd 
class="description">The Process Manager coordinates distribution of work among the Agents.
     </dd><dt class="description">
<span 
class="cmbx-10">Resource Manager (RM)</span>  </dt><dd 
class="description">The Resource Manager schedules physical resources for DUCC work.
     </dd><dt class="description">
<span 
class="cmbx-10">Service Endpoint</span> </dt><dd 
class="description">In DUCC, the service endpoint provides a unique identifier for a service. In the case of UIMA-AS
     services, the endpoint also serves as a well-known address for contacting the service.
     </dd><dt class="description">
<span 
class="cmbx-10">Service Manager (SM)</span> </dt><dd 
class="description">The Service Manager manages the life-cycles of UIMA-AS and CUSTOM services. It
     coordinates registration of services, starting and stopping of services, and ensures that services are available
     and remain available for the lifetime of the jobs.
     </dd><dt class="description">
<span 
class="cmbx-10">Agent</span> </dt><dd 
class="description">DUCC Agent processes run on every node in the system. The Agent receives orders to start and stop processes
     on each node. Agents monitors nodes, sending heartbeat packets with node statistics to interested components
     (such as the RM and web-server). If CGroups are installed in the cluster, the Agent is responsible for managing
     the CGroups for each job process. All processes other than the DUCC management processes are are managed
     as children of the agents.
     </dd><dt class="description">
<span 
class="cmbx-10">DUCC-MON</span> </dt><dd 
class="description">DUCC-MON is the DUCC web-server.
     </dd><dt class="description">
<span 
class="cmbx-10">Job Driver (JD)</span> </dt><dd 
class="description">The Job Driver is a thin wrapper that encapsulates a Job&#8217;s Collection Reader. The JD executes
     as a process that is scheduled and deployed by DUCC.
     </dd><dt class="description">
<span 
class="cmbx-10">Job Process (JP)</span> </dt><dd 
class="description">The Job Process is a thin wrapper that encapsulates a job&#8217;s pipeline components. The JP
     executes in a process that is scheduled and deployed by DUCC.
     </dd><dt class="description">
<span 
class="cmbx-10">Job specification</span> </dt><dd 
class="description">The Job Specification is a collection of properties that describe work to be scheduled and deployed
     by DUCC. It identifies the UIMA components (CR, AE, etc) that comprise the job and the system-wide
     properties of the job (CLASSPATHs, RAM requirements, etc).
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">Job</span> </dt><dd 
class="description">A DUCC job consists of the components required to deploy and execute a UIMA pipeline over a computing
     cluster. It consists of a JD to run the Collection Reader, a set of JPs to run the UIMA AEs, and a Job
     Specification to describe how the parts fit together.
     </dd><dt class="description">
<span 
class="cmbx-10">Share Quantum</span> </dt><dd 
class="description">The DUCC scheduler abstracts the nodes in the cluster as a single large conglomerate of resources:
     memory, processor cores, etc. The scheduler logically decomposes the collection of resources into some number
     of equal-sized atomic units. Each unit of work requiring resources is apportioned one or more of these atomic
     units. The smallest possible atomic unit is called the <span 
class="cmti-10">share quantum</span>, or simply, <span 
class="cmti-10">share</span>.
     </dd><dt class="description">
<span 
class="cmbx-10">Process</span> </dt><dd 
class="description">A process is one physical process executing on a machine in the DUCC cluster. DUCC jobs are comprised
     of one or more processes (JDs and JPs). Each process is assigned one or more <span 
class="cmti-10">shares </span>by the DUCC scheduler.
     </dd><dt class="description">
<span 
class="cmbx-10">Weighted Fair Share</span> </dt><dd 
class="description">A weighted fair share calculation is used to apportion resources equitably to the outstanding
     work in the system. In a non-weighted fair-share system, all work requests are given equal consideration to all
     resources. To provide some (&#8220;more important&#8221;) work more than equal resources, weights are used to bias the
     allotment of shares in favor of some classes of work.
     </dd><dt class="description">
<span 
class="cmbx-10">Work Items</span> </dt><dd 
class="description">A DUCC work item is one unit of work to be completed in a single DUCC process. It is usually
     initiated by the submission of a single CAS from the JD to one of the JPs. It could be thought of as a single
     &#8220;question&#8221; to be answered by a UIMA analytic, or a single &#8220;task&#8221; to complete. Usually each DUCC JP executes
     many work items per job.
     </dd><dt class="description">
<span 
class="cmbx-10">$DUCC</span><span 
class="cmbx-10">_HOME</span> </dt><dd 
class="description">The root of the installed DUCC runtime, e.g. /home/ducc/ducc_runtime. It need not be set in
     the environment, although the examples in this document assume that it has been.
     </dd></dl>
                                                                                                
                                                                                                
<!--l. 83--><p class="noindent" >
                                                                                                
                                                                                                
<h1 class="partHead"><span class="titlemark">Part&#x00A0;II<br /></span><a 
 id="x1-19000II"></a>Ducc Users Guide</h1>
<!--l. 23--><p class="noindent" ><a name='DUCC_CLI'></a>
                                                                                                
                                                                                                
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;3</span><br /><a 
 id="x1-200003"></a>Command Line Interface</h2>
<!--l. 28--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-210003"></a><span 
class="cmbx-10">Overview</span></span>
The DUCC CLI is the primary means of communication with DUCC. Work is submitted, work is canceled, work is
monitored, and work is queried with this interface.
<!--l. 32--><p class="noindent" >All parameters may be passed to all the CLI commands in the form of Unix-like &#8220;long-form&#8221; (key, value) pairs, in which the
key is proceeded by the characters &#8220;<span 
class="cmsy-10">--</span>&#8221;. As well, the parameters may be saved in a standard Java Properties file, without
the leading &#8220;<span 
class="cmsy-10">--</span>&#8221; characters. Both a properties file and command-line parameters may be passed to each CLI.
When both are present, the parameters on the command line take precedence. Take, for example the following
simple job properties file, call it <span 
class="cmtt-10">1.job</span>, where the environment variable &#8220;DH&#8221; has been set to the location of
$DUCC_HOME.
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-1">
description&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Test&#x00A0;job&#x00A0;1
&#x00A0;<br />
&#x00A0;<br />classpath&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;${DH}/lib/uima-ducc/examples/*
&#x00A0;<br />environment&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;AE_INIT_TIME=5&#x00A0;AE_INIT_RANGE=5&#x00A0;LD_LIBRARY_PATH=/a/nother/path
&#x00A0;<br />scheduling_class&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;normal
&#x00A0;<br />
&#x00A0;<br />driver_descriptor_CR&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;org.apache.uima.ducc.test.randomsleep.FixedSleepCR
&#x00A0;<br />driver_descriptor_CR_overrides&#x00A0;jobfile=${DH}/lib/examples/simple/1.inputs&#x00A0;compression=10
&#x00A0;<br />error_rate=0.0
&#x00A0;<br />
&#x00A0;<br />driver_jvm_args&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;-Xmx500M
&#x00A0;<br />
&#x00A0;<br />process_descriptor_AE&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;org.apache.uima.ducc.test.randomsleep.FixedSleepAE
&#x00A0;<br />process_memory_size&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;4
&#x00A0;<br />process_jvm_args&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;-Xmx100M
&#x00A0;<br />process_thread_count&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;2
&#x00A0;<br />process_per_item_time_max&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;5
&#x00A0;<br />process_deployments_max&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;999
&#x00A0;<br /></div>
<!--l. 59--><p class="nopar" >
<!--l. 61--><p class="noindent" >This can be submitted, overriding the scheduling class and memory, thus:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-2">
ducc_job_submit&#x00A0;--specification&#x00A0;1.job&#x00A0;--process_memory_size&#x00A0;16&#x00A0;--scheduling_class&#x00A0;high</div>
<!--l. 64--><p class="nopar" >
<!--l. 66--><p class="noindent" >The DUCC CLI parameters are now described in detail.
<!--l. 68--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">3.1   </span> <a 
 id="x1-220003.1"></a>The DUCC Job Descriptor</h3>
<!--l. 69--><p class="noindent" >The DUCC Job Descriptor includes properties to enable automated management and scale-out over large computing clusters.
The job descriptor includes
     <ul class="itemize1">
     <li class="itemize">References to the various UIMA components required by the job (CR, CM, AE, CC, and maybe DD)
     </li>
     <li class="itemize">Scale-out requirements: number of processes, number of threads per process, etc
     </li>
     <li class="itemize">Environment requirements: log directory, working directory, environment variables, etc,
     </li>
     <li class="itemize">JVM parameters
     </li>
     <li class="itemize">Scheduling class
     </li>
     <li class="itemize">Error-handling preferences: acceptable failure counts, timeouts, etc
     </li>
     <li class="itemize">Debugging and monitoring requirements and preferences</li></ul>
<!--l. 81--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">3.2   </span> <a 
 id="x1-230003.2"></a>Operating System Limit Support</h3>
<!--l. 82--><p class="noindent" >The CLI supports specification of operating system limits applied to the various job processes. To specify a limit, pass the
name of the limit and its value in the <span 
class="cmti-10">environment </span>specified in the job. Limits are named with the string
&#8220;DUCC_RLIMIT_name&#8221; where &#8220;name&#8221; is the name of a specific limit. Supported limits include:
     <ul class="itemize1">
     <li class="itemize">DUCC_RLIMIT_CORE
     </li>
     <li class="itemize">DUCC_RLIMIT_CPU
     </li>
     <li class="itemize">DUCC_RLIMIT_DATA
     </li>
     <li class="itemize">DUCC_RLIMIT_FSIZE
                                                                                                
                                                                                                
     </li>
     <li class="itemize">DUCC_RLIMIT_MEMLOCK
     </li>
     <li class="itemize">DUCC_RLIMIT_NOFILE
     </li>
     <li class="itemize">DUCC_RLIMIT_NPROC
     </li>
     <li class="itemize">DUCC_RLIMIT_RSS
     </li>
     <li class="itemize">DUCC_RLIMIT_STACK
     </li>
     <li class="itemize">DUCC_RLIMIT_AS
     </li>
     <li class="itemize">DUCC_RLIMIT_LOCKS
     </li>
     <li class="itemize">DUCC_RLIMIT_SIGPENDING
     </li>
     <li class="itemize">DUCC_RLIMIT_MSGQUEUE
     </li>
     <li class="itemize">DUCC_RLIMIT_NICE
     </li>
     <li class="itemize">DUCC_RLIMIT_STACK
     </li>
     <li class="itemize">DUCC_RLIMIT_RTPRIO</li></ul>
<!--l. 104--><p class="noindent" >See the Linux documentation for details on the meanings of these limits and their values.
<!--l. 106--><p class="noindent" >For example, to set the maximum number of open files allowed in any job process, specify an environment similar to this
when submitting the job:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-3">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;ducc_job_submit&#x00A0;....&#x00A0;--environment="DUCC_RLIMT_NOFILE=1024"&#x00A0;...</div>
<!--l. 110--><p class="nopar" >
<!--l. 112--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">3.3   </span> <a 
 id="x1-240003.3"></a>Command Line Forms</h3>
<!--l. 113--><p class="noindent" >The Command Line Interface is provided in several forms:
<!--l. 116--><p class="noindent" >
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">A wrapper script around the uima-ducc-cli.jar.
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">Direct invocation of each command&#8217;s <span 
class="cmtt-10">class </span>with the <span 
class="cmtt-10">java </span>command.</dd></dl>
<!--l. 120--><p class="noindent" >When using the scripts the full execution environment is established silently. When invoking a command&#8217;s <span 
class="cmtt-10">class </span>directly, the
java <span 
class="cmtt-10">CLASSPATH </span>must include the uima-ducc-cli.jar, as illustrated in the wrapper scripts.
<!--l. 124--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">3.4   </span> <a 
 id="x1-250003.4"></a>DUCC Commands</h3>
<!--l. 125--><p class="noindent" >The following commands are provided:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">ducc</span><span 
class="cmbx-10">_submit</span> </dt><dd 
class="description">Submit a job for execution.
     </dd><dt class="description">
<span 
class="cmbx-10">ducc</span><span 
class="cmbx-10">_cancel</span> </dt><dd 
class="description">Cancel a job in progress.
     </dd><dt class="description">
<span 
class="cmbx-10">ducc</span><span 
class="cmbx-10">_reserve</span> </dt><dd 
class="description">Request a reservation of full or partial machines.
     </dd><dt class="description">
<span 
class="cmbx-10">ducc</span><span 
class="cmbx-10">_unreserve</span> </dt><dd 
class="description">Cancel a reservation.
     </dd><dt class="description">
<span 
class="cmbx-10">ducc</span><span 
class="cmbx-10">_monitor</span> </dt><dd 
class="description">Monitor the progress of a job that is already submitted.
     </dd><dt class="description">
<span 
class="cmbx-10">ducc</span><span 
class="cmbx-10">_process</span><span 
class="cmbx-10">_submit</span> </dt><dd 
class="description">Submit an arbitrary process (managed reservation) for execution.
     </dd><dt class="description">
<span 
class="cmbx-10">ducc</span><span 
class="cmbx-10">_process</span><span 
class="cmbx-10">_cancel</span> </dt><dd 
class="description">Cancel an arbitrary process.
     </dd><dt class="description">
<span 
class="cmbx-10">ducc</span><span 
class="cmbx-10">_services</span> </dt><dd 
class="description">Register, unregister, start, stop, modify, and query a service.
     </dd><dt class="description">
<span 
class="cmbx-10">ducc</span><span 
class="cmbx-10">_view</span><span 
class="cmbx-10">_perf</span> </dt><dd 
class="description">Fetch performance data from the log and history files for analysis by spreadsheets, etc.
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">viaducc</span> </dt><dd 
class="description">This is a script wrapper to facilitate execution of Eclipse workspaces as DUCC jobs as well as general
     execution of arbitrary processes in DUCC-managed resources.</dd></dl>
<!--l. 141--><p class="noindent" >The next section describes these commands in detail.
<!--l. 22--><p class="noindent" ><a name='DUCC_CLI_SUBMIT'></a>
<!--l. 25--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">3.5   </span> <a 
 id="x1-260003.5"></a>ducc_submit</h3>
<!--l. 27--><p class="noindent" >The source for this section is ducc_duccbook/documents/part-user/cli/submit.xml.
<!--l. 28--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-270003.5"></a><span 
class="cmbx-10">Description:</span></span>
The submit CLI is used to submit work for execution by DUCC. DUCC assigns a unique id to the job and schedules it for
execution. The submitter may optionally request that the progress of the job is monitored, in which case the state of the job
as it progresses through its lifetime is printed on the console.
<!--l. 33--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-280003.5"></a><span 
class="cmbx-10">Usage:</span></span>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Script wrapper</span> </dt><dd 
class="description">$DUCC_HOME/bin/ducc_submit <span 
class="cmti-10">options</span>
     </dd><dt class="description">
<span 
class="cmbx-10">Java Main</span> </dt><dd 
class="description">java -cp $DUCC_HOME/lib/uima-ducc-cli.jar org.apache.uima.ducc.cli.DuccJobSubmit <span 
class="cmti-10">options</span></dd></dl>
<!--l. 39--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-290003.5"></a><span 
class="cmbx-10">Options:</span></span>
     <dl class="description"><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">all</span><span 
class="cmbx-10">_in</span><span 
class="cmbx-10">_one </span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmbx-10">local </span><span 
class="cmsy-10">| </span><span 
class="cmbx-10">remote </span><span 
class="cmmi-10">&#x003E;</span> </dt><dd 
class="description">Run driver and pipeline in single process. If <span 
class="cmti-10">local </span>is specified, the process is
     executed on the local machine, for example, in the current Eclipse session. If <span 
class="cmti-10">remote </span>is specified, the jobs
     is submitted to DUCC as a <span 
class="cmti-10">manged reservation </span>and run on some (presumably larger) machine allocated by
     DUCC.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">attach</span><span 
class="cmbx-10">_console</span> </dt><dd 
class="description">If specified, redirect remote stdout and stderr to the local submitting console.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">cancel</span><span 
class="cmbx-10">_on</span><span 
class="cmbx-10">_interrupt</span> </dt><dd 
class="description">. If the job is started with <span 
class="cmsy-10">--</span>wait_for_completion, this option causes the job to be
     canceled if the submit command is terminated, e.g., with CTL-C. If <span 
class="cmsy-10">--</span>cancel_job_on_interrupt is not specified,
     the job monitor will be terminated but the job will continue to run.
     <!--l. 56--><p class="noindent" >If <span 
class="cmsy-10">--</span>wait_for_completion is not specified this option is ignored.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">classpath</span> </dt><dd 
class="description">The CLASSPATH used for the job. If specified, this is used for both the Job Driver and each Job
     Process. If not specified the CLASSPATH found by the underlying <span 
class="cmtt-10">DuccJobSubmit.main() </span>method is used.
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">classpath</span><span 
class="cmbx-10">_order [user-before-ducc </span><span 
class="cmsy-10">| </span><span 
class="cmbx-10">ducc-before-user]</span>  When DUCC deploys a process, set the user-supplied
     CLASSPATH before DUCC-supplied CLASSPATH, or the reverse. The default is ducc-before-user.
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">debug</span> </dt><dd 
class="description">Enable debugging messages. This is primarily for debugging DUCC itself.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">description [text]</span> </dt><dd 
class="description">The text is any string used to describe the job. It is displayed in the Web Server. When specified on
     a command-line the text usually must be surrounded by quotes to protect it from the shell. The default is
     &#8220;none&#8221;.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">driver</span><span 
class="cmbx-10">_debug [debug-port]</span> </dt><dd 
class="description">Append JVM debug flags to the JVM arguments to start the JobDriver in remote debug
     mode. The remote process debugger will attempt to contact the specified port.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">driver</span><span 
class="cmbx-10">_descriptor</span><span 
class="cmbx-10">_CR [descriptor.xml]</span>  </dt><dd 
class="description">This is the XML descriptor for the Collection Reader. This
     descriptor is a resource that is searched for in the filesystem or Java classpath as described in the &#x00A0;<a 
href="#x1-300003.5">notes
     below</a>.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">driver</span><span 
class="cmbx-10">_descriptor</span><span 
class="cmbx-10">_CR</span><span 
class="cmbx-10">_overrides [list]</span>  </dt><dd 
class="description">This is the Job Driver collection reader configuration overrides. They are
     specified as name/value pairs in a comma-delimited list. For example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-4">
     --driver_descriptor_CR_overrides&#x00A0;name1=value1,name2=value2...
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
     <!--l. 88--><p class="nopar" >
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">driver</span><span 
class="cmbx-10">_exception</span><span 
class="cmbx-10">_handler [classname]</span> This specifies a developer-supplied exception handler for the
     Job Driver. It must implement org.apache.uima.ducc.common.jd.plugin.IJdProcessExceptionHandler or
     extend org.apache.uima.ducc.common.jd.plugin.AbstractJdProcessExceptionHandler. A default handler is
     provided.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">driver</span><span 
class="cmbx-10">_jvm</span><span 
class="cmbx-10">_args [list]</span>  </dt><dd 
class="description">
     <!--l. 120--><p class="noindent" >This specifies extra JVM arguments to be provided to the Job Driver process. It is a blank-delimited list of strings.
     Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-5">
     --driver_jvm_args&#x00A0;-Xmx100M&#x00A0;-Xms50M
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
     <!--l. 124--><p class="nopar" >
     <!--l. 126--><p class="noindent" >Note: When used as a CLI option, the list must usually be quoted to protect it from the shell.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">environment [env vars]</span> </dt><dd 
class="description">Blank-delimited list of environment variable assignments. If specified, this is used for all
     DUCC processes in the job. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-6">
     --environment&#x00A0;TERM=xterm&#x00A0;DISPLAY=:1.0</div>
     <!--l. 133--><p class="nopar" >
     <!--l. 135--><p class="noindent" >Additional entries may be copied from the user&#8217;s environment based on the setting of
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-7">
     ducc.submit.environment.propagated</div>
     <!--l. 138--><p class="nopar" > in the global DUCC configuration ducc.properties.
     <!--l. 141--><p class="noindent" >Note: When used as a CLI option, the environment string must usually be quoted to protect it from the
     shell.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">help</span>  </dt><dd 
class="description">
     <!--l. 146--><p class="noindent" >Prints the usage text to the console.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">jvm [path-to-java]</span>  </dt><dd 
class="description">
     <!--l. 150--><p class="noindent" >States the JVM to use. If not specified, the same JVM used by the Agents is used. This is the full path to the JVM, not
     the JAVA_HOME. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-8">
     --jvm&#x00A0;/share/jdk1.6/bin/java</div>
     <!--l. 155--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">log</span><span 
class="cmbx-10">_directory [path-to-log-directory]</span>  </dt><dd 
class="description">
     <!--l. 159--><p class="noindent" >This specifies the path to the directory for the user logs. If not specified, the default is $HOME/ducc/logs.
     Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-9">
     --log_directory&#x00A0;/home/bob
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
     <!--l. 163--><p class="nopar" >
     <!--l. 165--><p class="noindent" >Within this directory DUCC creates a sub-directory for each job, using the unique numerical ID of the job. The format
     of the generated log file names as described <a 
href="#x1-920006">here</a>.
     <!--l. 169--><p class="noindent" >Note: Note that <span 
class="cmsy-10">--</span>log_directory specifies only the path to a directory where logs are to be stored. In order to manage
     multiple processes running in multiple machines, sub-directory and file names are generated by DUCC and may not be
     directly specified.
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_DD [DD descriptor]</span>
     <!--l. 177--><p class="noindent" >This specifies a UIMA Deployment Descriptor for the job processes for DD-style jobs. This is mutually exclusive with
     <span 
class="cmsy-10">--</span>process_descriptor_AE, <span 
class="cmsy-10">--</span>process_descriptor_CM, and <span 
class="cmsy-10">--</span>process_descriptor_CC. This descriptor is a
     resource that is searched for in the filesystem or Java classpath as described in the &#x00A0;<a 
href="#x1-300003.5">notes below</a>. For
     example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-10">
     --process_DD&#x00A0;/home/billy/resource/DD_foo.xml
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
     <!--l. 185--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_debug [debug-port]</span> </dt><dd 
class="description">Append JVM debug flags to the JVM arguments to start the Job Process in remote
     debug mode. The remote process will start its debugger and attempt to contact the debugger (usually Eclipse) on the
     specified port.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_deployments</span><span 
class="cmbx-10">_max [integer]</span>  </dt><dd 
class="description">
     <!--l. 195--><p class="noindent" >This specifies the maximum number of Job Processes to deploy at any given time. If not specified, DUCC will attempt
     to provide the largest number of processes within the constraints of fair_share scheduling and the amount of work
     remaining. in the job. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-11">
     --process_deployments_max&#x00A0;66
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
     <!--l. 201--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_descriptor</span><span 
class="cmbx-10">_AE [descriptor]</span>  </dt><dd 
class="description">
     <!--l. 206--><p class="noindent" >This specifies the Analysis Engine descriptor to be deployed in the Job Processes. This descriptor is a resource that is
     searched for in the filesystem or Java classpath as described in the &#x00A0;<a 
href="#x1-300003.5">notes below</a>. It is mutually exclusive with
     <span 
class="cmsy-10">--</span>process_DD For example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-12">
     --process_descriptor_AE&#x00A0;/home/billy/resource/AE_foo.xml
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
     <!--l. 212--><p class="nopar" >
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_descriptor</span><span 
class="cmbx-10">_AE</span><span 
class="cmbx-10">_overrides [list]</span>
     <!--l. 218--><p class="noindent" >This specifies AE overrides. It is a comma-delimited list of name/value pairs. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-13">
     --process_descriptor_AE_Overrides&#x00A0;name1=value1,name2=value2
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
     <!--l. 221--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_descriptor</span><span 
class="cmbx-10">_CC [descriptor]</span>  </dt><dd 
class="description">
     <!--l. 226--><p class="noindent" >This specifies the CAS Consumer descriptor to be deployed in the Job Processes. This descriptor is a resource that is
     searched for in the filesystem or Java classpath as described in the &#x00A0;<a 
href="#x1-300003.5">notes below</a>. It is mutually exclusive with
     <span 
class="cmsy-10">--</span>process_DD For example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-14">
     --process_descriptor_CC&#x00A0;/home/billy/resourceCCE_foo.xml
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
     <!--l. 232--><p class="nopar" >
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_descriptor</span><span 
class="cmbx-10">_CC</span><span 
class="cmbx-10">_overrides [list]</span>
     <!--l. 237--><p class="noindent" >This specifies CC overrides. It is a comma-delimited list of name/value pairs. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-15">
     --process_descriptor_CC_overrides&#x00A0;name1=value1,name2=value2
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
     <!--l. 240--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_descriptor</span><span 
class="cmbx-10">_CM [descriptor]</span>  </dt><dd 
class="description">
     <!--l. 245--><p class="noindent" >This specifies the CAS Multiplier descriptor to be deployed in the Job Processes. This descriptor is a resource that is
     searched for in the filesystem or Java classpath as described in the &#x00A0;<a 
href="#x1-300003.5">notes below</a>. It is mutually exclusive with
     <span 
class="cmsy-10">--</span>process_DD For example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-16">
     --process_descriptor_CM&#x00A0;/home/billy/resource/CM_foo.xml
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
     <!--l. 251--><p class="nopar" >
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_descriptor</span><span 
class="cmbx-10">_CM</span><span 
class="cmbx-10">_overrides [list]</span>
     <!--l. 256--><p class="noindent" >This specifies CM overrides. It is a comma-delimited list of name/value pairs. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-17">
     --process_descriptor_CM_overrides&#x00A0;name1=value1,name2=value2</div>
     <!--l. 259--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_failures</span><span 
class="cmbx-10">_limit [integer]</span>  </dt><dd 
class="description">
     <!--l. 264--><p class="noindent" >This specifies the maximum number of individual Job Process (JP) failures allowed before killing the job. The
     default is twenty(20). If this limit is exceeded over the lifetime of a job DUCC terminates the entire
     job.
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-18">
     --process_failures_limit&#x00A0;23</div>
     <!--l. 269--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_initialization</span><span 
class="cmbx-10">_failures</span><span 
class="cmbx-10">_cap [integer]</span>  </dt><dd 
class="description">This specifies the maximum number of failures during a
     UIMA process&#8217;s initialization phase. If the number is exceeded the system will allow processes which are
     already running to continue, but will assign no new processes to the job. The default is ninety-nine(99).
     Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-19">
     --process_initialization_failures_cap&#x00A0;62
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
     <!--l. 277--><p class="nopar" >
     <!--l. 279--><p class="noindent" >Note that the job is NOT killed if there are processes that have passed initialization and are running. If this limit is
     reached, the only action is to not start new processes for the job.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_initialization</span><span 
class="cmbx-10">_time</span><span 
class="cmbx-10">_max [integer]</span> </dt><dd 
class="description">This is the maximum time a process is allowed to remain in the
     &#8220;initializing&#8221; state, before DUCC terminates it. The error counts as an initialization error towards the initialization
     failure cap.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_jvm</span><span 
class="cmbx-10">_args [list]</span>  </dt><dd 
class="description">This specifies additional arguments to be passed to all of the job processes as a
     blank-delimited list of strings. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-20">
     --process_jvm_args&#x00A0;-Xmx400M&#x00A0;-Xms100M
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
     <!--l. 290--><p class="nopar" >
     <!--l. 292--><p class="noindent" >Note: When used as a CLI option, the arguments must usually be quoted to protect them from the
     shell.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_memory</span><span 
class="cmbx-10">_size [size]</span>  </dt><dd 
class="description">This specifies the maximum amount of RAM in GB to be allocated to each Job Process.
     This value is used by the Resource Manager to allocate resources.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_per</span><span 
class="cmbx-10">_item</span><span 
class="cmbx-10">_time</span><span 
class="cmbx-10">_max [integer]</span>  </dt><dd 
class="description">This specifies the maximum time in minutes that the Job Driver will wait
     for a Job Processes to process a CAS. If a timeout occurs the process is terminated and the CAS marked in error (not
     retried). If not specified, the default is 1 minute. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-21">
     --process_per_item_time_max&#x00A0;60
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
     <!--l. 305--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_thread</span><span 
class="cmbx-10">_count [integer]</span>  </dt><dd 
class="description">This specifies the number of threads per process to be deployed. It is used by the
     Resource Manager to determine how many processes are needed, by the Job Process wrapper to determine how many
     threads to spawn, and by the Job Driver to determine how many CASs to dispatch. If not specified, the default is 4.
     Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-22">
     --process_thread_count&#x00A0;7
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
     <!--l. 314--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">scheduling</span><span 
class="cmbx-10">_class [classname]</span>  </dt><dd 
class="description">This specifies the name of the scheduling class the RM will use to determine the
     resource allocation for each process. The names of the classes are installation dependent. If not specified, the default is
     taken from the global DUCC configuration ducc.properties. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-23">
     --scheduling_class&#x00A0;normal
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
     <!--l. 322--><p class="nopar" >
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">service</span><span 
class="cmbx-10">_dependency[list]</span> This specifies a blank-delimited list of services the job processes are dependent upon. Service
     dependencies are discussed in detail <a 
href="#x1-830005.3">here</a>. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-24">
     --service_dependency&#x00A0;UIMA-AS:Service1:tcp:host1:61616&#x00A0;UIMA-AS:Service2:tcp:host2:123</div>
     <!--l. 331--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">specification, </span><span 
class="cmsy-10">-</span><span 
class="cmbx-10">f [file]</span>  </dt><dd 
class="description">
     <!--l. 336--><p class="noindent" >All the parameters used to submit a job may be placed in a standard Java properties file. This file may then be used to
     submit the job (rather than providing all the parameters directory to submit). The leading <span 
class="cmsy-10">-- </span>is omitted from the
     keywords.
     <!--l. 340--><p class="noindent" >For example,
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-25">
     ducc_submit&#x00A0;--specification&#x00A0;job.props
     &#x00A0;<br />ducc_submit&#x00A0;-f&#x00A0;job.props</div>
     <!--l. 344--><p class="nopar" >
     <!--l. 346--><p class="noindent" >where job.props contains:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-26">
     working_directory&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;/home/bob/projects/ducc/ducc_test/test/bin
     &#x00A0;<br />process_failures_limit&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;20
     &#x00A0;<br />driver_descriptor_CR&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;org.apache.uima.ducc.test.randomsleep.FixedSleepCR
     &#x00A0;<br />environment&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;AE_INIT_TIME=10000&#x00A0;LD_LIBRARY_PATH=/a/bogus/path
     &#x00A0;<br />log_directory&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;/home/bob/ducc/logs/
     &#x00A0;<br />process_thread_count&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;1
     &#x00A0;<br />driver_descriptor_CR_overrides&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;jobfile:../simple/jobs/1.job,compression:10
     &#x00A0;<br />process_initialization_failures_cap&#x00A0;=&#x00A0;99
     &#x00A0;<br />process_per_item_time_max&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;60
     &#x00A0;<br />driver_jvm_args&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;-Xmx500M
     &#x00A0;<br />process_descriptor_AE&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;org.apache.uima.ducc.test.randomsleep.FixedSleepAE
     &#x00A0;<br />classpath&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;/home/bob/duccapps/ducky_process.jar
     &#x00A0;<br />description&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;../simple/jobs/1.job[AE]
     &#x00A0;<br />process_jvm_args&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;-Xmx100M&#x00A0;-DdefaultBrokerURL=tcp://localhost:61616
     &#x00A0;<br />scheduling_class&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;normal
     &#x00A0;<br />process_memory_size&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;15</div>
     <!--l. 364--><p class="nopar" >
     <!--l. 366--><p class="noindent" >Note that properties in a specifications file may be overridden by other command-line parameters, as discussed
     <a 
href="#x1-200003">here</a>.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">suppress</span><span 
class="cmbx-10">_console</span><span 
class="cmbx-10">_log</span> </dt><dd 
class="description">If specified, suppress creation of the log files that normally hold the redirected stdout and
     stderr.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">time-stamp</span>  </dt><dd 
class="description">
     <!--l. 374--><p class="noindent" >If specified, messages from the submit process are timestamped. This is intended primarily for use with a monitor with
     &#8211;wait_for_completion.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">wait</span><span 
class="cmbx-10">_for</span><span 
class="cmbx-10">_completion</span>  </dt><dd 
class="description">If specified, the submit command monitors the job and prints periodic state and progress
     information to the console. When the job completes, the monitor is terminated and the submit command
     returns.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">working</span><span 
class="cmbx-10">_directory</span>  </dt><dd 
class="description">This specifies the working directory to be set by the Job Driver and Job Process processes. If not
     specified, the current directory is used.</dd></dl>
<!--l. 387--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-300003.5"></a><span 
class="cmbx-10">Notes:</span></span>
<a 
 id="likesection.1"></a> When searching for UIMA XML resource files such as descriptors, DUCC searches either the filesystem or Java classpath
according to the following rules:
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">If the resource ends in .xml it is assumed the resource is a file in the filesystem and the path is either an
     absolute path or a path relative to the specified working directory.
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">If the resource does not end in .xml, it is assumed the resource is in the Java classpath. DUCC creates a
     resource name by replacing the &#8221;.&#8221; separators with &#8221;/&#8221; and appending &#8221;.xml&#8221;.</dd></dl>
<!--l. 22--><p class="noindent" ><a name='DUCC_CLI_CANCEL'></a>
                                                                                                
                                                                                                
<h3 class="sectionHead"><span class="titlemark">3.6   </span> <a 
 id="x1-310003.6"></a>ducc_cancel</h3>
<!--l. 27--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-320003.6"></a><span 
class="cmbx-10">Description:</span></span>
The cancel CLI is used to cancel a job that has previously been submitted but which has not yet completed.
<!--l. 31--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-330003.6"></a><span 
class="cmbx-10">Usage:</span></span>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Script wrapper</span> </dt><dd 
class="description">$DUCC_HOME/bin/ducc_cancel <span 
class="cmti-10">options</span>
     </dd><dt class="description">
<span 
class="cmbx-10">Java Main</span> </dt><dd 
class="description">java -cp $DUCC_HOME/lib/uima-ducc-cli.jar org.apache.uima.ducc.cli.DuccJobCancel <span 
class="cmti-10">options</span></dd></dl>
<!--l. 37--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-340003.6"></a><span 
class="cmbx-10">Options:</span></span>
     <dl class="description"><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">debug</span>  </dt><dd 
class="description">Prints   internal   debugging   information,   intended   for   DUCC   developers   or   extended   problem
     determination.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">id [jobid]</span> </dt><dd 
class="description">The ID is the id of the job to cancel.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">reason [quoted string]</span> </dt><dd 
class="description">Optional. This specifies the reason the job is canceled for display in the web server. Note that
     the shell requires a quoted string. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-27">
     ducc_cancel&#x00A0;--id&#x00A0;12&#x00A0;--reason&#x00A0;"This&#x00A0;is&#x00A0;a&#x00A0;pretty&#x00A0;good&#x00A0;reason."</div>
     <!--l. 48--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">dpid [pid]</span> </dt><dd 
class="description">If specified only this DUCC process will be canceled. If not specified, then entire job will be canceled. The <span 
class="cmti-10">pid</span>
     is the DUCC-assigned process ID of the process to cancel. This is the ID in the first column of the Web Server&#8217;s job
     details page, under the column labeled &#8220;Id&#8221;.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">help</span> </dt><dd 
class="description">Prints the usage text to the console.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">role</span><span 
class="cmbx-10">_administrator</span> </dt><dd 
class="description">The command is being issued in the role of a DUCC administrator. If the user is not also a
     registered administrator this flag is ignored. (This helps to protect administrators from accidentally canceling jobs they
     do not own.)</dd></dl>
<!--l. 61--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-350003.6"></a><span 
class="cmbx-10">Notes:</span></span>
None.
<!--l. 22--><p class="noindent" ><a name='DUCC_CLI_RESERVE'></a>
<h3 class="sectionHead"><span class="titlemark">3.7   </span> <a 
 id="x1-360003.7"></a>ducc_reserve</h3>
<!--l. 26--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-370003.7"></a><span 
class="cmbx-10">Description:</span></span>
The reserve CLI is used request a reservation of resources. Reservations can be for entire machines or partial machines, based
on memory requirements. All reservations are persistent: the resources remain dedicated to the requestor until explicitly
returned. All reservations are performeed on an &#8221;all-or-nothing&#8221; basis: either the entire set of requested resources is reserved,
or the reservation request fails.
<!--l. 33--><p class="noindent" >All forms of ducc_reserve block until the reservation is complete (or fails) at which point the DUCC ID of the reservation and
the names of the reserved nodes are printed to the console and the command returns.
<!--l. 37--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-380003.7"></a><span 
class="cmbx-10">Usage:</span></span>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Script wrapper</span> </dt><dd 
class="description">$DUCC_HOME/bin/ducc_reserve <span 
class="cmti-10">options</span>
     </dd><dt class="description">
<span 
class="cmbx-10">Java Main</span> </dt><dd 
class="description">java    -cp    $DUCC_HOME/lib/uima-ducc-cli.jar    org.apache.uima.ducc.cli.DuccReservationSubmit
     <span 
class="cmti-10">options</span></dd></dl>
                                                                                                
                                                                                                
<!--l. 43--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-390003.7"></a><span 
class="cmbx-10">Options:</span></span>
     <dl class="description"><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">debug</span>  </dt><dd 
class="description">Prints   internal   debugging   information,   intended   for   DUCC   developers   or   extended   problem
     determination.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">description [text]</span> </dt><dd 
class="description">The text is any string used to describe the reservation. It is displayed in the Web Server.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">help</span>  </dt><dd 
class="description">Prints the usage text to the console.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">instance</span><span 
class="cmbx-10">_memory</span><span 
class="cmbx-10">_size [integer]</span> </dt><dd 
class="description">This specifies the amount of memory the reserved machine must support.
     For full machine reservations, this is the total memory on the machine. For partial reservations, the machine
     may have more memory, but not less than is specified.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">number</span><span 
class="cmbx-10">_of</span><span 
class="cmbx-10">_instances [integer]</span> </dt><dd 
class="description">This specifies the number of full or partial machine reservations to schedule.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">scheduling</span><span 
class="cmbx-10">_class [classname]</span> </dt><dd 
class="description">This specifies the name of the scheuling class the RM will use to determine the
     resource allocation for each process. The default DUCC distribution provides class &#8221;reserve&#8221; for full machine
     reservations, and &#8221;fixed&#8221; for partial machine reservations.
     </dd><dt class="description">
<span 
class="cmsy-10">-</span><span 
class="cmbx-10">f, </span><span 
class="cmsy-10">--</span><span 
class="cmbx-10">specification [file]</span> </dt><dd 
class="description">All the parameters used to request a reservation may be placed in a standard Java
     properties file. This file may then be used to submit the request (rather than providing all the parameters
     directory to submit).
     </dd></dl>
<!--l. 76--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-400003.7"></a><span 
class="cmbx-10">Notes:</span></span>
Reservations may be for full machines, or partial machines based on memory. The mechanism for distinguishing which type of
reservation is the job class. A job class implementing the RESERVE scheduling policy results in a full machine being
reserved. A job clas simplementing the FIXED scheduling policy results in a partial machine being reserved. The default
DUCC distribution configures class <span 
class="cmti-10">reserve </span>for full machine reservations, and class <span 
class="cmti-10">fixed </span>for partial machine
reservations.
<!--l. 22--><p class="noindent" ><a name='DUCC_CLI_UNRESERVE'></a>
<h3 class="sectionHead"><span class="titlemark">3.8   </span> <a 
 id="x1-410003.8"></a>ducc_unreserve</h3>
<!--l. 27--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-420003.8"></a><span 
class="cmbx-10">Description:</span></span>
The unreserve CLI is used to release reserved resources.
                                                                                                
                                                                                                
<!--l. 30--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-430003.8"></a><span 
class="cmbx-10">Usage:</span></span>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Script wrapper</span> </dt><dd 
class="description">$DUCC_HOME/bin/ducc_unreserve <span 
class="cmti-10">options</span>
     </dd><dt class="description">
<span 
class="cmbx-10">Java Main</span> </dt><dd 
class="description">java -cp $DUCC_HOME/lib/uima-ducc-cli.jar org.apache.uima.ducc.cli.DuccReservationCancel <span 
class="cmti-10">options</span></dd></dl>
<!--l. 36--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-440003.8"></a><span 
class="cmbx-10">Options:</span></span>
     <dl class="description"><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">debug</span>  </dt><dd 
class="description">Prints   internal   debugging   information,   intended   for   DUCC   developers   or   extended   problem
     determination.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">id [jobid]</span> </dt><dd 
class="description">The ID is the id of the reservation to cancel.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">help</span> </dt><dd 
class="description">Prints the usage text to the console.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">role</span><span 
class="cmbx-10">_administrator</span> </dt><dd 
class="description">The command is being issued in the role of a DUCC administrator. If the user is not also a
     registered administrator this flag is ignored. (This helps to protect administrators from inadvertently canceling
     jobs they do not own.)</dd></dl>
<!--l. 49--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-450003.8"></a><span 
class="cmbx-10">Notes:</span></span>
None.
<!--l. 19--><p class="noindent" >2y<a name='DUCC_CLI_PROCESS_SUBMIT'></a>
<h3 class="sectionHead"><span class="titlemark">3.9   </span> <a 
 id="x1-460003.9"></a>ducc_process_submit</h3>
<!--l. 26--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-470003.9"></a><span 
class="cmbx-10">Description:</span></span>
Use <span 
class="cmti-10">ducc</span><span 
class="cmti-10">_process</span><span 
class="cmti-10">_submit </span>to submit a Managed Reservation, also known as an <span 
class="cmti-10">arbitrary process </span>to DUCC. The intention of
this function is an alternative to utilities such as <span 
class="cmti-10">ssh</span>, in order to allow the spawned processes to be fully managed by DUCC.
This allows the DUCC scheduler to allocate the necessary resources (and prevent over-allocation), and the DUCC run-time
environment to manage process lifetime.
<!--l. 34--><p class="noindent" >If <span 
class="cmti-10">attach</span><span 
class="cmti-10">_console </span>is specified, Stdin, Stderr, and Stdout of the remote process are redirected to the submitting
console. It is thus possible to run interactive sessions with remote processes where the resources are managed by
DUCC.
                                                                                                
                                                                                                
<!--l. 38--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-480003.9"></a><span 
class="cmbx-10">Usage:</span></span>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Script wrapper</span> </dt><dd 
class="description">$DUCC_HOME/bin/ducc_process_submit <span 
class="cmti-10">options</span>
     </dd><dt class="description">
<span 
class="cmbx-10">Java Main</span> </dt><dd 
class="description">java -cp $DUCC_HOME/lib/uima-ducc-cli.jar<br 
class="newline" />org.apache.uima.ducc.cli.DuccManagedReservationSubmit <span 
class="cmti-10">options</span></dd></dl>
<!--l. 44--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-490003.9"></a><span 
class="cmbx-10">Options:</span></span>
     <dl class="description"><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">attach</span><span 
class="cmbx-10">_console</span> </dt><dd 
class="description">If specified, remote process stdout and stderr are redirected to, and stdin redirected from, the
     local submitting console.
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">cancel</span><span 
class="cmbx-10">_on</span><span 
class="cmbx-10">_interrupt</span>  Cancel managed reservation on interrupt (Ctrl-C). If running with <span 
class="cmsy-10">--</span><span 
class="cmti-10">wait</span><span 
class="cmti-10">_for</span><span 
class="cmti-10">_completion </span>and
     this flag is specified, terminating the submit process will result in the remote process being terminated.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">description [text]</span> </dt><dd 
class="description">The text is any string used to describe the process. It is displayed in the Web Server.
     When specified on a command-line the text usually must be surrounded by quotes to protect it from the
     shell.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">debug</span>  </dt><dd 
class="description">Prints internal debugging information, intended for DUCC developers or extended problem determination.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">environment [env vars]</span> </dt><dd 
class="description">Blank-delimited list of environment variable assignments for the process. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-28">
     --environment&#x00A0;TERM=xterm&#x00A0;DISPLAY=:1.0
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
     <!--l. 67--><p class="nopar" >
     <!--l. 70--><p class="noindent" >Additional entries may be copied from the user&#8217;s environment based on the setting of ducc.submit.environment.propagated
     in the global DUCC configuration ducc.properties.
     <!--l. 74--><p class="noindent" >Note: When used as a CLI option, the environment string must usually be quoted to protect it from the
     shell.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">help</span> </dt><dd 
class="description">Prints the usage text to the console.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">log</span><span 
class="cmbx-10">_directory [path-to-log directory]</span>  </dt><dd 
class="description">
     <!--l. 81--><p class="noindent" >This specifies the path to the directory for the user logs. If not specified, the default is $HOME/ducc/logs.
     Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-29">
     --log_directory&#x00A0;/home/bob</div>
     <!--l. 85--><p class="nopar" >
     <!--l. 87--><p class="noindent" >Within this directory DUCC creates a sub-directory for each process, using the numerical ID of the job. The format of
     the generated log file names as described <a 
href="#x1-920006">here</a>.
     <!--l. 91--><p class="noindent" >Note: Note that <span 
class="cmsy-10">--</span>log_directory specifies only the path to a directory where logs are to be stored. In order to manage
     multiple processes running in multiple machines DUCC, sub-directory and file names are generated by DUCC and may
     not be directly specified.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_executable [program name]</span> </dt><dd 
class="description">This is the full path to a program to be executed.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_executable</span><span 
class="cmbx-10">_args [argument list]</span> </dt><dd 
class="description">This is a list of arguments for <span 
class="cmti-10">process</span><span 
class="cmti-10">_executable</span>, if any.
     When specified on a command-line the text usually must be surrounded by quotes to protect it from the
     shell.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_memory</span><span 
class="cmbx-10">_size [size]</span>  </dt><dd 
class="description">This specifies the maximum amount of RAM in GB to be allocated to each process. This
     value is used by the Resource Manager to allocate resources. if this amount is exceeded by a process the Agent
     terminates the process with a ShareSizeExceeded message.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">scheduling</span><span 
class="cmbx-10">_class [classname]</span>  </dt><dd 
class="description">This specifies the name of the scheduling class the RM will use to determine the
     resource allocation for each process. The names of the classes are installation dependent. If not specified, the default is
     taken from the global DUCC configuration ducc.properties.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">specification, </span><span 
class="cmsy-10">-</span><span 
class="cmbx-10">f [file]</span>  </dt><dd 
class="description">All the parameters used to submit a process may be placed in a standard Java properties file.
     This file may then be used to submit the process (rather than providing all the parameters directory to
     submit).
     <!--l. 117--><p class="noindent" >For example,
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-30">
     ducc_process_submit&#x00A0;--specification&#x00A0;job.props
     &#x00A0;<br />ducc_process_submit&#x00A0;-f&#x00A0;job.props</div>
     <!--l. 121--><p class="nopar" >
     <!--l. 123--><p class="noindent" >where job.props contains:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-31">
     working_directory&#x00A0;&#x00A0;&#x00A0;=&#x00A0;/home/bob/projects
     &#x00A0;<br />environment&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;AE_INIT_TIME=10000&#x00A0;LD_LIBRARY_PATH=/a/bogus/path
     &#x00A0;<br />log_directory&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;/home/bob/ducc/logs/
     &#x00A0;<br />description&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;Simple&#x00A0;Process
     &#x00A0;<br />scheduling_class&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;fixed
     &#x00A0;<br />process_memory_size&#x00A0;=&#x00A0;15</div>
     <!--l. 131--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">suppress</span><span 
class="cmbx-10">_console</span><span 
class="cmbx-10">_log</span> </dt><dd 
class="description">If specified, suppress creation of the log files that normally hold the redirected stdout and
     stderr.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">wait</span><span 
class="cmbx-10">_for</span><span 
class="cmbx-10">_completion</span>  </dt><dd 
class="description">If specified, the submit command does not return control to the console immediately, and
     instead monitors the DUCC state traffic and prints information about the process as it progresses.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">working</span><span 
class="cmbx-10">_directory</span>  </dt><dd 
class="description">This specifies the working directory to be set by the Job Driver and Job Process processes. If not
     specified, the current directory is used.
     </dd></dl>
<!--l. 145--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-500003.9"></a><span 
class="cmbx-10">Notes:</span></span>
<a name='DUCC_CLI_PROCESS_CANCEL'></a>
<h3 class="sectionHead"><span class="titlemark">3.10   </span> <a 
 id="x1-510003.10"></a>ducc_process_cancel</h3>
<!--l. 26--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-520003.10"></a><span 
class="cmbx-10">Description:</span></span>
The cancel CLI is used to cancel a process that has previously been submitted but which has not yet completed.
<!--l. 30--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-530003.10"></a><span 
class="cmbx-10">Usage:</span></span>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Script wrapper</span> </dt><dd 
class="description">$DUCC_HOME/bin/ducc_process_cancel <span 
class="cmti-10">options</span>
     </dd><dt class="description">
<span 
class="cmbx-10">Java Main</span> </dt><dd 
class="description">java -cp $DUCC_HOME/lib/uima-ducc-cli.jar<br 
class="newline" />org.apache.uima.ducc.cli.DuccManagedReservationCancel <span 
class="cmti-10">options</span></dd></dl>
                                                                                                
                                                                                                
<!--l. 36--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-540003.10"></a><span 
class="cmbx-10">Options:</span></span>
     <dl class="description"><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">debug</span>  </dt><dd 
class="description">Prints   internal   debugging   information,   intended   for   DUCC   developers   or   extended   problem
     determination.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">id [jobid]</span> </dt><dd 
class="description">The DUCC ID is the id of the process to cancel.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">help</span> </dt><dd 
class="description">Prints the usage text to the console.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">reason</span> </dt><dd 
class="description">Optional. This specifies the reason the process is canceled, for display in the web server.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">role</span><span 
class="cmbx-10">_administrator</span> </dt><dd 
class="description">The command is being issued in the role of a DUCC administrator. If the user is not also a
     registered administrator this flag is ignored. (This helps to protect administrators from inadvertently canceling
     work they do not own.)</dd></dl>
<!--l. 51--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-550003.10"></a><span 
class="cmbx-10">Notes:</span></span>
None.
<!--l. 22--><p class="noindent" ><a name='DUCC_CLI_SERVICES'></a>
<h3 class="sectionHead"><span class="titlemark">3.11   </span> <a 
 id="x1-560003.11"></a>ducc_services</h3>
<!--l. 27--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-570003.11"></a><span 
class="cmbx-10">Description:</span></span>
The ducc_services CLI is used to manage service registration. It has a number of functions as listed below.
<!--l. 32--><p class="noindent" >The functions include:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Register</span> </dt><dd 
class="description">This registers a service with the Service Manager by saving a service specification in the Service Manager&#8217;s
     registration area. The specification is retained by DUCC until it is unregistered.
     <!--l. 38--><p class="noindent" >The registration consists primarily of a service specification, similar to a job specification. This specification is
     used when the Service Manager needs to start a service instance. A second properties file, the <span 
class="cmti-10">meta properties</span>
     for the service, contains additional state and management properties. The registered properties for a service
     are made available for viewing from the DUCC Web Server&#8217;s <a 
href="#x1-1150007.7">service details</a> page.
     </dd><dt class="description">
<span 
class="cmbx-10">Unregister</span> </dt><dd 
class="description">This unregisters a service with the Service Manager. When a service is unregistered DUCC optionally
     stops the service instance, if any, and discard the saved specification.
     </dd><dt class="description">
<span 
class="cmbx-10">Start</span> </dt><dd 
class="description">The start function instructs DUCC to allocate resources for a service and to start it in those resources. The
     service remains running until explicitly stopped. DUCC will attempt to keep the service instances running if
     they should fail. The start function is also used to increase the number of running service instances if desired.
     </dd><dt class="description">
<span 
class="cmbx-10">Stop</span> </dt><dd 
class="description">The stop function stops some or all service instances.
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">Query</span> </dt><dd 
class="description">The query function returns detailed information about all known services, both registered and otherwise.
     </dd><dt class="description">
<span 
class="cmbx-10">Modify</span> </dt><dd 
class="description">The modify function allows some aspects of a registered service to be updated without reregistereing the
     service. It optionally alters the running service instances to conform with the updates.</dd></dl>
<!--l. 66--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-580003.11"></a><span 
class="cmbx-10">Usage:</span></span>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Script wrapper</span> </dt><dd 
class="description">$DUCC_HOME/bin/ducc_services <span 
class="cmti-10">options</span>
     </dd><dt class="description">
<span 
class="cmbx-10">Java Main</span> </dt><dd 
class="description">java -cp $DUCC_HOME/lib/uima-ducc-cli.jar org.apache.uima.ducc.cli.DuccServiceApi <span 
class="cmti-10">options</span></dd></dl>
The ducc_services CLI requires one of the verbs listed above as the first argument. Other arguments are determined by the
verb.
<!--l. 75--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-590003.11"></a><span 
class="cmbx-10">Options:</span></span>
<!--l. 77--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">3.11.1   </span> <a 
 id="x1-600003.11.1"></a>Common Options</h4>
<!--l. 78--><p class="noindent" >These options are common to all of the service verbs:
     <dl class="description"><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">debug</span>  </dt><dd 
class="description">Prints   internal   debugging   information,   intended   for   DUCC   developers   or   extended   problem
     determination.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">help</span> </dt><dd 
class="description">Prints the usage text to the console.</dd></dl>
<!--l. 86--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">3.11.2   </span> <a 
 id="x1-610003.11.2"></a>ducc_services &#8211;register Options</h4>
<!--l. 88--><p class="noindent" >The <span 
class="cmti-10">register </span>function submits a service specification to DUCC. DUCC stores this information until it is <span 
class="cmti-10">unregistered</span>. Once
registered, a service may be started, stopped, etc.
<!--l. 92--><p class="noindent" >The <span 
class="cmti-10">register </span>options are logically divided into two classes:
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">&#8220;Meta&#8221; options which define how the Service Manager manages the service, and
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">Options which describe the service itself. These optinos are analagous to those used to submit a job.</dd></dl>
<!--l. 99--><p class="noindent" >The &#8220;meta&#8221; options include:
     <dl class="description"><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">register [specification file] [options]</span> </dt><dd 
class="description">The specification file is optional.
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">autostart [true or false]</span> </dt><dd 
class="description">This  indicates  whether  to  register  the  service  as  an  autostarted  service.  If  not
     specified, the default is <span 
class="cmti-10">false</span>.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">instances [n]</span> </dt><dd 
class="description">This specifies the number of instances to start when the service is started. If not specified, the
     default is 1.
     </dd></dl>
<!--l. 111--><p class="noindent" >The options describing the service include:
     <dl class="description"><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">classpath</span> </dt><dd 
class="description">The CLASSPATH used for the service, if the service is a <a 
href="#x1-820005.2">UIMA-AS services</a>. If not specified, the
     CLASSPATH used by the <span 
class="cmti-10">ducc</span><span 
class="cmti-10">_services </span>command is used.
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">classpath</span><span 
class="cmbx-10">_order [user-before-ducc </span><span 
class="cmsy-10">| </span><span 
class="cmbx-10">ducc-before-user]</span>  When DUCC deploys a service, set the user-supplied
     CLASSPATH before DUCC-supplied CLASSPATH, or the reverse. The default is ducc-before-user. This is only valid
     for <a 
href="#x1-820005.2">UIMA-AS services</a>.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">debug</span>  </dt><dd 
class="description">Enable debugging messages. This is primarily for debugging DUCC itself.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">description [text]</span> </dt><dd 
class="description">The text is any quoted string used to describe the job. It is displayed in the Web
     Server.
     <!--l. 131--><p class="noindent" >Note: When used as a CLI option, the description string must usually be quoted to protect it from the
     shell.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">environment [env vars]</span> </dt><dd 
class="description">Blank-delimited list of environment variable assignments for the service. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-32">
     --environment&#x00A0;TERM=xterm&#x00A0;DISPLAY=:1.0
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
     <!--l. 138--><p class="nopar" >
     <!--l. 141--><p class="noindent" >Additional entries may be copied from the user&#8217;s environment based on the setting of ducc.submit.environment.propagated
     in the global DUCC configuration ducc.properties.
     <!--l. 145--><p class="noindent" >Note: When used as a CLI option, the environment string must usually be quoted to protect it from the
     shell.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">help</span>  </dt><dd 
class="description">This prints the usage text to the console.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">jvm [path-to-java]</span> </dt><dd 
class="description">This specifies the JVM to use for <a 
href="#x1-820005.2">UIMA-AS services</a>. If not specified, the same JVM used by the
     Agents is used.
     <!--l. 154--><p class="noindent" >Note: The path must be the full path the the Java executable (not simply the JAVA_HOME environment variable.).
     Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-33">
     --jvm&#x00A0;/share/jdk1.6/bin/java</div>
     <!--l. 158--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_jvm</span><span 
class="cmbx-10">_args [list]</span>  </dt><dd 
class="description">This specifes extra JVM arguments to be provided to the server process for <a 
href="#x1-820005.2">UIMA-AS
     services</a>. It is a blank-delimited list of strings. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-34">
     --process_jvm_args&#x00A0;-Xmx100M&#x00A0;-Xms50M</div>
     <!--l. 167--><p class="nopar" >
     <!--l. 169--><p class="noindent" >Note: When used as a CLI option, the argument string must usually be quoted to protect it from the
     shell.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">log</span><span 
class="cmbx-10">_directory [path-to-log directory]</span> </dt><dd 
class="description">This specifies the path to the directory for the individual service instance logs.
     If not specified, the default is $HOME/ducc/logs. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-35">
     --log_directory&#x00A0;/home/bob</div>
     <!--l. 176--><p class="nopar" >
     <!--l. 178--><p class="noindent" >Within this directory DUCC creates a subdirectory for each job, using the numerical ID of the job. The format of the
     generated log file names as described <a 
href="#x1-920006">here</a>.
     <!--l. 182--><p class="noindent" >Note: Note that <span 
class="cmsy-10">--</span>log_directory specifies only the path to a directory where logs are to be stored. In order to manage
     multiple processes running in multiple machines DUCC, sub-directory and file names are generated by DUCC and may
     not be directly specified.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_DD [DD descriptor]</span> </dt><dd 
class="description">This specifies the UIMA Deployment Descriptor for <a 
href="#x1-820005.2">UIMA-AS services</a>.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_executable [program-name]</span> </dt><dd 
class="description">For <a 
href="#x1-820005.2">CUSTOM services</a>, this specifies the full path of the program to
     execute.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_executable</span><span 
class="cmbx-10">_args [list-of-arguments]</span> </dt><dd 
class="description">For <a 
href="#x1-820005.2">CUSTOM services</a>, this specifies the program arguments, if
     any.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">process</span><span 
class="cmbx-10">_memory</span><span 
class="cmbx-10">_size [size]</span> </dt><dd 
class="description">This specifies the maximum amount of RAM in GB to be allocated to each Job Process.
     This value is used by the Resource Manager to allocate resources.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">instance</span><span 
class="cmbx-10">_failures</span><span 
class="cmbx-10">_limit [integer]</span> </dt><dd 
class="description">This specifies the maximum number of consecutive individual service instance
     failures that are to be tolerated before stopping the service. The default is five (5). If the instance is successfully
     restarted, the count is reset to zero (0), so that the occasional process failure does not cause the entire service to be
     terminated.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">scheduling</span><span 
class="cmbx-10">_class [classname]</span> </dt><dd 
class="description">This specifies the name of the scheuling class the RM will use to determine the resource
     allocation for each process. The names of the classes are installation dependent. If not specified, the default is taken
     from the global DUCC configuration <a 
href="#x1-17800012.2">ducc.properties.</a>
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">service</span><span 
class="cmbx-10">_dependency[list]</span> </dt><dd 
class="description">This specifies a blank-delimited list of services the job processes are dependent upon. Service
     dependencies are discussed in detail <a 
href="#x1-830005.3">here</a>. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-36">
     --service_dependency&#x00A0;UIMA-AS:Service1:tcp:node682:61616&#x00A0;UIMA-AS:OtherSvc:tcp:node123:123</div>
     <!--l. 216--><p class="nopar" >
     <!--l. 218--><p class="noindent" >Note: When used as a CLI option, the list must usually be quoted to protect it from the shell.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">service</span><span 
class="cmbx-10">_linger [milliseconds]</span> </dt><dd 
class="description">This is the time in milliseconds to wait after the last referring job or service exits before
     stopping a non-autostarted service.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">service</span><span 
class="cmbx-10">_ping</span><span 
class="cmbx-10">_arguments [argument-string]</span> </dt><dd 
class="description">This is any arbitrary string that is passed to the <span 
class="cmti-10">init() </span>method of the
     service pinger. The contents of the string is entirely a function of the specifici service. If not specified, a <span 
class="cmti-10">null </span>is passed
     in.
     <!--l. 230--><p class="noindent" >Note: When used as a CLI option, the string must usually be quoted to protect it from the shell, if it contains
     blanks.
     <!--l. 233--><p class="noindent" >The build-in default UIMA-AS pinger supports an argument string of the following form (with NO embedded
     blanks):
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-37">
     &#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;queue_threshold=nn,window=mm,broker_jmx_port=pppp,meta_timeout=tttt</div>
     <!--l. 237--><p class="nopar" >
     <!--l. 239--><p class="noindent" >The keywords in the string have the following meaning:
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">queue</span><span 
class="cmbx-10">_threshold=nn</span> </dt><dd 
class="description">If the depth of the ActiveMQ queue for the service exceeds this value for some period
         of time, the health of the service is marked &#8220;poor&#8221;. If omitted, the value is 0, and no quality measurement
         is made.
         </dd><dt class="description">
     <span 
class="cmbx-10">window=ww</span> </dt><dd 
class="description">This defines a &#8220;window&#8221; over which the queue threshold is measured. the value is the number of
         consecutive measurements over which the queue depth must exceed the threshold. If omitted, the window
         size is 0.
         </dd><dt class="description">
     <span 
class="cmbx-10">broker</span><span 
class="cmbx-10">_jmx</span><span 
class="cmbx-10">_port=pppp</span> </dt><dd 
class="description">This is the JMX port for the service&#8217;s broker. If not specified, the default of 1099
         is used. This is used to gather ActiveMQ statistics for the service.
         </dd><dt class="description">
     <span 
class="cmbx-10">meta</span><span 
class="cmbx-10">_timeout=tttt</span> </dt><dd 
class="description">This is the time, in milliseconds, to wait for a response to UIMA-AS <span 
class="cmti-10">get-meta</span>. If not
         specified, the default is 5000 milliseconds.</dd></dl>
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">service</span><span 
class="cmbx-10">_ping</span><span 
class="cmbx-10">_class [classname]</span> </dt><dd 
class="description">This is the Java class used to ping a service.
     <!--l. 256--><p class="noindent" >This parameter is required for CUSTOM services.
     <!--l. 258--><p class="noindent" >This parameter may be specified for UIMA-AS services; however, DUCC supplies a default pinger for UIMA-AS
     services.
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">service</span><span 
class="cmbx-10">_ping</span><span 
class="cmbx-10">_classpath [classpath]</span> If <span 
class="cmti-10">service</span><span 
class="cmti-10">_ping</span><span 
class="cmti-10">_class </span>is specified, this is the classpath containing
     service_custom_ping class and dependencies. If not specified, the Agent&#8217;s classpath is used (which will generally be
     incorrect.)
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">service</span><span 
class="cmbx-10">_ping</span><span 
class="cmbx-10">_dolog [boolean]</span> </dt><dd 
class="description">If specified, write pinger stdout and stderr messages to a log, else suppress the log. See
     <a 
href="#x1-840005.4">Service Pingers</a> for details.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">service</span><span 
class="cmbx-10">_ping</span><span 
class="cmbx-10">_jvm</span><span 
class="cmbx-10">_args [string]</span> </dt><dd 
class="description">If <span 
class="cmti-10">service</span><span 
class="cmti-10">_ping</span><span 
class="cmti-10">_class </span>is specified, these are the arguments to pass to jvm when
     running the pinger. The arguments are specified as a blank-delimited list of strings. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-38">
     --service_ping_jvm_args&#x00A0;-Xmx400M&#x00A0;-Xms100M</div>
     <!--l. 277--><p class="nopar" >
     <!--l. 279--><p class="noindent" >Note: When used as a CLI option, the arguments must usually be quoted to protect them from the
     shell.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">service</span><span 
class="cmbx-10">_ping</span><span 
class="cmbx-10">_timeout [time-in-ms]</span> </dt><dd 
class="description">This is the time in milliseconds to wait for a ping to the service. If the timer
     expires without a response the ping is &#8220;failed&#8221;. After a certain number of consecutive failed pings, the service is
     considered &#8220;down.&#8221; See <a 
href="#x1-840005.4">Service Pingers</a> for more details.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">service</span><span 
class="cmbx-10">_request</span><span 
class="cmbx-10">_endpoint [string]</span> </dt><dd 
class="description">This specifies the expected service id.
     <!--l. 289--><p class="noindent" >This string is optional for UIMA-AS services; if specified, however, it must be of the form <span 
class="cmtt-10">UIMA-AS:queue:broker-url</span>,
     and both the queue and broker must match those specified in the service DD specifier.
     <!--l. 294--><p class="noindent" >If the service is CUSTOM, the endpoint is required, and must be of the form <span 
class="cmtt-10">CUSTOM:string </span>where the contents of the
     string are determined by the service.
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">specification, </span><span 
class="cmsy-10">-</span><span 
class="cmbx-10">f [file]</span> </dt><dd 
class="description">All the parameters used to register a service may be placed in a standard Java properties file.
     This file may then be used to register the service (rather than providing all the parameters directly). For
     example,
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-39">
     ducc_services&#x00A0;--register&#x00A0;svc.props</div>
     <!--l. 304--><p class="nopar" >
     <!--l. 306--><p class="noindent" >where the svc.props contains:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-40">
     environment&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;AE_INIT_TIME=5000&#x00A0;AE_INIT_RANGE=1000&#x00A0;INIT_ERROR=0
     &#x00A0;<br />description&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;Test&#x00A0;Service&#x00A0;3
     &#x00A0;<br />process_jvm_args&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;-DdefaultBrokerURL=tcp://agent86:61616
     &#x00A0;<br />classpath&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;/home/bob/lib/app.jar
     &#x00A0;<br />process_memory_size&#x00A0;=&#x00A0;15
     &#x00A0;<br />working_directory&#x00A0;&#x00A0;&#x00A0;=&#x00A0;/home/bob/services
     &#x00A0;<br />process_DD&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;/home/bob/services/service.xml
     &#x00A0;<br />scheduling_class&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;fixed
     &#x00A0;<br />service_dependency&#x00A0;&#x00A0;=&#x00A0;&#x00A0;UIMA-AS:FixedSleepAE_4:tcp://agent86:61616</div>
     <!--l. 318--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">working</span><span 
class="cmbx-10">_directory [directory-name]</span> </dt><dd 
class="description">This specifies the working directory to be set for the service processes. If not
     specified, the current directory is used.</dd></dl>
<!--l. 326--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">3.11.3   </span> <a 
 id="x1-620003.11.3"></a>ducc_services &#8211;start Options</h4>
<!--l. 328--><p class="noindent" >The start function instructs DUCC to allocate resources for a service and to start it in those resources. The service remains
running until explicitly stopped. DUCC will attempt to keep the service instances running if they should fail. The start
function is also used to increase the number of running service instances if desired.
     <dl class="description"><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">start [service-id or endpoint]</span> </dt><dd 
class="description">This indicates that a service is to be started. The service id is either the numeric ID
     assigned by DUCC when the service is registered, or the service endpoint string. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-41">
     ducc_services&#x00A0;--start&#x00A0;23
     &#x00A0;<br />ducc_services&#x00A0;--start&#x00A0;UIMA-AS:Service23:tcp://bob.com:12345</div>
     <!--l. 340--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">instances [integer]</span> </dt><dd 
class="description">This is the number of instances to start. If omitted, sufficient instances to match the registered
     number are started. If more than the registered number of instances is running this command has no
     effect.
     <!--l. 346--><p class="noindent" >If the number of instances is specified, the number is added to the currently number of running instances. Thus if five
     instances are running and
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-42">
     &#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;ducc_services&#x00A0;--start&#x00A0;33&#x00A0;--instances&#x00A0;5</div>
     <!--l. 350--><p class="nopar" > is issued, five more service instances are started for service 33 for a total of ten, regardless of the number specified in
     the registration. The registry is updated if the <span 
class="cmti-10">&#8211;update </span>option is also specified. Examples:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-43">
     ducc_services&#x00A0;--start&#x00A0;23&#x00A0;--intances&#x00A0;5
     &#x00A0;<br />ducc_services&#x00A0;--start&#x00A0;UIMA-AS:Service23:tcp://bob.com:12345&#x00A0;--instances&#x00A0;3&#x00A0;--update</div>
     <!--l. 357--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">update</span> </dt><dd 
class="description">If specified, the registry is updated to the total number of started instances. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-44">
     ducc_services&#x00A0;--start&#x00A0;UIMA-AS:Service23:tcp://bob.com:12345&#x00A0;--instances&#x00A0;3&#x00A0;--update</div>
     <!--l. 363--><p class="nopar" ></dd></dl>
<!--l. 366--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">3.11.4   </span> <a 
 id="x1-630003.11.4"></a>ducc_services &#8211;stop Options</h4>
<!--l. 367--><p class="noindent" >The stop function instructs DUCC to stop some number of service instances. If no specific number is specified, all instances
are stopped.
     <dl class="description"><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">stop [service-id or endpoint]</span> </dt><dd 
class="description">This specifies the service to be stopped. The service id is either the numeric ID assigned
     by DUCC when the service is registered, or the service endpoint string. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-45">
     ducc_services&#x00A0;--stop&#x00A0;23
     &#x00A0;<br />ducc_services&#x00A0;--stop&#x00A0;UIMA-AS:Service23:tcp://bob.com:12345</div>
     <!--l. 378--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">instances [integer]</span> </dt><dd 
class="description">This is the number of instances to stop. If omitted, all instances for the service are stopped. If the
     number of instances is specified, then only the specified number of instances are stopped. Thus if ten instances are
     running for a service with numeric id 33 and
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-46">
     ducc_services&#x00A0;--stop&#x00A0;33&#x00A0;--instances&#x00A0;5</div>
     <!--l. 386--><p class="nopar" > is issued, five (randomly selected) service instances are stopped for service 33, leaving five running. The registry is
     updated if the <span 
class="cmti-10">&#8211;update </span>option is specified. The registered number of instances is never reduced to zero even if the
     number of running instances is reduced to zero.
     <!--l. 392--><p class="noindent" >Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-47">
     ducc_services&#x00A0;--stop&#x00A0;23&#x00A0;--intances&#x00A0;5
     &#x00A0;<br />ducc_services&#x00A0;--stop&#x00A0;UIMA-AS:Service23:tcp://bob.com:12345&#x00A0;--instances&#x00A0;3</div>
     <!--l. 396--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">update</span> </dt><dd 
class="description">If specified, the registry is updated to the total number of instances remaining, but is never reduced below one
     (1). Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-48">
     ducc_services&#x00A0;--stop&#x00A0;UIMA-AS:Service23:tcp://bob.com:12345&#x00A0;--instances&#x00A0;3&#x00A0;--update</div>
     <!--l. 402--><p class="nopar" >
     </dd></dl>
<!--l. 406--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">3.11.5   </span> <a 
 id="x1-640003.11.5"></a>ducc_services &#8211;modify Options</h4>
<!--l. 407--><p class="noindent" >The modify function dynamically updates some of the attributes of a registered service.
     <dl class="description"><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">modify [service-id or endpoint]</span> </dt><dd 
class="description">This identifies the service to modify. The service id is either the numeric ID assigned
     by DUCC when the service is registered, or the service endpoint string. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-49">
     ducc_services&#x00A0;--modify&#x00A0;23&#x00A0;--instances&#x00A0;3
     &#x00A0;<br />ducc_services&#x00A0;--modify&#x00A0;UIMA-AS:Service23:tcp://bob.com:12345&#x00A0;--intances&#x00A0;2</div>
     <!--l. 416--><p class="nopar" >
     </dd><dt class="description">
 <span 
class="cmbx-10">&#8211;instances [integer]</span> </dt><dd 
class="description">This updates the number of services instances that are started when the service is started. Only the
     registration is updated. If the <span 
class="cmsy-10">--</span><span 
class="cmti-10">activate </span>option is also specified, running instances are stopped or started as needed to
     match the new number.
     <!--l. 423--><p class="noindent" >Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-50">
     ducc_services&#x00A0;--modify&#x00A0;23&#x00A0;--intances&#x00A0;5
     &#x00A0;<br />ducc_services&#x00A0;--modify&#x00A0;UIMA-AS:Service23:tcp://bob.com:12345&#x00A0;--instances&#x00A0;3&#x00A0;--activate</div>
     <!--l. 427--><p class="nopar" >
     </dd><dt class="description">
 <span 
class="cmbx-10">&#8211;activate [integer]</span> </dt><dd 
class="description">When specified, the number of running service instances is increased or decreased to match the newly
     specified number.
     <!--l. 432--><p class="noindent" >Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-51">
     ducc_services&#x00A0;--modify&#x00A0;23&#x00A0;--intances&#x00A0;5
     &#x00A0;<br />ducc_services&#x00A0;--modify&#x00A0;UIMA-AS:Service23:tcp://bob.com:12345&#x00A0;--instances&#x00A0;3&#x00A0;--activate</div>
     <!--l. 436--><p class="nopar" >
     </dd><dt class="description">
 <span 
class="cmbx-10">&#8211;autostart [&#8221;true&#8221; or &#8221;false&#8221;]</span> </dt><dd 
class="description">This changes the autostart property for the registered services. When set to &#8221;true&#8221;, the
     service is started automatically when the DUCC system is started. If the service is not currently started, it
     will now start with the registered number of instances. If the service is running, the instances remain
     running.
     <!--l. 444--><p class="noindent" >One way to think of this is: if <span 
class="cmti-10">autostart </span>is true, DUCC will attempt to keep the registered number of instances running
     at all times. If <span 
class="cmti-10">autostart </span>is false, all instance start and stop is manual. Example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-52">
     ducc_services&#x00A0;--modify&#x00A0;UIMA-AS:Service23:tcp://bob.com:12345&#x00A0;--autostart&#x00A0;false</div>
     <!--l. 450--><p class="nopar" ></dd></dl>
<!--l. 453--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">3.11.6   </span> <a 
 id="x1-650003.11.6"></a>ducc_services &#8211;query Options</h4>
<!--l. 454--><p class="noindent" >The query function returns details about all known services of all types and classes, including the DUCC ids of the service
instances (for submitted and registered services), the DUCC ids of the jobs using each service, and a summary of each
service&#8217;s queue and performance statistics, when available.
<!--l. 459--><p class="noindent" >All information returned by <span 
class="cmti-10">ducc</span><span 
class="cmti-10">_services </span><span 
class="cmsy-10">--</span><span 
class="cmti-10">query </span>is also available via the <a 
href="#x1-1140007.6">Services Page</a> of the Web Server as well as the
DUCC Service API (see the JavaDoc).
     <dl class="description"><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">query [service-id or endpoint]</span> </dt><dd 
class="description">This indicates that a service is to be stopped. The service id is either the
     numeric ID assigned by DUCC when the service is registered, or the service endpoint string.
     <!--l. 468--><p class="noindent" >If no id is given, information about all services is returned.
     <!--l. 470--><p class="noindent" >Below is a sample service query.
     <!--l. 472--><p class="noindent" >The service with endpoint <span 
class="cmtt-10">UIMA-AS:FixedSleepAE</span><span 
class="cmtt-10">_5:tcp://bobmach:61617 </span>is a registered service, whose
     registered numeric id is 2. It was registered by bob for two instances and no autostart. Since it is not autostarted,
     it will be terminated when it is no longer used. It will linger for 5 seconds after the last referencing job completes,
     in case a subsequent job that uses it enters the system (not a realistic linger time!). It has two active instances
     whose DUCC Ids are 9 and 5. It is currently used (referenced) by DUCC jobs 1 and 5.
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-53">
     &#x00A0;<br />Service:&#x00A0;UIMA-AS:FixedSleepAE_5:tcp://bobmach291:61617
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;Service&#x00A0;Class&#x00A0;:&#x00A0;Registered&#x00A0;as&#x00A0;ID&#x00A0;2&#x00A0;Owner[bob]&#x00A0;instances[2]&#x00A0;linger[5000]
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;Implementors&#x00A0;:&#x00A0;9&#x00A0;8
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;References&#x00A0;:&#x00A0;1&#x00A0;5
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;Dependencies&#x00A0;:&#x00A0;none
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;Service&#x00A0;State&#x00A0;:&#x00A0;Available
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;Ping&#x00A0;Active&#x00A0;:&#x00A0;true
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;Autostart&#x00A0;:&#x00A0;false
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;Manual&#x00A0;Stop&#x00A0;:&#x00A0;false
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;Queue&#x00A0;Statistics:
     &#x00A0;<br />Consum&#x00A0;Prod&#x00A0;Qsize&#x00A0;minNQ&#x00A0;maxNQ&#x00A0;expCnt&#x00A0;inFlgt&#x00A0;&#x00A0;DQ&#x00A0;&#x00A0;NQ&#x00A0;Disp
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;52&#x00A0;&#x00A0;&#x00A0;44&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;0&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;0&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;3&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;0&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;0&#x00A0;402&#x00A0;402&#x00A0;&#x00A0;402</div>
     <!--l. 495--><p class="nopar" ></dd></dl>
<!--l. 497--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-660003.11.6"></a><span 
class="cmbx-10">Notes:</span></span>
<a name='DUCC_CLI_PERF_STATS'></a>
<h3 class="sectionHead"><span class="titlemark">3.12   </span> <a 
 id="x1-670003.12"></a>ducc_perf_stats</h3>
<!--l. 26--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-680003.12"></a><span 
class="cmbx-10">Description:</span></span>
This CLI is used to format job history and performance data into CSV or (mostly) human readable form for post-analysis.
This may be run while a job is executing to monitor the current job, or after it exits. This command produces the equivalent
of the web servers <a 
href="#x1-1050007.3">job details page</a>.
<!--l. 32--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-690003.12"></a><span 
class="cmbx-10">Usage:</span></span>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Script wrapper</span> </dt><dd 
class="description">$DUCC_HOME/bin/ducc_perf_stats <span 
class="cmti-10">options</span>
     </dd><dt class="description">
<span 
class="cmbx-10">Java Main</span> </dt><dd 
class="description">java -cp $DUCC_HOME/lib/uima-ducc-cli.jar org.apache.uima.ducc.cli.DuccPerfStats <span 
class="cmti-10">options</span></dd></dl>
<!--l. 38--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-700003.12"></a><span 
class="cmbx-10">Options:</span></span>
     <dl class="description"><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">job id</span> </dt><dd 
class="description">This specifies the job to report on.
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">directory dir</span> </dt><dd 
class="description">This specifies the job&#8217;s log directory. (DUCC writes usage information into this directory as the
     job is running.)
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">report [summary or workitems or processes]</span> </dt><dd 
class="description">This specifies the type of report:
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">summary</span> </dt><dd 
class="description">This produces a per-AE summary of the performance of that AE, including total time spent in the
         analytic, maximum time spent, minimum time, and total CASs processed.
         </dd><dt class="description">
     <span 
class="cmbx-10">workitms</span> </dt><dd 
class="description">This produces a performance break down of each each input CAS (work item), including the work
         item id, ending state, time spent in queue after dispatch, processing time, the node it executed on, and
         the process id it ran in.
         </dd><dt class="description">
     <span 
class="cmbx-10">processes</span> </dt><dd 
class="description">This produces a summary of all the processes which have executed on behalf of the job, including
         the node, processid, initialization time, current memory usage, maximum memory usage, page faults,
         swap space in use, maximum swap used, %CPU, garbage collection statistics, and work item statistics
         (processed, errors, retried, etc.).</dd></dl>
     </dd><dt class="description">
<span 
class="cmsy-10">--</span><span 
class="cmbx-10">help</span> </dt><dd 
class="description">Prints the usage text to the console.</dd></dl>
<!--l. 60--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-710003.12"></a><span 
class="cmbx-10">Notes:</span></span>
None.
<!--l. 22--><p class="noindent" ><a name='DUCC_VIADUCC'></a>
<h3 class="sectionHead"><span class="titlemark">3.13   </span> <a 
 id="x1-720003.13"></a>viaducc and java_viaducc</h3>
<!--l. 27--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-730003.13"></a><span 
class="cmbx-10">Description:</span></span>
Viaducc is a small script wrapper around the <a 
href="#x1-460003.9"><span 
class="cmti-10">ducc</span><span 
class="cmti-10">_process</span><span 
class="cmti-10">_submit </span></a> CLI to facilitate launching processes on DUCC-managed
machines, either from the command line or from an Eclipse run configuration.
<!--l. 33--><p class="noindent" >When run from the command line as &#8220;viaducc&#8221;, the arguments are bundled into the form expected by <a 
href="#x1-460003.9"><span 
class="cmti-10">ducc</span><span 
class="cmti-10">_process</span><span 
class="cmti-10">_submit </span></a>
and submitted to DUCC. By default the remote stdin and stdout of the deployed process are mapped back to the command
line terminal.
<!--l. 39--><p class="noindent" >If a symbolic link to the viaducc script is created with the name &#8220;java_viaducc&#8221; and used from the command line, the
arguments are assumed to be a Java classname and its arguments. The java process will be executed using DUCC&#8217;s default
JRE, or optionally, a specific JRE supplied by the user with a -D argument.
<!--l. 45--><p class="noindent" >If the &#8220;java_viaducc&#8221; symbolic link is installed in a JRE/bin directory, DUCC will use the java executable from
the same directory. More interestingly, it may be specified as an alternative to the &#8220;java&#8221; command in an
eclipse launcher. The remote stdin and stdout of the deployed DUCC process are redirected to the Eclipse
console. This provides essentially transparent execution of code in an Eclipse workspaces on DUCC-managed
resources.
                                                                                                
                                                                                                
<!--l. 51--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-740003.13"></a><span 
class="cmbx-10">Usage:</span></span>
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-54">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;viaducc&#x00A0;[defines]&#x00A0;[command&#x00A0;and&#x00A0;parameters]"</div>
<!--l. 54--><p class="nopar" > or
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-55">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;java_viaducc&#x00A0;[defines]&#x00A0;[java-class&#x00A0;and&#x00A0;parameters]"</div>
<!--l. 58--><p class="nopar" >
<!--l. 60--><p class="noindent" >The &#8220;defines&#8221; are described below. The &#8220;command and parameters&#8221; are either any command (with full path) and it&#8217;s
arguments, or a Java class (with a &#8220;main&#8221;) and its arguments (including the classpath if necessary.)
<!--l. 64--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-750003.13"></a><span 
class="cmbx-10">Defines</span></span>
The arguments are specified in the syntax of Java &#8220;-D&#8221; system properties, to be more consistent with execution under
Eclipse.
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">-DDUCC</span><span 
class="cmbx-10">_MEMORY</span><span 
class="cmbx-10">_SIZE</span> </dt><dd 
class="description">This specifies the memory required, in GB. If not specified, the smallest memory
     quanta configured for the scheduler is used.
     </dd><dt class="description">
<span 
class="cmbx-10">-DDUCC</span><span 
class="cmbx-10">_CLASS</span> </dt><dd 
class="description">This is the scheduling class to submit the process to. It should generally be a non-preemptable
     class. If not specified, it defaults to class &#8220;fixed&#8221;.
     </dd><dt class="description">
<span 
class="cmbx-10">-DDUCC</span><span 
class="cmbx-10">_ENVIRONMENT</span> </dt><dd 
class="description">This species additional environment parameters to pass to the job. It should specify a
     quoted string of blank-delimeted K=V environment values. For example:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-56">
     &#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;-DDUCC_ENVIRONMENT="DUCC_RLIMIT_NOFILE=1000&#x00A0;V1=V2&#x00A0;A=B"</div>
     <!--l. 77--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmbx-10">-DJAVA</span><span 
class="cmbx-10">_BIN</span> </dt><dd 
class="description">This species the exact &#8220;java&#8221; command to use, for &#8220;java_viaducc&#8221;. it must be a full path to some JRE
     that is known to be installed on all the DUCC nodes. If not specified, the JRE used to run ducc is
     uses.</dd></dl>
<!--l. 162--><p class="noindent" ><a name='DUCC_API'></a>
                                                                                                
                                                                                                
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;4</span><br /><a 
 id="x1-760004"></a>The DUCC Public API</h2>
<h3 class="sectionHead"><span class="titlemark">4.1   </span> <a 
 id="x1-770004.1"></a>Overview Of The DUCC API</h3>
<!--l. 21--><p class="noindent" >The DUCC API provides a simple programmatic (Java) interface to DUCC for submission and cancellation of
work. (Note that the DUCC CLI is implemented using the API and provides a model for how to use the
API.)
<!--l. 25--><p class="noindent" >All the API objects are instantiated using the same arguments as the CLI. The API provides three variants for supplying
arguments:
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">An array of Java Strings, for example <span 
class="cmtt-10">DuccJobSubmit(String[] args)</span>.
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">A list of Java Strings, for example <span 
class="cmtt-10">DuccJobSubmit(List&#x003C;String&#x003E; args)</span>.
     </dd><dt class="enumerate-enumitem">
  3. </dt><dd 
class="enumerate-enumitem">A Java Properties object, for example <span 
class="cmtt-10">DuccJobSubmit(Properties args)</span>.</dd></dl>
<!--l. 33--><p class="noindent" >After instantiation of an API object, the <span 
class="cmtt-10">boolean execute() </span>method is called. This method transmits the
arguments to DUCC. If DUCC receives and accepts the args, the method return &#8220;true&#8221;, otherwise it returns &#8220;false.
Methods are provided to retrieve relevant information when the <span 
class="cmtt-10">execute() </span>returns such as IDs, messages,
etc.
<!--l. 38--><p class="noindent" >In the case of jobs and managed reservations, if the specification requested debug, console attachment, or &#8220;wait for
completion&#8221;, the API provides methods to block waiting for completion.
<!--l. 42--><p class="noindent" >In the case of jobs and managed reservations, a callback object may also be passed to the constructor. The callback object
provides a means to direct messages to the API user. If the callback is not provided, messages are written to standard
output.
<!--l. 46--><p class="noindent" >The API is thread-safe, so developers may manage multiple, simultaneous requests to DUCC.
<!--l. 49--><p class="noindent" >Below is the &#8220;main()&#8221; method of DuccJobSubmit, demonstrating the use of the API:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-57">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;static&#x00A0;void&#x00A0;main(String[]&#x00A0;args)&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;try&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;DuccJobSubmit&#x00A0;ds&#x00A0;=&#x00A0;new&#x00A0;DuccJobSubmit(args,&#x00A0;null);
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;boolean&#x00A0;rc&#x00A0;=&#x00A0;ds.execute();
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;//&#x00A0;If&#x00A0;the&#x00A0;return&#x00A0;is&#x00A0;&#8217;true&#8217;&#x00A0;then&#x00A0;as&#x00A0;best&#x00A0;the&#x00A0;API&#x00A0;can&#x00A0;tell,&#x00A0;the&#x00A0;submit&#x00A0;worked
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;(&#x00A0;rc&#x00A0;)&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;System.out.println("Job&#x00A0;"&#x00A0;+&#x00A0;ds.getDuccId()&#x00A0;+&#x00A0;"&#x00A0;submitted");
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;int&#x00A0;exit_code&#x00A0;=&#x00A0;ds.getReturnCode();&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;//&#x00A0;after&#x00A0;waiting&#x00A0;if&#x00A0;requested
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;System.exit(exit_code);
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;}&#x00A0;else&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;System.out.println("Could&#x00A0;not&#x00A0;submit&#x00A0;job");
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;System.exit(1);
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;catch(Exception&#x00A0;e)&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;System.out.println("Cannot&#x00A0;initialize:&#x00A0;"&#x00A0;+&#x00A0;e);
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;System.exit(1);
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;}</div>
<!--l. 70--><p class="nopar" >
<!--l. 72--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">4.2   </span> <a 
 id="x1-780004.2"></a>Compiling and Running With the DUCC API</h3>
<!--l. 74--><p class="noindent" >A single DUCC jar file is required for both compilation and execution of the DUCC API, <span 
class="cmtt-10">uima-ducc-cli.jar</span>. This jar is
found in $DUCC_HOME/lib.
<!--l. 77--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">4.3   </span> <a 
 id="x1-790004.3"></a>Java API</h3>
<!--l. 81--><p class="noindent" >See the <a 
href="api/index.html" >JavaDoc</a> for the DUCC Public API.
<!--l. 172--><p class="noindent" ><a name='DUCC_SERVICES'></a>
                                                                                                
                                                                                                
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;5</span><br /><a 
 id="x1-800005"></a>Service Management</h2>
<h3 class="sectionHead"><span class="titlemark">5.1   </span> <a 
 id="x1-810005.1"></a>Overview.</h3>
<!--l. 21--><p class="noindent" >A DUCC service is defined by the following two criteria:
     <ul class="itemize1">
     <li class="itemize">A service is one or more long-running processes that await requests from UIMA pipeline components and return
     something in response. These processes are usually managed by DUCC but need not be.
     </li>
     <li class="itemize">A service is accompanied by a small program called a &#8220;pinger&#8221; that the DUCC Service Manager uses to gauge
     the availability and health of the service. This pinger must always be be present; however, DUCC will supply
     a default pinger for UIMA-AS services.</li></ul>
<!--l. 32--><p class="noindent" >A service is usually a UIMA-AS service, but DUCC supports any arbitrary process as a service.
<!--l. 35--><p class="noindent" >The DUCC service manager implements several high-level functions:
     <ul class="itemize1">
     <li class="itemize">Ensure services are available for jobs before allowing the jobs to start. This is a fail-fast to prevent unnecessary
     allocation of resources (with potential eviction of healthy processes) for jobs that can&#8217;t run, as well as quick
     feedback to users that something is amiss.
     </li>
     <li class="itemize">Manage the start-up and management of services: allocate resources, spawn the processes, manage the pingers,
     ensure the processes stay alive, handle errors, etc.
     </li>
     <li class="itemize">Report on the state and availability of services.</li></ul>
<!--l. 49--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">5.2   </span> <a 
 id="x1-820005.2"></a>Service Types.</h3>
<!--l. 51--><p class="noindent" >DUCC supports two types of services: UIMA-AS and CUSTOM:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">UIMA-AS</span> </dt><dd 
class="description">This is a &#8221;normal&#8221; UIMA-AS service. DUCC fully supports all aspects of UIMA-AS services with
     minimal effort from developers. A default &#8220;pinger&#8221; is supplied by DUCC for UIMA-AS services. (It is legal to
     define a CUSTOM pinger for a UIMA-AS service, however.)
     </dd><dt class="description">
<span 
class="cmbx-10">CUSTOM</span> </dt><dd 
class="description">This is any arbitrary service. Developers must provide a CUSTOM pinger and declare it in the service
     registration.</dd></dl>
<!--l. 63--><p class="noindent" >DUCC also supports the concept of a service that is not managed by DUCC. For example, a database or a search engine may
be better managed with other facilities. In order to manage dependencies by jobs on this type of service, DUCC
supports a CUSTOM service that supplies only a &#8220;pinger&#8221; and no other process. This is known as a &#8220;ping-only&#8221;
service.
                                                                                                
                                                                                                
<!--l. 68--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">5.3   </span> <a 
 id="x1-830005.3"></a>Service References and Endpoints</h3>
<!--l. 70--><p class="noindent" >Services are referenced by an entity called a service endpoint. The service endpoint is a formatted string used to
uniquely identify each service and to supply contact information to the pingers. A service endpoint is of the
form
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-58">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;service-type&#x003E;:&#x003C;unique&#x00A0;id&#x00A0;and&#x00A0;contact&#x00A0;information&#x003E;</div>
<!--l. 76--><p class="nopar" >
<!--l. 78--><p class="noindent" >The <span 
class="cmti-10">service-type </span>must be either UIMA-AS or CUSTOM.
<!--l. 80--><p class="noindent" >The <span 
class="cmti-10">unique id and contact information </span>is any string needed to ensure the service is uniquely named. This string is passed to
the service pinger and may contain information for the pinger to contact the service. For UIMA-AS services, service endpoint
is inferred by the CLI by inspection of the UIMA-AS service&#8217;s DD XML descriptor. The UIMA-AS service endpoint is always
of the form:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-59">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;UIMA-AS:queue-name:broker-url</div>
<!--l. 87--><p class="nopar" > where <span 
class="cmti-10">queue-name </span>is the name of the ActiveMQ queue used by the service, and <span 
class="cmti-10">broker-url </span>is the ActiveMQ broker
URL.
<!--l. 91--><p class="noindent" >Jobs or other services may register dependencies on specific services by listing one or more service endpoints int their
specifications. See the <a 
href="#x1-260003.5"><span 
class="cmti-10">job </span></a> and <a 
href="#x1-560003.11"><span 
class="cmti-10">services </span></a> CLI descriptions for details.
<!--l. 96--><p class="noindent" >All services must be registered with DUCC. It is possible to register a &#8220;ping-only&#8221; service that has no process managed by
DUCC, consisting only of a pinger.
<!--l. 100--><p class="noindent" >A service is registered with DUCC using the <a 
href="#x1-560003.11">ducc_services</a> CLI. Service registrations are persisted by DUCC and last over
DUCC and cluster restarts.
<!--l. 104--><p class="noindent" >An incoming job which references a service that is not registered is marked &#8220;Services Unavailable&#8221; and canceled by the
system.
<!--l. 107--><p class="noindent" >There are several variants on services:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Autostarted Services</span> </dt><dd 
class="description">An autostarted service is a service that is automatically started when the DUCC system is
     started. When DUCC is started, the SM checks the service registry for all service that are marked for automatic
     start-up. If registered for autostart, the DUCC Service Manager submits the registered number of instances
     on behalf of the registering user. If an instance should die, DUCC automatically restarts the instance. Short
     of massive failures, DUCC will ensure the service is always running and immediately ready for use with no
     manual intervention.
     </dd><dt class="description">
<span 
class="cmbx-10">On-Demand Services</span> </dt><dd 
class="description">An on-demand service is a registered service that is started only when referenced by the
     service-dependency of another job or service. If the service is already started (e.g. by reference from some other
     job), the dependent job/service is marked ready to schedule as indicated above. If not, the service registry is
     checked and if a matching service is found, DUCC starts it. When the service has completed initialization a
     pinger is started and all jobs waiting on it are then started.
     <!--l. 125--><p class="noindent" >When the last job or service that references the on-demand service exits, a timer is established to keep the
     service alive for a while (in anticipation that it will be needed again soon.) When the keep-alive timer expires,
     and there are no more dependent jobs or services, the on-demand service is automatically stopped to free up
     its resources for other work.
     </dd><dt class="description">
<span 
class="cmbx-10">Ping-Only Services</span> </dt><dd 
class="description"><a 
 id="likesection.2"></a> Ping-only services consist of only a ping thread. The service itself is not managed in any way
     by DUCC. This is useful for managing dependencies on services that are not under DUCC control: DUCC can
     detect and report on the health of these services and take appropriate actions on dependent jobs if the services
     are not responsive.</dd></dl>
<!--l. 140--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">5.4   </span> <a 
 id="x1-840005.4"></a>Service Pingers</h3>
<!--l. 142--><p class="noindent" >A service pinger is a small program that queries a service on behalf of the DUCC Service Manager to:
     <ul class="itemize1">
     <li class="itemize">Report on the availability of the service, and
     </li>
     <li class="itemize">Report on the health of the service.</li></ul>
                                                                                                
                                                                                                
<!--l. 149--><p class="noindent" >Service pingers are always written in Java and must implement an abstract class,
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-60">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;org.apache.uima.ducc.common.AServicePing</div>
<!--l. 152--><p class="nopar" > When a service is deployed by DUCC, the Service Manager spawns a DUCC process that instantiates the pinger for the
service. On a regular basis, the Service Manager sends a request to the pinger to query the service health. The
pinger is expected to respond within a reasonable period of time and if it fails to do so, the service is marked
unresponsive.
<!--l. 159--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">5.4.1   </span> <a 
 id="x1-850005.4.1"></a>Declaring a Pinger in A Service</h4>
<!--l. 161--><p class="noindent" >If your service is a UIMA-AS service, there is no need to create or declare a pinger as DUCC provides a default pinger. If a
CUSTOM pinger is required, it must be declared in the service descriptor, and the service must be registered. See
<a 
href="#x1-560003.11">ducc_services</a> for details on service registration specifying ping directives.
<!--l. 167--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">5.4.2   </span> <a 
 id="x1-860005.4.2"></a>Implementing a Pinger</h4>
<!--l. 168--><p class="noindent" >Pingers must implement the class <span 
class="cmtt-10">org.apache.uima.ducc.cli.AServicePing</span>. The abstract class is shown below.
<hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-86001r1"></a>
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-61">
import&#x00A0;org.apache.uima.ducc.common.IServiceStatistics;
&#x00A0;<br />
&#x00A0;<br />public&#x00A0;abstract&#x00A0;class&#x00A0;AServicePing
&#x00A0;<br />{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;/**
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;Called&#x00A0;by&#x00A0;the&#x00A0;ping&#x00A0;driver,&#x00A0;to&#x00A0;pass&#x00A0;in&#x00A0;useful&#x00A0;things&#x00A0;the&#x00A0;pinger&#x00A0;may&#x00A0;want.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;@param&#x00A0;arguments&#x00A0;This&#x00A0;is&#x00A0;passed&#x00A0;in&#x00A0;from&#x00A0;the&#x00A0;service&#x00A0;specification&#8217;s
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;service_ping_arguments&#x00A0;string.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;@param&#x00A0;endpoint&#x00A0;This&#x00A0;is&#x00A0;the&#x00A0;name&#x00A0;of&#x00A0;the&#x00A0;service&#x00A0;endpoint,&#x00A0;as&#x00A0;passed&#x00A0;in
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;at&#x00A0;service&#x00A0;registration.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;abstract&#x00A0;void&#x00A0;init(String&#x00A0;arguments,&#x00A0;String&#x00A0;endpoint)&#x00A0;&#x00A0;throws&#x00A0;Exception;
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;/**
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;Stop&#x00A0;is&#x00A0;called&#x00A0;by&#x00A0;the&#x00A0;ping&#x00A0;wrapper&#x00A0;when&#x00A0;it&#x00A0;is&#x00A0;being&#x00A0;killed.&#x00A0;&#x00A0;Implementors&#x00A0;may&#x00A0;optionally
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;override&#x00A0;this&#x00A0;method&#x00A0;with&#x00A0;conenction&#x00A0;shutdown&#x00A0;code.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;abstract&#x00A0;void&#x00A0;stop();
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;/**
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;Returns&#x00A0;the&#x00A0;object&#x00A0;with&#x00A0;application-derived&#x00A0;health&#x00A0;and&#x00A0;statistics.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;@return&#x00A0;This&#x00A0;object&#x00A0;contains&#x00A0;the&#x00A0;informaton&#x00A0;the&#x00A0;service&#x00A0;manager&#x00A0;and&#x00A0;web&#x00A0;server&#x00A0;require
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;for&#x00A0;correct&#x00A0;management&#x00A0;and&#x00A0;display&#x00A0;of&#x00A0;the&#x00A0;service.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;abstract&#x00A0;IServiceStatistics&#x00A0;getStatistics();
&#x00A0;<br />}
&#x00A0;<br /></div>
<!--l. 200--><p class="nopar" >
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.1: </span><span  
class="content">Service Ping Abstract Class</span></div><!--tex4ht:label?: x1-86001r1 -->
                                                                                                
                                                                                                
<!--l. 204--><p class="noindent" ></div><hr class="endfigure">
<!--l. 206--><p class="noindent" >Here we show the class <span 
class="cmti-10">org.apache.uima.ducc.common.IServiceStatistics</span>. Custom pingers must implement this class and
return an instance in response to AServicePing.getStatistics(). A default ServiceStatistics class is provide and may be used by
custom pingers as <span 
class="cmti-10">org org.apache.uima.ducc.cliServiceStatistics</span>. See the Javadoc for more complete details of these
classes.
<!--l. 212--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-86002r2"></a>
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-62">
public&#x00A0;interface&#x00A0;&#x00A0;IServiceStatistics
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;extends&#x00A0;Serializable
&#x00A0;<br />{
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;/**
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;Query&#x00A0;whether&#x00A0;the&#x00A0;service&#x00A0;is&#x00A0;alive.&#x00A0;This&#x00A0;is&#x00A0;used&#x00A0;internally&#x00A0;by&#x00A0;the&#x00A0;Service&#x00A0;Manager.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;@return&#x00A0;"true"&#x00A0;if&#x00A0;the&#x00A0;service&#x00A0;is&#x00A0;responsive,&#x00A0;"false"&#x00A0;otherwise.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;boolean&#x00A0;isAlive();
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;/**
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;Query&#x00A0;wether&#x00A0;the&#x00A0;service&#x00A0;is&#x00A0;"healthy".&#x00A0;This&#x00A0;is&#x00A0;used&#x00A0;internally&#x00A0;by&#x00A0;the&#x00A0;Service&#x00A0;Manager.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;@return&#x00A0;"true"&#x00A0;if&#x00A0;the&#x00A0;service&#x00A0;is&#x00A0;healthy,&#x00A0;"false"&#x00A0;otherwise.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;boolean&#x00A0;isHealthy();
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;/**
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;Return&#x00A0;service&#x00A0;statistics,&#x00A0;if&#x00A0;any.&#x00A0;This&#x00A0;is&#x00A0;used&#x00A0;internally&#x00A0;by&#x00A0;the&#x00A0;Service&#x00A0;Manager.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;@return&#x00A0;A&#x00A0;string&#x00A0;containing&#x00A0;information&#x00A0;regarding&#x00A0;the&#x00A0;service.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;String&#x00A0;&#x00A0;getInfo();
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;/**
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;Set&#x00A0;the&#x00A0;"aliveness"&#x00A0;of&#x00A0;the&#x00A0;service.&#x00A0;&#x00A0;This&#x00A0;is&#x00A0;called&#x00A0;by&#x00A0;each&#x00A0;pinger&#x00A0;for&#x00A0;each&#x00A0;service.&#x00A0;&#x00A0;Set
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;&#x00A0;this&#x00A0;to&#x00A0;return&#x00A0;"true"&#x00A0;if&#x00A0;the&#x00A0;service&#x00A0;is&#x00A0;responsive.&#x00A0;&#x00A0;Otherwise&#x00A0;return&#x00A0;"false"&#x00A0;so&#x00A0;the&#x00A0;Service
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;&#x00A0;Manager&#x00A0;can&#x00A0;reject&#x00A0;jobs&#x00A0;dependent&#x00A0;on&#x00A0;this&#x00A0;service.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;@param&#x00A0;alive&#x00A0;Set&#x00A0;to&#x00A0;"true"&#x00A0;if&#x00A0;the&#x00A0;service&#x00A0;is&#x00A0;responseve,&#x00A0;"false"&#x00A0;otherwise.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;void&#x00A0;setAlive(boolean&#x00A0;alive);
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;/**
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;Set&#x00A0;the&#x00A0;"health"&#x00A0;of&#x00A0;the&#x00A0;service.&#x00A0;&#x00A0;This&#x00A0;is&#x00A0;called&#x00A0;by&#x00A0;each&#x00A0;pinger&#x00A0;for&#x00A0;each&#x00A0;service.&#x00A0;&#x00A0;This&#x00A0;is&#x00A0;a
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;subject&#x00A0;judgement&#x00A0;made&#x00A0;by&#x00A0;the&#x00A0;service&#x00A0;owner&#x00A0;on&#x00A0;behalf&#x00A0;of&#x00A0;his&#x00A0;own&#x00A0;service.&#x00A0;&#x00A0;This&#x00A0;is&#x00A0;used&#x00A0;only
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;to&#x00A0;reflect&#x00A0;status&#x00A0;in&#x00A0;the&#x00A0;DUCC&#x00A0;Web&#x00A0;Server.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;@param&#x00A0;healthy&#x00A0;Set&#x00A0;to&#x00A0;"true"&#x00A0;if&#x00A0;the&#x00A0;service&#x00A0;is&#x00A0;healthy,&#x00A0;"false"&#x00A0;otherwise.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;void&#x00A0;setHealthy(boolean&#x00A0;healthy);
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;/**
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;Set&#x00A0;the&#x00A0;monitor&#x00A0;statistics&#x00A0;for&#x00A0;the&#x00A0;service.&#x00A0;This&#x00A0;is&#x00A0;any&#x00A0;arbitray&#x00A0;string&#x00A0;describing&#x00A0;critical
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;or&#x00A0;useful&#x00A0;characteristics&#x00A0;of&#x00A0;the&#x00A0;service.&#x00A0;&#x00A0;This&#x00A0;string&#x00A0;is&#x00A0;presented&#x00A0;as&#x00A0;a&#x00A0;"hover"&#x00A0;in&#x00A0;the
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;webserver&#x00A0;over&#x00A0;the&#x00A0;"health"&#x00A0;field.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;@param&#x00A0;info&#x00A0;This&#x00A0;is&#x00A0;an&#x00A0;arbitrary&#x00A0;string&#x00A0;summarizing&#x00A0;the&#x00A0;service&#8217;s&#x00A0;performance.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;void&#x00A0;setInfo(String&#x00A0;info);
&#x00A0;<br />
&#x00A0;<br />}</div>
<!--l. 262--><p class="nopar" >
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.2: </span><span  
class="content">IServiceStatistics Interface</span></div><!--tex4ht:label?: x1-86002r2 -->
                                                                                                
                                                                                                
<!--l. 266--><p class="noindent" ></div><hr class="endfigure">
<!--l. 268--><p class="noindent" >Below is a sample CUSTOM pinger for a hypothetical service that returns four integers in response to a ping.
<hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-86003r3"></a>
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-63">
import&#x00A0;java.io.DataInputStream;
&#x00A0;<br />import&#x00A0;java.io.InputStream;
&#x00A0;<br />import&#x00A0;java.net.Socket;
&#x00A0;<br />import&#x00A0;org.apache.uima.ducc.cli.AServicePing;
&#x00A0;<br />import&#x00A0;org.apache.uima.ducc.cli.ServiceStatistics;
&#x00A0;<br />
&#x00A0;<br />public&#x00A0;class&#x00A0;CustomPing
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;extends&#x00A0;AServicePing
&#x00A0;<br />{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;String&#x00A0;host;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;String&#x00A0;port;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;void&#x00A0;init(String&#x00A0;args,&#x00A0;String&#x00A0;endpoint)&#x00A0;throws&#x00A0;Exception&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;//&#x00A0;Parse&#x00A0;the&#x00A0;service&#x00A0;endpoint,&#x00A0;which&#x00A0;is&#x00A0;a&#x00A0;String&#x00A0;of&#x00A0;the&#x00A0;form
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;//&#x00A0;&#x00A0;&#x00A0;&#x00A0;host:port
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;String[]&#x00A0;parts&#x00A0;=&#x00A0;endpoint.split(":");
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;host&#x00A0;=&#x00A0;parts[1];
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;port&#x00A0;=&#x00A0;parts[2];
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;void&#x00A0;stop()&#x00A0;&#x00A0;{&#x00A0;&#x00A0;}
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;private&#x00A0;long&#x00A0;readLong(DataInputStream&#x00A0;dis)&#x00A0;throws&#x00A0;Exception&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;Long.reverseBytes(dis.readLong());
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;ServiceStatistics&#x00A0;getStatistics()&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;//&#x00A0;Contact&#x00A0;the&#x00A0;service,&#x00A0;interpret&#x00A0;the&#x00A0;results,&#x00A0;and&#x00A0;return&#x00A0;a&#x00A0;state
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;//&#x00A0;object&#x00A0;for&#x00A0;the&#x00A0;service.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;ServiceStatistics&#x00A0;stats&#x00A0;=&#x00A0;new&#x00A0;ServiceStatistics(false,&#x00A0;false,"&#x003C;NA&#x003E;");
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;try&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Socket&#x00A0;sock&#x00A0;=&#x00A0;new&#x00A0;Socket(host,&#x00A0;Integer.parseInt(port));
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;DataInputStream&#x00A0;dis&#x00A0;=&#x00A0;new&#x00A0;DataInputStream(sock.getInputStream());
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;long&#x00A0;stat1&#x00A0;=&#x00A0;readLong(dis);&#x00A0;long&#x00A0;stat2&#x00A0;=&#x00A0;readLong(dis);
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;long&#x00A0;stat3&#x00A0;=&#x00A0;readLong(dis);&#x00A0;long&#x00A0;stat4&#x00A0;=&#x00A0;readLong(dis);
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;stats.setAlive(true);&#x00A0;&#x00A0;stats.setHealthy(true);
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;stats.setInfo(&#x00A0;&#x00A0;"S1["&#x00A0;+&#x00A0;stat1&#x00A0;+&#x00A0;"]&#x00A0;S2["&#x00A0;+&#x00A0;stat2&#x00A0;+
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;"]&#x00A0;S3["&#x00A0;+&#x00A0;stat3&#x00A0;+&#x00A0;"]&#x00A0;S4["&#x00A0;+&#x00A0;stat4&#x00A0;+&#x00A0;"]"&#x00A0;);
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;}&#x00A0;catch&#x00A0;(&#x00A0;Throwable&#x00A0;t)&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0; t.printStackTrace();
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;stats.setInfo(t.getMessage());
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;stats;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />}</div>
<!--l. 318--><p class="nopar" >
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.3: </span><span  
class="content">Sample UIMA-AS Service Pinger</span></div><!--tex4ht:label?: x1-86003r3 -->
                                                                                                
                                                                                                
<!--l. 322--><p class="noindent" ></div><hr class="endfigure">
<h4 class="subsectionHead"><span class="titlemark">5.4.3   </span> <a 
 id="x1-870005.4.3"></a>Building And Testing Your Pinger</h4>
<!--l. 325--><p class="noindent" >This section provides the information needed to use the pinger API and build a custom pinger.
<!--l. 328--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-880005.4.3"></a><span 
class="cmbx-10">1. Establish compile CLASSPATH</span></span>
One DUCC jar is required in the CLASSPATH to build your pinger:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-64">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$DUCC_HOME/lib/uima-ducc-cli.jar</div>
<!--l. 331--><p class="nopar" > This provides the definition for the <span 
class="cmti-10">AServicePing </span>and <span 
class="cmti-10">ServiceStatistics </span>classes.
<!--l. 334--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-890005.4.3"></a><span 
class="cmbx-10">2. Create a registration</span></span>
Next, create a service registration for the pinger. While debugging, set the directive
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-65">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;service_ping_dolog&#x00A0;=&#x00A0;true</div>
<!--l. 338--><p class="nopar" > This will log any output from <span 
class="cmtt-10">System.out.println() </span>to your home directory in
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-66">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$HOME/ducc/logs/services</div>
<!--l. 342--><p class="nopar" >
<!--l. 344--><p class="noindent" >Once the pinger is debugged you may want to turn logging off:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-67">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;service_ping_dolog&#x00A0;=&#x00A0;false</div>
<!--l. 347--><p class="nopar" >
<!--l. 349--><p class="noindent" >A sample service registration may look something like the following:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-68">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;bash-3.2$&#x00A0;cat&#x00A0;myping.svc
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;description&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;Ping-only&#x00A0;service
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;service_request_endpoint&#x00A0;=&#x00A0;CUSTOM:localhost:7175
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;service_ping_class&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;CustomPing
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;service_ping_classpath&#x00A0;&#x00A0;&#x00A0;=&#x00A0;/myhome/CustomPing.class:$DUCC_HOME/lib/uima_ducc_cli.jar
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;service_ping_dolog&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;true
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;service_ping_timeout&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;500
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;service_ping_aruments&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;Arg1&#x00A0;Arg2
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;service_ping_jvm_args&#x00A0;&#x00A0;&#x00A0;=&#x00A0;-DXmx50M</div>
<!--l. 361--><p class="nopar" >
<!--l. 363--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-900005.4.3"></a><span 
class="cmbx-10">3. Register and start the pinger</span></span>
Start up your custom service so the pinger has something to contact, then start the pinger. It may be easier to debug the
pinger if you initially start the service outside of DUCC. Once the pinger is working it is straightforward to integrate it
into the pinger&#8217;s service registration by merging the registration for the pinger with the registration for the
service.
<!--l. 368--><p class="noindent" >That&#8217;s it! Check the web server to make sure the service &#8220;comes alive&#8221;. Check your pinger&#8217;s debugging log if it doesn&#8217;t. Once
registered, you can stop and start the pinger at will using
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-69">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;ducc_services&#x00A0;--start&#x00A0;&#x003C;serviceid&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;ducc_services&#x00A0;--stop&#x00A0;&#x003C;serviceid&#x003E;</div>
<!--l. 373--><p class="nopar" > where <span 
class="cmmi-10">&#x003C;</span>serviceid<span 
class="cmmi-10">&#x003E; </span>is the id returned when you registered the pinger.
<!--l. 376--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-910005.4.3"></a><span 
class="cmbx-10">4. If all else fails ...</span></span>
If your pinger does not work and you cannot determine the reason, be sure you enable <span 
class="cmti-10">service</span><span 
class="cmti-10">_ping</span><span 
class="cmti-10">_dolog </span>and look in your log
directory, as most problems with pingers are reflected there. As a last resort, you can inspect the the Service Manager&#8217;s log
in
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-70">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$DUCC_HOME/logs/sm.log</div>
<!--l. 382--><p class="nopar" >
<!--l. 22--><p class="noindent" ><a name='DUCC_LOGS'></a>
                                                                                                
                                                                                                
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;6</span><br /><a 
 id="x1-920006"></a>Job Logs</h2>
<!--l. 28--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-930006"></a><span 
class="cmbx-10">Overview</span></span>
The DUCC logs are managed by Apache log4j. The DUCC log4j configuration file is found in $DUCC_HOME/resources/log4j.xml.
It is not in the scope of this document to describe log4j or its configuration mechanism. Details on log4j can be found at
<a 
href="http://logging.apache.org/log4j" class="url" ><span 
class="cmtt-10">http://logging.apache.org/log4j</span></a>.
<!--l. 33--><p class="noindent" >The &#8221;user logs&#8221; are the Job Driver (JD) and Job Process (JP) logs. There is one log for each process of a job. The JD log is
divided between two physical files:
<!--l. 37--><p class="noindent" >
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">Stdout and default UIMA logging output written by the UIMA collection reader.
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">The diagnostic logs written by the DUCC JD wrapper around the job&#8217;s collection reader.</dd></dl>
<!--l. 41--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-940006"></a><span 
class="cmbx-10">Contents of the Log Directory</span></span>
A number of other useful files are written to the log directory:
<!--l. 44--><p class="noindent" >
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">A properties file containing the full job specification for the job. This includes all the parameters specified by
     the user as well as the default parameters. This file is called <span 
class="cmtt-10">job-specification.properties.</span>
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">The UIMA pipeline descriptor constructed by DUCC that describes the process that is dispatched to each Job Process
     (JP). The name of this file is of the form
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-71">
     &#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;JOBID-uima-ae-descriptor-PROCESS.xml</div>
     <!--l. 51--><p class="nopar" > where
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">JOBID</span> </dt><dd 
class="description">This is the numerical id of the job as assigned by DUCC.
         </dd><dt class="description">
     <span 
class="cmbx-10">PROCESS</span> </dt><dd 
class="description">This is the process id of the Job Driver (JD) process.</dd></dl>
     </dd><dt class="enumerate-enumitem">
  3. </dt><dd 
class="enumerate-enumitem">The UIMA-AS service descriptor that defines the process that defines the job as as UIMAAS service. The name of this
     file is of the form
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-72">
     &#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;JOBID-uima-as-dd-PROCESS.xml</div>
     <!--l. 62--><p class="nopar" >
     <!--l. 64--><p class="noindent" >where
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">JOBID</span> </dt><dd 
class="description">This is the numerical id of the job as assigned by DUCC.
         </dd><dt class="description">
     <span 
class="cmbx-10">PROCESS</span> </dt><dd 
class="description">This is the process id of the Job Driver (JD) process.</dd></dl>
     </dd><dt class="enumerate-enumitem">
  4. </dt><dd 
class="enumerate-enumitem">A colllection of gzipped &#8220;json&#8221; files containing the performance breakdown of the job. These can be read and formatted
     using <a 
href="#x1-670003.12">ducc_perf_stats.</a></dd></dl>
<!--l. 74--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-950006"></a><span 
class="cmbx-10">Job Process Logs</span></span>
The Job Process logs are written to the configured log directory. There is one job process log for every job processes started
for the job. The log names are of the following form:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-73">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;JOBID-TYPE-NODE-PROCESS.log</div>
<!--l. 79--><p class="nopar" > where
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">JOBID</span> </dt><dd 
class="description">This is the numerical id of the job as assigned by DUCC.
     </dd><dt class="description">
<span 
class="cmbx-10">TYPE</span> </dt><dd 
class="description">This is either the string &#8221;UIMA&#8221; for JP logs, or &#8221;JD&#8221; for JD logs.
     </dd><dt class="description">
<span 
class="cmbx-10">NODE</span> </dt><dd 
class="description">This is the name of the machine where the process ran.
     </dd><dt class="description">
<span 
class="cmbx-10">PROCESS</span> </dt><dd 
class="description">This is the Unix process id of the process on the indicated node.</dd></dl>
<!--l. 88--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-960006"></a><span 
class="cmbx-10">Job Driver Logs</span></span>
There are several Job Driver logs. 988-JD-agent86-1-58087.log jd.out.log jd.err.log
<!--l. 94--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-970006"></a><span 
class="cmbx-10">Sample Log Directory</span></span>
This shows the contents a sample log directory for a small job that consisted of two processes.
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-74">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;100-JD-node290-1-29383.log
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;100-uima-ae-descriptor-29383.xml
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;100-uima-as-dd-29383.xml
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;100-UIMA-node290-2-32766.log
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;100-UIMA-node291-63-13594.log
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;jd.out.log
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;job-specification.properties
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;job-performance-summary.json.gz
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;job-processes-data.json.gz
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;work-item-status.json.gz
&#x00A0;<br /></div>
<!--l. 109--><p class="nopar" >
<!--l. 111--><p class="noindent" >In this example,
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">100-JD-node290-1-29383.log</span> </dt><dd 
class="description">                                                                                              <br 
class="newline" />is the diagnostic JD log, where the JD executed on node node290-1 in process 29383.
     </dd><dt class="description">
<span 
class="cmbx-10">100-uima-ae-descriptor-29383.xml</span> </dt><dd 
class="description">                                                                                      <br 
class="newline" />is the UIMA pipeline descriptor describing the service process that is launched in each JP, where the JD process
     is 29383.
     </dd><dt class="description">
<span 
class="cmbx-10">100-uima-as-dd-29383.xml</span> </dt><dd 
class="description">                                                                                                <br 
class="newline" />is the UIMA-AS service descriptor where the client is the JD process running in process 29383.
     </dd><dt class="description">
<span 
class="cmbx-10">100-UIMA-node290-2-32766.log</span> </dt><dd 
class="description">                                                                                         <br 
class="newline" />is a JP log for job 100, that ran on node node290-2, in process 32766.
     </dd><dt class="description">
<span 
class="cmbx-10">100-UIMA-node291-63-13594.log</span> </dt><dd 
class="description">                                                                                        <br 
class="newline" />is a JP log for job 100, that ran on node node291-63, in process 13594
     </dd><dt class="description">
<span 
class="cmbx-10">jd.out.log</span> </dt><dd 
class="description">                                                                                                                      <br 
class="newline" />is the user&#8217;s JD log, containing the user&#8217;s collection reader output.
     </dd><dt class="description">
<span 
class="cmbx-10">job-performance-summary.json.gz</span> </dt><dd 
class="description">                                                                                       <br 
class="newline" />This contains the raw statistics describing the operation of each analytic. It corresponds to <a 
href="#x1-1080007.3.3">Performance</a> tab
     of the Job Details page in the Web Server.
     </dd><dt class="description">
<span 
class="cmbx-10">job-process.json.gz</span> </dt><dd 
class="description">                                                                                                          <br 
class="newline" />This contains the raw statistics describing the performance of each individual job process. It corresponds
     <a 
href="#x1-1060007.3.1">Processes</a> tab of the Job Details page in the Web Server.
     </dd><dt class="description">
<span 
class="cmbx-10">work-item-status.json.gz</span> </dt><dd 
class="description">                                                                                                   <br 
class="newline" />This contains the raw statistics describing the operation of each individual work-item. It corresponds to <a 
href="#x1-1070007.3.2">Work
     Items</a> tab of the Job Details page in the Web Server.</dd></dl>
                                                                                                
                                                                                                
<!--l. 22--><p class="noindent" ><a name='DUCC_WEBSERVER'></a>
                                                                                                
                                                                                                
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;7</span><br /><a 
 id="x1-980007"></a>DUCC Web Server</h2>
<!--l. 26--><p class="noindent" >The DUCC Web Server default address is accessed from the URL http://[DUCC-HOST]:42133. The <span 
class="cmti-10">[DUCC-HOST] </span>is the
hostname where the local installation has installed the DUCC Web Server.
<div class="center" 
>
<!--l. 30--><p class="noindent" >
<div class="fbox">The hostname and port are configurable by the DUCC administrator in ducc.properties</div>
</div>
<!--l. 35--><p class="noindent" >The Webserver is designed to be mostly self-documenting. The design is intentionally simple and contains a link to this
document. Most of the interesting fields and column headers have &#8220;mouse hovers&#8221; which display a short description if you
hover your mouse pointer over it for a moment.
<!--l. 40--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-98001r1"></a>
                                                                                                
                                                                                                

<!--l. 42--><p class="noindent" ><img 
src="images/ducc-webserver/System-Daemons.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;7.1: </span><span  
class="content">Sample Webserver Page</span></div><!--tex4ht:label?: x1-98001r1 -->
                                                                                                
                                                                                                
<!--l. 45--><p class="noindent" ></div><hr class="endfigure">
<!--l. 47--><p class="noindent" >Normally, the Web Server automatically fetches new data from DUCC and updates the display. This is controlled by setting
one of the two refresh modes:
     <ul class="itemize1">
     <li class="itemize">Manual refresh. In this mode, the browser windows are updated only by using the browser&#8217;s refresh button, or
     the DUCC refresh button (to the left in the header of each page.
     </li>
     <li class="itemize">Automatic refresh. In this mode, the browser automatically fetches and displays new data. The rate of refresh
     is currently fixed and cannot be configured.</li></ul>
<!--l. 57--><p class="noindent" >There is a behavior difference between refresh and reload.
<!--l. 58--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-990007"></a><span 
class="cmbx-10">Refresh</span></span>
Refresh causes the current data on the page to be updated with the most current information in the Webserver&#8217;s possession.
This is performed when the refresh button is clicked.
<!--l. 62--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-1000007"></a><span 
class="cmbx-10">Reload</span></span>
Reload occurs when the enter key is pressed. Reload causes not just the data to be updated but rather the entire page is
replaced.
<!--l. 66--><p class="noindent" >Two different table styles are supported:
     <ul class="itemize1">
     <li class="itemize">Scroll, and
     </li>
     <li class="itemize">Classic.</li></ul>
<!--l. 71--><p class="noindent" >Table styles are switched using the <span 
class="cmti-10">Preferences </span>link.
<!--l. 73--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-1010007"></a><span 
class="cmbx-10">Scroll</span></span>
When <span 
class="cmti-10">scroll </span>is the preference, a scroll bar is shown to the right, within the main window. The scroll bar allows scrolling to be
restricted to the data display, leaving column and DUCC headers in place. In this mode any column may be sorted simply by
clicking on it.
<!--l. 78--><p class="noindent" >With respect to sorting, any specified sort is remembered for refresh but forgotten for reload. Sorting is permitted when
either manual or automatic refresh mode is selected.
<!--l. 82--><p class="noindent" >The column sort order is maintained until the page is reloaded.
<!--l. 84--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-1020007"></a><span 
class="cmbx-10">Classic Mode</span></span>
When <span 
class="cmti-10">classic mode </span>is the preference, the main data may extend below the bottom of the page and it will be necessary to use
the browser&#8217;s scroller on the right to access it. The column headers and DUCC header scrolls off when doing this. Columns
may be sorted in this mode but it is necessary to first switch to &#8220;Manual&#8221; refresh mode to prevent browser refreshes during
sorting and display of data.
<!--l. 90--><p class="noindent" >With respect to sorting, any specified sort is forgotten for refresh and reload. Sorting is only permitted when manual refresh
mode is selected.
<!--l. 94--><p class="noindent" >The column sort order is maintained until the page is refreshed or reloaded.
                                                                                                
                                                                                                
<!--l. 96--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-102001r2"></a>
                                                                                                
                                                                                                

<!--l. 98--><p class="noindent" ><img 
src="images/ducc-webserver/Preferences.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;7.2: </span><span  
class="content">Preferences Page</span></div><!--tex4ht:label?: x1-102001r2 -->
                                                                                                
                                                                                                
<!--l. 101--><p class="noindent" ></div><hr class="endfigure">
<!--l. 106--><p class="noindent" ><a name='DUCC_WS_COMMON'></a>
<h3 class="sectionHead"><span class="titlemark">7.1   </span> <a 
 id="x1-1030007.1"></a>Common Links</h3>
<!--l. 110--><p class="noindent" >Every page contains a common header containing links and controls. The links permit navigation to other content at the site.
The controls provide page-wise configuration of the content at that page.
<!--l. 114--><p class="noindent" >The following links are available on every page of the web server:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Authentication</span> </dt><dd 
class="description">                                                                                                               <br 
class="newline" />Authentication is needed in order to cancel jobs and reservations, to create a reservation, and to perform
     administration. It is not required to simply view the pages.
         <ul class="itemize1">
         <li class="itemize">Login - Authenticate and start a session with the Web Server.
         </li>
         <li class="itemize">Logout - Terminate the Web Server session</li></ul>
     </dd><dt class="description">
<span 
class="cmbx-10">Preferences</span> </dt><dd 
class="description">The following preferences may be set:
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Table Style</span> </dt><dd 
class="description">This selects &#8220;scroll&#8221; or &#8220;classic&#8221; display, as described above.
         </dd><dt class="description">
     <span 
class="cmbx-10">Date Style</span> </dt><dd 
class="description">This selects long, medium, or long formats for dates.
         </dd><dt class="description">
     <span 
class="cmbx-10">Description Style</span> </dt><dd 
class="description">This selects long or short formats for the various description fields.
         </dd><dt class="description">
     <span 
class="cmbx-10">Filter Users</span> </dt><dd 
class="description">This controls the &#8220;filter&#8221; box near the middle of the header on each page. It allows various levels
         of inclusion and exclusion of active or completed work for the filtered users.
         </dd><dt class="description">
     <span 
class="cmbx-10">Role</span> </dt><dd 
class="description">This allows selection of &#8220;User&#8221; or &#8220;Administrator&#8221; roles. This protects registered DUCC administrators
         from accidentally affecting other people&#8217;s work.</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">DuccBook</span> </dt><dd 
class="description">                                                                                                                     <br 
class="newline" />This is a link to the HTML version of the document you are reading.
     </dd><dt class="description">
<span 
class="cmbx-10">Jobs</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />This navigates to the Jobs page, showing all the jobs in the system.
     </dd><dt class="description">
<span 
class="cmbx-10">Reservations</span> </dt><dd 
class="description">                                                                                                                  <br 
class="newline" />This navigates to the Reservations page, showing all the reservations in the system and provides a button that can be
     used to request new reservations.
     </dd><dt class="description">
<span 
class="cmbx-10">Services</span> </dt><dd 
class="description">                                                                                                                        <br 
class="newline" />This navigates to the Services page, showing all the services in the system.
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">System</span> </dt><dd 
class="description">                                                                                                                         <br 
class="newline" />This opens a sub-menu with system-related links:
         <ul class="itemize1">
         <li class="itemize">Administration - This opens a page with administrative functions.
         </li>
         <li class="itemize">Classes - This shows all the scheduling classes defined to the system.
         </li>
         <li class="itemize">Daemons - This shows the status of DUCC&#8217;s management processes.
         </li>
         <li class="itemize">DuccBook - This manual.
         </li>
         <li class="itemize">Machines - This shows the status of all the ducc worker nodes.</li></ul>
     </dd></dl>
<!--l. 170--><p class="noindent" ><a name='DUCC_WS_JOBS'></a>
<!--l. 20--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">7.2   </span> <a 
 id="x1-1040007.2"></a>Jobs Page</h3>
<!--l. 22--><p class="noindent" >The Web Server&#8217;s home page is also the Jobs page. This page has links to all the rest of the content at the site and shows the
status of all the jobs in the system.
<!--l. 25--><p class="noindent" >The Jobs page contains the following columns:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Id</span> </dt><dd 
class="description">                                                                                                                                <br 
class="newline" />This is the ID as assigned by DUCC. This field is hyperlinked to a <a 
href="#x1-1050007.3">Job Details</a> page for that job that shows
     the breakdown of all the processes assigned to the job and their state.
     </dd><dt class="description">
<span 
class="cmbx-10">Start</span> </dt><dd 
class="description">                                                                                                                            <br 
class="newline" />This is the time the Job is accepted into DUCC.
     </dd><dt class="description">
<span 
class="cmbx-10">Duration</span> </dt><dd 
class="description">                                                                                                                       <br 
class="newline" />This shows two times. In green the length of time the job has been running. In black is the estimated time of
     completion, based on current resources and remaining work. When the job completes, the time shown is the
     total elapsed time of the job.
     </dd><dt class="description">
<span 
class="cmbx-10">User</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />This is the userid of the job owner.
     </dd><dt class="description">
<span 
class="cmbx-10">Class</span> </dt><dd 
class="description">                                                                                                                            <br 
class="newline" />This is the resource class the job is submitted to.
     </dd><dt class="description">
<span 
class="cmbx-10">State</span> </dt><dd 
class="description">                                                                                                                            <br 
class="newline" />This shows the state of the job. The normal job progression is shown below, with an explanation of what each state
     means.
                                                                                                
                                                                                                
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Received</span> </dt><dd 
class="description">- The job has been vetted, persisted, and assigned a unique ID.
         </dd><dt class="description">
     <span 
class="cmbx-10">WaitingForDriver</span> </dt><dd 
class="description">- The job is waiting for the Job Driver to initialize.
         </dd><dt class="description">
     <span 
class="cmbx-10">WaitingForServices</span> </dt><dd 
class="description">- The job is waiting for verification from the Service Manager that required services are
         started and responding. This may cause DUCC to start services if necessary. In that even this state will
         persist until all pre-requisite services are ready.
         </dd><dt class="description">
     <span 
class="cmbx-10">WaitingForResources</span> </dt><dd 
class="description">- The job is waiting to be scheduled. In busy systems this may require preemption of
         existing work. In that case this state will persist until preemption is complete.
         </dd><dt class="description">
     <span 
class="cmbx-10">Initializing</span> </dt><dd 
class="description">-  The  job  initializing.  Usually  this  is  the  UIMA-AS  initialization  phase.  In  the  default
         configuration, only two (2) processes are allocated by the Resource Manager. No additional resources are
         allocated until at least one of the new processes successfully completes initialization. Once initialization is
         complete the Resource Manager will double the number of allocated processes until the user&#8217;s fair share
         of the resources is attained.
         </dd><dt class="description">
     <span 
class="cmbx-10">Running</span> </dt><dd 
class="description">- At least one process is now initialized and running.
         </dd><dt class="description">
     <span 
class="cmbx-10">Completing</span> </dt><dd 
class="description">- The last work item has completed and DUCC is freeing resources. If the job had many resources
         allocated at the time the job exited this state will persist until all allocated resources are freed.
         </dd><dt class="description">
     <span 
class="cmbx-10">Completed</span> </dt><dd 
class="description">- The job is complete.</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">Reason or Extraordinary Status</span> </dt><dd 
class="description">                                                                                         <br 
class="newline" />
     <!--l. 80--><p class="noindent" >This field contains miscellaneous information pertaining to the job. If the job exits the system for any reason, that
     reason is shown here. If the job&#8217;s pre-requisite services are unavailable (or ailing) that fact is displayed here. If there is a
     job monitor running, that fact is shown here. Most of the values for this field support &#8220;hovers&#8221; containing additional
     information about the reason.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">EndOfJob</span> </dt><dd 
class="description">- The job and completed ran with no errors.
         </dd><dt class="description">
     <span 
class="cmbx-10">Error</span> </dt><dd 
class="description">- All work items are processes but at least one had an error.
         </dd><dt class="description">
     <span 
class="cmbx-10">CanceledByDriver</span> </dt><dd 
class="description">- The Job Driver (JD) terminated the job. The reason for termination is seen by hovering
         over the text with your mouse.
         </dd><dt class="description">
     <span 
class="cmbx-10">CanceledBySystem</span> </dt><dd 
class="description">- The job was canceled because DUCC was shutdown.
         </dd><dt class="description">
     <span 
class="cmbx-10">CanceledBySser</span> </dt><dd 
class="description">- The job owner or DUCC administrator canceled the job.
         </dd><dt class="description">
     <span 
class="cmbx-10">Cancel Pending</span> </dt><dd 
class="description">- The job has been canceleled and is not yet fully evicted from the system.
         </dd><dt class="description">
     <span 
class="cmbx-10">DriverInitializationFailure</span> </dt><dd 
class="description">- The Job Deiver (JD) process is unable to initialize. Hover over the field with
                                                                                                
                                                                                                
         your mouse for details (if any are available), and check your JD log.
         </dd><dt class="description">
     <span 
class="cmbx-10">DriverProcessFailed</span> </dt><dd 
class="description">- The Job Driver (JD) process failed for some reason. Hover over the field with your
         mouse for details (if any), and check your JD log.
         </dd><dt class="description">
     <span 
class="cmbx-10">MonitorActive</span> </dt><dd 
class="description">The job has a console monitor active. This is enabled with the job&#8217;s &#8220;wait_for_completion&#8221;
         parameter on job submission.
         </dd><dt class="description">
     <span 
class="cmbx-10">ServicesUnavailable</span> </dt><dd 
class="description">- The job declared a dependency on one or more services, and the Service Manager
         (SM) cannot find or start the required service.
         </dd><dt class="description">
     <span 
class="cmbx-10">Premature</span> </dt><dd 
class="description">- The job was terminated for some unknown reason before all work items were processed. Check
         the JP logs for details.
         </dd><dt class="description">
     <span 
class="cmbx-10">ProcessInitializationFailure</span> </dt><dd 
class="description">- Too many processes failed during initialization and the job was canceled by
         DUCC. Check the JP logs for the reason.
         </dd><dt class="description">
     <span 
class="cmbx-10">ProcessFailure</span> </dt><dd 
class="description">- Too many processes failed while running and DUCC canceled the job. Check the JP logs
         for the reason.
         </dd><dt class="description">
     <span 
class="cmbx-10">ResourcesUnavailable</span> </dt><dd 
class="description">-  The  Resource  Manager  (RM)  is  unable  to  allocate  resources  for  the  job.  For
         non-preemptable jobs this could be because the limit on that type of allocation is reached, or all the nodes
         are already allocated and work cannot be preempted to make space for it. For all jobs, it could be because
         the job class is invalid.
         </dd><dt class="description">
     <span 
class="cmbxti-10">service</span><span 
class="cmbxti-10">_name</span> </dt><dd 
class="description">If there is a service name in this field it indicates the job is dependent on the service but the
         service is not responding to the Ducc Service Monitor&#8217;s pinger.</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">Services</span> </dt><dd 
class="description">                                                                                                                        <br 
class="newline" />This is the number of services the job has declared dependencies on. There is a &#8220;hover&#8221; that shows the ids of the
     services, if any.
     </dd><dt class="description">
<span 
class="cmbx-10">Processes</span> </dt><dd 
class="description">                                                                                                                      <br 
class="newline" />This is the number of processes currently assigned to the job.
     </dd><dt class="description">
<span 
class="cmbx-10">Init Fails</span> </dt><dd 
class="description">                                                                                                                       <br 
class="newline" />This is the total number of initialization failures experienced by the job. This field is hyperlinked to pages with log
     excerpts highlighting the specific failures.
     </dd><dt class="description">
<span 
class="cmbx-10">Run Fails</span> </dt><dd 
class="description">                                                                                                                      <br 
class="newline" />This is the total number of process failures experienced by the job. This field is hyperlinked to pages with log excerpts
     highlighting the specific failures.
     </dd><dt class="description">
<span 
class="cmbx-10">Pgin</span> </dt><dd 
class="description">This is the number of page-in events, over all processes, on the machines running the job.
     </dd><dt class="description">
<span 
class="cmbx-10">Swap</span> </dt><dd 
class="description">This is the total swap space, over all the processes, being used by the job.
     </dd><dt class="description">
<span 
class="cmbx-10">Size</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />This is the declared memory size of the job
     </dd><dt class="description">
<span 
class="cmbx-10">Total</span> </dt><dd 
class="description">                                                                                                                            <br 
class="newline" />This is the total number of work items declared by the job.
     </dd><dt class="description">
<span 
class="cmbx-10">Done</span> </dt><dd 
class="description">                                                                                                                            <br 
class="newline" />This is the total number of work items successfully completed for the job.
     </dd><dt class="description">
<span 
class="cmbx-10">Error</span> </dt><dd 
class="description">                                                                                                                           <br 
class="newline" />This is the total number of exceptions thrown or other errors experienced by work items. This field is hyperlinked to
     pages containing log excerpts highlighting the failures.
     </dd><dt class="description">
<span 
class="cmbx-10">Dispatch</span> </dt><dd 
class="description">                                                                                                                       <br 
class="newline" />This is the total number CASs that are currently dispatched.
     <!--l. 156--><p class="noindent" >This usually represents the quantity derived from the following formula:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-75">
     &#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;min(&#x00A0;(initialized.processes&#x00A0;*&#x00A0;threads.per.process),&#x00A0;(incomplete.work.items&#x00A0;-&#x00A0;errors)&#x00A0;)</div>
     <!--l. 159--><p class="nopar" >
     <!--l. 161--><p class="noindent" >The actual number is a measured number, not a calculated number, and may differ slightly from the formula if the
     measurement is taken immediately after process start-up, or in the time between a work item completing and a new one
     being dispatched.
     </dd><dt class="description">
<span 
class="cmbx-10">Retry</span> </dt><dd 
class="description">                                                                                                                           <br 
class="newline" />This is the number of CASs that were retried for any reason. Reasons for retry include preemption for fair-share,
     work-item timeout, or error conditions.
     <!--l. 170--><p class="noindent" >Note: If a work item in any process fails, the entire process is considered suspect, and all work-items in the process are
     terminated. Work items in the process which did not have errors are re-dispatched (retried) to a different
     process.
     </dd><dt class="description">
<span 
class="cmbx-10">Preempt</span> </dt><dd 
class="description">                                                                                                                       <br 
class="newline" />This is the total number of processes that have been preempted to make room for other work due to Fair
     Share.
     </dd><dt class="description">
<span 
class="cmbx-10">Description</span> </dt><dd 
class="description">                                                                                                                    <br 
class="newline" />This is the description string from the <span 
class="cmsy-10">--</span>description string from submit.</dd></dl>
<!--l. 183--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-104001r3"></a>
                                                                                                
                                                                                                

<!--l. 185--><p class="noindent" ><img 
src="images/ducc-webserver/Jobs.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;7.3: </span><span  
class="content">Jobs Page</span></div><!--tex4ht:label?: x1-104001r3 -->
                                                                                                
                                                                                                
<!--l. 188--><p class="noindent" ></div><hr class="endfigure">
<!--l. 177--><p class="noindent" ><a name='DUCC_WS_JOB_DETAILS'></a>
<h3 class="sectionHead"><span class="titlemark">7.3   </span> <a 
 id="x1-1050007.3"></a>Job Details Page</h3>
<!--l. 23--><p class="noindent" >This page shows details of all the processes that run in support of a job. The information is divided among four
tabs:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Processes</span> </dt><dd 
class="description">This tab contains details on all the processes for the job, both active, and defunct.
     </dd><dt class="description">
<span 
class="cmbx-10">Work Items</span> </dt><dd 
class="description">This tab shows details for each individual work-item in the job.
     </dd><dt class="description">
<span 
class="cmbx-10">Performance</span> </dt><dd 
class="description">This tab shows a performance break-down of all the UIMA analytics in the job.
     </dd><dt class="description">
<span 
class="cmbx-10">Specification</span> </dt><dd 
class="description">This tab shows the job specification for the job.</dd></dl>
<!--l. 34--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">7.3.1   </span> <a 
 id="x1-1060007.3.1"></a>Processes</h4>
<!--l. 36--><p class="noindent" >The processes page contains the following columns:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Id</span> </dt><dd 
class="description">                                                                                                                                <br 
class="newline" />This is the DUCC-assigned numeric id of the process (not the Operating System&#8217;s processid). Process 0 is
     always the Job Driver.
     </dd><dt class="description">
<span 
class="cmbx-10">Log</span> </dt><dd 
class="description">                                                                                                                              <br 
class="newline" />This is the log name for the process. It is hyperlinked to the log itself.
     </dd><dt class="description">
<span 
class="cmbx-10">Size</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />This is the size of the log in MB. If you find you have trouble viewing the log from the Web Server it could be
     because it is too big to view in the server and needs to be read by some other means than the Web Server. (It
     is not currently paged in by the Web Server, it is read in full.)
     </dd><dt class="description">
<span 
class="cmbx-10">Hostname</span> </dt><dd 
class="description">                                                                                                                     <br 
class="newline" />This is the name of the node where the process ran.
     </dd><dt class="description">
<span 
class="cmbx-10">PID</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />This is the Unix process ID (PID) of the process.
     </dd><dt class="description">
<span 
class="cmbx-10">State Scheduler</span> </dt><dd 
class="description">                                                                                                              <br 
class="newline" />
     <!--l. 63--><p class="noindent" >This shows the Resource Manager state of the job. It is one of:
                                                                                                
                                                                                                
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Allocated</span> </dt><dd 
class="description">- The node is currently allocated for this job by the RM.
         </dd><dt class="description">
     <span 
class="cmbx-10">Deallocated</span> </dt><dd 
class="description">- The resource manager has deallocated the shares for the job on this node.</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">Reason Scheduler or extraordinary status</span> </dt><dd 
class="description">                                                                            <br 
class="newline" /><a 
 id="likesection.3"></a>
     <!--l. 76--><p class="noindent" >This column provides a reason for the scheduler state, when the scheduler state is other than &#8220;Allocated&#8221;. These all
     have &#8220;hovers&#8221; that provide more information if it is available.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">AutonomousStop</span> </dt><dd 
class="description">- The process terminated unexpectedly of its own accord (&#8221;crashed&#8221;, or simply exited.)
         </dd><dt class="description">
     <span 
class="cmbx-10">Exception</span> </dt><dd 
class="description">- The process is terminated by the JD exception handler.
         </dd><dt class="description">
     <span 
class="cmbx-10">Failed</span> </dt><dd 
class="description">- The process is terminated by the Agent because the JP wrapper was able to detect and communicate
         a fatal condition (Exception) in the pipeline..
         </dd><dt class="description">
     <span 
class="cmbx-10">FailedInitialization</span> </dt><dd 
class="description">- The process is terminated because the UIMA initialization step failed.
         </dd><dt class="description">
     <span 
class="cmbx-10">Forced</span> </dt><dd 
class="description">- The node is preempted by RM for other work because of fair share.
         </dd><dt class="description">
     <span 
class="cmbx-10">JobCanceled</span> </dt><dd 
class="description">- The job was canceled by the user or a system administrator.
         </dd><dt class="description">
     <span 
class="cmbx-10">JobCompleted</span> </dt><dd 
class="description">- The process is canceled because of DUCC restart.
         </dd><dt class="description">
     <span 
class="cmbx-10">JobFailure</span> </dt><dd 
class="description">- The job failure limit is exceeded, causing the job to be canceled by the JD.
         </dd><dt class="description">
     <span 
class="cmbx-10">InitializationTimeout</span> </dt><dd 
class="description">- The UIMA initialization phase exceeded the configured timeout.
         </dd><dt class="description">
     <span 
class="cmbx-10">Killed</span> </dt><dd 
class="description">- The agent terminated the process for some reason. The &#8220;Reason Agent&#8221; field should have more details
         in this case.
         </dd><dt class="description">
     <span 
class="cmbx-10">Stopped</span> </dt><dd 
class="description">-  The  process  was  terminated  by  the  Agent  for  some  reason.  The  hover  should  contain  more
         information.
         </dd><dt class="description">
     <span 
class="cmbx-10">Voluntary</span> </dt><dd 
class="description">- The job is winding down, there&#8217;s no more work for this node, so it stops.
         </dd><dt class="description">
     <span 
class="cmbx-10">Unknown</span> </dt><dd 
class="description">- None of the above. This is an exceptional condition, sometimes an internal DUCC error. Check
         the JP and JD logs for possible causes..</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">State Agent</span> </dt><dd 
class="description">                                                                                                                   <br 
class="newline" /><a 
 id="likesection.4"></a>
     <!--l. 118--><p class="noindent" >This shows the DUCC Agent&#8217;s view of the state of the process.
                                                                                                
                                                                                                
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Starting</span> </dt><dd 
class="description">The DUCC process manager as issued a request to the assigned to start the process.
         </dd><dt class="description">
     <span 
class="cmbx-10">Initializing</span> </dt><dd 
class="description">The  process  is  initializing.  Usually  this  means  the  UIMA  analytic  pipeline  (Job  Process)  is
         executing it&#8217;s initialization method.
         </dd><dt class="description">
     <span 
class="cmbx-10">Running</span> </dt><dd 
class="description">The Job Process has completed the initialization phase and is ready for, or actively executing work.
         </dd><dt class="description">
     <span 
class="cmbx-10">Stopped</span> </dt><dd 
class="description">The DUCC Agent reports the process is stopped and (and has exited).
         </dd><dt class="description">
     <span 
class="cmbx-10">Failed</span> </dt><dd 
class="description">The DUCC Agent reports the process failed with errors. This usually means that UIMA-AS has detected
         exceptions in the pipeline and reported them to the Job Driver for logging.
         </dd><dt class="description">
     <span 
class="cmbx-10">FailedInitialization</span> </dt><dd 
class="description">The process died during the UIMA initialization phase.
         </dd><dt class="description">
     <span 
class="cmbx-10">InitializationTimeout</span> </dt><dd 
class="description">The process exceeded the site&#8217;s limit for time spent in UIMA initialization.
         </dd><dt class="description">
     <span 
class="cmbx-10">Killed</span> </dt><dd 
class="description">The DUCC Agent killed the process for some reason. There are three rosins for this:
             <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
          1. </dt><dd 
class="enumerate-enumitem">The Job Processes failed to initialize,
             </dd><dt class="enumerate-enumitem">
          2. </dt><dd 
class="enumerate-enumitem">The Job Process timed out during initialization,
             </dd><dt class="enumerate-enumitem">
          3. </dt><dd 
class="enumerate-enumitem">The process Exocet&#8217;s its allowed swap.</dd></dl>
         </dd><dt class="description">
     <span 
class="cmbx-10">Abandoned</span> </dt><dd 
class="description">It is possible to cancel a specific process of a job. Usually this is because it became &#8220;stuck&#8221; because of
         hardware failure. It a process is killed in <a 
href="#x1-310003.6">this way</a>, the state is recoreded as <span 
class="cmti-10">Abandonded</span>.</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">Reason Agent</span> </dt><dd 
class="description">                                                                                                                <br 
class="newline" /><a 
 id="likesection.5"></a>
     <!--l. 148--><p class="noindent" >This shows extended reason information if a process exited other than having run out of work to do.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">AgentTimedOutWatingForORState</span> </dt><dd 
class="description">The  DUCC  Agent  is  expecting  a  state  update  from  the  DUCC
         Orchestrator. Timer on this wait has expired. This usually indicates an infrastructure or communication
         problem.
         </dd><dt class="description">
     <span 
class="cmbx-10">Croaked</span> </dt><dd 
class="description">The process exited for no good or clear reason, it simply vanished.
         </dd><dt class="description">
     <span 
class="cmbx-10">Deallocated</span> </dt><dd 
class="description">WHAT IS THIS?
         </dd><dt class="description">
     <span 
class="cmbx-10">ExceededShareSize</span> </dt><dd 
class="description">The process exceeded it&#8217;s declared memory size.
         </dd><dt class="description">
     <span 
class="cmbx-10">ExceededSwapThreshold</span> </dt><dd 
class="description">The process exceeded the configured swap threshold.
                                                                                                
                                                                                                
         </dd><dt class="description">
     <span 
class="cmbx-10">FailedInitialization</span> </dt><dd 
class="description">The process was terminated because the UIMA initialization step failed.
         </dd><dt class="description">
     <span 
class="cmbx-10">InitializationTimeout</span> </dt><dd 
class="description">The process was terminated because the UIMA initialization step took too long.
         </dd><dt class="description">
     <span 
class="cmbx-10">JPHasNoActiveJob</span> </dt><dd 
class="description">This is set when an agent looses connectivity while its JPs are running. The job finishes
         (stopped or killed). The agent regains connectivity. The OR publish no longer includes the job but the agent
         still has processes running for that job. The agent kills ghost processes with the reason: JPHasNoActiveJob.
         </dd><dt class="description">
     <span 
class="cmbx-10">LowSwapSpace</span> </dt><dd 
class="description">The process was terminated because the system is about to run out of swap space. This is
         a preemptive measure taken by DUCC to avoid exhaustion of swap, to effect orderly eviction of the job
         before the operating system starts its own reaping procedures.
         </dd><dt class="description">
     <span 
class="cmbx-10">AdministratorInitiated</span> </dt><dd 
class="description">The process was canceled by an administrator.
         </dd><dt class="description">
     <span 
class="cmbx-10">UserInitated</span> </dt><dd 
class="description">The process was canceled by the owning user.</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">Time Init</span> </dt><dd 
class="description">                                                                                                                      <br 
class="newline" />This is the clock time this process spent in initialization.
     </dd><dt class="description">
<span 
class="cmbx-10">Time Run</span> </dt><dd 
class="description">                                                                                                                     <br 
class="newline" />This is the clock time this process spent in executing, not including initialization.
     </dd><dt class="description">
<span 
class="cmbx-10">Time GC</span> </dt><dd 
class="description">                                                                                                                      <br 
class="newline" />This is amount of time spent in Java Garbage Collection for the process.
     </dd><dt class="description">
<span 
class="cmbx-10">Count GC</span> </dt><dd 
class="description">                                                                                                                     <br 
class="newline" />This is the number of garbage collections performed by the process.
     </dd><dt class="description">
<span 
class="cmbx-10">Pgin</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />This is the number of page-in events on behalf of the process.
     </dd><dt class="description">
<span 
class="cmbx-10">Swap</span> </dt><dd 
class="description">                                                                                                                            <br 
class="newline" />This is the amount of swap space on the machine being consumed by the process.
     </dd><dt class="description">
<span 
class="cmbx-10">%GC</span> </dt><dd 
class="description">                                                                                                                            <br 
class="newline" />Percentage of time spent in garbage collections by this process, relative to total of initialization + run
     times.
     </dd><dt class="description">
<span 
class="cmbx-10">%CPU</span> </dt><dd 
class="description">                                                                                                                          <br 
class="newline" />Currant CPU percent consumed by the process. This will be <span 
class="cmmi-10">&#x003E; </span>100% on multi-core systems if more than one core is
     being used. Each core contributes up to 100% CPU, so, for example, on a 16-core machine, this can be as high as
     1600%.
     </dd><dt class="description">
<span 
class="cmbx-10">RSS</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />The amount of real memory being consumed by the process (Resident Storage Size)
     </dd><dt class="description">
<span 
class="cmbx-10">Time Avg</span> </dt><dd 
class="description">                                                                                                                      <br 
class="newline" />This is the average time in seconds spent per work item in the process.
     </dd><dt class="description">
<span 
class="cmbx-10">Time max</span> </dt><dd 
class="description">                                                                                                                     <br 
class="newline" />This is the minimum time in seconds spent per work item in the process.
     </dd><dt class="description">
<span 
class="cmbx-10">Time min</span> </dt><dd 
class="description">                                                                                                                      <br 
class="newline" />This is the minimum time in seconds spent per work item in the process.
     </dd><dt class="description">
<span 
class="cmbx-10">Done</span> </dt><dd 
class="description">                                                                                                                            <br 
class="newline" />This is the number of work items processed in this process.
     </dd><dt class="description">
<span 
class="cmbx-10">Error</span> </dt><dd 
class="description">                                                                                                                           <br 
class="newline" />This is the number of exceptions processing work items in this process.
     </dd><dt class="description">
<span 
class="cmbx-10">Retry</span> </dt><dd 
class="description">                                                                                                                           <br 
class="newline" />This is the number of work items that were retried in this process for any reason, excluding preemption.
     </dd><dt class="description">
<span 
class="cmbx-10">Preempt</span> </dt><dd 
class="description">                                                                                                                       <br 
class="newline" />This is the number of work items that were preempted from this process, if fair-share caused preemption.
     </dd><dt class="description">
<span 
class="cmbx-10">JConsole URL</span> </dt><dd 
class="description">                                                                                                                <br 
class="newline" />This is a URL that can be used to connect via JMX to the processes, e.g. via jconsole.
     </dd></dl>
<!--l. 237--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-106004r4"></a>
                                                                                                
                                                                                                

<!--l. 239--><p class="noindent" ><img 
src="images/ducc-webserver/Job-Details-Processes.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;7.4: </span><span  
class="content">Processes Tab</span></div><!--tex4ht:label?: x1-106004r4 -->
                                                                                                
                                                                                                
<!--l. 242--><p class="noindent" ></div><hr class="endfigure">
<h4 class="subsectionHead"><span class="titlemark">7.3.2   </span> <a 
 id="x1-1070007.3.2"></a>Work Items</h4>
<!--l. 246--><p class="noindent" >This tab provides details for each individual work item. Columns include:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">SeqNo</span> </dt><dd 
class="description">                                                                                                                          <br 
class="newline" />This is the sequence work items are fetched from the Collection Reader&#8217;s getNext() method by the DUCC Job
     Driver.
     </dd><dt class="description">
<span 
class="cmbx-10">Id</span> </dt><dd 
class="description">                                                                                                                                <br 
class="newline" />This is the name of the work item.
     </dd><dt class="description">
<span 
class="cmbx-10">Status</span> </dt><dd 
class="description">                                                                                                                          <br 
class="newline" />The is the current state of the work item. States include:
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">ended</span> </dt><dd 
class="description">The work item is complete.
         </dd><dt class="description">
     <span 
class="cmbx-10">error</span> </dt><dd 
class="description">The work item ended with errors.
         </dd><dt class="description">
     <span 
class="cmbx-10">lost</span> </dt><dd 
class="description">The work item was queued to ActiveMQ but never dequeued by any Job Process.
         </dd><dt class="description">
     <span 
class="cmbx-10">operating</span> </dt><dd 
class="description">The work item is current being executed.
         </dd><dt class="description">
     <span 
class="cmbx-10">retry</span> </dt><dd 
class="description">The work item is being retried.
         </dd><dt class="description">
     <span 
class="cmbx-10">start</span> </dt><dd 
class="description">The work item has been picked up for execution and DUCC is waiting for confirmation that it is running.
         </dd><dt class="description">
     <span 
class="cmbx-10">queued</span> </dt><dd 
class="description">The work item has been queued to ActiveMQ but not picked up by any Job Process yet.</dd></dl>
     <!--l. 270--><p class="noindent" >If a work item has not yet been retrieved from the Collect Reader it does not show on this page.
     </dd><dt class="description">
<span 
class="cmbx-10">Queuing Time (sec)</span> </dt><dd 
class="description">                                                                                                         <br 
class="newline" />The time spent in ActiveMQ after being queued, and before being picked up by a Job Process.
     </dd><dt class="description">
<span 
class="cmbx-10">Processing Time (sec)</span> </dt><dd 
class="description">                                                                                                      <br 
class="newline" />The time spent processing the work item.
     </dd><dt class="description">
<span 
class="cmbx-10">Node (IP)</span> </dt><dd 
class="description">                                                                                                                     <br 
class="newline" />The node IP where the work item was processed.
     </dd><dt class="description">
<span 
class="cmbx-10">Node (Name</span> </dt><dd 
class="description">                                                                                                                  <br 
class="newline" />The node name where the work item was processed.
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">PID</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />The Unix Process Id that the work item was processed in.</dd></dl>
<!--l. 285--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-107001r5"></a>
                                                                                                
                                                                                                

<!--l. 287--><p class="noindent" ><img 
src="images/ducc-webserver/Job-Details-WorkItems.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;7.5: </span><span  
class="content">Work Items Tab</span></div><!--tex4ht:label?: x1-107001r5 -->
                                                                                                
                                                                                                
<!--l. 290--><p class="noindent" ></div><hr class="endfigure">
<h4 class="subsectionHead"><span class="titlemark">7.3.3   </span> <a 
 id="x1-1080007.3.3"></a>Performance</h4>
<!--l. 294--><p class="noindent" >This tab shows performance summaries of all the pipeline components. The statistics are aggregated over all instances of each
component in each process of the job.
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Name</span> </dt><dd 
class="description">                                                                                                                           <br 
class="newline" />The short name of the analytic. The full name is shown in the command-line tool <a 
href="#x1-670003.12">ducc_perf_stats</a>
     </dd><dt class="description">
<span 
class="cmbx-10">Total</span> </dt><dd 
class="description">                                                                                                                            <br 
class="newline" />This is the total time in days, hours, minutes, and seconds taken by each component of the pipeline.
     </dd><dt class="description">
<span 
class="cmbx-10">% of Total</span> </dt><dd 
class="description">                                                                                                                     <br 
class="newline" />This is the percent of the total usage consumed by this analytic.
     </dd><dt class="description">
<span 
class="cmbx-10">Avg</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />This is the average time spent by all the instances of the analytic.
     </dd><dt class="description">
<span 
class="cmbx-10">Min</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />This is the minimum time spent by any instance of the analytic.
     </dd><dt class="description">
<span 
class="cmbx-10">Max</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />This is the maximum time spent by any instance of the analytic.</dd></dl>
<!--l. 314--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-108001r6"></a>
                                                                                                
                                                                                                

<!--l. 316--><p class="noindent" ><img 
src="images/ducc-webserver/Job-Details-Performance.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;7.6: </span><span  
class="content">Performance Tab</span></div><!--tex4ht:label?: x1-108001r6 -->
                                                                                                
                                                                                                
<!--l. 319--><p class="noindent" ></div><hr class="endfigure">
<h4 class="subsectionHead"><span class="titlemark">7.3.4   </span> <a 
 id="x1-1090007.3.4"></a>Specification</h4>
<!--l. 322--><p class="noindent" >This tab shows the full job specification in the form of a Java Properties file. This will include all the parameters specified by
the user, plus those filled in by DUCC.
<!--l. 326--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-109001r7"></a>
                                                                                                
                                                                                                

<!--l. 328--><p class="noindent" ><img 
src="images/ducc-webserver/Job-Details-Specification.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;7.7: </span><span  
class="content">Specification Tab</span></div><!--tex4ht:label?: x1-109001r7 -->
                                                                                                
                                                                                                
<!--l. 331--><p class="noindent" ></div><hr class="endfigure">
<!--l. 184--><p class="noindent" ><a name='DUCC_WS_RESERVATIONS'></a>
<h3 class="sectionHead"><span class="titlemark">7.4   </span> <a 
 id="x1-1100007.4"></a>Reservation Page</h3>
<!--l. 23--><p class="noindent" >This page shows details of all reservations. There are two types of reservations: <span 
class="cmti-10">managed </span>and <span 
class="cmti-10">unmanaged.</span>.
<!--l. 26--><p class="noindent" >A <span 
class="cmti-10">managed reservation </span>is a reservation whose process is fully managed by DUCC. This process is any arbitrary process and is
submitted with the <a 
href="#x1-460003.9">ducc_process_submit</a> CLI. The lifetime of the reservation starts at the time DUCC assigns a unique ID,
and ends when the process terminates for any reason.
<!--l. 31--><p class="noindent" >An <span 
class="cmti-10">unmanaged reservation </span>is essentially a sandbox for the user. DUCC starts no processes in the reservation and manages
none of the processes which run on that node. The lifetime of the reservation starts at the time DUCC assigns a unique ID,
and ends when the submitter or system administrator cancels it. <span 
class="cmti-10">Managed reservations </span>can potentially last an indefinite
period of time.
<!--l. 37--><p class="noindent" >The Reservations page contains the following columns:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Id</span> </dt><dd 
class="description">                                                                                                                                <br 
class="newline" />This is the unique DUCC numeric id of the reservation as assigned when the reservation is made. If this is a
     <span 
class="cmti-10">managed </span>reservation, the ID is hyperlinked to a <a 
href="#x1-1110007.5">Managed Reservation Details</a> page with extended details on
     the process running in the reservation.
     </dd><dt class="description">
<span 
class="cmbx-10">Start</span> </dt><dd 
class="description">                                                                                                                            <br 
class="newline" />This is the time the reservation was mode.
     </dd><dt class="description">
<span 
class="cmbx-10">End</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />This is the time the reservation was canceled or otherwise ended.
     </dd><dt class="description">
<span 
class="cmbx-10">User</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />This is the userid if the person who made the reservation.
     </dd><dt class="description">
<span 
class="cmbx-10">Class</span> </dt><dd 
class="description">                                                                                                                            <br 
class="newline" />This is the scheduling class used to schedule the reservation.
     </dd><dt class="description">
<span 
class="cmbx-10">Type</span> </dt><dd 
class="description">                                                                                                                            <br 
class="newline" />This is the reservation type, <span 
class="cmti-10">managed </span>or <span 
class="cmti-10">unmanaged</span>, as described <a 
href="#x1-1100007.4">above</a>.
     </dd><dt class="description">
<span 
class="cmbx-10">State</span> </dt><dd 
class="description">                                                                                                                            <br 
class="newline" />This is the status of the reservation. Values include: Received - Reservation has been vetted, persisted, and assigned
     unique Id.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Assigned</span> </dt><dd 
class="description">- The reservation is active.
         </dd><dt class="description">
     <span 
class="cmbx-10">Completed</span> </dt><dd 
class="description">- The reservation has been terminated.
         </dd><dt class="description">
     <span 
class="cmbx-10">Received</span> </dt><dd 
class="description">- The Reservation has been vetted, persisted, and assigned a unique ID.
         </dd><dt class="description">
     <span 
class="cmbx-10">WaitingForResources</span> </dt><dd 
class="description">- The reservation is waiting for the Resource Manager to find and schedule resources.</dd></dl>
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">Reason</span> </dt><dd 
class="description">                                                                                                                         <br 
class="newline" />
     <!--l. 78--><p class="noindent" >If a reservation is not active, this shows the reason. Note that for <span 
class="cmti-10">unmanaged reservations</span>, even if the user has
     processes running in the reservation, DUCC does NOT attempt to terminate those processes (hence,
     &#8220;unmanaged&#8221;.)
     <!--l. 82--><p class="noindent" >For <span 
class="cmti-10">managed reservations</span>, DUCC does terminate the associated process.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">CanceledBySystem</span> </dt><dd 
class="description">-  In  the  case  of  the  special  JobDriver  reservation,  this  is  canceled  by  DUCC  and
         reestablished on reboot; hence the state is a result of DUCC having been restarted.
         <!--l. 89--><p class="noindent" >In all other cases, it is a result of DUCC being restarted <span 
class="cmti-10">COLD</span>. When DUCC is started <span 
class="cmti-10">COLD</span>, all
         previous reservations are canceled. (When DUCC is started <span 
class="cmti-10">WARM</span>, the default, previous reservations are
         preserved.)
         </dd><dt class="description">
     <span 
class="cmbx-10">CanceledByAdmin</span> </dt><dd 
class="description">- The DUCC administrator released the reservation.
         </dd><dt class="description">
     <span 
class="cmbx-10">CanceledByUser</span> </dt><dd 
class="description">- The reservation owner released the reservation.
         </dd><dt class="description">
     <span 
class="cmbx-10">ResourcesUnavailable</span> </dt><dd 
class="description">- The Resource Manager was unable to find free or freeable resources match the
         resource request.
         </dd><dt class="description">
     <span 
class="cmbx-10">ProgramExit</span> </dt><dd 
class="description">- The reservation is a <span 
class="cmti-10">managed </span>reservation and the associated process has exited.</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">Allocation</span> </dt><dd 
class="description">                                                                                                                     <br 
class="newline" />This is the number of resources (shares for FIXED policy reservations, processes for RESERVE policy reservations)
     that are allocated.
     </dd><dt class="description">
<span 
class="cmbx-10">UserProcesses</span> </dt><dd 
class="description">This is the number of processes owned by the user running in all shares of the reservation.
     <!--l. 107--><p class="noindent" >Note that even for <span 
class="cmti-10">unmanaged </span>reservations, the DUCC agent tracks processes owned by the user and reports on them.
     This allows better identification and management of abandoned reservations.
     </dd><dt class="description">
<span 
class="cmbx-10">Size</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />The memory size in GB of the each allocated unit. This is the amount of memory that was <span 
class="cmti-10">requested</span>. In the case of
     RESERVE policy reservations, that actual memory of the reserved machine may be greater.
     </dd><dt class="description">
<span 
class="cmbx-10">Host Names</span> </dt><dd 
class="description">                                                                                                                   <br 
class="newline" />The node names of the machines where the resources are allocated.
     </dd><dt class="description">
<span 
class="cmbx-10">Description</span> </dt><dd 
class="description">                                                                                                                    <br 
class="newline" />This is the description string from the &#8211;description string from submit.</dd></dl>
<!--l. 123--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-110001r8"></a>
                                                                                                
                                                                                                

<!--l. 125--><p class="noindent" ><img 
src="images/ducc-webserver/Reservations.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;7.8: </span><span  
class="content">Reservations Page</span></div><!--tex4ht:label?: x1-110001r8 -->
                                                                                                
                                                                                                
<!--l. 128--><p class="noindent" ></div><hr class="endfigure">
<!--l. 191--><p class="noindent" ><a name='DUCC_WS_RESERVATIONS_DETAILS'></a>
<h3 class="sectionHead"><span class="titlemark">7.5   </span> <a 
 id="x1-1110007.5"></a>Managed Reservation Details Page</h3>
<!--l. 22--><p class="noindent" >This page shows details of the processes which run in a managed reservation. The information is divided between two
tabs:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Processes</span> </dt><dd 
class="description">This tab contains details on all the proceses contained in the reserved space.
     </dd><dt class="description">
<span 
class="cmbx-10">Specification</span> </dt><dd 
class="description">This tab shows the specification for the process.</dd></dl>
<!--l. 31--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">7.5.1   </span> <a 
 id="x1-1120007.5.1"></a>Processes</h4>
<!--l. 34--><p class="noindent" >The processes page contains the following columns:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">ID</span> </dt><dd 
class="description">                                                                                                                               <br 
class="newline" />This is the DUCC-assigned numeric id of the process. This format of this id is two numbers:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-76">
     &#x00A0;&#x00A0;&#x00A0;&#x00A0;RESID.SHAREID</div>
     <!--l. 41--><p class="nopar" > Here, the <span 
class="cmti-10">RESID </span>is the reservation ID. The <span 
class="cmti-10">SHAREID </span>is the share ID assigned by the Resource Manager. Together
     these form a unique ID for each process that runs in the reservation.
     <!--l. 46--><p class="noindent" >Note: The current version of DUCC supports only one process per managed reservation. Future versions are expected
     to support multiple processes within a single managed reservation.
     </dd><dt class="description">
<span 
class="cmbx-10">Log</span> </dt><dd 
class="description">                                                                                                                              <br 
class="newline" />This is the log name for the process. It is hyperlinked to the log itself.
     </dd><dt class="description">
<span 
class="cmbx-10">Size</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />This is the size of the log in MB. If you find you have trouble viewing the log from the web server it could be because it
     is too big to view in the browser.
     </dd><dt class="description">
<span 
class="cmbx-10">Hostname</span> </dt><dd 
class="description">                                                                                                                     <br 
class="newline" />This is the name of the node where the process is running (or ran).
     </dd><dt class="description">
<span 
class="cmbx-10">PID</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />This is the Unix process ID (PID) of the process.
     </dd><dt class="description">
<span 
class="cmbx-10">State Scheduler</span> </dt><dd 
class="description">                                                                                                              <br 
class="newline" />This shows the Resesource Manager state of the job. It is one of:
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Allocated</span> </dt><dd 
class="description">- The node is still allocated for this job by the RM.
         </dd><dt class="description">
     <span 
class="cmbx-10">Deallocated</span> </dt><dd 
class="description">- The resource manager has deallocated the shares for the job on this node.</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">Reason Scheduler or Extraordinary Status</span> </dt><dd 
class="description">                                                                           <br 
class="newline" />These are the same as for the <a 
href="#x1-1060007.3.1">job details.</a>
     </dd><dt class="description">
<span 
class="cmbx-10">State Agent</span> </dt><dd 
class="description">                                                                                                                   <br 
class="newline" />These are the same as for the <a 
href="#x1-1060007.3.1">job details.</a>
     </dd><dt class="description">
<span 
class="cmbx-10">Reason Agent</span> </dt><dd 
class="description">                                                                                                                <br 
class="newline" />These are the same as for the <a 
href="#x1-1060007.3.1">job details.</a>
     </dd><dt class="description">
<span 
class="cmbx-10">Time Run</span> </dt><dd 
class="description">                                                                                                                     <br 
class="newline" />The current duration of the reservation, or total duration if it has terminated.
     </dd><dt class="description">
<span 
class="cmbx-10">RSS</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />The amount of real memory being consumed by the process (Resident Storage Size)
     </dd></dl>
                                                                                                
                                                                                                
<!--l. 90--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">7.5.2   </span> <a 
 id="x1-1130007.5.2"></a>Specification</h4>
<!--l. 92--><p class="noindent" >This tab shows the full job specification in the form of a Java Properties file. This will include all the parameters specified by
the user, plus those filled in by DUCC.
<!--l. 198--><p class="noindent" ><a name='DUCC_WS_SERVICES'></a>
<!--l. 20--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">7.6   </span> <a 
 id="x1-1140007.6"></a>Services Page</h3>
<!--l. 22--><p class="noindent" >This page shows details of all services.
<!--l. 24--><p class="noindent" >The Services page contains the following columns:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Id</span> </dt><dd 
class="description">                                                                                                                                <br 
class="newline" />This is the unique numeric DUCC id of the service. This ID is hyperlinked to a <a 
href="#x1-1150007.7">Service Details</a> page with
     extended details on the service. Note that for some types of services, DUCC may not know more about the
     service than is shown on the main page.
     </dd><dt class="description">
<span 
class="cmbx-10">Name</span> </dt><dd 
class="description">                                                                                                                           <br 
class="newline" />This is the unique service endpoint of the service.
     </dd><dt class="description">
<span 
class="cmbx-10">Type</span> </dt><dd 
class="description">                                                                                                                            <br 
class="newline" />This is the service type, which is one of
         <ul class="itemize1">
         <li class="itemize">Registered
         </li>
         <li class="itemize">Ping-Only</li></ul>
     </dd><dt class="description">
<span 
class="cmbx-10">State</span> </dt><dd 
class="description">                                                                                                                            <br 
class="newline" />This is the state of the service with respect to the service manager. It is a consolidated state over all the service
     instances. Valid states are
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Available</span> </dt><dd 
class="description">At least one service instance is responding to the service pinger, indicating it is functional.
         </dd><dt class="description">
     <span 
class="cmbx-10">Initializing</span> </dt><dd 
class="description">No service instances are available for use yet but at least one instance is in its UIMA <span 
class="cmti-10">initializing</span>
         phase.
         </dd><dt class="description">
     <span 
class="cmbx-10">Waiting</span> </dt><dd 
class="description">At least one service instance is in Running state, potentially available for use, but no response has
         been received from the service pinger. This usually occurs during the start-up of a service. If a service
         stops responding to its pinger after becoming available, the state can regress to Waiting.
         </dd><dt class="description">
     <span 
class="cmbx-10">NotAvailable</span> </dt><dd 
class="description">No service instance is running or initializing.
         </dd><dt class="description">
     <span 
class="cmbx-10">Stopping</span> </dt><dd 
class="description">The service has been stopped for some reason, but not all instances have terminated. This is an
         intermediate state between Available and NotAvailable to signify that the service is no longer available
         but not all its resources have been returned yet.</dd></dl>
                                                                                                
                                                                                                
     <!--l. 62--><p class="noindent" >DUCC will start dependent jobs ONLY if it&#8217;s services are in state Available. Otherwise DUCC attempts to start the
     service, and if successful, allows the job to start.
     <!--l. 65--><p class="noindent" >If a job is already running and a service becomes other than Available, the <a 
href="#x1-1040007.2">jobs page</a> indicates the service is not
     available but the job is allowed to continue.
     </dd><dt class="description">
<span 
class="cmbx-10">Pinger</span> </dt><dd 
class="description">                                                                                                                          <br 
class="newline" />This indicates whether the Service Manager is running a pinger for the service. This column does not imply the ping is
     successful; see the &#8220;health&#8221; column for ping status.
     </dd><dt class="description">
<span 
class="cmbx-10">Health</span> </dt><dd 
class="description">                                                                                                                          <br 
class="newline" /><span 
class="cmti-10">Health </span>is a status returned by each pinger and is the result of that pinger&#8217;s evaluation of the state of the service. It is
     shown as on of
         <ul class="itemize1">
         <li class="itemize"><span 
class="cmti-10">Good</span>
         </li>
         <li class="itemize"><span 
class="cmti-10">Poor</span></li></ul>
     <!--l. 80--><p class="noindent" >Both terms are highly subjective. Pingers may return a summary of the underlying data used to label a service as good
     or bad. That status is shown as a hover over this field.
     </dd><dt class="description">
<span 
class="cmbx-10">Instances</span> </dt><dd 
class="description">                                                                                                                      <br 
class="newline" />This is the number of instances (processes) currently registered for the service.
     </dd><dt class="description">
<span 
class="cmbx-10">Deployments</span> </dt><dd 
class="description">                                                                                                                  <br 
class="newline" />This is the number of actual instances deployed for the service. Note that this may be greater, or less, than
     the number of registered instances, if the service owner decides to temporarily start or stop additional
     instances.
     </dd><dt class="description">
<span 
class="cmbx-10">User</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />This is the userid of the service owner.
     </dd><dt class="description">
<span 
class="cmbx-10">Class</span> </dt><dd 
class="description">                                                                                                                            <br 
class="newline" />This is the scheduling class the service is running in.
     <!--l. 98--><p class="noindent" >If a service is registered as &#8220;ping-only&#8221;, no resources are allocated for it. This is shown as a class of
     <span 
class="cmtt-10">ping-only</span>.
     </dd><dt class="description">
<span 
class="cmbx-10">Size</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />This is the memory size, in GB, of each service instance
     </dd><dt class="description">
<span 
class="cmbx-10">Jobs</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />This is the number of jobs currently using the service. The IDs of the jobs are shown as hovers over this
     field.
     </dd><dt class="description">
<span 
class="cmbx-10">Services</span> </dt><dd 
class="description">                                                                                                                        <br 
class="newline" />Services may themselves depend on other services. This field shows the number of services dependent on this service.
     The dependent service IDs are shown with a hover over the field.
     </dd><dt class="description">
<span 
class="cmbx-10">Reservations</span> </dt><dd 
class="description">                                                                                                                  <br 
class="newline" />This field shows the number of managed reservations dependent on this service. The IDs of the managed reservations
                                                                                                
                                                                                                
     are shown as a hover over the field.
     </dd><dt class="description">
<span 
class="cmbx-10">Description</span> </dt><dd 
class="description">                                                                                                                    <br 
class="newline" />This is the description string from the &#8211;description string from submit.</dd></dl>
<!--l. 205--><p class="noindent" ><a name='DUCC_WS_SERVICE_DETAILS'></a>
<h3 class="sectionHead"><span class="titlemark">7.7   </span> <a 
 id="x1-1150007.7"></a>Service Details Page</h3>
<!--l. 22--><p class="noindent" >This page shows details of the processes which implement.
<!--l. 24--><p class="noindent" >The information is divided between two tabs:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Processes</span> </dt><dd 
class="description">This tab contains details on all the proceses implementing the service, if any.
     </dd><dt class="description">
<span 
class="cmbx-10">Specification</span> </dt><dd 
class="description">This tab shows the specification for the service.</dd></dl>
<!--l. 32--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">7.7.1   </span> <a 
 id="x1-1160007.7.1"></a>Processes</h4>
<!--l. 35--><p class="noindent" >The processes page contains the following columns:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">ID</span> </dt><dd 
class="description">                                                                                                                               <br 
class="newline" />This is the DUCC-assigned numeric id of the process. This format of this id is two numbers:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-77">
     &#x00A0;&#x00A0;&#x00A0;&#x00A0;RESID.SHAREID</div>
     <!--l. 42--><p class="nopar" > Here, the <span 
class="cmti-10">RESID </span>is the reservation ID. The <span 
class="cmti-10">SHAREID </span>is the share ID assigned by the Resource Manager. Together
     these form a unique ID for each process that runs in the reservation.
     </dd><dt class="description">
<span 
class="cmbx-10">Log</span> </dt><dd 
class="description">                                                                                                                              <br 
class="newline" />This is the log name for the process. It is hyperlinked to the log itself.
     </dd><dt class="description">
<span 
class="cmbx-10">Size</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />This is the size of the log in MB. If you find you have trouble viewing the log from the web server it could be because it
     is too big to view in the browser.
     </dd><dt class="description">
<span 
class="cmbx-10">Hostname</span> </dt><dd 
class="description">                                                                                                                     <br 
class="newline" />This is the name of the node where the process is running (or ran).
     </dd><dt class="description">
<span 
class="cmbx-10">PID</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />This is the Unix process ID (PID) of the process.
     </dd><dt class="description">
<span 
class="cmbx-10">State Scheduler</span> </dt><dd 
class="description">                                                                                                              <br 
class="newline" />This shows the Resesource Manager state of the job. It is one of:
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Allocated</span> </dt><dd 
class="description">- The node is still allocated for this job by the RM.
         </dd><dt class="description">
     <span 
class="cmbx-10">Deallocated</span> </dt><dd 
class="description">- The resource manager has deallocated the shares for the job on this node.</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">Reason Scheduler or Extraordinary Status</span> </dt><dd 
class="description">                                                                           <br 
class="newline" />These are the same as for the <a 
href="#x1-1060007.3.1">job details.</a>
     </dd><dt class="description">
<span 
class="cmbx-10">State Agent</span> </dt><dd 
class="description">                                                                                                                   <br 
class="newline" />These are the same as for the <a 
href="#x1-1060007.3.1">job details.</a>
     </dd><dt class="description">
<span 
class="cmbx-10">Reason Agent</span> </dt><dd 
class="description">                                                                                                                <br 
class="newline" />These are the same as for the <a 
href="#x1-1060007.3.1">job details.</a>
     </dd><dt class="description">
<span 
class="cmbx-10">Time Init</span> </dt><dd 
class="description">                                                                                                                      <br 
class="newline" />Most services are UIMA-AS services and therefore have an <span 
class="cmti-10">initialization </span>phase to their lifetimes. This field shows the
     time spent in that phase.
     </dd><dt class="description">
<span 
class="cmbx-10">Time Run</span> </dt><dd 
class="description">                                                                                                                     <br 
class="newline" />The current duration of the reservation, or total duration if it has terminated.
     </dd><dt class="description">
<span 
class="cmbx-10">Time GC</span> </dt><dd 
class="description">                                                                                                                      <br 
class="newline" />This is amount of time spent in Java Garbage Collection for the process.
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">Pgin</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />This is the number of page-in events on behalf of the process.
     </dd><dt class="description">
<span 
class="cmbx-10">Swap</span> </dt><dd 
class="description">                                                                                                                            <br 
class="newline" />This is the amount of swap space on the machine being consumed by the process.
     </dd><dt class="description">
<span 
class="cmbx-10">%CPU</span> </dt><dd 
class="description">                                                                                                                          <br 
class="newline" />Currnt CPU percent consumed by the process. This will be <span 
class="cmmi-10">&#x003E; </span>100% on multi-core systems if more than one core is
     being used. Each core contributes up to 100% CPU, so, for example, on a 16-core machine, this can be as high as
     1600%.
     </dd><dt class="description">
<span 
class="cmbx-10">RSS</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />The amount of real memory being consumed by the process (Resident Storage Size)
     </dd><dt class="description">
<span 
class="cmbx-10">JConsole URL</span> </dt><dd 
class="description">                                                                                                                <br 
class="newline" />This is a URL that can be used to connect via JMX to the processes, e.g. via jconsole.
     </dd></dl>
<!--l. 111--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">7.7.2   </span> <a 
 id="x1-1170007.7.2"></a>Specification</h4>
<!--l. 113--><p class="noindent" >This tab shows the full job specification in the form of a Java Properties file. This will include all the parameters specified by
the user, plus those filled in by DUCC.
<!--l. 117--><p class="noindent" >The specification for a Service contains two types of entries:
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">Service specification properties, prefixed with &#8220;svc&#8221;. These comprise the service specification that the Service
     Manager submits on behalf of a user in order to start registered services.
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">Meta properties, prefixed with &#8220;meta&#8221;. This is the Service Manager&#8217;s state record for the sesrvice as it is
     running. In addition to state it contains properties required for service registration that are not used for service
     submission.</dd></dl>
<!--l. 212--><p class="noindent" ><a name='DUCC_WS_SYSTEM'></a>
<!--l. 20--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">7.8   </span> <a 
 id="x1-1180007.8"></a>System Details Page</h3>
<!--l. 23--><p class="noindent" >This page shows information relating to the DUCC System itself:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Administration</span> </dt><dd 
class="description">This  displays  system  administrators  and  implements  the  interface  to  various  administrative
     controls.
     </dd><dt class="description">
<span 
class="cmbx-10">Classes</span> </dt><dd 
class="description">This shows the current system&#8217;s scheduling class definitions.
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">Daemons</span> </dt><dd 
class="description">This shows the status of all DUCC processes.
     </dd><dt class="description">
<span 
class="cmbx-10">DuccBook</span> </dt><dd 
class="description">This is a link to the book you are reading.
     </dd><dt class="description">
<span 
class="cmbx-10">Machines</span> </dt><dd 
class="description">This shows details of all the machines in the DUCC cluster.</dd></dl>
<!--l. 33--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">7.8.1   </span> <a 
 id="x1-1190007.8.1"></a>Administration</h4>
<!--l. 35--><p class="noindent" >This page has two tabs:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Administrators</span> </dt><dd 
class="description">This shows the user-ids that are authorized to administer DUCC. In addition to executing the
     &#8220;Control&#8221; functions described below, administrators may cancel any job, reservation, or service, and may modify
     services they do not own.
     <!--l. 42--><p class="noindent" >In order to perform administrative functions, the following must be satisfied:
         <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
       1. </dt><dd 
class="enumerate-enumitem">The user is logged-in to the web server.
         </dd><dt class="enumerate-enumitem">
       2. </dt><dd 
class="enumerate-enumitem">The user is a registered administrator.
         </dd><dt class="enumerate-enumitem">
       3. </dt><dd 
class="enumerate-enumitem">The user has set the role as &#8220;administrator&#8221; in the DUCC Preferences page. This is a safeguard so that
         administrators who are also users are less likely to inadvertently affect other people&#8217;s jobs.</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">Control</span> </dt><dd 
class="description">Currently DUCC supports a single administrative control function via the web server: Stop new job submissions
     and re-enable them. If submissions are blocked, all existing work runs normally, but no new work is
     accepted.</dd></dl>
<!--l. 56--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">7.8.2   </span> <a 
 id="x1-1200007.8.2"></a>Classes</h4>
<!--l. 57--><p class="noindent" >This page shows the definitions of the DUCC scheduling classes. The scheduling classes are discussed in more detail in the
<a 
href="#x1-22200013.5">Resource Manager</a> section.
<!--l. 60--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">7.8.3   </span> <a 
 id="x1-1210007.8.3"></a>Daemons</h4>
<!--l. 63--><p class="noindent" >This page shows the current state of all DUCC processes. By default, only the administrative processes, Orchestrator,
ProcessManager, ResourceManager, ServiceManager, and Webserver are shown. A button in the upper left of the page titled
&#8220;Show Agents&#8221; enables display of the status of all the DUCC agents as well. (Agents are suppressed by default because the
page is expensive to render for large systems.)
<!--l. 69--><p class="noindent" >The columns shown on this page include
                                                                                                
                                                                                                
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Status</span> </dt><dd 
class="description">                                                                                                                          <br 
class="newline" />This indicates whether the daemon is running and broadcasting state <span 
class="cmti-10">up</span>, or not <span 
class="cmti-10">down</span>.
     <!--l. 76--><p class="noindent" >All DUCC daemons broadcast a heartbeat containing process state. If the Status is <span 
class="cmti-10">down</span>, either the daemon is
     not functioning, or something is preventing state from reaching the web server via DUCC&#8217;s ActiveMQ instance.
     </dd><dt class="description">
<span 
class="cmbx-10">Daemon Name</span> </dt><dd 
class="description">                                                                                                               <br 
class="newline" />This is the name of the process.
     </dd><dt class="description">
<span 
class="cmbx-10">Boot Time</span> </dt><dd 
class="description">                                                                                                                    <br 
class="newline" />This shows the date and time of the latest boot of the specific process.
     </dd><dt class="description">
<span 
class="cmbx-10">Host IP</span> </dt><dd 
class="description">                                                                                                                        <br 
class="newline" />This is the IP address of the processor where the process is running.
     </dd><dt class="description">
<span 
class="cmbx-10">Host Name</span> </dt><dd 
class="description">                                                                                                                    <br 
class="newline" />This shows the hostname of the processor where the process is running.
     </dd><dt class="description">
<span 
class="cmbx-10">PID</span> </dt><dd 
class="description">                                                                                                                             <br 
class="newline" />This is the Unix processid of the DUCC process.
     </dd><dt class="description">
<span 
class="cmbx-10">Publication Size (last)</span> </dt><dd 
class="description">                                                                                                     <br 
class="newline" />This shows the size of the most recent state publication of the process, in bytes.
     </dd><dt class="description">
<span 
class="cmbx-10">Publication Size (max)</span> </dt><dd 
class="description">                                                                                                     <br 
class="newline" />This shows the size of the largest state publication of the process, in bytes.
     </dd><dt class="description">
<span 
class="cmbx-10">Heartbeat (last)</span> </dt><dd 
class="description">                                                                                                             <br 
class="newline" />This shows the number of seconds since the last state publication for the process. Large numbers here indicate
     potential cluster or DUCC problems.
     </dd><dt class="description">
<span 
class="cmbx-10">Heartbeat (max)</span> </dt><dd 
class="description">                                                                                                            <br 
class="newline" />This shows the longest delay since a state publication for the process was received at the web server. Large
     numbers here indicate potential cluster or DUCC problems.
     </dd><dt class="description">
<span 
class="cmbx-10">Heartbeat (max) TOD</span> </dt><dd 
class="description">                                                                                                     <br 
class="newline" />This shows the time the longest delay of a state publication occurred.
     </dd><dt class="description">
<span 
class="cmbx-10">JConsole URL</span> </dt><dd 
class="description">                                                                                                                <br 
class="newline" />This is the jconsole URL for the process.
     </dd></dl>
<!--l. 118--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">7.8.4   </span> <a 
 id="x1-1220007.8.4"></a>Machines</h4>
<!--l. 120--><p class="noindent" >This page shows the states of all the machines in the DUCC cluster.
                                                                                                
                                                                                                
<!--l. 122--><p class="noindent" >The columns shown on this page include
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Status</span> </dt><dd 
class="description">                                                                                                                          <br 
class="newline" />This shows the current state of a machine. Values include:
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">defined</span> </dt><dd 
class="description">The node is in the DUCC <a 
href="#x1-19700012.4">nodes file</a>, but no DUCC process has been started there, or else there is a
         communication problem and the state messages are not being delivered.
         </dd><dt class="description">
     <span 
class="cmbx-10">up</span> </dt><dd 
class="description">The node has a DUCC Agent process running on it and the web server is receiving regular heartbeat
         packets from it.
         </dd><dt class="description">
     <span 
class="cmbx-10">down</span> </dt><dd 
class="description">The node had a healthy DUCC Agent on it at some point in the past (since the last DUCC boot), but
         the web server has stopped receiving heartbeats from it.
         <!--l. 138--><p class="noindent" >The agent may have been manually shut down, may have crashed, or there may be a communication
         problem.
         <!--l. 141--><p class="noindent" >Additionally, very heavy loads from jobs running the the node can cause the DUCC Agents heartbeats to
         be delayed.</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">IP</span> </dt><dd 
class="description">                                                                                                                               <br 
class="newline" />This is the IP address of the node.
     </dd><dt class="description">
<span 
class="cmbx-10">Name</span> </dt><dd 
class="description">                                                                                                                           <br 
class="newline" />This is the hostname of the node.
     </dd><dt class="description">
<span 
class="cmbx-10">Reserve(GB) size</span> </dt><dd 
class="description">                                                                                                            <br 
class="newline" />This is the largest reservation that can be made on this node.
     <!--l. 155--><p class="noindent" >This is usually somewhat less than the physical memory size because it is rounded down to the nearest
     <a 
href="#x1-21500013">share quantum</a>. The purpose of this column is to assist users in requesting the right size for full machine
     reservations.
     </dd><dt class="description">
<span 
class="cmbx-10">Memory(GB) total</span> </dt><dd 
class="description">                                                                                                          <br 
class="newline" />This is the amount of memory, in GB, as reported by each machine.
     <!--l. 163--><p class="noindent" >Usually the amount will be slightly less than the installed memory. This is because a small bit of memory is usually
     reserved by the hardware for its own purposes. For example, a machine with 48GB of installed memory may report only
     47GB available.
     </dd><dt class="description">
<span 
class="cmbx-10">Swap(GB) in use</span> </dt><dd 
class="description">                                                                                                            <br 
class="newline" />This is the total size in-use swap data. DUCC shows any value greater than 0 in red as swapping can very significantly
     slow applications. However, swap use does not always mean there is a performance problem. This is flagged by DUCC
     simply as an alert of a potential problem
     </dd><dt class="description">
<span 
class="cmbx-10">Alien PIDs</span> </dt><dd 
class="description">                                                                                                                    <br 
class="newline" />This shows the number of processes not owned by DUCC, the operating system, or jobs scheduled on each node. The
     Unix Process IDS of these processes is displayed in a hover.
     <!--l. 178--><p class="noindent" >DUCC preconfigures many of the standard operating <a 
href="#x1-18500012.2.7">system process</a> and <a 
href="#x1-18500012.2.7">userids</a>. This list may be updated by each
     installation.
                                                                                                
                                                                                                
     <!--l. 183--><p class="noindent" >A common cause of alien PIDs is errant process run in unmanaged reservations. A user may reserve a machine for use
     as a sandbox. If the reservation is released without properly terminating all the processes, they may linger. When ducc
     schedules the node for other purposes, significant performance penalties may be paid due to competition between the
     legitimately scheduled work and the leftover &#8220;alien&#8221; processes. The purpose of this column is to bring attention to this
     situation.
     </dd><dt class="description">
<span 
class="cmbx-10">Shares (total)</span> </dt><dd 
class="description">                                                                                                                 <br 
class="newline" />This shows the total number of scheduling share supported on this node.
     </dd><dt class="description">
<span 
class="cmbx-10">Shares(in use)</span> </dt><dd 
class="description">                                                                                                                <br 
class="newline" />This shows the total number of scheduling share in use on the node.
     </dd><dt class="description">
<span 
class="cmbx-10">Heartbeat(last)</span> </dt><dd 
class="description">                                                                                                              <br 
class="newline" />This shows the number of seconds since the last agent heartbeat from this machine.
     </dd></dl>
                                                                                                
                                                                                                
<!--l. 86--><p class="noindent" >
                                                                                                
                                                                                                
<h1 class="partHead"><span class="titlemark">Part&#x00A0;III<br /></span><a 
 id="x1-123000III"></a>Programming Model And Applications</h1>
                                                                                                
                                                                                                
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;8</span><br /><a 
 id="x1-1240008"></a>Building and Testing Jobs</h2>
<h3 class="sectionHead"><span class="titlemark">8.1   </span> <a 
 id="x1-1250008.1"></a>Overview</h3>
<!--l. 23--><p class="noindent" >A DUCC job consists of two process types, a Job Driver process and one or more Job Processes. These processes are
connected together via UIMA-AS. The Job Driver process wraps the job&#8217;s Collection Reader (CR). The CR function is to
define the collection of Work Items to be processed. The Collection Reader returns a small CAS for each Work Item
containing a reference to the Work Item data The Job Driver uses the UIMA-AS client API to send Work Item CASes to the
job&#8217;s input queue. Job Processes containing the analytic pipeline are deployed as UIMA-AS services and comsume CASes
from the job input queue.
<!--l. 33--><p class="noindent" >A basic job&#8217;s analytic pipeline consists of an Aggregate Analysis Engine comprised by the user specified CAS Multiplier
(CM), Analysis Engine (AE) and CAS Consumer (CC) components, along with a built-in DUCC Flow Controller. The Work
Item CAS is typically sent only to the CM and returned by the Job Process when all child CASes produced by the CM have
completed processing; optionally the CR can configure Work Item CAS flow to go to the CC or to the AE &amp; CC to complete
all processing for that Work Item.
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Note:</span> </dt><dd 
class="description">Although the Job Driver will receive back the Work Item CAS, there is no provision for any user code to
     receive the CAS. Therefore a Job Process typically adds no results to a Work Item CAS.</dd></dl>
<!--l. 47--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">8.1.1   </span> <a 
 id="x1-1260008.1.1"></a>Basic Job Process Threading Model</h4>
<!--l. 48--><p class="noindent" >In addition to the pipeline definition of explicitly named CM, AE and CC components, the job specification also includes the
number of pipeline threads to run in each Job Process (using the job specification parameter: process_thread_count). Each
pipeline thread receives Work Items independently.
<!--l. 53--><p class="noindent" >DUCC creates an aggreate descriptor for the pipeline, and then creates a Deployment Descriptor for the Job Process which
specifying the number of synchronous pipelines.
<!--l. 57--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">8.1.2   </span> <a 
 id="x1-1270008.1.2"></a>Alternate Pipeline Threading Model</h4>
<!--l. 58--><p class="noindent" >Alternately a Job Process can be fully specified by a user submitted UIMA-AS Deployment Descriptor. Thus any UIMA-AS
service deployment can be used as a Job Process. Here the parameter process_thread_count just defines how many Work
Items CASes will be sent to each Job Process concurrently.
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Note:</span> </dt><dd 
class="description">In general a UIMA-AS service may be configured to return child CASes; although child CASes returned from
     a Job Process will be ignored by the Job Driver, there may be significant overhead in wasted serialization and
     I/O.</dd></dl>
<!--l. 70--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">8.1.3   </span> <a 
 id="x1-1280008.1.3"></a>Overriding UIMA Configuration Parameters</h4>
                                                                                                
                                                                                                
<!--l. 71--><p class="noindent" >UIMA configuration parameters in the CR, CM, AE or CC components can be overriden using job specification
parameters: driver_descriptor_CR_overrides, process_descriptor_CM_overrides, process_descriptor_AE_overrides and
process_descriptor_CC_overrides, respectively.
<!--l. 75--><p class="noindent" >Another approach is to use the <span 
class="cmti-10">External Configuration Parameter Overrides </span>mechanism in core UIMA. External overrides is
the only approach available for jobs submitted with a Deployment Descriptor.
<!--l. 80--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">8.2   </span> <a 
 id="x1-1290008.2"></a>Collection Segmentation and Artifact Extraction</h3>
<!--l. 82--><p class="noindent" >UIMA is built around artifact processing. A classic UIMA pipeline starts with a Collection Reader (CR) that defines
collection seqmentation, extracts the artifacts to be analyzed and puts them into the CASes to be delivered to subsequent
analytic components. A CR designed for a specific data collection is highly reusable for many different analytic
scenarios.
<!--l. 88--><p class="noindent" >A single CR supplying artifacts to a large number of analysis pipelines would be a bottleneck. Not only would artifact data
need to be transported twice across the compute cluster, but analysis results would be uselessly returned to the Job Driver.
To solve both of these problems, in a DUCC job the CR only sends a reference to the artifacts in the Work Item CAS, and
artifact data is read directly by the analysis pipeline.
<!--l. 94--><p class="noindent" >In DUCC collection processing the role of collection segmentation is implemented by the CR run in the Job Driver, while
artifact extraction and CAS initialization are implemented in the Cas Multiplier (CM) run in the Job Process. The
combination of a CR and associated CM should be highly reusable.
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Note:</span> </dt><dd 
class="description">In many cases it is useful to reference multiple artifacts in a Work Item CAS. Both DUCC sample applications
     described below exhibit this design.</dd></dl>
<!--l. 105--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">8.3   </span> <a 
 id="x1-1300008.3"></a>CAS Consumer Changes for DUCC</h3>
<!--l. 107--><p class="noindent" >CAS Consumers in a UIMA pipeline may require changes for scale out into DUCC jobs, to avoid scale out bottlenecks, to
preserve collection level processing, or to flush results at end-of-work-item processing.
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Federated ouput:</span> </dt><dd 
class="description">Scaled out DUCC jobs distribute artifact processing to multiple pipeline instances. All instances
     of a CAS Consumer should have independent access to the output target (filesystem, service, database, etc.).
     </dd><dt class="description">
<span 
class="cmbx-10">Singleton processing:</span> </dt><dd 
class="description">Collection level processing requiring that all results go to a singleton process would usually
     be done as a follow-on job, allowing incremental progress; Job Process errors due to data-dependent analysis
     bugs can often be fixed without invalidating completed Work Items, enabling a restarted job to utilize the
     progress made by previous job runs.
     </dd><dt class="description">
<span 
class="cmbx-10">Flushing cached data:</span> </dt><dd 
class="description">In some scenarios each Work Item delivered to a pipeline can be considered an independent
     collection. If a CAS Consumer caches data which needs to be flushed after processing the last artifact for a
     Work Item, the Work Item CAS can be routed to the CAS Consumer after the last artifact CAS is processed
     and used to trigger cache flushing.</dd></dl>
                                                                                                
                                                                                                
<!--l. 130--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">8.4   </span> <a 
 id="x1-1310008.4"></a>Job Development for an Existing Pipeline Design</h3>
<!--l. 132--><p class="noindent" >Assuming that an existing job input-output design (CR, CM, CC) is to be reused, job development is focussed
on the Analysis Engine (AE) to be plugged in. Before deploying a new AE in a multithreaded Job Process
it is best to run it single threaded (process_thread_count=1) to separate basic logic errors from threading
problems.
<!--l. 138--><p class="noindent" >To debug a Job Process with eclipse, first create a debug configuration for a &#8221;remote java application&#8221;, specifying
&#8221;Connection Type = Socket Listen&#8221; on some free port P. Start the debug configuration and confirm it is listening on the
specified port. Then add to the job specification process_debug=port, where port is the value P used in the running debug
configuration.
<!--l. 144--><p class="noindent" >When the process_debug parameter is specified, DUCC will only run a single Job Process that will connect back to the
eclipse debug configuration.
<!--l. 148--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">8.5   </span> <a 
 id="x1-1320008.5"></a>Job Development for a New Pipeline Design</h3>
<!--l. 150--><p class="noindent" >A DUCC job is a UIMA application comprised of user code broken into a Collection Reader running in the Job Driver and
an Agreggate Analysis Engine (analysis pipeline) running in one or more Job Processes. Each Job Process may run multiple
instances of the pipeline, each in a different thread. The major components of the basic Job Process application are as
follows:
     <ul class="itemize1">
     <li class="itemize">User Collection reader - segments the input collection in to Work Items
     </li>
     <li class="itemize">User CAS Multiplier - inputs a Work Item and segments it into artifacts (CASes)
     </li>
     <li class="itemize">User Analysis Engine - processes the CASes
     </li>
     <li class="itemize">User CAS Consumer - outputs results for each Work Item
     </li>
     <li class="itemize">DUCC built-in Flow Controller - routes Work Item CASes to the CM and optionally to the CC or AE &amp; CC.</li></ul>
<!--l. 163--><p class="noindent" >It is good if the CR+CM+CC combination can be reused for a broad range of AE.
<!--l. 165--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">8.5.1   </span> <a 
 id="x1-1330008.5.1"></a>Collection Reader (CR) Characteristics</h4>
<!--l. 166--><p class="noindent" >A DUCC Job CR sends Work Item CASes to the Job Processes. These CASes contain references to the data to be read by
the Job Processes. Typically the CR Type System will be very small; in the DUCC sample applications the CR Type System
only contains the Workitem Feature Structure described below.
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Note:</span> </dt><dd 
class="description">It is important not to include the analytic Type System in the CR. These Type Systems can be quite large
     and will significantly increase the size of each Work Item CAS. The Job Driver process maintains a CAS pool
     which must be as large as the total number of processing threads active in a job.</dd></dl>
                                                                                                
                                                                                                
<!--l. 177--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">8.5.2   </span> <a 
 id="x1-1340008.5.2"></a>DUCC built-in Flow Controller</h4>
<!--l. 179--><p class="noindent" >This flow controller provides separate flows for Work Item CASes and for CASes produced by the CM and/or AE. Its
behavior is controlled by the existence of a CM component, and then further specified by the org.apache.uima.ducc.Workitem
feature structure in the Work Item CAS.
<!--l. 184--><p class="noindent" >When no CM is defined the Work Item CAS is simply delivered to the AE, and then to the CC if defined. Any CASes created
by the AE will be routed to the CC.
<!--l. 187--><p class="noindent" >With a defined CM, the Work Item CAS is delivered only to the CM, and then returned from the JP when processing of all
child CASes created by the CM and AE has completed. Work Item CAS flow can be further refined by the CR by creating a
org.apache.uima.ducc.Workitem feature structure and setting the setSendToLast feature to true, or by setting the
setSendToAll feature to true.
<!--l. 192--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">8.5.3   </span> <a 
 id="x1-1350008.5.3"></a>Workitem Feature Structure</h4>
<!--l. 193--><p class="noindent" >In addition to Work Item CAS flow control features, the WorkItem feature structure includes other features that are useful
for a DUCC job application. Here is the complete list of features:
       <dl class="description"><dt class="description">
       <span 
class="cmbx-10">sendToLast</span> </dt><dd 
class="description">(Boolean) - indicates the Work Item CAS be sent to the CC
       </dd><dt class="description">
       <span 
class="cmbx-10">sendToAll</span> </dt><dd 
class="description">(Boolean) - indicates Work Item CAS be sent to the AE and CC
       </dd><dt class="description">
       <span 
class="cmbx-10">inputspec</span> </dt><dd 
class="description">(String) - reference to Work Item input data
       </dd><dt class="description">
       <span 
class="cmbx-10">outputspec</span> </dt><dd 
class="description">(String) - reference to Work Item output data
       </dd><dt class="description">
       <span 
class="cmbx-10">encoding</span> </dt><dd 
class="description">(String) - useful for reading Work Item input data
       </dd><dt class="description">
       <span 
class="cmbx-10">language</span> </dt><dd 
class="description">(String) - used by the CM for setting document text language
       </dd><dt class="description">
       <span 
class="cmbx-10">bytelength</span> </dt><dd 
class="description">(Integer) - size of Work Item
       </dd><dt class="description">
       <span 
class="cmbx-10">blockindex</span> </dt><dd 
class="description">(Integer) - used if a Work Item is one of multiple pieces of an input resource
       </dd><dt class="description">
       <span 
class="cmbx-10">blocksize</span> </dt><dd 
class="description">(Integer) - used to indicate block size for splitting an input resource
       </dd><dt class="description">
       <span 
class="cmbx-10">lastBlock</span> </dt><dd 
class="description">(Boolean) - indicates this is the last block of an input resource</dd></dl>
                                                                                                
                                                                                                
<!--l. 209--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">8.5.4   </span> <a 
 id="x1-1360008.5.4"></a>Deployment Descriptor (DD) Jobs</h4>
<!--l. 210--><p class="noindent" >Job Processes with arbitrary aggregate hierarchy, flow control and threading can be fully specified via a UIMA AS
Deployment Descriptor. DUCC will modify the input queue to use DUCC&#8217;s private broker and change the queue name to
correspond to the DUCC job ID.
<!--l. 214--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">8.5.5   </span> <a 
 id="x1-1370008.5.5"></a>Debugging</h4>
<!--l. 215--><p class="noindent" >It is best to develop and debug the interactions between job application components as one, single-threaded UIMA aggregate.
DUCC provides an easy way to accomplish this, for both basic and DD job models, using the all_in_one specification
parameter.
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">all</span><span 
class="cmbx-10">_in</span><span 
class="cmbx-10">_one=local</span> </dt><dd 
class="description">When set to local, all Job components are run in the same single-threaded process, on the same
     machine as eclipse.
     </dd><dt class="description">
<span 
class="cmbx-10">all</span><span 
class="cmbx-10">_in</span><span 
class="cmbx-10">_one=remote</span> </dt><dd 
class="description">With remote, the single-threaded process is run on a DUCC worker machine as a DUCC
     Managed Reservation.</dd></dl>
<!--l. 226--><p class="noindent" >To debug an all_in_one job with eclipse, first create a debug configuration for a &#8221;remote java application&#8221;, specifying
&#8221;Connection Type = Socket Listen&#8221; on some free port P. Start the debug configuration and confirm it is listening on the
specified port. Then, before submitting the all_in_one job, add the argument process_debug=port, where port is the value P
used in the running debug configuration.
                                                                                                
                                                                                                
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;9</span><br /><a 
 id="x1-1380009"></a>Sample Application: Raw Text Processing</h2>
<h3 class="sectionHead"><span class="titlemark">9.1   </span> <a 
 id="x1-1390009.1"></a>Application Function and Design</h3>
<!--l. 236--><p class="noindent" >This application expects as input a directory containing one or more flat text files, uses paragraph boundaries to segment the
text into separate artifacts, processes each artifact with the OpenNlpTextAnalyzer, and writes the results as compressed
UIMA CASes packaged in zip files. Paragraph boundaries are defined as two or more consecutive newline
characters.
<!--l. 242--><p class="noindent" >By default each input file is a Work Item. In order to facilitate processing scale out, an optional blocksize parameter can
be specified that will be used to break larger files into multiple Work Items. Paragraphs that cross block
boundaries are processed in the block where they started. An error is thrown if a paragraph crosses two block
boundaries.
<!--l. 248--><p class="noindent" >An output zip file is created for each Work Item. The CAS compression format is selectable as either ZIP compressed
XmiCas or UIMA compressed binary form 6 format. When compressed binary is used, each zip file also contains the full
UIMA Type System in ZIP compressed text. CASes in UIMA compressed binary form 6 format have the same
flexibility as an XmiCas in that they can be deserialized into a CAS with a different, but compatible Type
System.
<!--l. 254--><p class="noindent" >By default any previously completed output files found in the output directory are preserved. While Work Item processing is
in progress the associated output files have &#8221;_temp&#8221; appended to their filenames, and any such incomplete output files are
always ignored for subsequent jobs.
<!--l. 258--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">9.2   </span> <a 
 id="x1-1400009.2"></a>Configuration Parameters</h3>
<!--l. 259--><p class="noindent" >The Collection Reader for this job is the DuccJobTextCR. It has the following configuration parameters:
       <dl class="description"><dt class="description">
       <span 
class="cmbx-10">InputDirectory</span> </dt><dd 
class="description">path to directory containing input files.
       </dd><dt class="description">
       <span 
class="cmbx-10">OutputDirectory</span> </dt><dd 
class="description">path to directory for output files.
       </dd><dt class="description">
       <span 
class="cmbx-10">IgnorePreviousOutput</span> </dt><dd 
class="description">(optional) boolean to ignore (overwrite) existing output files.
       </dd><dt class="description">
       <span 
class="cmbx-10">Encoding</span> </dt><dd 
class="description">(optional) character encoding of the input files.
       </dd><dt class="description">
       <span 
class="cmbx-10">Language</span> </dt><dd 
class="description">(optional) language of the input documents, i.e. cas.setDocumentLanguage(language).
       </dd><dt class="description">
       <span 
class="cmbx-10">BlockSize</span> </dt><dd 
class="description">(optional) integer value used to break larger input files into multiple Work Items.
       </dd><dt class="description">
       <span 
class="cmbx-10">SendToLast</span> </dt><dd 
class="description">(optional) boolean to route WorkItem CAS to last pipeline component. Is set to true for this
       application.
       </dd><dt class="description">
       <span 
class="cmbx-10">SendToAll</span> </dt><dd 
class="description">(optional)  boolean  to  route  WorkItem  CAS  to  all  pipeline  components.  Not  used  in  this
       application.</dd></dl>
                                                                                                
                                                                                                
<!--l. 273--><p class="noindent" >The CAS Consumer is the DuccCasCC and has the following configuration parameters:
       <dl class="description"><dt class="description">
       <span 
class="cmbx-10">XmiCompressionLevel</span> </dt><dd 
class="description">(optional) compression value if using ZIP compression. Default is 7, range is 0-9.
       </dd><dt class="description">
       <span 
class="cmbx-10">UseBinaryCompression</span> </dt><dd 
class="description">(optional) boolean to select UIMA binary CAS compression.</dd></dl>
<!--l. 280--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">9.3   </span> <a 
 id="x1-1410009.3"></a>Set up a working directory</h3>
<!--l. 281--><p class="noindent" >For this and the following sample program, create a working directory in a writable filesystem.
<!--l. 283--><p class="noindent" >Copy to this directory the example job specification files:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-78">
&#x00A0;&#x00A0;&#x00A0;cp&#x00A0;$DUCC_HOME/examples/sampleapps/descriptors/*.job&#x00A0;.</div>
<!--l. 286--><p class="nopar" >
<!--l. 288--><p class="noindent" >Copy a UIMA logger configuration file that suppresses tons of output from OpenNLP:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-79">
&#x00A0;&#x00A0;&#x00A0;cp&#x00A0;$DUCC_HOME/examples/sampleapps/descriptors/ConsoleLogger.properties&#x00A0;.</div>
<!--l. 291--><p class="nopar" >
<!--l. 293--><p class="noindent" >Copy the executable code and resources for the DUCC sample application components:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-80">
&#x00A0;&#x00A0;&#x00A0;mkdir&#x00A0;lib
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;cp&#x00A0;$DUCC_HOME/lib/uima-ducc/examples/uima-ducc-examples*.jar&#x00A0;lib</div>
<!--l. 297--><p class="nopar" >
<!--l. 299--><p class="noindent" >For reference the source code for DUCC sample applications is in $DUCC_HOME/examples/src, with descriptors in
$DUCC_HOME/examples/sampleapps/descriptors.
<!--l. 302--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">9.4   </span> <a 
 id="x1-1420009.4"></a>Download and Install OpenNLP</h3>
<!--l. 303--><p class="noindent" >Download the OpenNLP source distribution from http://opennlp.apache.org and follow the directions in the <span 
class="cmti-10">UIMA</span>
<span 
class="cmti-10">Integration </span>section of the included documentation to build the UIMA pear file. Then <span 
class="cmti-10">install </span>the UIMA pear file
in the working directory with the <span 
class="cmti-10">runPearInstaller </span>script and test it with the UIMA Cas Visual Debugger
application.
<!--l. 309--><p class="noindent" >A small modification of the installed OpenNLP descriptor file is necessary for DUCC to run the component
multithreaded. Edit <span 
class="cmti-10">opennlp.uima.OpenNlpTextAnalyzer/desc/OpenNlpTextAnalyzer.xml </span>and change the setting for
<span 
class="cmti-10">multipleDeploymentAllowed </span>from false to true.
<!--l. 314--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">9.5   </span> <a 
 id="x1-1430009.5"></a>Get some Input Text</h3>
<!--l. 315--><p class="noindent" >Choose one or more flat text files in UTF8 format that only use newline characters, <span 
class="cmti-10">not CR-LF sequences</span>. The
text should be big enough to see the impact of DUCC job scale out. We used test data from gutenberg.org
at
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-81">
&#x00A0;&#x00A0;&#x00A0;http://www.gutenberg.org/ebooks/search/?sort_order=downloads</div>
<!--l. 321--><p class="nopar" > downloading &#8217;Plain Text UTF-8&#8217; versions of <span 
class="cmti-10">Moby Dick</span>, <span 
class="cmti-10">War and Peace </span>and <span 
class="cmti-10">The Complete Works of William</span>
<span 
class="cmti-10">Shakespeare </span>as flat text files in a subdirectory &#8216;Books&#8217;, and removing all &#8217;CR&#8217; characters (0xD) as well as extraneous
text.
<!--l. 326--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">9.6   </span> <a 
 id="x1-1440009.6"></a>Run the Job</h3>
<!--l. 327--><p class="noindent" >The job specification, DuccRawTextSpec.job, uses placeholders to reference the working directory and various operational
components located there. As run below the placeholders are resolved from environmental variables.
<!--l. 331--><p class="noindent" >The job is submitted from the command line with the following:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-82">
&#x00A0;&#x00A0;&#x00A0;MyAppDir=$PWD&#x00A0;\
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;MyInputDir=$PWD/Books&#x00A0;\
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;MyOutputDir=$PWD/Books.processed&#x00A0;\
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;$DUCC_HOME/bin/ducc_submit&#x00A0;-f&#x00A0;DuccRawTextSpec.job</div>
<!--l. 337--><p class="nopar" >
<!--l. 339--><p class="noindent" >The total size of the three txt files is 9.4Mbytes and with a blocksize of 100000 there are 100 Work Items. Each Job Process
is configured to run 8 parallel OpenNLP pipelines. To examine the performance of processing with just a single Job Process,
the job can be submitted as:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-83">
&#x00A0;&#x00A0;&#x00A0;MyAppDir=$PWD&#x00A0;\
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;MyInputDir=$PWD/Books&#x00A0;\
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;MyOutputDir=$PWD/Books.processed&#x00A0;\
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;$DUCC_HOME/bin/ducc_submit&#x00A0;-f&#x00A0;DuccRawTextSpec.job&#x00A0;\
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;--process_deployments_max&#x00A0;1</div>
<!--l. 349--><p class="nopar" >
<!--l. 351--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">9.7   </span> <a 
 id="x1-1450009.7"></a>Job Output</h3>
<!--l. 352--><p class="noindent" >There will be an output zipfile for every Work Item, with zipfiles containing a compressed CAS for each document
(paragraph) found in a Work Item. If UseBinaryCompression=true each zipfile will also contain the TypeSystem for the
CASes. This is needed when deserializing these CASes into a different TypeSystem.
<!--l. 356--><p class="noindent" >DuccTextCM finds 19245 paragraphs in the three txt files. If the output CASes are stored as 19245 uncompressed XMI files,
the total size is 911MB. Using the default ZIP compressed XMI format and packed into 100 Work Item zip files, the
total size is 165MB, a 5.5x compression. Using UIMA binary compressed format further reduces total size to
62MB.
<!--l. 358--><p class="noindent" >This output data will be used as input data for the following CAS input processing sample application.
<!--l. 360--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">9.8   </span> <a 
 id="x1-1460009.8"></a>Job Performance Details</h3>
<!--l. 361--><p class="noindent" >DUCC captures a number of process performance metrics. <a 
href="#x1-146001r1">Figure &#x00A0;9.1</a> shows details on the JD and single JP processes. The
%CPU time shown, 728, is lower than the actual because the Job Process was idle for some time before it received the first
Work Item and also idle between finishing the last Work Item and being shut down. DUCC shows the JVM spent a total of
58 seconds in GC (garbage collection), had no major page faults or page space, and used a max of 2.1GB of
RSS.
<!--l. 368--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-146001r1"></a>
                                                                                                
                                                                                                

<!--l. 370--><p class="noindent" ><img 
src="images/BooksRaw.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;9.1: </span><span  
class="content">OpenNLP Process Measurements</span></div><!--tex4ht:label?: x1-146001r1 -->
                                                                                                
                                                                                                
<!--l. 373--><p class="noindent" ></div><hr class="endfigure">
<!--l. 375--><p class="noindent" >On the Performance tab, DUCC shows the breakdown of clock time spent in each primitive UIMA component running in the
Job Process. See <a 
href="#x1-146002r2">Figure &#x00A0;9.2</a>. Processing time was dominated by the Parser component at 76.7%. The time
spent compressing and writing out CASes was 0.5%, and the time reading the input text files well below
0.1%.
<!--l. 380--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-146002r2"></a>
                                                                                                
                                                                                                

<!--l. 382--><p class="noindent" ><img 
src="images/BooksRawPerf.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;9.2: </span><span  
class="content">OpenNLP Process Breakdown</span></div><!--tex4ht:label?: x1-146002r2 -->
                                                                                                
                                                                                                
<!--l. 385--><p class="noindent" ></div><hr class="endfigure">
                                                                                                
                                                                                                
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;10</span><br /><a 
 id="x1-14700010"></a>Sample Application: CAS Input Processing</h2>
<h3 class="sectionHead"><span class="titlemark">10.1   </span> <a 
 id="x1-14800010.1"></a>Application Function and Design</h3>
<!--l. 391--><p class="noindent" >The main purpose of this application is to demonstrate the overhead of processing a collection of CASes grouped into zipfiles
and stored as ZIP compressed XmiCas or with UIMA compressed binary form 6 format.
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Note:</span> </dt><dd 
class="description">This application depends on successful processing of the work in the previous chapter.</dd></dl>
<!--l. 398--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">10.2   </span> <a 
 id="x1-14900010.2"></a>Configuration Parameters</h3>
<!--l. 399--><p class="noindent" >The Collection Reader for this job is the DuccJobCasCR. It has the following configuration parameters:
       <dl class="description"><dt class="description">
       <span 
class="cmbx-10">InputSpec</span> </dt><dd 
class="description">path to directory containing input files (named InputSpec in the hope that more options will
       be added).
       </dd><dt class="description">
       <span 
class="cmbx-10">OutputDirectory</span> </dt><dd 
class="description">path to directory for output files.
       </dd><dt class="description">
       <span 
class="cmbx-10">IgnorePreviousOutput</span> </dt><dd 
class="description">(optional) boolean to ignore (overwrite) previous output files.
       </dd><dt class="description">
       <span 
class="cmbx-10">SendToLast</span> </dt><dd 
class="description">(optional) boolean to route WorkItem CAS to last pipeline component. Set to true in this
       application.
       </dd><dt class="description">
       <span 
class="cmbx-10">SendToAll</span> </dt><dd 
class="description">(optional)  boolean  to  route  WorkItem  CAS  to  all  pipeline  components.  Not  used  in  this
       application.</dd></dl>
<!--l. 411--><p class="noindent" >The CAS Consumer is the DuccCasCC and has the following configuration parameters:
       <dl class="description"><dt class="description">
       <span 
class="cmbx-10">XmiCompressionLevel</span> </dt><dd 
class="description">(optional) compression value if using ZIP compression. Default is 7.
       </dd><dt class="description">
       <span 
class="cmbx-10">UseBinaryCompression</span> </dt><dd 
class="description">(optional) boolean to select UIMA binary CAS compression.</dd></dl>
<!--l. 418--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">10.3   </span> <a 
 id="x1-15000010.3"></a>Run the Job</h3>
<!--l. 419--><p class="noindent" >The job specification, DuccCasInputSpec.job, uses placeholders to reference the working directory and various
operational components located there. As run below the placeholders will be resolved from environmental
variables.
<!--l. 423--><p class="noindent" >The job is submitted from the command line with the following:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-84">
&#x00A0;&#x00A0;&#x00A0;MyAppDir=$PWD&#x00A0;\
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;MyInputDir=$PWD/Books.processed&#x00A0;\
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;MyOutputDir=$PWD/Books.followon&#x00A0;\
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;$DUCC_HOME/bin/ducc_submit&#x00A0;-f&#x00A0;DuccCasInputSpec.job&#x00A0;\
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;--process_deployments_max&#x00A0;1</div>
<!--l. 430--><p class="nopar" >
<!--l. 432--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">10.4   </span> <a 
 id="x1-15100010.4"></a>Job Performance Details</h3>
<!--l. 433--><p class="noindent" ><a 
href="#x1-151001r1">Figure &#x00A0;10.1</a> shows the component breakdown using binary CAS compression. Reading and deserializing took 38% vs the
60% spent serializing and writing. Using 8 pipeline threads in one process the 19245 CASes output from the last application
were read and re-written in 9 seconds.
<!--l. 438--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-151001r1"></a>
                                                                                                
                                                                                                

<!--l. 440--><p class="noindent" ><img 
src="images/BooksCasPerf.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;10.1: </span><span  
class="content">CAS Input Processing Performacne</span></div><!--tex4ht:label?: x1-151001r1 -->
                                                                                                
                                                                                                
<!--l. 443--><p class="noindent" ></div><hr class="endfigure">
<h3 class="sectionHead"><span class="titlemark">10.5   </span> <a 
 id="x1-15200010.5"></a>Limiting Job Resources</h3>
<!--l. 446--><p class="noindent" >Although this 8-threaded Job Process was primarily CPU bound doing serialization work, it is possible to become
I/O bound with enough threads banging on a shared filesystem. DuccCasInputSpec.job demonstrates how to
limit the total number of processing threads to 32 using the combination of process_thread_count=8 and
process_deployments_max=4.
<!--l. 451--><p class="noindent" >I/O vs CPU bottlenecks can be detected using the detailed performance job data reported by DUCC and comparing results
with various levels of scale out.
                                                                                                
                                                                                                
<!--l. 89--><p class="noindent" >
                                                                                                
                                                                                                
<h1 class="partHead"><span class="titlemark">Part&#x00A0;IV<br /></span><a 
 id="x1-153000IV"></a>Ducc Administrators Guide</h1>
<!--l. 23--><p class="noindent" ><a name='DUCC_INSTALL'></a>
                                                                                                
                                                                                                
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;11</span><br /><a 
 id="x1-15400011"></a>Installation, Configuration, and Verification</h2>
<h3 class="sectionHead"><span class="titlemark">11.1   </span> <a 
 id="x1-15500011.1"></a>Overview</h3>
<!--l. 21--><p class="noindent" >DUCC is a multi-user, multi-system distributed application. First-time installation is performed in two stages:
     <ul class="itemize1">
     <li class="itemize">Single-user installation: This provides single-user, single-system installation for testing, and verification. Simple
     development of small applications on small systems such as laptops or office workstations is possible after
     Single-user Installation.
     </li>
     <li class="itemize">Multi-user installation: This provides secure multi-user capabilities and configuration for multi-system clusters.</li></ul>
<!--l. 33--><p class="noindent" >First-time users must perform single-user installation and verification on a single system. Once this configuration is working
and verified, it is straightforward to upgrade to a multi-user configuration.
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Note:</span> </dt><dd 
class="description">A key feature of DUCC is to run user processes in CGroups in order to guarantee each process always has the
     amount of RAM requested. Total RAM allocation to the managed process and its child processes that exceed
     requested memory will go to swap space. Without CGroups a process that exceeds its requested memory size
     by N% is killed (default N=5 in ducc.properties), and memory use by child processes is ignored.</dd></dl>
<!--l. 45--><p class="noindent" >DUCC is distributed as a compressed tar file. The instructions below assume installation from one of this distribution media.
If building from source, the build creates this file in your svn trunk/target directory. The distribution file is in the
form
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-85">
&#x00A0;&#x00A0;&#x00A0;uima-ducc-[version]-bin.tar.gz</div>
<!--l. 50--><p class="nopar" > where [version] is the DUCC version; for example, <span 
class="cmti-10">uima-ducc-1.0.0-bin.tar.gz</span>. This document will refer to the distribution
file as the &#8220;<span 
class="cmmi-10">&#x003C;</span>distribution.file<span 
class="cmmi-10">&#x003E;</span>&#8221;.
<!--l. 54--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">11.2   </span> <a 
 id="x1-15600011.2"></a>Software Prerequisites</h3>
<!--l. 56--><p class="noindent" >Both single and multi-user configurations have the following software pre-requisites:
     <ul class="itemize1">
     <li class="itemize">A userid <span 
class="cmti-10">ducc</span>, and group <span 
class="cmti-10">ducc</span>. User <span 
class="cmti-10">ducc </span>must the the only member of group <span 
class="cmti-10">ducc</span>.
     </li>
     <li class="itemize">Reasonably current Linux. DUCC has been tested on SLES 10.2, 11.1, and 11.2, and RHEL 6.3.
     <!--l. 62--><p class="noindent" ><span 
class="cmti-10">Note: </span>On some systems the default <span 
class="cmti-10">user limits </span>for max user processes (ulimit -u) and nfiles (ulimit -n) are
     defined too low for DUCC. The shell login profile for user <span 
class="cmti-10">ducc </span>should set the soft limit for max user processes
     to be the same as the hard limit (ulimit -u &#8216;ulimit -Hu&#8216;), and the nfiles limit raised above 1024 to at least twice
     the number of user processes running on the cluster.
     </li>
     <li class="itemize">For CGroupt support, libcgroup1-0.37+ on SLES and libcgroup-0.37+ on RHEL.
     </li>
     <li class="itemize">DUCC has been tested and run on IBM and Oracle JDK 1.6 and 1.7.
     </li>
     <li class="itemize">Python 2.x, where &#8217;x&#8217; is 4 or greater. DUCC has not been tested on Python 3.x.</li></ul>
<!--l. 75--><p class="noindent" >Multi-user installation has additional requirements:
     <ul class="itemize1">
     <li class="itemize">All systems must have a shared filesystem (such as NFS or GPFS) and common user space
     </li>
     <li class="itemize">Passwordless ssh must be installed for user <span 
class="cmti-10">ducc </span>on all systems.
     </li>
     <li class="itemize">Root access is required to install a small setuid-root program on each system.</li></ul>
<!--l. 83--><p class="noindent" >In order to build DUCC from source the following software is also required:
     <ul class="itemize1">
     <li class="itemize">A    Subversion    client,    from    <a 
href="http://subversion.apache.org/packages.html" class="url" ><span 
class="cmtt-10">http://subversion.apache.org/packages.html</span></a>.    The    svn    url    is
     <a 
href="https://svn.apache.org/repos/asf/uima/sandbox/uima-ducc/trunk" class="url" ><span 
class="cmtt-10">https://svn.apache.org/repos/asf/uima/sandbox/uima-ducc/trunk</span></a>.
     </li>
     <li class="itemize">Apache Maven, from <a 
href="http://maven.apache.org/index.html" class="url" ><span 
class="cmtt-10">http://maven.apache.org/index.html</span></a></li></ul>
<!--l. 90--><p class="noindent" >The DUCC webserver server optionally supports direct &#8220;jconsole&#8221; attach to DUCC job processes. To install this, the
following is required:
                                                                                                
                                                                                                
     <ul class="itemize1">
     <li class="itemize">Apache Ant, any reasonably current version.</li></ul>
<!--l. 96--><p class="noindent" >To (optionally) build the documentation, the following is also required:
     <ul class="itemize1">
     <li class="itemize">Latex,  including  the  <span 
class="cmti-10">pdflatex  </span>and  <span 
class="cmti-10">htlatex  </span>packages.  A  good  place  to  start  if  you  need  to  install  it  is
     <a 
href="https://www.tug.org/texlive/" class="url" ><span 
class="cmtt-10">https://www.tug.org/texlive/</span></a>.</li></ul>
<!--l. 102--><p class="noindent" >More detailed one-time setup instructions for source-level builds via subversion can be found here:
<a 
href="http://uima.apache.org/one-time-setup.html\#svn-setup" class="url" ><span 
class="cmtt-10">http://uima.apache.org/one-time-setup.html\#svn-setup</span></a>
<!--l. 105--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">11.3   </span> <a 
 id="x1-15700011.3"></a>Building from Source</h3>
<!--l. 107--><p class="noindent" >To build from source, ensure you have Subversion and Maven installed. Extract the source from the SVN repository named
above.
<!--l. 110--><p class="noindent" >Then from your extract directory into the root directory (usually current-directory¿/trunk), and run the command
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-86">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;mvn&#x00A0;install</div>
<!--l. 114--><p class="nopar" > or
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-87">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;mvn&#x00A0;install&#x00A0;-Pbuild-duccdocs</div>
<!--l. 118--><p class="nopar" > if you have LaTeX insalled and wish to do the optional build of documentation.
<!--l. 121--><p class="noindent" >If this is your first Maven build it may take quite a while as Maven downloads all the open-source pre-requisites. (The
pre-requisites are stored in the Maven repository, usually your $HOME/.m2).
<!--l. 125--><p class="noindent" >When build is complete, a tarball is placed in your current-directory/trunk/target directory.
<!--l. 128--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">11.4   </span> <a 
 id="x1-15800011.4"></a>Documentation</h3>
<!--l. 130--><p class="noindent" >After single-user installation, the DUCC documentation is found (in both PDF and HTML format) in the
directory ducc_runtime/docs. As well, the DUCC webserver contains a link to the full documentation on
each major page. The API is documented only via JavaDoc, distributed in the webserver&#8217;s root directory
<span 
class="cmtt-10">$DUCC</span><span 
class="cmtt-10">_HOME/webserver/root/doc/api.</span>
<!--l. 136--><p class="noindent" >If building from source, Maven places the documentation in
     <ul class="itemize1">
     <li class="itemize"><span 
class="cmtt-10">trunk/uima-ducc-duccdocs/target/site </span>(main documentation), and
     </li>
     <li class="itemize"><span 
class="cmtt-10">trunk/target/site/apidocs </span>(API Javadoc)</li></ul>
<!--l. 142--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">11.5   </span> <a 
 id="x1-15900011.5"></a>Single-user Installation and Verification</h3>
<!--l. 144--><p class="noindent" >Single-user installation sets up an initial, working configuration on a single system. Although any user ID can be used to run
DUCC in single-user mode, it is recommended to create user &#8220;ducc&#8221; to avoid confusion. No security is established in
single-user mode, and all user processes run as the DUCC user ID.
<!--l. 149--><p class="noindent" >Verification submits a very simple UIMA pipeline for execution under DUCC. Once this is shown to be working, one may
proceed to upgrade to full installation.
<!--l. 153--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">11.6   </span> <a 
 id="x1-16000011.6"></a>Minimal Hardware Requirements for single-user Installation</h3>
     <ul class="itemize1">
     <li class="itemize">One Intel-based or IBM Power-based system. (More systems may be added during multi-user installation,
     described below.)
     </li>
     <li class="itemize">8GB of memory. 16GB or more is preferable for developing and testing applications beyond the non-trivial.
                                                                                                
                                                                                                
     </li>
     <li class="itemize">1GB disk space to hold the DUCC runtime, system logs, and job logs. More is usually needed for larger
     installations.</li></ul>
<!--l. 165--><p class="noindent" >Please note: DUCC is intended for scaling out memory-intensive UIMA applications over computing clusters consisting of
multiple nodes with large (16GB-256GB or more) memory. The minimal requirements are for initial test and evaluation
purposes, but will not be sufficient to run actual workloads.
<!--l. 170--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">11.7   </span> <a 
 id="x1-16100011.7"></a>Single-user System Installation</h3>
<!--l. 173--><p class="noindent" >
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">Expand the distribution file:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-88">
     tar&#x00A0;-zxf&#x00A0;&#x003C;distribution.file&#x003E;</div>
     <!--l. 176--><p class="nopar" >
     <!--l. 178--><p class="noindent" >This creates a directory with a name of the form &#8220;apache-uima-ducc-[version]&#8221;.
     <!--l. 180--><p class="noindent" >This directory contains the full DUCC runtime which you may use &#8220;in place&#8221; but it is highly recommended that you
     move it into a standard location; for example, under ducc&#8217;s HOME directory:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-89">
     mv&#x00A0;apache-uima-ducc-1.0.0&#x00A0;/home/ducc/ducc_runtime</div>
     <!--l. 185--><p class="nopar" >
     <!--l. 187--><p class="noindent" >We refer to this directory, regardless of its location, as $DUCC_HOME. For simplicity, some of the examples in this
     document assume it has been moved to /home/ducc/ducc_runtime.
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">Change directories into the admin sub-directory of $DUCC_HOME:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-90">
     cd&#x00A0;$DUCC_HOME/admin</div>
     <!--l. 193--><p class="nopar" >
     </dd><dt class="enumerate-enumitem">
  3. </dt><dd 
class="enumerate-enumitem">Run the post-installation script:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-91">
     ./ducc_post_install</div>
     <!--l. 198--><p class="nopar" > If this script fails, correct any problems it identifies and run it again.
     <!--l. 201--><p class="noindent" >Note that <span 
class="cmti-10">ducc</span><span 
class="cmti-10">_post</span><span 
class="cmti-10">_install </span>initializes various default parameters which may be changed later by the system
     administrator. Therefore it usually should be run only during this first installation step.
     </dd><dt class="enumerate-enumitem">
  4. </dt><dd 
class="enumerate-enumitem">If you wish to install jconsole support from the webserver, make sure Apache Ant is installed, and run
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-92">
     ./sign_jconsole_jar</div>
     <!--l. 209--><p class="nopar" > This step may be run at any time if you wish to defer it.
     </dd></dl>
<!--l. 214--><p class="noindent" >That&#8217;s it, DUCC is installed and ready to run. (If errors were displayed during ducc_post_install they must be corrected
before continuing.)
<!--l. 217--><p class="noindent" >The post-installation script performs these tasks:
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">Verifies that the correct level of Java and Python are installed and available.
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">Creates a default nodelist, $DUCC_HOME/resources/ducc.nodes, containing the name of the node you are
     installing on.
     </dd><dt class="enumerate-enumitem">
  3. </dt><dd 
class="enumerate-enumitem">Defines the &#8220;ducc head&#8221; node to be to node you are installing from.
     </dd><dt class="enumerate-enumitem">
  4. </dt><dd 
class="enumerate-enumitem">Sets up the default https keystore for the webserver.
     </dd><dt class="enumerate-enumitem">
  5. </dt><dd 
class="enumerate-enumitem">Installs the DUCC documentation &#8220;ducc book&#8221; into the DUCC webserver root.
     </dd><dt class="enumerate-enumitem">
  6. </dt><dd 
class="enumerate-enumitem">Builds and installs the C program, &#8220;ducc_ling&#8221;, into the default location.
     </dd><dt class="enumerate-enumitem">
  7. </dt><dd 
class="enumerate-enumitem">Ensures that the (supplied) ActiveMQ broker is runnable.</dd></dl>
<!--l. 228--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">11.8   </span> <a 
 id="x1-16200011.8"></a>Initial System Verification</h3>
<!--l. 230--><p class="noindent" >Here we start the basic installation, submit a simple UIMA-AS job, verify that it ran, and stop DUCC. Once this is
confirmed working DUCC is ready to use in an unsecured, single-user mode on a single system.
<!--l. 234--><p class="noindent" >To run the verification, issue these commands.
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">cd $DUCC_HOME/admin
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">./check_ducc -s
     <!--l. 239--><p class="noindent" >Examine the output of check_ducc. If any errors are shown, correct the errors and rerun check_ducc until there
     are no errors.
     </dd><dt class="enumerate-enumitem">
  3. </dt><dd 
class="enumerate-enumitem">Finally, start ducc: ./start_ducc -s</dd></dl>
<!--l. 244--><p class="noindent" >Start_ducc will first perform a number of consistency checks. It then starts the ActiveMQ broker, the DUCC control
processes, and a single DUCC agent on the local node. Note that &#8220;single user mode&#8221; (-s) is specified for this first start. This
inhibits the checks on the permissions on ducc_ling (described <a 
href="#x1-16500011.11">below</a>).
<!--l. 249--><p class="noindent" >You will see some startup messages similar to the following:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-93">
ENV:&#x00A0;Java&#x00A0;is&#x00A0;configured&#x00A0;as:&#x00A0;/share/jdk1.6/bin/java
&#x00A0;<br />ENV:&#x00A0;java&#x00A0;full&#x00A0;version&#x00A0;"1.6.0_14-b08"
&#x00A0;<br />ENV:&#x00A0;Threading&#x00A0;enabled:&#x00A0;True
&#x00A0;<br />MEM:&#x00A0;memory&#x00A0;is&#x00A0;15&#x00A0;gB
&#x00A0;<br />ENV:&#x00A0;system&#x00A0;is&#x00A0;Linux
&#x00A0;<br />allnodes&#x00A0;/home/ducc/ducc_runtime/resources/ducc.nodes
&#x00A0;<br />Class&#x00A0;definition&#x00A0;file&#x00A0;is&#x00A0;ducc.mixed.classes
&#x00A0;<br />OK:&#x00A0;Class&#x00A0;and&#x00A0;node&#x00A0;definitions&#x00A0;validated.
&#x00A0;<br />OK:&#x00A0;Class&#x00A0;configuration&#x00A0;checked
&#x00A0;<br />Starting&#x00A0;broker&#x00A0;on&#x00A0;ducchead.biz.org
&#x00A0;<br />Waiting&#x00A0;for&#x00A0;broker&#x00A0;.....&#x00A0;0
&#x00A0;<br />Waiting&#x00A0;for&#x00A0;broker&#x00A0;.....&#x00A0;1
&#x00A0;<br />ActiveMQ&#x00A0;broker&#x00A0;is&#x00A0;found&#x00A0;on&#x00A0;configured&#x00A0;host&#x00A0;and&#x00A0;port:&#x00A0;ducchead.biz.org:61618
&#x00A0;<br />Starting&#x00A0;1&#x00A0;agents
&#x00A0;<br />**********&#x00A0;Starting&#x00A0;agents&#x00A0;from&#x00A0;file&#x00A0;/home/ducc/ducc_runtime/resources/ducc.nodes
&#x00A0;<br />Starting&#x00A0;warm
&#x00A0;<br />Waiting&#x00A0;for&#x00A0;Completion
&#x00A0;<br />ducchead.biz.org&#x00A0;Starting&#x00A0;rm
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;PID&#x00A0;14198
&#x00A0;<br />ducchead.biz.org&#x00A0;Starting&#x00A0;pm
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;PID&#x00A0;14223
&#x00A0;<br />ducchead.biz.org&#x00A0;Starting&#x00A0;sm
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;PID&#x00A0;14248
&#x00A0;<br />ducchead.biz.org&#x00A0;Starting&#x00A0;or
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;PID&#x00A0;14275
&#x00A0;<br />ducchead.biz.org&#x00A0;Starting&#x00A0;ws
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;PID&#x00A0;14300
&#x00A0;<br />ducchead.biz.org
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;ducc_ling&#x00A0;OK
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;DUCC&#x00A0;Agent&#x00A0;started&#x00A0;PID&#x00A0;14325
&#x00A0;<br />All&#x00A0;threads&#x00A0;returned</div>
<!--l. 283--><p class="nopar" >
<!--l. 285--><p class="noindent" >Now open a browser and go to the DUCC webserver&#8217;s url, http://<span 
class="cmmi-10">&#x003C;</span>hostname<span 
class="cmmi-10">&#x003E;</span>:42133 where <span 
class="cmmi-10">&#x003C;</span>hostname<span 
class="cmmi-10">&#x003E; </span>is the
name of the host where DUCC is started. Navigate to the Reservations page via the links in the upper-left
corner. You should see the DUCC JobDriver reservation in state WaitingForResources. In a few minutes this
should change to Assigned. (This usually takes 3-4 minutes in the default configuration.) Now jobs can be
submitted.
<div class="center" 
>
<!--l. 291--><p class="noindent" >
<div class="fbox">The hostname and port are configurable by the DUCC administrator in ducc.properties</div>
</div>
<!--l. 296--><p class="noindent" >To submit a job,
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">$DUCC_HOME/bin/ducc_submit &#8211;specification $DUCC_HOME/examples/simple/1.job</dd></dl>
                                                                                                
                                                                                                
<!--l. 301--><p class="noindent" >Open the browser in the DUCC jobs page. You should see the job progress through a series of transitions: Waiting For
Driver, Waiting For Services, Waiting For Resources, Initializing, and finally, Running. You&#8217;ll see the number of work items
submitted (15) and the number of work items completed grow from 0 to 15. Finally, the job will move into Completing and
then Completed..
<!--l. 307--><p class="noindent" >Since this example does not specify a log directory DUCC will create a log directory in your HOME directory
under
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-94">
$HOME/ducc/logs/job-id</div>
<!--l. 310--><p class="nopar" >
<!--l. 312--><p class="noindent" >In this directory, you will find a log for the sample job&#8217;s JobDriver (JD), JobProcess (JP), and a number of other files
relating to the job.
<!--l. 315--><p class="noindent" >This is a good time to explore the DUCC web pages. Notice that the job id is a link to a set of pages with details about the
execution of the job.
<!--l. 318--><p class="noindent" >Notice also, in the upper-right corner is a link to the full DUCC documentation, the &#8220;DuccBook&#8221;.
<!--l. 320--><p class="noindent" >Finally, stop DUCC:
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">cd $DUCC_HOME/admin
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">./stop_ducc -a</dd></dl>
<!--l. 326--><p class="noindent" >Once the system is verified and the sample job completes correctly, proceed to Multi-User Installation and Verification to set
up multiple-user support and optionally, multi-node operation.
<!--l. 330--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">11.9   </span> <a 
 id="x1-16300011.9"></a>Logs</h3>
<!--l. 331--><p class="noindent" >The DUCC system logs are written to the directory
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-95">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;$DUCC_HOME/logs</div>
<!--l. 334--><p class="nopar" >
<!--l. 336--><p class="noindent" >In that directory are found logs for each of the DUCC components plus one for each node DUCC is installed
on.
<!--l. 339--><p class="noindent" >DUCC job/user logs are written by default to the user&#8217;s HOME directory under
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-96">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;$HOME/ducc/logs/&#x003C;jobid&#x003E;</div>
<!--l. 342--><p class="nopar" >
<!--l. 344--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">11.10   </span> <a 
 id="x1-16400011.10"></a>Multi-User Installation and Verification</h3>
<!--l. 346--><p class="noindent" >Multi-user installation consists of these steps over and above single-user installation:
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">Install and configure the setuid-root program, ducc_ling. This small program allows DUCC jobs to be run as
     the submitting user rather than user ducc.
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">Optionally install and configure CGroups.
     </dd><dt class="enumerate-enumitem">
  3. </dt><dd 
class="enumerate-enumitem">Optionally update the configuration to include additional nodes.</dd></dl>
<!--l. 356--><p class="noindent" >Multi-user installation has these pre-requisites (DUCC will not work on multiple nodes unless these steps are
taken):
     <ul class="itemize1">
     <li class="itemize">All systems in the DUCC cluster must have a shared filesystem and shared user space (user directories are
     shared over NFS or an equivalent networked file system, across the systems, and user ids and credentials are
     the same).
     </li>
     <li class="itemize">Passwordless ssh must be installed for user ducc on all systems. Users do NOT require ssh access to the DUCC
     nodes.
     </li>
     <li class="itemize">Root access is (briefly) required to install a small setuid-root program on each system.</li></ul>
<!--l. 370--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">11.11   </span> <a 
 id="x1-16500011.11"></a>Ducc_ling Installation</h3>
<!--l. 372--><p class="noindent" >Before proceeding with this step, please note:
     <ul class="itemize1">
     <li class="itemize">This step is required ONLY to install multi-user capabilities.
     </li>
     <li class="itemize">The sequence operations consisting of <span 
class="cmti-10">chown </span>and <span 
class="cmti-10">chmod </span>MUST be performed in the exact order given below.
     If the <span 
class="cmti-10">chmod </span>operation is performed before the <span 
class="cmti-10">chown </span>operation, Linux will regress the permissions granted by
     <span 
class="cmti-10">chmod </span>and ducc_ling will be incorrectly installed.</li></ul>
<!--l. 381--><p class="noindent" >ducc_ling is a setuid-root program whose function is to execute user tasks under the identity of the user. This must be
installed correctly; incorrect installation can prevent jobs from running as their submitters, and in the worse case, can
introduce security problems into the system.
                                                                                                
                                                                                                
<!--l. 385--><p class="noindent" >ducc_ling must be installed on LOCAL disk on every system in the DUCC cluster, to avoid shared-filesystem access to it.
The path to ducc_ling must be the same on each system. For example, one could install it to /local/ducc/bin on local disk on
every system.
<!--l. 389--><p class="noindent" >To install ducc_ling (these instructions assume it is installed into /local/ducc/bin): As ducc, ensure ducc_ling is built
correctly for your architecture:
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">cd $DUCC_HOME/duccling/src
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">make clean all</dd></dl>
<!--l. 396--><p class="noindent" >Now, as root, move ducc_ling to a secure location and grant authorization to run tasks under different users&#8217;
identities:
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">mkdir /local/ducc
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">mkdir /local/ducc/bin
     </dd><dt class="enumerate-enumitem">
  3. </dt><dd 
class="enumerate-enumitem">chown ducc.ducc /local/ducc
     </dd><dt class="enumerate-enumitem">
  4. </dt><dd 
class="enumerate-enumitem">chown ducc.ducc /local/ducc/bin
     </dd><dt class="enumerate-enumitem">
  5. </dt><dd 
class="enumerate-enumitem">chmod 700 /local/ducc
     </dd><dt class="enumerate-enumitem">
  6. </dt><dd 
class="enumerate-enumitem">chmod 700 /local/ducc/bin
     </dd><dt class="enumerate-enumitem">
  7. </dt><dd 
class="enumerate-enumitem">cp $DUCC_HOME/duccling/src/ducc_ling /local/ducc/bin
     </dd><dt class="enumerate-enumitem">
  8. </dt><dd 
class="enumerate-enumitem">chown root.ducc /local/ducc/bin/ducc_ling
     </dd><dt class="enumerate-enumitem">
  9. </dt><dd 
class="enumerate-enumitem">chmod 4750 /local/ducc/bin/ducc_ling</dd></dl>
<!--l. 410--><p class="noindent" >Finally, update the configuration to use this ducc_ling instead of the default ducc_ling:
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">Edit $DUCC_HOME/resources/ducc.properties and change this line:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-97">
     &#x00A0;ducc.agent.launcher.ducc_spawn_path=${DUCC_HOME}/admin/ducc_ling</div>
     <!--l. 415--><p class="nopar" > to this line (Using the actual location of the updated ducc_ling, if different from /local/ducc/bin):
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-98">
     ducc.agent.launcher.ducc_spawn_path=/local/ducc/bin/ducc_ling</div>
     <!--l. 419--><p class="nopar" ></dd></dl>
<!--l. 423--><p class="noindent" >What these steps do:
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">The first two step compile ducc_ling for your current machine architecture and operating system level.
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">The next two steps (mkdir) create directory /local/ducc/bin
     </dd><dt class="enumerate-enumitem">
  3. </dt><dd 
class="enumerate-enumitem">The next two steps (chown) set ownership of /local/ducc and /local/ducc/bin to user ducc, group ducc
     </dd><dt class="enumerate-enumitem">
  4. </dt><dd 
class="enumerate-enumitem">The next two steps (chmod) set permissions for /local/ducc and /local/ducc/bin so only user ducc may access
     the contents of these directories
     </dd><dt class="enumerate-enumitem">
  5. </dt><dd 
class="enumerate-enumitem">The copy stop copies the ducc_ling program created in initial installation into /local/ducc/bin
     </dd><dt class="enumerate-enumitem">
  6. </dt><dd 
class="enumerate-enumitem">The next step (chown) sets ownership of /local/ducc/bin/ducc_ling to root, and group ownership to ducc.
     </dd><dt class="enumerate-enumitem">
  7. </dt><dd 
class="enumerate-enumitem">The next step (chmod) stablishes the <span 
class="cmti-10">setuid </span>bit, which allows user ducc to execute ducc_ling with root privileges.
     </dd><dt class="enumerate-enumitem">
  8. </dt><dd 
class="enumerate-enumitem">Finally, ducc.properties is updated to point to the new, privileged ducc_ling.</dd></dl>
<!--l. 440--><p class="noindent" >If these steps are correctly performed, ONLY user <span 
class="cmti-10">ducc </span>may use the ducc_ling program in a privileged way. Ducc_ling
contains checks to prevent even user <span 
class="cmti-10">root </span>from using it for privileged operations.
<!--l. 444--><p class="noindent" >Ducc_ling contains the following functions, which the security-conscious may verify by examining the source in
$DUCC_HOME/duccling. All sensitive operations are performed only AFTER switching userids, to prevent unauthorized
root access to the system.
     <ul class="itemize1">
     <li class="itemize">Changes it&#8217;s real and effective userid to that of the user invoking the job.
     </li>
     <li class="itemize">Optionally redirects its stdout and stderr to the DUCC log for the current job.
     </li>
     <li class="itemize">Optionally redirects its stdio to a port set by the CLI, when a job is submitted.
     </li>
     <li class="itemize">&#8220;Nice&#8221;s itself to a &#8220;worse&#8221; priority than the default, to reduce the chances that a runaway DUCC job could
     monopolize a system.
     </li>
     <li class="itemize">Optionally sets user limits.
     </li>
     <li class="itemize">Prints the effective limits for a job to both the user&#8217;s log, and the DUCC agent&#8217;s log.
     </li>
     <li class="itemize">Changes to the user&#8217;s working directory, as specified by the job.
                                                                                                
                                                                                                
     </li>
     <li class="itemize">Optionally establishes LD_LIBRARY_PATH for the job from the environment variable
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-99">
     &#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;DUCC_LD_LIBRARY_PATH</div>
     <!--l. 460--><p class="nopar" > if set in the DUCC job specification. (Secure Linux systems will prevent LD_LIBRARY_PATH from being set by a
     program with root authority, so this is done AFTER changing userids).
     </li></ul>
<!--l. 468--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">11.12   </span> <a 
 id="x1-16600011.12"></a>CGroups Installation and Configuration</h3>
<!--l. 469--><p class="noindent" >The steps in this task must be done as user root and user ducc.
<!--l. 471--><p class="noindent" >To install and configure CGroups for DUCC:
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">Install the appropriate <a 
href="#x1-15600011.2">libcgroup package</a> at level 0.37 or above.
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">Configure /etc/cgconfig.conf as follows:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-100">
     &#x00A0;&#x00A0;&#x00A0;#&#x00A0;Mount&#x00A0;cgroups
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;mount&#x00A0;{
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;memory&#x00A0;=&#x00A0;/cgroup;
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;}
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;#&#x00A0;Define&#x00A0;cgroup&#x00A0;ducc&#x00A0;and&#x00A0;setup&#x00A0;permissions
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;group&#x00A0;ducc&#x00A0;{
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;perm&#x00A0;{
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;task&#x00A0;{
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;uid&#x00A0;=&#x00A0;ducc;
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;admin&#x00A0;{
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;uid&#x00A0;=&#x00A0;ducc;
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;memory&#x00A0;{}
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;}</div>
     <!--l. 494--><p class="nopar" >
     </dd><dt class="enumerate-enumitem">
  3. </dt><dd 
class="enumerate-enumitem">Start the cgconfig service:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-101">
     &#x00A0;&#x00A0;&#x00A0;service&#x00A0;cgconfig&#x00A0;start</div>
     <!--l. 498--><p class="nopar" >
     </dd><dt class="enumerate-enumitem">
  4. </dt><dd 
class="enumerate-enumitem">Verify cgconfig service is running by the existence of directory:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-102">
     &#x00A0;&#x00A0;&#x00A0;/cgroups/ducc</div>
     <!--l. 503--><p class="nopar" >
     </dd><dt class="enumerate-enumitem">
  5. </dt><dd 
class="enumerate-enumitem">Some versions of libcgroup are buggy. As user ducc, verify that the following command executes with no
     error:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-103">
     &#x00A0;&#x00A0;&#x00A0;cgcreate&#x00A0;-t&#x00A0;ducc&#x00A0;-a&#x00A0;ducc&#x00A0;-g&#x00A0;memory:ducc/test-cgroups</div>
     <!--l. 508--><p class="nopar" >
     </dd><dt class="enumerate-enumitem">
  6. </dt><dd 
class="enumerate-enumitem">Configure the cgconfig service to start on reboot:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-104">
     &#x00A0;&#x00A0;&#x00A0;chkconfig&#x00A0;cgconfig&#x00A0;on</div>
     <!--l. 513--><p class="nopar" >
     </dd><dt class="enumerate-enumitem">
  7. </dt><dd 
class="enumerate-enumitem">Update <a 
href="#x1-18500012.2.7">ducc.properties</a> to enable CGroups. Note that if CGroups is not installed, the DUCC Agent will detect this and
     not attempt to use the feature. It is completely safe to enable CGroups in <span 
class="cmti-10">ducc.properties </span>on machines where it is not
     installed.</dd></dl>
<!--l. 521--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">11.13   </span> <a 
 id="x1-16700011.13"></a>Set up the full nodelists</h3>
<!--l. 522--><p class="noindent" >To add additional nodes to the ducc cluster, DUCC needs to know what nodes to start its Agent processes on. These nodes
are listed in the file
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-105">
$DUCC_HOME/resources/ducc.nodes.</div>
<!--l. 526--><p class="nopar" >
<!--l. 528--><p class="noindent" >During initial installation, this file was initialized with the node DUCC is installed on. Additional nodes may be added to the
file using a text editor to increase the size of the DUCC cluster.
<!--l. 532--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">11.14   </span> <a 
 id="x1-16800011.14"></a>Full DUCC Verification</h3>
<!--l. 534--><p class="noindent" >This is identical to initial verification, with the one difference that the job &#8220;1.job&#8221; should be submitted as any user other
than ducc. Watch the webserver and check that the job executes under the correct identity. Once this completes, DUCC is
installed and verified.
<!--l. 538--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">11.15   </span> <a 
 id="x1-16900011.15"></a>Enable DUCC webserver login</h3>
<!--l. 540--><p class="noindent" >This step is optional. As shipped, the webserver is disabled for logins. This can be seen by hovering over the Login text
located in the upper right of most webserver pages:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-106">
System&#x00A0;is&#x00A0;configured&#x00A0;to&#x00A0;disallow&#x00A0;logins</div>
<!--l. 545--><p class="nopar" >
<!--l. 547--><p class="noindent" >To enable logins, a Java-based authenticator must be plugged-in and the login feature must be enabled in the ducc.properties
file by the DUCC administrator. Also, ducc_ling should be properly deployed (see Ducc_ling Installation section
above).
<!--l. 552--><p class="noindent" >A beta version of a Linux-based authentication plug-in is shipped with DUCC. It can be found in the source
tree:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-107">
org.apache.uima.ducc.ws.authentication.LinuxAuthenticationManager</div>
<!--l. 556--><p class="nopar" >
<!--l. 558--><p class="noindent" >The Linux-based authentication plug-in will attempt to validate webserver login requests by appealing to the host OS. The
user who wishes to login provides a userid and password to the webserver via https, which in-turn are handed-off to the OS
for a success/failure reply.
<!--l. 563--><p class="noindent" >To have the webserver employ the beta Linux-based authentication plug-in, the DUCC administrator should perform the
following as user ducc:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-108">
1.&#x00A0;edit&#x00A0;ducc.properties
&#x00A0;<br />2.&#x00A0;locate:&#x00A0;ducc.ws.login.enabled&#x00A0;=&#x00A0;false
&#x00A0;<br />3.&#x00A0;modify:&#x00A0;ducc.ws.login.enabled&#x00A0;=&#x00A0;true
&#x00A0;<br />4.&#x00A0;save</div>
<!--l. 570--><p class="nopar" >
<!--l. 572--><p class="noindent" >Note: The beta Linux-based authentication plug-in has limited testing. In particular, it was tested using:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-109">
Red&#x00A0;Hat&#x00A0;Enterprise&#x00A0;Linux&#x00A0;Workstation&#x00A0;release&#x00A0;6.4&#x00A0;(Santiago)</div>
<!--l. 576--><p class="nopar" >
<!--l. 578--><p class="noindent" >Alternatively, you can provide your own authentication plug-in. To do so:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-110">
1.&#x00A0;author&#x00A0;a&#x00A0;Java&#x00A0;class&#x00A0;that&#x00A0;implements
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;org.apache.uima.ducc.common.authentication.IAuthenticationManager
&#x00A0;<br />2.&#x00A0;create&#x00A0;a&#x00A0;jar&#x00A0;file&#x00A0;comprising&#x00A0;your&#x00A0;authentication&#x00A0;class
&#x00A0;<br />3.&#x00A0;put&#x00A0;the&#x00A0;jar&#x00A0;file&#x00A0;in&#x00A0;a&#x00A0;location&#x00A0;accessible&#x00A0;by&#x00A0;the&#x00A0;DUCC&#x00A0;webserver,&#x00A0;such&#x00A0;as
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;$DUCC_HOME/lib/authentication
&#x00A0;<br />4.&#x00A0;put&#x00A0;any&#x00A0;authentication&#x00A0;dependency&#x00A0;jar&#x00A0;files&#x00A0;there&#x00A0;as&#x00A0;well
&#x00A0;<br />5.&#x00A0;edit&#x00A0;ducc.properties
&#x00A0;<br />6.&#x00A0;add&#x00A0;the&#x00A0;following:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;ducc.local.jars&#x00A0;=&#x00A0;authentication/*
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;ducc.authentication.implementer=&#x003C;your.authenticator.class.Name&#x003E;
&#x00A0;<br />7.&#x00A0;locate:&#x00A0;ducc.ws.login.enabled&#x00A0;=&#x00A0;false
&#x00A0;<br />8.&#x00A0;modify:&#x00A0;ducc.ws.login.enabled&#x00A0;=&#x00A0;true
&#x00A0;<br />9.&#x00A0;save</div>
<!--l. 593--><p class="nopar" >
<!--l. 31--><p class="noindent" ><a name='DUCC_ADMIN'></a>
                                                                                                
                                                                                                
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;12</span><br /><a 
 id="x1-17000012"></a>Administration</h2>
<h3 class="sectionHead"><span class="titlemark">12.1   </span> <a 
 id="x1-17100012.1"></a>WebServer Authentication</h3>
<!--l. 22--><p class="noindent" >By default, DUCC is configured such that there is effectively no authentication enforcement by the WebServer.
No password entry is permitted on the Login panel and any userid specified is accepted whether it exists or
not.
<!--l. 27--><p class="noindent" >To enable your own authentication measures, you should perform the following steps:
<!--l. 31--><p class="noindent" >
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">Author an authentication manager Java class implementing interface
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-111">
     org.apache.uima.ducc.common.authentication.IAuthenticationManager
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
     <!--l. 34--><p class="nopar" >
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">Create an authentication jar file comprising the authentication manager Java class
     </dd><dt class="enumerate-enumitem">
  3. </dt><dd 
class="enumerate-enumitem">Install your authentication jar file and any dependency jar files into your DUCC&#8217;s lib folder
     </dd><dt class="enumerate-enumitem">
  4. </dt><dd 
class="enumerate-enumitem">Update your ducc.properties file with authentication class name and jar file name(s) information
     </dd><dt class="enumerate-enumitem">
  5. </dt><dd 
class="enumerate-enumitem">Create a ducc.administrators file</dd></dl>
<!--l. 44--><p class="noindent" >Note: When a user clicks on the WebServer Login link, the login dialog is shown. On that dialog panel is shown the
authenticator: <span 
class="cmti-10">version</span>, which is supplied by your authentication manager implementation&#8217;s <span 
class="cmti-10">getVersion()</span> method. Also shown
are boxes for userid and password entry. If your authentication manager implemenation&#8217;s <span 
class="cmti-10">isPasswordChecked()</span> method
returns true then the password box will accept input, otherwise it will be disabled.
<!--l. 52--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.1.1   </span> <a 
 id="x1-17200012.1.1"></a>Example Implementation</h4>
<!--l. 54--><p class="noindent" >Shown below is an example implementation which can be used as a template for coding protection by means of interfacing
with your site&#8217;s security measures.
<!--l. 58--><p class="noindent" >In this example, the SiteSecurity Java class is presumed to be existing and available code at your installation.
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-112">
package&#x00A0;org.apache.uima.ducc.example.authentication.module;
&#x00A0;<br />
&#x00A0;<br />import&#x00A0;org.apache.uima.ducc.common.authentication.AuthenticationResult;
&#x00A0;<br />import&#x00A0;org.apache.uima.ducc.common.authentication.IAuthenticationManager;
&#x00A0;<br />import&#x00A0;org.apache.uima.ducc.common.authentication.IAuthenticationResult;
&#x00A0;<br />import&#x00A0;org.apache.uima.ducc.example.authentication.site.SiteSecurity;
&#x00A0;<br />
&#x00A0;<br />public&#x00A0;class&#x00A0;AuthenticationManager&#x00A0;implements&#x00A0;IAuthenticationManager&#x00A0;{
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;private&#x00A0;final&#x00A0;String&#x00A0;version&#x00A0;=&#x00A0;"example&#x00A0;1.0";
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;@Override
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;String&#x00A0;getVersion()&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;version;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;@Override
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;boolean&#x00A0;isPasswordChecked()&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;true;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;@Override
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;IAuthenticationResult&#x00A0;isAuthenticate(String&#x00A0;userid,&#x00A0;String&#x00A0;domain,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;String&#x00A0;password)&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;IAuthenticationResult&#x00A0;authenticationResult&#x00A0;=&#x00A0;new&#x00A0;AuthenticationResult();
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;authenticationResult.setFailure();
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;try&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if(SiteSecurity.isAuthenticUser(userid,&#x00A0;domain,&#x00A0;password))&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;authenticationResult.setSuccess();
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;catch(Exception&#x00A0;e)&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;//TODO
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;authenticationResult;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;@Override
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;IAuthenticationResult&#x00A0;isGroupMember(String&#x00A0;userid,&#x00A0;String&#x00A0;domain,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Role&#x00A0;role)&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;IAuthenticationResult&#x00A0;authenticationResult&#x00A0;=&#x00A0;new&#x00A0;AuthenticationResult();
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;authenticationResult.setFailure();
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;try&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if(SiteSecurity.isAuthenticRole(userid,&#x00A0;domain,&#x00A0;role.toString()))&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;authenticationResult.setSuccess();
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;catch(Exception&#x00A0;e)&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;//TODO
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;authenticationResult;
                                                                                                
                                                                                                
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />
&#x00A0;<br />}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
<!--l. 116--><p class="nopar" >
<!--l. 118--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.1.2   </span> <a 
 id="x1-17300012.1.2"></a>IAuthenticationManager</h4>
<!--l. 120--><p class="noindent" >Shown below is the interface which must be implemented by your authentication manager.
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-113">
package&#x00A0;org.apache.uima.ducc.common.authentication;
&#x00A0;<br />
&#x00A0;<br />public&#x00A0;interface&#x00A0;IAuthenticationManager&#x00A0;{
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;/**
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;This&#x00A0;method&#x00A0;is&#x00A0;expected&#x00A0;to&#x00A0;return&#x00A0;AuthenticationManager&#x00A0;implementation&#x00A0;version
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;information.&#x00A0;&#x00A0;It&#x00A0;is&#x00A0;nominally&#x00A0;displayed&#x00A0;by&#x00A0;the&#x00A0;DUCC&#x00A0;webserver&#x00A0;on&#x00A0;the&#x00A0;Login/Logout
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;pages.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;Example&#x00A0;return&#x00A0;value:&#x00A0;Acme&#x00A0;Authenticator&#x00A0;1.0
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;@return&#x00A0;The&#x00A0;version&#x00A0;of&#x00A0;the&#x00A0;AuthenticationManager&#x00A0;implementation.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;String&#x00A0;getVersion();
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;/**
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;This&#x00A0;method&#x00A0;is&#x00A0;expected&#x00A0;to&#x00A0;return&#x00A0;password&#x00A0;checking&#x00A0;information.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;It&#x00A0;is&#x00A0;nominally&#x00A0;employed&#x00A0;by&#x00A0;the&#x00A0;DUCC&#x00A0;webserver&#x00A0;to&#x00A0;enable/disable
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;&#x00A0;password&#x00A0;input&#x00A0;area&#x00A0;on&#x00A0;the&#x00A0;Login/Logout&#x00A0;pages.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;@return&#x00A0;True&#x00A0;if&#x00A0;the&#x00A0;AuthenticationManager&#x00A0;implementation&#x00A0;checks&#x00A0;passwords;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;false&#x00A0;otherwise.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;boolean&#x00A0;isPasswordChecked();
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;/**
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;This&#x00A0;method&#x00A0;is&#x00A0;expected&#x00A0;to&#x00A0;perform&#x00A0;authentication.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;It&#x00A0;is&#x00A0;nominally&#x00A0;employed&#x00A0;by&#x00A0;the&#x00A0;DUCC&#x00A0;webserver&#x00A0;for&#x00A0;submitted&#x00A0;Login&#x00A0;pages.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;@param&#x00A0;userid
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;@param&#x00A0;domain
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;@param&#x00A0;password
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;@return&#x00A0;True&#x00A0;if&#x00A0;authentic&#x00A0;userid+domain+password;&#x00A0;false&#x00A0;otherwise.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;IAuthenticationResult&#x00A0;isAuthenticate(String&#x00A0;userid,&#x00A0;String&#x00A0;domain,&#x00A0;String&#x00A0;password);
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;/**
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;This&#x00A0;method&#x00A0;is&#x00A0;expected&#x00A0;to&#x00A0;perform&#x00A0;role&#x00A0;validation.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;It&#x00A0;is&#x00A0;nominally&#x00A0;employed&#x00A0;by&#x00A0;the&#x00A0;DUCC&#x00A0;webserver&#x00A0;for&#x00A0;submitted&#x00A0;Login&#x00A0;pages.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;@param&#x00A0;userid
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;@param&#x00A0;domain
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;@param&#x00A0;role
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;@return&#x00A0;True&#x00A0;if&#x00A0;authentic&#x00A0;userid+domain+role;&#x00A0;false&#x00A0;otherwise.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;IAuthenticationResult&#x00A0;isGroupMember(String&#x00A0;userid,&#x00A0;String&#x00A0;domain,&#x00A0;Role&#x00A0;role);
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;/**
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*&#x00A0;The&#x00A0;supported&#x00A0;Roles
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;enum&#x00A0;Role&#x00A0;{
                                                                                                
                                                                                                
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;User,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Admin
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
<!--l. 179--><p class="nopar" >
<!--l. 182--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.1.3   </span> <a 
 id="x1-17400012.1.3"></a>IAuthenticationResult</h4>
<!--l. 184--><p class="noindent" >Shown below is the interface which must be returned by the required authentication methods in your authentication
manager.
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-114">
package&#x00A0;org.apache.uima.ducc.common.authentication;
&#x00A0;<br />
&#x00A0;<br />public&#x00A0;interface&#x00A0;IAuthenticationResult&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;void&#x00A0;setSuccess();
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;void&#x00A0;setFailure();
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;boolean&#x00A0;isSuccess();
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;boolean&#x00A0;isFailure();
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;void&#x00A0;setCode(int&#x00A0;code);
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;int&#x00A0;getCode();
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;void&#x00A0;setReason(String&#x00A0;reason);
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;String&#x00A0;getReason();
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;void&#x00A0;setException(Exception&#x00A0;exception);
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;public&#x00A0;Exception&#x00A0;getException();
&#x00A0;<br />}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
<!--l. 202--><p class="nopar" >
<!--l. 204--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.1.4   </span> <a 
 id="x1-17500012.1.4"></a>Example ANT script to build jar</h4>
<!--l. 206--><p class="noindent" >Shown below is an example ANT script to build a ducc-authenticator.jar file. The resulting jar file should be placed user
DUCC&#8217;s lib directory along with any dependency jars, and defined in ducc.properties file.
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-115">
&#x003C;project&#x00A0;name="uima-ducc-examples"&#x00A0;default="build"&#x00A0;basedir="."&#x003E;
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;property&#x00A0;name="TGT-LIB"&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;value="${basedir}/lib"&#x00A0;/&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;property&#x00A0;name="TGT-DUCC-AUTH-JAR"&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;value="${TGT-LIB}/ducc-authenticator.jar"&#x00A0;/&#x003E;
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;target&#x00A0;name="build"&#x00A0;depends="clean,&#x00A0;jar"&#x00A0;/&#x003E;
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;target&#x00A0;name="clean"&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;delete&#x00A0;file="${TGT-DUCC-AUTH-JAR}"&#x00A0;/&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/target&#x003E;
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;target&#x00A0;name="jar"&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;mkdir&#x00A0;dir="${TGT-LIB}"&#x00A0;/&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;jar&#x00A0;destfile="${TGT-DUCC-AUTH-JAR}"&#x00A0;basedir="${basedir}/target/classes/org/apache/uima/ducc/example/authentication/module"/&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/target&#x003E;
&#x00A0;<br />
&#x00A0;<br />&#x003C;/project&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
<!--l. 228--><p class="nopar" >
<!--l. 230--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.1.5   </span> <a 
 id="x1-17600012.1.5"></a>Example ducc.properties entries</h4>
<!--l. 232--><p class="noindent" >Shown here is a snippet of the ducc.properties file defining the class to be used for authentication and the administrator
created folder <span 
class="cmti-10">site-security</span>, which should contain the ducc-authenticator.jar you built plus any jar files upon which it
depends.
<!--l. 237--><p class="noindent" >Note: the <span 
class="cmti-10">site-security </span>directory must be located within DUCC&#8217;s lib directory.
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-116">
#&#x00A0;The&#x00A0;class&#x00A0;that&#x00A0;performs&#x00A0;authentication&#x00A0;(for&#x00A0;the&#x00A0;WebServer)
&#x00A0;<br />ducc.authentication.implementer&#x00A0;=&#x00A0;org.apache.uima.ducc.example.authentication.module.AuthenticationManager
&#x00A0;<br />
&#x00A0;<br />#&#x00A0;Site&#x00A0;specific&#x00A0;jars:&#x00A0;include&#x00A0;all&#x00A0;jars&#x00A0;in&#x00A0;directory&#x00A0;site-security
&#x00A0;<br />ducc.local.jars&#x00A0;=&#x00A0;site-security/*
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
<!--l. 246--><p class="nopar" >
<!--l. 248--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.1.6   </span> <a 
 id="x1-17700012.1.6"></a>Example ducc.administrators</h4>
<!--l. 250--><p class="noindent" >Example contents of ducc.administrators file located within DUCC&#8217;s resources directory. Only userids listed here can assume
the Administrator role when performing operations via the WebServer.
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-117">
jdoe
&#x00A0;<br />fred
&#x00A0;<br />hal9000
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
<!--l. 258--><p class="nopar" >
<!--l. 19--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">12.2   </span> <a 
 id="x1-17800012.2"></a>ducc.properties</h3>
<!--l. 21--><p class="noindent" >The primary configuration file is called ducc.properties and always resides in the directory ducc_runtime/resources.
<!--l. 24--><p class="noindent" >Some of the properties in ducc.properties are intended as the &#8221;glue&#8221; that brings the various DUCC components together and
lets then run as a coherent whole. These types of properties should be modified only by developers of DUCC itself. In the
description below these properties are classified as &#8221;Private&#8221;.
<!--l. 29--><p class="noindent" >Some of the properties are tuning parameters: timeouts, heartbeat intervals, and so on. These may be modified by DUCC
administrators, but only after experience is gained with DUCC, and only to solve specific performance problems. The default
tuning parameters have been chosen by the DUCC system developers to provide &#8221;best&#8221; operation under most reasonable
situations. In the description below these properties are classified as &#8221;Tuning&#8221;.
<!--l. 35--><p class="noindent" >Some of the properties describe the local cluster configuration: the location of the ActiveMQ broker, the location of the Java
JRE, port numbers, etc. These should be modified by the DUCC administrators to configure DUCC to each individual
installation. In the description below these properties are classified as &#8221;Local&#8221;.
<!--l. 40--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.2.1   </span> <a 
 id="x1-17900012.2.1"></a>General DUCC Properties</h4>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">ducc.authentication.implementer</span> </dt><dd 
class="description">                                                                                        <br 
class="newline" />This specifies the class used for WebServer session authentication. If unconfigured, the Web Server enforces no
     authentication.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">org.apache.uima.ducc.common.authentication.LinuxAuthenticationManager
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.admin.endpoint</span> </dt><dd 
class="description">                                                                                                       <br 
class="newline" />This is the JMS endpoint name used for DUCC administration messages.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">ducc.admin.channel
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.admin.endpoint.type</span> </dt><dd 
class="description">                                                                                                 <br 
class="newline" />This is the JMS message type used for DUCC administration requests. If changed DUCC admin may not
     work.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">topic
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.broker.automanage</span> </dt><dd 
class="description">                                                                                                   <br 
class="newline" />If set to &#8220;true&#8221;, DUCC will start and stop the ActiveMQ broker as part of its normal start/stop scripting.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">true
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.broker.home</span> </dt><dd 
class="description">                                                                                                           <br 
class="newline" />For DUCC auto-managed brokers only, this names the location where ActiveMQ is installed installed.
     <!--l. 78--><p class="noindent" >Note that the DUCC installation includes a default ActiveMQ.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">$DUCC_HOME/activemq
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.broker.memory.options</span> </dt><dd 
class="description">                                                                                              <br 
class="newline" />For DUCC auto-managed brokers only, this names the ActiveMQ configuration file. The configuration file is
     assumed to reside in the directory specified by <span 
class="cmti-10">ducc.broker.home</span>, so the path must be relative to that
     location.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">conf/activemq-ducc.xml
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.broker.decoration</span> </dt><dd 
class="description">                                                                                                     <br 
class="newline" />The property is used by the DUCC Job Driver processes to modify the ActiveMQ broker URL when connecting to the
     Job Processes.
     <!--l. 98--><p class="noindent" >The supplied default is used to disable broker connection timeouts. From the ActiveMQ documentation: &#8221;The
     maximum inactivity duration (before which the socket is considered dead) in milliseconds. On some platforms it can
     take a long time for a socket to appear to die, so we allow the broker to kill connections if they are inactive
     for a period of time. Use by some transports to enable a keep alive heart beat feature. Set to a value
     less-than-or-equal0 to disable inactivity monitoring. Declare the wire protocol used to communicate with
     ActiveMQ.&#8221;
     <!--l. 106--><p class="noindent" >This decoration is used to keep the broker connection alive while a JVM is in a long garbage collection. The
     applications that DUCC is designed to support can spend significant time in garbage collection, which
     can cause spurious timeouts. By default the DUCC configuration disables the timeout by setting it to
     0.
                                                                                                
                                                                                                
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">wireFormat.maxInactivityDuration=0
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.broker.hostname</span> </dt><dd 
class="description">                                                                                                      <br 
class="newline" />This declares the node where the ActiveMQ broker resides. It MUST be updated to the actual node where the broker is
     running as part of DUCC installation. The default value will not work.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">$<span 
class="cmsy-10">{</span>ducc.head<span 
class="cmsy-10">}</span>. The default is defined in the ducc property, <span 
class="cmti-10">ducc.head</span>. If you want to run the ActiveMQ
         broker on the &#8220;ducc head&#8221;, this parameter need not be changed.
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.broker.jmx.port</span> </dt><dd 
class="description">                                                                                                       <br 
class="newline" />This is the port used to make JMX connections to the broker. This should only be changed by administrators familiar
     with ActiveMQ configuration.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">1100
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.broker.memory.options</span> </dt><dd 
class="description">                                                                                              <br 
class="newline" />For DUCC auto-managed brokers only, this sets the <span 
class="cmtt-10">-Xmx </span>heap size for the broker.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">-Xmx2G
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.broker.name</span> </dt><dd 
class="description">                                                                                                           <br 
class="newline" />This is the internal name of the broker, used to locate Broker&#8217;s MBean in JMX Registry. It is NOT
     related to any node name. When using the ActiveMQ distribution supplied with DUCC it should always
     be set to &#8221;localhost&#8221;. The default should be changed only by administrators familiar with ActiveMQ
     configuration.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">localhost
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.broker.port</span> </dt><dd 
class="description">                                                                                                             <br 
class="newline" />This declares the port on which the ActiveMQ broker is listening for messages. It MAY be updated as
     part of DUCC installation. ActiveMQ ships with port 61616 as the default port, and DUCC uses that
     default.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">61617
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.broker.protocol</span> </dt><dd 
class="description">                                                                                                        <br 
class="newline" />Declare the wire protocol used to communicate with ActiveMQ.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">tcp
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.broker.server.url.decoration</span> </dt><dd 
class="description">                                                                                       <br 
class="newline" />For DUCC auto-managed brokers only, this configures ActiveMQ Server url decoration.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">transport.soWriteTimeout=45000
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.cli.httpclient.sotimeout</span> </dt><dd 
class="description">                                                                                             <br 
class="newline" />This is the timeout used by the CLI to communicate with DUCC, in milliseconds. If no response is heard within
     this time, the request times out and is aborted. When set to 0 (the default), the request never times
     out.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">0
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.cluster.name</span> </dt><dd 
class="description">                                                                                                           <br 
class="newline" />This is a string used in the Web Server banner to identify the local cluster. It is used for informational purposes only
     and may be set to anything desired.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">Apache UIMA-DUCC
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.head</span> </dt><dd 
class="description">                                                                                                                      <br 
class="newline" />This property declares the node where the DUCC adminstrative processes run (Orchestrator, Resource
     Manager, Process Manager, Service Manager). This property is required and MUST be configured in new
     installation. The installation script <a 
href="#x1-16100011.7">ducc_post_install</a> initializes this property to the node the script is executed
     on.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">There is no default, this must be configured during system installation.
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.jms.provider</span> </dt><dd 
class="description">                                                                                                           <br 
class="newline" />Declare the type of middleware providing the JMS service used by DUCC.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">activemq
                                                                                                
                                                                                                
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.jmx.port</span> </dt><dd 
class="description">                                                                                                                <br 
class="newline" />Every process started by DUCC has JMX enabled by default. When more than one process runs on the same machine
     this can cause port conflicts. The property &#8221;ducc.jmx.port&#8221; is used as the base port for JMX. If the port is busy, it is
     incremented internally until a free port is found.
     <!--l. 221--><p class="noindent" >The web server&#8217;s <a 
href="#x1-1210007.8.3">&#8221;System <span 
class="cmsy-10">- </span><span 
class="cmmi-10">&#x003E; </span>Daemons&#8221;</a> tab is used to find the JMX URL that gets assigned to each of the DUCC
     management processes. The web server&#8217;s <a 
href="#x1-1050007.3">Job details</a> page for each job is used to find the JMX URL that is assigned to
     each JP.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">2099
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.jvm</span> </dt><dd 
class="description">                                                                                                                       <br 
class="newline" />This specifies the full path to the JVM to be used by the DUCC processes. This MUST be configured. The installation
     script <a 
href="#x1-16100011.7">ducc_post_install</a> initializes this property to full path to &#8220;java&#8221; in the installer&#8217;s environment. (If the &#8220;java&#8221;
     command cannot be found, ducc_post_install exits with error.)
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">None. Must be configured during installation.
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.node.min.swap.threshold</span> </dt><dd 
class="description">                                                                                           <br 
class="newline" />Specify a minimum amount of free swap space available on a node. If an agent detects free swap space dipping below
     the value defined below, it will find the fattest (in terms of memory) process in its inventory and kill it. The value of
     the parameter below is expressed in Megabytes.
     <!--l. 249--><p class="noindent" >If set to 0, the threshold is disabled.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">0
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.jvm.args</span> </dt><dd 
class="description">                                                                                                         <br 
class="newline" />This specifies the list of arguments passed to the JVM when spawning the Agent.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">-Xmx100M
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.driver.jvm.args</span> </dt><dd 
class="description">                                                                                                        <br 
class="newline" />If enabled, the arguments here are automatically added to the JVM arguments specified for the Job Driver
     process.
     <!--l. 268--><p class="noindent" >Note: if the user-supplied JVM arguments contain a -Xmx entry then any -Xmx value specified here will be
     ignored.
                                                                                                
                                                                                                
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">(unconfigured)
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.orchestrator.jvm.args</span> </dt><dd 
class="description">                                                                                                <br 
class="newline" />This specifies the list of arguments passed to the JVM when spawning the Orchestrator.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">-Xmx1G
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.pm.jvm.args</span> </dt><dd 
class="description">                                                                                                            <br 
class="newline" />This specifies the list of arguments passed to the JVM when spawning the Process Manager.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">-Xmx1G
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.process.jvm.args</span> </dt><dd 
class="description">                                                                                                      <br 
class="newline" />If enabled, the arguments here are added by DUCC to the JVM arguments in the user&#8217;s job processes.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">(unconfigured)
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.rm.jvm.args</span> </dt><dd 
class="description">                                                                                                            <br 
class="newline" />This specifies the list of arguments passed to the JVM when spawning the Resource Manager.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">-Xmx1G
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.sm.jvm.args</span> </dt><dd 
class="description">                                                                                                            <br 
class="newline" />This specifies the list of arguments passed to the JVM when spawning the Service Manager.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">-Xmx1G
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.ws.jvm.args</span> </dt><dd 
class="description">                                                                                                            <br 
class="newline" />specifies the list of arguments passed to the JVM when spawning the Webserver.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">-Xmx8G
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.locale.language</span> </dt><dd 
class="description">                                                                                                        <br 
class="newline" />Establish the language for national language support of messages. Currently only &#8221;en&#8221; is supported.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">en
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.locale.country</span> </dt><dd 
class="description">                                                                                                          <br 
class="newline" />Establish the country for National Language Support of messages. Currently only &#8221;us&#8221; is supported.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">us
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.runmode</span> </dt><dd 
class="description">                                                                                                                <br 
class="newline" />When set to &#8221;Test&#8221; this property bypasses userid and authentication checks. It is intended for use ONLY by DUCC
     developers. It allows developers of DUCC to simulate a multiuser environment without the need for root
     privileges.
     <!--l. 343--><p class="noindent" >Note: WARNING! Enabling this feature in a production DUCC system is a potentially serious security breach. It
     should only be set by DUCC developers running with an un-privileged ducc_ling.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">Unconfigured. When unconfigured, test mode is DISABLED.
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.signature.required</span> </dt><dd 
class="description">                                                                                                    <br 
class="newline" />When set, the CLI signs each request so the Orchestrator can be sure the requestor is actually who he claims to
     be.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">on
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.threads.limit</span> </dt><dd 
class="description">                                                                                                           <br 
class="newline" />This enforces a maximum number of pipeline threads per job, over all its processes. No job will have more active
     work-items than this dispatched. This limit is disabled by default.
     <!--l. 365--><p class="noindent" >The value represents the size of the underlying CAS pool in the Job Driver and therefore is related to the size of the
     Job Driver heap and the real memory consumed by JD. If the JD is consuming too much memory, try setting or
     reducing this value.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">(unconfigured)
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.environment.propagated</span> </dt><dd 
class="description">                                                                                            <br 
class="newline" />This specifies the environmental variables whose values will be merged with the user-specified environment option on
     job, process and service submissions. A typical setting might be: USER HOME LANG
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default</span> </dt><dd 
class="description">(unconfigured)
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
     </dd></dl>
<!--l. 387--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.2.2   </span> <a 
 id="x1-18000012.2.2"></a>Web Server Properties</h4>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">ducc.ws.configuration.class</span> </dt><dd 
class="description">                                                                                                <br 
class="newline" />The name of the pluggable java class used to implement the Web Server.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">org.apache.uima.ducc.ws.config.WebServerConfiguration
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.ws.node</span> </dt><dd 
class="description">                                                                                                                 <br 
class="newline" />This is the name of the node the web server is started on. If not specified, the web server is started on
     <span 
class="cmtt-10">$</span><span 
class="cmsy-10">{</span><span 
class="cmtt-10">ducc</span><span 
class="cmtt-10">&#x1E23;ead</span><span 
class="cmsy-10">}</span>.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">(unconfigured)
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.ws.ipaddress</span> </dt><dd 
class="description">                                                                                                           <br 
class="newline" />In multi-homed systems it may be necessary to specify to which of the multiple addresses the Web Server listens for
     requests. This property is an IP address that specifies to which address the Web Server listens.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">(unconfigured)
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.ws.port</span> </dt><dd 
class="description">                                                                                                                  <br 
class="newline" />This is the port on which the DUCC Web Server listens for requests.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">42133
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.ws.port.ssl</span> </dt><dd 
class="description">                                                                                                              <br 
class="newline" />This is the port that the Web Server uses for SSL requests (such as authentication).
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">42155
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.ws.port.ssl.pw</span> </dt><dd 
class="description">                                                                                                         <br 
class="newline" />This is the password used to generate the Web Server&#8217;s keystore used for HTTPS requests. Usually this keystore is
     created at initial installation time using <a 
href="#x1-16100011.7">ducc_post_install.</a>
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">quackquack
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.ws.session.minutes</span> </dt><dd 
class="description">                                                                                                    <br 
class="newline" />Once authenticated, this property determines the lifetime of the authenticated session to the Web Server.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">60
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.ws.max.history.entries</span> </dt><dd 
class="description">                                                                                               <br 
class="newline" />DUCC maintains a history of all jobs. The state of jobs, both old and current are shown in the Webserver&#8217;s Jobs Page.
     To avoid overloading this page and the Web Server, the maximum number of entries that can be shown is regulated by
     this parameter.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">4096
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.ws.login.enabled</span> </dt><dd 
class="description">                                                                                                      <br 
class="newline" />If true, users are allowed to login to Webserver. If false, users are not allowed to login to Webserver. Shipped value set
     to false. However, default value if property not specified is true.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">true
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.ws.automatic.cancel.minutes</span> </dt><dd 
class="description">                                                         &#x00A0;Optionally configure the
     webserver job automatic cancel timeout. To disable this feature specify 0. This is employed when a user
     specifies <span 
class="cmsy-10">--</span><span 
class="cmti-10">wait</span><span 
class="cmti-10">_for</span><span 
class="cmti-10">_completion </span>flag on job submission, in which case the job monitor program must
     visit
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-118">
     &#x00A0;&#x00A0;&#x00A0;http://&#x003C;host&#x003E;:&#x003C;port&#x003E;/ducc-servlet/proxy-job-status?id=&#x003C;job-id&#x003E;</div>
     <!--l. 469--><p class="nopar" > within this expiry time. Otherwise the job will be automatically canceled.
     <!--l. 472--><p class="noindent" >This provides a safeguard against runaway jobs or managed reservations, if the submitter gets disconnected from
     DUCC in some way.
     <!--l. 475--><p class="noindent" >If the feature is disabled by specifing &#8220;0&#8221;, no work is canceled even if the monitor itself disappears.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">10
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.ws.jsp.compilation.directory</span> </dt><dd 
class="description">                                                                                       <br 
class="newline" />This specifies the temporary used by the Web Server&#8217;s JSP engine to compile its JSPs.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">/tmp/ducc/jsp
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd></dl>
<!--l. 493--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.2.3   </span> <a 
 id="x1-18100012.2.3"></a>Job Driver Properties</h4>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">ducc.jd.configuration.class</span> </dt><dd 
class="description">                                                                                                <br 
class="newline" />The name of the pluggable java class used to implement the Job Driver.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">org.apache.uima.ducc.jd.config.JobDriverConfiguration
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.jd.state.update.endpoint</span> </dt><dd 
class="description">                                                                                            <br 
class="newline" />This is the JMS endpoint name by the Job Driver to send state to the Orchestrator.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">ducc.jd.state
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.jd.state.update.endpoint.type</span> </dt><dd 
class="description">                                                                                     <br 
class="newline" />This is the JMS message type used to send state to the Orchestrator.
                                                                                                
                                                                                                
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">topic
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.jd.state.publish.rate</span> </dt><dd 
class="description">                                                                                                  <br 
class="newline" />The interval in milliseconds between JD state publications to the Orchestrator. A higher rate (smaller number) may
     slightly increase system response but will increase network load. A lower rate will somewhat decrease system response
     and lower network load.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">15000
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.jd.queue.prefix</span> </dt><dd 
class="description">                                                                                                        <br 
class="newline" />This is a human-readable string used to form queue names for the JMS queues used to pass CASs from the Job Driver
     to the Job Processes. The completed queue named comprises the prefix concatenated with the DUCC assigned Job
     number.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">ducc.jd.queue.
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.jd.host.class</span> </dt><dd 
class="description">                                                                                                            <br 
class="newline" />This is the scheduling class used to request a reservation from the Resource Manager for the machine that will be used
     to run the Job Driver processes. This class must also be configured in ducc.classes with scheduling policy
     RESERVE.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">JobDriver
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.jd.host.description</span> </dt><dd 
class="description">                                                                                                    <br 
class="newline" />This is a name to be associated with the reservation that is made for the Job Driver Node. It can be any string and is
     displayed in the Reservations page on the Web Server.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">Job Driver
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.jd.host.memory.size</span> </dt><dd 
class="description">                                                                                                  <br 
class="newline" />This is the amount of memory that is requested in the Job Driver reservation. It is used in conjunction with the
     configuration of the class specified for the job driver (by default, JobDriver) to schedule a node. The default
     configuration for this class uses a node pool instead of memory to allocate the Job Driver node so by default, this
     parameter is ignored.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">2GB
                                                                                                
                                                                                                
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.jd.host.number.of.machines</span> </dt><dd 
class="description">                                                                                        <br 
class="newline" />This is the number of machines to request for Job Driver nodes. This may be increased if there are many jobs in the
     system and the load on the JD node is high enough to slow the JD processes.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">1
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.jd.host.user</span> </dt><dd 
class="description">                                                                                                             <br 
class="newline" />This is the userid that is associated with the Job Driver reservation. It does not need to be a &#8221;real&#8221; userid as the actual
     owner of the reservation is user &#8221;ducc&#8221;. It is primarily used as annotation of the reservation in the Web Server and
     logs.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">System
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.jd.queue.timeout.minutes</span> </dt><dd 
class="description">                                                                                           <br 
class="newline" />After dispatching a work item to UIMA-AS client for processing, the number of minutes that the Job
     Driver will wait for two callbacks (queued and assigned) before considering the work item lost. The
     elapsed time for the callbacks is normally sub-second. Intermittent network problems may cause unusual
     spikes.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">5
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.jd.share.quantum</span> </dt><dd 
class="description">                                                                                                     <br 
class="newline" />When CGroups are enabled, this is the RSS, in MB, that is reserved for each JD process, and enforced by the CGroup
     support. Larger JDs are permitted, but the CGroup support will force the excess RSS onto swap. This
     potentially slows the performance of that JD, but preserves the resources for other, better-behaved,
     JDs.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">400
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd></dl>
<!--l. 614--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.2.4   </span> <a 
 id="x1-18200012.2.4"></a>Service Manager Properties</h4>
                                                                                                
                                                                                                
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">ducc.sm.configuration.class</span> </dt><dd 
class="description">                                                                                               <br 
class="newline" />This is the name of the pluggable java class used to implement the Service Manager.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">org.apache.uima.ducc.sm.config.JobDriverConfiguration
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.sm.state.update.endpoint</span> </dt><dd 
class="description">                                                                                           <br 
class="newline" />This is the JMS endpoint name used for state messages sent by the Service Manager.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">ducc.sm.state
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.sm.state.update.endpoint.type</span> </dt><dd 
class="description">                                                                                    <br 
class="newline" />This is the JMS message type used for state messages sent by the Service Manager.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">topic
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.sm.meta.ping.rate</span> </dt><dd 
class="description">                                                                                                    <br 
class="newline" />This is the time, in milliseconds, between pings by the Service Manager to each known, running service.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">60000
         </dd><dt class="description">
     <span 
class="cmbx-10">Typ</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.sm.meta.ping.stability</span> </dt><dd 
class="description">                                                                                               <br 
class="newline" />This is the number of consecutive pings that may be missed before a service is considered unavailable.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">10
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.sm.meta.ping.timeout</span> </dt><dd 
class="description">                                                                                               <br 
class="newline" />This is the time in milliseconds the SM waits for a response to a ping. If the service does not respond within this time
     the ping is accounted for as a &#8221;missed&#8221; ping.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">5000
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.sm.http.port</span> </dt><dd 
class="description">                                                                                                           <br 
class="newline" />This is the HTTP port used by the Service Manager to field requests from the CLI / API.
                                                                                                
                                                                                                
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">19989
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.sm.http.node</span> </dt><dd 
class="description">                                                                                                           <br 
class="newline" />This is the node where the Service Manager runs. It MUST be configured as part of DUCC setup. The <span 
class="cmti-10">ducc</span><span 
class="cmti-10">_post</span><span 
class="cmti-10">_install</span>
     procedures initialize this to <span 
class="cmsl-10">$</span><span 
class="cmsy-10">{</span><span 
class="cmti-10">ducc.head</span><span 
class="cmsy-10">}</span>.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">$<span 
class="cmsy-10">{</span>ducc.head<span 
class="cmsy-10">}</span>
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.sm.default.linger</span> </dt><dd 
class="description">                                                                                                      <br 
class="newline" />This is the length of time, in milliseconds, that the SM allows a service to remain alive after all jobs that reference it
     have exited. If no new job referencing it enters the system before this time has expired, the SM stops the
     service.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">300000
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.sm.instance.failure.max</span> </dt><dd 
class="description">                                                                                             <br 
class="newline" />This is the maximum number of consecutive failures of service instance initialization permitted before DUCC stops
     creating new instances. When this cap is hit the SM will disable autostart for the service. It may be overridden by the
     service registration&#8217;s <span 
class="cmti-10">instance</span><span 
class="cmti-10">_failures</span><span 
class="cmti-10">_limit </span>parameter.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">2
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd></dl>
<!--l. 699--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.2.5   </span> <a 
 id="x1-18300012.2.5"></a>Orchestrator Properties</h4>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">ducc.orchestrator. configuration.class</span> </dt><dd 
class="description">                                                                                  <br 
class="newline" />This is the name of the pluggable java class used to implement the DUCC Orchestrator.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">org.apache.uima.ducc.orchestrator.config.OrchestratorConfiguration
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.orchestrator.start.type</span> </dt><dd 
class="description">                                                                                              <br 
class="newline" />This indicates the level of recovery to be taken on restarting a system. There are two levels of startup:
                                                                                                
                                                                                                
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">cold</span> </dt><dd 
class="description">All  reservations  are  canceled,  all  currently  running  jobs  (if  any)  are  terminated.  All  services  are
         terminated. The system starts with no jobs, reservations, or services active.
         </dd><dt class="description">
     <span 
class="cmbx-10">warm</span> </dt><dd 
class="description">All unmanaged reservations are restored. All currently running jobs (if any) are terminated. All services
         are started or restarted as indicated by their state when the system went down. The system starts with
         no jobs active, but unmanaged reservations and services are preserved.
         </dd><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">warm
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.orchestrator.state.endpoint</span> </dt><dd 
class="description">                                                                                        <br 
class="newline" />This is the name of the JMS endpoint through which the Orchestrator broadcasts its full state messages. These
     messages include full job information and can be large. This state is used by the Process Manager and the
     Webserver.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">ducc.orchestrator.request?requestTimeout=180000
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.orchestrator.state.update.endpoint.type</span> </dt><dd 
class="description">                                                                        <br 
class="newline" />This is the JMS endpoint type used for the &#8221;full&#8221; state messages sent by the Orchestrator.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">topic
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.orchestrator.state.publish.rate</span> </dt><dd 
class="description">                                                                                    <br 
class="newline" />The interval in milliseconds between Orchestrator publications of its non-abbreviated state.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">15000
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.orchestrator.abbreviated.state.endpoint</span> </dt><dd 
class="description">                                                                        <br 
class="newline" />This is the name of the JMS endpoint through which the Orchestrator broadcasts its abbreviated state. This state state
     is used by the Resource Manager and Service Manager.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">ducc.orchestrator.abbreviated.state
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.orchestrator.abbreviated.state.update.endpoint.type</span> </dt><dd 
class="description">                                                       <br 
class="newline" />This is the JMS endpoint type used for the &#8221;abbreviated&#8221; state messages sent by the Orchestrator.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">topic
                                                                                                
                                                                                                
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.orchestrator.abbreviated.state.publish.rate</span> </dt><dd 
class="description">                                                                    <br 
class="newline" />The interval in milliseconds between Orchestrator publications of its abbreviated state.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">15000
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.orchestrator.maintenance.rate</span> </dt><dd 
class="description">                                                                                     <br 
class="newline" />This is the interval in milliseconds between Orchestrator maintenance cycles, which check and update history and
     state.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">60000
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.orchestrator.http.port</span> </dt><dd 
class="description">                                                                                               <br 
class="newline" />This is the HTTP port used by the Orchestrator to field requests from the CLI / API.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">19988
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.orchestrator.http.node</span> </dt><dd 
class="description">                                                                                              <br 
class="newline" />This is the node where the Orchestrator runs. It MUST be configured as part of DUCC setup. The <span 
class="cmti-10">ducc</span><span 
class="cmti-10">_post</span><span 
class="cmti-10">_install</span>
     procedures initialize this to <span 
class="cmsl-10">$</span><span 
class="cmsy-10">{</span><span 
class="cmti-10">ducc.head</span><span 
class="cmsy-10">}</span>.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">$<span 
class="cmsy-10">{</span>ducc.head<span 
class="cmsy-10">}</span>
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.orchestrator.unmanaged.reservations.accepted</span> </dt><dd 
class="description">                                                               <br 
class="newline" />This flag controls whether the Orchestrator will accept requests for unmanaged reservations (true) or deny request for
     unmanaged reservations (false).
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">true
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Local</dd></dl>
     </dd></dl>
<!--l. 807--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.2.6   </span> <a 
 id="x1-18400012.2.6"></a>Resource Manager Properties</h4>
                                                                                                
                                                                                                
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">ducc.rm.configuration.class</span> </dt><dd 
class="description">                                                                                               <br 
class="newline" />This is the name of the pluggable java class used to implement the DUCC Resource Manager.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">org.apache.uima.ducc.rm.config.ResourceManagerConfiguration
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.rm.state.update.endpoint</span> </dt><dd 
class="description">                                                                                           <br 
class="newline" />This is the name of the JMS endpoint through which the Resource Manager broadcasts its abbreviated
     state.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">ducc.rm.state
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.rm.state.update.endpoint.type</span> </dt><dd 
class="description">                                                                                    <br 
class="newline" />This is the JMS endpoint type used for state messages sent by the Resource Manager.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">topic
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.rm.state.publish.rate</span> </dt><dd 
class="description">                                                                                                <br 
class="newline" />The interval in milliseconds between Resource Manager state publications to the Orchestrator.
     <!--l. 836--><p class="noindent" >This can directly affect user response. For small clusters a value of 10000 is often acceptable and results in
     faster response. On larger clusters the value should be raised to around 60000 (60 seconds) to avoid
     thrashing.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">10000
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.rm.share.quantum</span> </dt><dd 
class="description">                                                                                                    <br 
class="newline" />The share quantum is the smallest amount of RAM that is schedulable for jobs, in GB. Jobs are scheduled based
     entirely on their memory requirements. Memory is allocated in multiples of the share quantum.
     <!--l. 849--><p class="noindent" >See the <a 
href="#x1-21500013">Resource Management</a> section for more information on the share quantum.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">1
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.rm.scheduler</span> </dt><dd 
class="description">                                                                                                           <br 
class="newline" />The component that implements the scheduling algorithm is pluggable. This specifies the name of that
     class.
                                                                                                
                                                                                                
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">org.apache.uima.ducc.rm.scheduler.NodepoolScheduler
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.rm.class.definitions</span> </dt><dd 
class="description">                                                                                                   <br 
class="newline" />This specifies the name of the file that contains the site&#8217;s class definitions. This file is described in detail the section on
     ducc.properties [77].
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">ducc.classes
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.rm.node.stability</span> </dt><dd 
class="description">                                                                                                     <br 
class="newline" />The RM receives regular &#8221;heartbeats&#8221; from the DUCC agents in order to know what nodes are available for scheduling.
     The node.stability property configures the number of consecutive heartbeats that may be missed before the Resource
     Manager considers the node to be inoperative.
     <!--l. 877--><p class="noindent" >If a node becomes inoperative, the Resource Manager deallocates all processes on that node and attempts to
     reallocate them on other nodes. The node is marked offline and is unusable until its heartbeats start up
     again.
     <!--l. 881--><p class="noindent" >The default configuration declares the agent heartbeats to occur at 1 minute intervals. Therefore heartbeats must be
     missed for five minutes before the Resource Manager takes corrective action.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">5
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.rm.init.stability</span> </dt><dd 
class="description">                                                                                                       <br 
class="newline" />During DUCC initialization the Resource Manager must wait some period of time for all the nodes in
     the cluster to check-in via their &#8221;heartbeats&#8221;. If the RM were to start scheduling too soon there would
     be a period of significant &#8221;churn&#8221; as the perceived cluster configurations changes rapidly. As well, it
     would be impossible to recover work in a warm or hot start if the affected nodes had not yet checked
     in.
     <!--l. 897--><p class="noindent" >The init.stability property indicates how many heartbeat intervals the RM must wait before it starts scheduling after
     initialization.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">2
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.rm.eviction.policy</span> </dt><dd 
class="description">                                                                                                    <br 
class="newline" />The alternative value is SHRINK_BY_MACHINE.
     <!--l. 907--><p class="noindent" >The eviction.policy is a heuristic to choose which processes of a job to preempt because of competition from other
     jobs.
     <!--l. 910--><p class="noindent" >The SHRINK_BY_INVESTMENT policy attempts to preempt processes such that the
     <!--l. 912--><p class="noindent" >least amount of work is lost. It chooses candidates for eviction in order of:
                                                                                                
                                                                                                
         <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
       1. </dt><dd 
class="enumerate-enumitem">Processes still initializing, with the smallest time spent in the initializing step.
         </dd><dt class="enumerate-enumitem">
       2. </dt><dd 
class="enumerate-enumitem">Processes whose currently active work items have been executing for the shortest time.</dd></dl>
     <!--l. 918--><p class="noindent" >The SHRINK_BY_MACHINE policy attempts to preempt processes so as to minimize fragmentation on machines with
     large memories that can contain multiple job processes. No consideration of execution time or initialization time is
     made.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">SHRINK_BY_INVESTMENT
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.rm.initialization.cap</span> </dt><dd 
class="description">                                                                                                  <br 
class="newline" />The type of jobs supported by DUCC generally have very long and often fragile initialization periods. Errors in the
     applications and other problems such is missing or errant services can cause processes to fail during this
     phase.
     <!--l. 932--><p class="noindent" >To avoid preempting running jobs and allocating a large number of resources to jobs only to fail during initialization,
     the Resource Manager schedules a small number of processes until it is determined that the initialization phase will
     succeed.
     <!--l. 936--><p class="noindent" >The initialization.cap determines the maximum number of processes allocated to a job until at least one process
     successfully initializes. Once any process initializes the Resource Manager will proceed to allocate the job its full fair
     share of processes.
     <!--l. 940--><p class="noindent" >The initialization cap can be overridden on a class basis by configuration via <a 
href="#x1-18800012.3">ducc.classes</a>.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">1
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.rm.expand.by.doubling</span> </dt><dd 
class="description">                                                                                              <br 
class="newline" />When a job expands because its fair share has increased, or it has completed initialization, it may be desired
     to govern the rate of expansion. If expand.by.doubling is set to &#8221;true&#8221;, rather than allocate the full
     fair share of processes, the number of processes is doubled each scheduling cycle, up to the maximum
     allowed.
     <!--l. 955--><p class="noindent" >Expand.by.doubling can be overridden on a class basis by configuration via <a 
href="#x1-18800012.3">ducc.classes</a>.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">true
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.rm.prediction</span> </dt><dd 
class="description">                                                                                                          <br 
class="newline" />Because initialization time may be very long, it may be the case that a job that might be eligible for expansion will be
     able to complete in the currently assigned shares before any new processes are able to complete their initialization. In
     this case expansion results in waste of resources and potential eviction of processes that need not be
     evicted.
                                                                                                
                                                                                                
     <!--l. 970--><p class="noindent" >The Resource Manager monitors the rate of task completion and attempts to predict the maximum number of processes
     that will be needed at a time in the future based on the known process initialization time. If it is determined that
     expansion is unnecessary then it is not done for the job.
     <!--l. 975--><p class="noindent" >Prediction can be overridden on a class basis by configuration via <a 
href="#x1-18800012.3">ducc.classes</a>.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">true
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.rm.prediction.fudge</span> </dt><dd 
class="description">                                                                                                  <br 
class="newline" />When ducc.rm.prediction is enabled, the known initialization time of a job&#8217;s processes plus some &#8221;fudge&#8221; factor is used
     to predict the number of future resources needed. The &#8221;fudge&#8221; is specified in milliseconds.
     <!--l. 988--><p class="noindent" >The default &#8221;fudge&#8221; is very conservative. Experience and site policy should be used to set a more practical
     number.
     <!--l. 991--><p class="noindent" >Prediction.fudge can be overridden on a class basis by configuration via <a 
href="#x1-18800012.3">ducc.classes</a>.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">120000
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.rm.defragmentation.threshold</span> </dt><dd 
class="description">                                                                                     <br 
class="newline" />If <span 
class="cmti-10">ducc.rm.defragmentation </span>is enable, limited defragmentation of resources is performed by the Resource
     Manager to create sufficient space to schedule work that has insufficient resources (new jobs, for example.).
     The term <span 
class="cmti-10">insufficient </span>is defined as &#8220;needing more processes than the defragmentation threshold, but
     currently having fewer processes than the defragmentation threshold.&#8221; These are called &#8220;needy&#8221; jobs.
     Additionally, the Resource Manager will never evict processes from &#8220;needy&#8221; jobs for the purpose of
     defragmentation.
     <!--l. 1009--><p class="noindent" >This property allows installations to customize the value used to determine if a job is &#8220;needy&#8221;. Jobs with fewer
     processes than this are potentially needed, and jobs with more processes are never needy.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">2
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd></dl>
<!--l. 1022--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.2.7   </span> <a 
 id="x1-18500012.2.7"></a>Agent Properties</h4>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">ducc.agent.configuration.class</span> </dt><dd 
class="description">                                                                                            <br 
class="newline" />This is the name of the pluggable java class used to implement the DUCC Agents.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">org.apache.uima.ducc.nodeagent.config.AgentConfiguration
                                                                                                
                                                                                                
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.request.endpoint</span> </dt><dd 
class="description">                                                                                              <br 
class="newline" />This is the JMS endpoint through which agents receive state from the Process Manager.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">ducc.agent
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.request.endpoint.type</span> </dt><dd 
class="description">                                                                                       <br 
class="newline" />This is the JMS endpoint type used for state messages sent by the Process Manager.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">topic
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.managed.process.state.update.endpoint</span> </dt><dd 
class="description">                                                                <br 
class="newline" />This is the JMS endpoint used to communicate from the managed process to the Agent (Job Process).
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">ducc.managed.process. state.update
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.managed.process.state.update.endpoint.type</span> </dt><dd 
class="description">                                                          <br 
class="newline" />This is the JMS endpoint type used to communicate from the managed process (Job Process) to the
     Agent.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">socket
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.managed.process. state.update.endpoint.params</span> </dt><dd 
class="description">                                                     <br 
class="newline" />These are configuration parameters for the Agent-to-JP communication socket. These should only be modified by
     DUCC developers.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">transferExchange=true&amp;sync=false
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.node.metrics.endpoint</span> </dt><dd 
class="description">                                                                                       <br 
class="newline" />This is the JMS endpoint used to send node metrics updates to listeners. Listeners are usually the Resource Manager
     and Web Server. These messages serve as node &#8221;heartbeats&#8221;. As well, the node metrics heartbeats contain the amount
     of RAM on the node and the number of processors.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">ducc.node.metrics
                                                                                                
                                                                                                
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.node.metrics.endpoint.type</span> </dt><dd 
class="description">                                                                                <br 
class="newline" />This is the JMS endpoint type used to send node metrics updates from the agents.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">topic
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.node.metrics.publish.rate</span> </dt><dd 
class="description">                                                                                   <br 
class="newline" />The interval in milliseconds between node metric publications. Every agent publishes its updates at this rate. On large
     clusters, a high rate (small interval) can be a burden on the network.
     <!--l. 1093--><p class="noindent" >Note: the Resource Manager uses the data in the node metrics for scheduling.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">60000
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.node.inventory.endpoint</span> </dt><dd 
class="description">                                                                                    <br 
class="newline" />This is the JMS endpoint used to send node inventory messages to listeners. Listeners are usually the
     Orchestrator and Web Server. Information in these messages include a map of processes being managed on the
     node.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">ducc.node.inventory
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.node.inventory.endpoint.type</span> </dt><dd 
class="description">                                                                              <br 
class="newline" />This is the JMS endpoint type used to send node inventory updates from the agents.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">topic
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.node.inventory.publish.rate</span> </dt><dd 
class="description">                                                                                <br 
class="newline" />The interval in milliseconds between node inventory publications.
     <!--l. 1118--><p class="noindent" >If the inventory has not changed since the last update the agent bypasses sending the update, up to a maximum of
     ducc.agent.node.inventory.publish.rate.skip times.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">10000
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.node.inventory.publish.rate.skip</span> </dt><dd 
class="description">                                                                          <br 
class="newline" />This is the number of times the agent will bypass publishing its node inventory if the inventory has not
                                                                                                
                                                                                                
     changed.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">30
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.launcher.thread.pool.size</span> </dt><dd 
class="description">                                                                                   <br 
class="newline" />This is establishes the size of the agent&#8217;s threadpool used to manage spawned processes.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">10
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.launcher.use.ducc.spawn</span> </dt><dd 
class="description">                                                                                    <br 
class="newline" />This specifies whether to launch job processes via ducc_ling. When set to false the process is launched directly as a
     child of the agent. Log indirection is not performed, the working directory is not set, and the the process
     does not change its identity to that of the submitter. This property is intended for the use of DUCC
     developers.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">true
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.launcher.ducc</span><span 
class="cmbx-10">_spawn</span><span 
class="cmbx-10">_path</span> </dt><dd 
class="description">                                                                                 <br 
class="newline" />This property specifies the full path to the ducc_ling utility. During installation ducc_ling is normally moved to local
     disk and given setuid-root privileges. Use this property to tell the DUCC agents the location of the installed
     ducc_ling.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">$DUCC_HOME/admin/ducc_ling
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.launcher.process.stop.timeout</span> </dt><dd 
class="description">                                                                             <br 
class="newline" />This property specifies the time, in milliseconds, the agent should wait before forcibly terminating a job process (JP)
     after an attempted graceful shutdown. If the child process does not terminate in the specified time, it is forcibly
     terminated with kill -9.
     <!--l. 1164--><p class="noindent" >This type of stop can occur because of preemption or system shutdown.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">60000
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.launcher.process.init.timeout</span> </dt><dd 
class="description">                                                                              <br 
class="newline" />This property specifies the time, in milliseconds, that the agent should wait for a job process (JP) to
     complete initialization. If initialization is not completed in this time the process is terminated and and
     InitializationTimout status is send to the job driver (JD) which decides whether to retry the process or terminate the
     job.
                                                                                                
                                                                                                
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">7200000
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.share.size.fudge.factor</span> </dt><dd 
class="description">                                                                                       <br 
class="newline" />
     <!--l. 1184--><p class="noindent" >The DUCC agent monitors the size of the resident memory of its spawned processes. If a process exceeds its declared
     memory size by any significant amount it is terminated and a ShareSizeExceeded message is sent. The Job Driver
     counts this towards the maximum errors for the job and will eventually terminate the job if excessive such errors
     occur.
     <!--l. 1189--><p class="noindent" >This property defines the percentage over the declared memory size that a process is allowed to grow to before being
     terminated.
     <!--l. 1192--><p class="noindent" >To disable this feature, set the value to -1.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">5
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.rogue.process.user.exclusion.filter</span> </dt><dd 
class="description">                                                                        <br 
class="newline" /><a 
 id="likesection.6"></a>
     <!--l. 1201--><p class="noindent" >The DUCC Agents scan nodes for processes that should not be running; for example, a job may have left a &#8217;rogue&#8217;
     process alive when it exits, or a user may log in to a node unexpectedly. These processes are reported to the
     administrators via the webserver for possible action.
     <!--l. 1206--><p class="noindent" >This configuration parameter enumerates userids which are ignored by the rogue-process scan.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">root,posstfix,ntp,nobody,daemon,100
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.rogue.process.exclusion.filter</span> </dt><dd 
class="description">                                                                              <br 
class="newline" /><a 
 id="likesection.7"></a> The DUCC Agents scan nodes for processes that should not be running; for example, a job may have left a &#8217;rogue&#8217;
     process alive when it exits, or a user may log in to a node unexpectedly. These processes are reported to the
     administrators via the webserver for possible action.
     <!--l. 1220--><p class="noindent" >This configuration parameter enumerates processes by name which are ignored by the rogue process
     detector.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">sshd:,-bash,-sh,/bin/sh,/bin/bash,grep,ps
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.launcher.cgroups.enable</span> </dt><dd 
class="description">                                                                                     <br 
class="newline" /><a 
 id="likesection.8"></a> Enable or disable CGroups support. If CGroups are not installed on a specific machine, this is ignored.
                                                                                                
                                                                                                
     <!--l. 1233--><p class="noindent" >With CGroups the RSS for a managed process (plus any children processes it may spawn) is limited to
     the allocated share size. Additional memory use goes to swap space. DUCC monitors and limits swap
     use to the same proportion of total swap space as allocated share size is to total RAM. If a process
     exceeds its allowed swap space it is terminated and a ShareSizeExceeded message is sent to the Job
     Driver.
     <!--l. 1239--><p class="noindent" >Nodes not using CGroups fall back to the ducc.agent.share.size.fudge.factor.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">true
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.launcher.cgroups.utils.dir</span> </dt><dd 
class="description">                                                                                   <br 
class="newline" /><a 
 id="likesection.9"></a> Location of CGroups programs, like cgexec. If CGroups are not installed on a specific machine, this is
     ignored.
     <!--l. 1251--><p class="noindent" >Depending on the OS, CGroups programs may be installed in different places. Provide a comma separated list of
     directories the agent should search to find the programs.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">/usr/bin
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.agent.exclusion.file</span> </dt><dd 
class="description">                                                                                                   <br 
class="newline" /><a 
 id="likesection.10"></a> This specifies the exclusion file to enable node based exclusion for various features. Currently only CGroup exclusion is
     supported.
     <!--l. 1266--><p class="noindent" >The exclusion file has one line per agent of the form:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-119">
     &#x003C;node&#x003E;=cgroups</div>
     <!--l. 1269--><p class="nopar" > If the keyword &#8220;cgrouops&#8221; is found, the node is excluded from CGroup support.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">Not configured.
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Tuning</dd></dl>
     </dd></dl>
<!--l. 1282--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.2.8   </span> <a 
 id="x1-18600012.2.8"></a>Process Manager Properties</h4>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">ducc.pm.configuration.class</span> </dt><dd 
class="description">                                                                                               <br 
class="newline" />This is the name of the pluggable java class used to implement the DUCC Process Manager.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">org.apache.uima.ducc.pm.config.ProcessManagerConfiguration
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.pm.request.endpoint</span> </dt><dd 
class="description">                                                                                                 <br 
class="newline" />This is the endpoint through which process manager receive state from the Orchestrator.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">ducc.pm
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.pm.request.endpoint.type</span> </dt><dd 
class="description">                                                                                          <br 
class="newline" />This is the JMS endpoint type used for state messages sent by the Orchestrator.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">queue
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.pm.state.update.endpoint</span> </dt><dd 
class="description">                                                                                          <br 
class="newline" />This is the endpoint through which process manager sends its heartbeat. The main receiver is the Web Server for it&#8217;s
     daemon status page.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">ducc.pm.state
                                                                                                
                                                                                                
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.pm.state.update.endpoint.type</span> </dt><dd 
class="description">                                                                                    <br 
class="newline" />This is the JMS endpoint type used for process manager heartbeats. The primary receiver is the Web Server for its
     daemon status page.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">topic
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.pm.state.publish.rate</span> </dt><dd 
class="description">                                                                                                <br 
class="newline" />The interval in milliseconds between process manager heartbeat publications.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">25000
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd></dl>
<!--l. 1335--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.2.9   </span> <a 
 id="x1-18700012.2.9"></a>Job Process Properties</h4>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">ducc.uima-as.configuration.class</span> </dt><dd 
class="description">                                                                                         <br 
class="newline" />This is the name of the pluggable java class that implements the the UIMA-AS service shell for job processes
     (JPs).
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">org.apache.uima.ducc.agent.deploy.uima.UimaAsServiceConfiguration
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.uima-as.endpoint</span> </dt><dd 
class="description">                                                                                                     <br 
class="newline" />This is the endpoint through which job processes (JPs) receive messages from the Agents.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">ducc.job.managed.service
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.uima-as.endpoint.type</span> </dt><dd 
class="description">                                                                                               <br 
class="newline" />This is the JMS endpoint type used for messages sent to the JPs from the Agents.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">socket
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.uima-as.endpoint.params</span> </dt><dd 
class="description">                                                                                           <br 
class="newline" />This configures the JP-to-Agent communication socket. It should be changed only by DUCC developers.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">transferExchange=true&amp;sync=false
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.uima-as.saxon.jar.path</span> </dt><dd 
class="description">                                                                                              <br 
class="newline" />This configures the path the required Saxon jar.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">file:$DUCC_HOME/lib/saxon/saxon8.jar
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.uima-as.dd2spring.xsl.path</span> </dt><dd 
class="description">                                                                                         <br 
class="newline" />This configures the path the required dd2spring xsl definitions.
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">$DUCC_HOME/resources/dd2sprint.xsl
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">ducc.uima-as.flow</span><span 
class="cmbx-10">_controller.specifier</span> </dt><dd 
class="description">                                                                                  <br 
class="newline" />This configures the pluggable class that implements the default flow controller used in the DUCC job processes
     (JPs).
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">Default Value</span> </dt><dd 
class="description">DuccJobProcessFC
         </dd><dt class="description">
     <span 
class="cmbx-10">Type</span> </dt><dd 
class="description">Private</dd></dl>
     </dd></dl>
<!--l. 19--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">12.3   </span> <a 
 id="x1-18800012.3"></a>Resource Manager Configuration: Classes and Nodepools</h3>
<!--l. 22--><p class="noindent" >The class configuration file is used by the Resource Manager configures the rules used for job scheduling. See the <a 
href="#x1-21500013">Resource
Manager chapter</a> for a detailed description of the DUCC scheduler, scheduling classes, and how classes are used to configure
the scheduling process.
<!--l. 26--><p class="noindent" >The scheduler configuration file is specified in ducc.properties. The default name is ducc.classes and is specified by the
property <span 
class="cmti-10">ducc.rm.class.definitions</span>.
<!--l. 29--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.3.1   </span> <a 
 id="x1-18900012.3.1"></a>Nodepools</h4>
                                                                                                
                                                                                                
<!--l. 32--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-19000012.3.1"></a>Overview</h5>
<!--l. 33--><p class="noindent" >A <span 
class="cmti-10">nodepool </span>is a grouping of a subset of the physical nodes to allow differing scheduling policies to be applied to different
nodes in the system. Some typical nodepool groupings might include:
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">Group Intel and Power nodes separately so that users may submit jobs that run only in Intel architecture, or
     only Power, or &#8220;don&#8217;t care&#8221;.
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">Designate a group of nodes with large locally attached disks such that users can run jobs that require those
     disks.
     </dd><dt class="enumerate-enumitem">
  3. </dt><dd 
class="enumerate-enumitem">Designate a specific set of nodes with specialized hardware such as high-speed network, such that jobs can be
     scheduled to run only on those nodes.</dd></dl>
<!--l. 45--><p class="noindent" >A Nodepool is a subset of some larger collection of nodes. Nodepools themselves may be further subdivided. Nodepools may
not overlap: every node belongs to exactly one nodepool. During system start-up the consistency of nodepool definition is
checked and the system will refuse to start if the configuration is incorrect.
<!--l. 50--><p class="noindent" >For example, the diagram below is an abstract representation of all the nodes in a system. There are five nodepools
defined:
     <ul class="itemize1">
     <li class="itemize">Nodepool &#8220;NpAllOfThem&#8221; is subdivided into three pools, NP1, NP2, and NP3. All the nodes not contained in
     NP1, NP2, and NP3 belong to the pool called &#8220;NpAllOfThem&#8221;.
     </li>
     <li class="itemize">Nodepool NP1 is not further subdivided.
     </li>
     <li class="itemize">Nodepool NP2 is not further subdivided.
     </li>
     <li class="itemize">Nodepool NP3 is further subdivided to form NP4. All nodes within NP3 but not in NP4 are contained in NP3.
     </li>
     <li class="itemize">Nodepool NP4 is not further subdivided.</li></ul>
<!--l. 62--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-190004r1"></a>
                                                                                                
                                                                                                

<!--l. 64--><p class="noindent" ><img 
src="images/Nodepool1.jpg" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;12.1: </span><span  
class="content">Nodepool Example</span></div><!--tex4ht:label?: x1-190004r1 -->
                                                                                                
                                                                                                
<!--l. 67--><p class="noindent" ></div><hr class="endfigure">
<!--l. 69--><p class="noindent" >In the figure below the Nodepools are incorrectly defined for two reasons:
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">NP1 and NP2 overlap.
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">NP4 overlaps both nodepool &#8220;NpAllOfThem&#8221; and NP3.</dd></dl>
<!--l. 75--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-190007r2"></a>
                                                                                                
                                                                                                

<!--l. 77--><p class="noindent" ><img 
src="images/Nodepool2.jpg" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;12.2: </span><span  
class="content">Nodepools: Overlapping Pools are Incorrect</span></div><!--tex4ht:label?: x1-190007r2 -->
                                                                                                
                                                                                                
<!--l. 80--><p class="noindent" ></div><hr class="endfigure">
<!--l. 82--><p class="noindent" >Multiple &#8220;top-level&#8221; nodepools are allowed. A &#8220;top-level&#8221; nodepool has no containing pool. Multiple top-level pools logically
divide a cluster of machines into <span 
class="cmti-10">multiple independent clusters </span>from the standpoint of the scheduler. Work scheduled over one
pool in no way affects work scheduled over the other pool. The figure below shows an abstract nodepool configuration with
two top-level nodepools, &#8220;Top-NP1&#8221; and &#8220;Top-NP2&#8221;. <hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-190008r3"></a>
                                                                                                
                                                                                                

<!--l. 89--><p class="noindent" ><img 
src="images/Nodepool3.jpg" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;12.3: </span><span  
class="content">Nodepools: Multiple top-level Nodepools</span></div><!--tex4ht:label?: x1-190008r3 -->
                                                                                                
                                                                                                
<!--l. 92--><p class="noindent" ></div><hr class="endfigure">
<h5 class="subsubsectionHead"><a 
 id="x1-19100012.3.1"></a>Scheduling considerations</h5>
<!--l. 95--><p class="noindent" >A primary goal of the scheduler is to insure that no resources are left idle if there is pending work that is able to use those
resources. Therefore, work scheduled to a class defined over a specific nodepool (say, NpAllOfThem), may be
scheduled on nodes in any of the nodepools contained within NpAllOfThem. If work defined over a subpool (such
as NP1) arrives, processes on nodes in NP1 that were scheduled for NpAllOfThem are considered <span 
class="cmti-10">squatters</span>
and are the most likely candidates for eviction. (Processes assigned to their proper nodepools are considered
<span 
class="cmti-10">residents </span>and are evicted only after all <span 
class="cmti-10">squatters </span>have been evicted.) The scheduler strives to avoid creating
<span 
class="cmti-10">squatters</span>.
<!--l. 105--><p class="noindent" >Because non-preemptable allocations can&#8217;t be preempted, work submitted to a class implementing one of the
non-preemptable policies (FIXED or RESERVE) are never allowed to &#8220;squat&#8221; in other nodepools and are only scheduled on
nodes in their proper nodepool.
<!--l. 110--><p class="noindent" >In the case of multiple top-level nodepools: these nodepools and their sub-pools form independent scheduling groups.
Specifically,
     <ul class="itemize1">
     <li class="itemize">Fair-share allocations over any nodepool in one top-level pool do NOT affect the fair-share allocations for jobs
     in any other top-level nodepool.
     </li>
     <li class="itemize">Work submitted to classes under one top-level nodepool do NOT get expanded to nodes under another top-level
     nodepool, even is there is sufficient capacity.</li></ul>
<!--l. 120--><p class="noindent" >Most installations will want to assign the majority of nodes to a single top-level nodepool (or its subpools), using other
top-level pools for nodes that cannot be shared with other work.
<!--l. 124--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-19200012.3.1"></a>Configuration</h5>
<!--l. 126--><p class="noindent" >DUCC uses simple named stanzas containing key/value pairs to configure nodepools.
<!--l. 128--><p class="noindent" >At least one nodepool definition is required. This nodepool need not have any subpools or node definitions. The first top-level
nodepool is considered the &#8220;default&#8221; nodepool. Any node not named specifically in one of the node files which checks in with
DUCC is assigned to this first, <span 
class="cmti-10">default </span>nodepool.
<!--l. 133--><p class="noindent" >Thus, if only one nodepool is defined with no other attributes, all nodes are assigned to that pool.
<!--l. 136--><p class="noindent" >A nodepool definition consists of the token &#8220;Nodepool&#8221; followed by the name of the nodepool, followed by a
block delimited with &#8220;curly&#8221; braces <span 
class="cmsy-10">{ </span>and <span 
class="cmsy-10">}</span>. This block contains the attributes of the nodepool as key/value
pairs. Lineneds are ignored. A semicolon &#8220;;&#8221; may optionally be used to delimit key/value pairs for readability,
and an equals sign &#8220;=&#8221; may optionally be used to delimit keys from values, also just for readability. See the
<a 
href="#x1-192007r4">below</a>.
<!--l. 144--><p class="noindent" >The attributes of a Nodepool are:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">domain</span> </dt><dd 
class="description">This is valid only in the &#8220;default&#8221; (first) nodepool. Any node in any nodefile which does not have a domain,
     and any node which checks in to the Resource Manager without a domain name is assigned this domain name
     in order that the scheduler may deal entirely with full-qualified node names.
     <!--l. 151--><p class="noindent" >If no <span 
class="cmti-10">domain </span>is specified, DUCC will attempt to guess the domain based on the domain name returned on the
     node where the Resource Manager resides.
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">nodefile</span> </dt><dd 
class="description">This is the name of a file containing the names of the nodes which are members of this nodepool.
     </dd><dt class="description">
<span 
class="cmbx-10">parent</span> </dt><dd 
class="description">This is used to indicate which nodepool is the logical parent. Any nodepool without a <span 
class="cmti-10">parent </span>is considered
     a top-level nodepool.</dd></dl>
<!--l. 161--><p class="noindent" >The following example defines six nodepools,
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">A top-level nodepool called &#8220;&#8211;default&#8211;&#8221;. All nodes not named in any nodefile are assigned to this nodepool.
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">A top-level nodepool called &#8220;jobdriver&#8221;, consisting of the nodes named in the file <span 
class="cmti-10">jobdriver.nodes</span>.
     </dd><dt class="enumerate-enumitem">
  3. </dt><dd 
class="enumerate-enumitem">A subpool of &#8220;&#8211;default&#8211;&#8221; called &#8220;intel&#8221;, consisting of the nodes named in <span 
class="cmti-10">intel.nodes</span>.
     </dd><dt class="enumerate-enumitem">
  4. </dt><dd 
class="enumerate-enumitem">A subpool of &#8220;&#8211;default&#8211;&#8221; called &#8220;power&#8221;, consisting of the nodes named in the file <span 
class="cmti-10">power.nodes</span>.
     </dd><dt class="enumerate-enumitem">
  5. </dt><dd 
class="enumerate-enumitem">A subpool of &#8220;intel&#8221; called &#8220;nightly-test&#8221;, consisting of the nodes named in <span 
class="cmti-10">nightly-test.nodes</span>.
     </dd><dt class="enumerate-enumitem">
  6. </dt><dd 
class="enumerate-enumitem">And a subpool of &#8220;power&#8221; called &#8220;timing-p7&#8221;, consisting of the nodes named in <span 
class="cmti-10">timing-p7.nodes</span>.</dd></dl>
<!--l. 177--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-192007r4"></a>
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-120">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;Nodepool&#x00A0;--default--&#x00A0;&#x00A0;{&#x00A0;domain&#x00A0;mydomain.net&#x00A0;}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;Nodepool&#x00A0;jobdriver&#x00A0;&#x00A0;&#x00A0;&#x00A0;{&#x00A0;nodefile&#x00A0;jobdriver.nodes&#x00A0;}
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;Nodepool&#x00A0;intel&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;{&#x00A0;nodefile&#x00A0;intel.nodes&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;;&#x00A0;parent&#x00A0;--default--&#x00A0;}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;Nodepool&#x00A0;power&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;{&#x00A0;nodefile&#x00A0;power.nodes&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;;&#x00A0;parent&#x00A0;--default--&#x00A0;}
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;Nodepool&#x00A0;nightly-test&#x00A0;{&#x00A0;nodefile&#x00A0;nightly-test.nodes&#x00A0;;&#x00A0;parent&#x00A0;intel&#x00A0;}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;Nodepool&#x00A0;timing-p7&#x00A0;&#x00A0;&#x00A0;&#x00A0;{&#x00A0;nodefile&#x00A0;timing-p7.nodes&#x00A0;&#x00A0;&#x00A0;&#x00A0;;&#x00A0;parent&#x00A0;power&#x00A0;}</div>
<!--l. 188--><p class="nopar" >
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;12.4: </span><span  
class="content">Sample Nodepool Configuration</span></div><!--tex4ht:label?: x1-192007r4 -->
                                                                                                
                                                                                                
<!--l. 192--><p class="noindent" ></div><hr class="endfigure">
<h4 class="subsectionHead"><span class="titlemark">12.3.2   </span> <a 
 id="x1-19300012.3.2"></a>Class Definitions</h4>
<!--l. 198--><p class="noindent" >Scheduler classes are defined in the same simple block language as nodepools.
<!--l. 201--><p class="noindent" >A simple inheritance (or &#8220;template&#8221;) scheme is supported for classes. Any class may be configured to &#8220;derive&#8221; from any other
class. In this case, the child class acquires all the attributes of the parent class, any of which may be selectively overridden.
Multiple inheritance is not supported but nested inheritance is; that is, class A may inherit from class B
which inherits from class C and so on. In this way, generalized templates for the site&#8217;s class structure may be
defined.
<!--l. 209--><p class="noindent" >The general form of a class definition consists of the keyword Class, followed by the name of the class, and then optionally by
the name of a &#8220;parent&#8221; class whose characteristics it inherits. Following the name (and optionally parent class name) are the
attributes of the class, also within a <span 
class="cmsy-10">{ </span>block <span 
class="cmsy-10">} </span>as for nodepools, and with lines and key/value pairs optionally delimited by &#8220;;&#8221;
and &#8220;=&#8221;, respectively. See the sample <a 
href="#x1-193001r5">below</a>.
<!--l. 216--><p class="noindent" >The attributes defined for classes are:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">abstract</span> </dt><dd 
class="description">If specified, this indicates this class is a template ONLY. It is used as a model for other classes. Values are
     &#8220;true&#8221; or &#8220;false&#8221;. The default is &#8220;false&#8221;. This class is never passed to the scheduler and may not be referenced
     by jobs.
     </dd><dt class="description">
<span 
class="cmbx-10">cap</span> </dt><dd 
class="description">This specifies the largest number of shares that any job in this class may be assigned. It may be an absolute
     number or a percentage. If specified as a percentage (i.e. it contains a trailing %), it specifies a percentage of
     the total nodes in the containing nodepool.
     </dd><dt class="description">
<span 
class="cmbx-10">debug</span> </dt><dd 
class="description">FAIR_SHARE only. This specifies the name of a class to substitute for jobs submitted for debug. For example, if
     class <span 
class="cmti-10">normal </span>specifies
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-121">
     &#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;debug&#x00A0;=&#x00A0;fixed</div>
     <!--l. 233--><p class="nopar" > then any job submitted to this class with debugging requested is actually scheduled in class <span 
class="cmti-10">fixed</span>. (For example, one
     probably does not want a debugging job scheduled as FAIR_SHARE and possibly preempted, preferring the
     non-preemptable class <span 
class="cmti-10">fixed</span>.
     </dd><dt class="description">
<span 
class="cmbx-10">default</span> </dt><dd 
class="description">This specifies the class to be used as the default class for work submission if no class is explicitly given. Only one
     class of type FAIR_SHARE may contain this designation, in which case it names the default FAIR_SHARE class. Only
     one class of type FIXED_SHARE or RESERVE may contain this designation, in which case it names the default class
     to use for reservations (Note that either FIXED_SHARE or RESERVE scheduling policies are valid for
     reservations.)
     </dd><dt class="description">
<span 
class="cmbx-10">enforce</span> </dt><dd 
class="description">RESERVE only. If specified, then reservations for this class must specify a memory size that when converted to
     shares exactly matches an eligible machine. For example, if the share quantum is 15GB, a 15GB reservation will never
     be honored by a 240GB machine; for this machine a memory size between 226 &amp; 240GB would have to be
     specified. The DUCC Web Server&#8217;s <span 
class="cmti-10">Machines </span>page displays the recommended request size for every
     machine.
     <!--l. 252--><p class="noindent" >If <span 
class="cmti-10">enforce </span>is not specified, the default is &#8220;true&#8221;.
     <!--l. 254--><p class="noindent" >If <span 
class="cmti-10">enforce </span>is set to false, the scheduler will attempt to match the reservation as closely as possible to an existing
     machine, and if it cannot it will use the next largest machine available. Thus, a 15GB reservation <span 
class="cmti-10">might </span>be satisfied
     with a 240GB machine if that is all that is available at the time.
     </dd><dt class="description">
<span 
class="cmbx-10">expand-by-doubling</span> </dt><dd 
class="description">FAIR_SHARE only. If &#8220;true&#8221;, and the <span 
class="cmti-10">initialization-cap </span>is set, then after any process has
     initialized, the job will expand to its maximum allowable shares by doubling in size each scheduling
     cycle.
     <!--l. 263--><p class="noindent" >If not specified, the global value set in <a 
href="#x1-17800012.2">ducc.properties</a> is used.
     </dd><dt class="description">
<span 
class="cmbx-10">initialization-cap</span> </dt><dd 
class="description">FAIR_SHARE only. If specified, this is the largest number of processes this job may be assigned until at
     least one process has successfully completed initialization.
     <!--l. 268--><p class="noindent" >If not specified, the global value set in <a 
href="#x1-17800012.2">ducc.properties</a> is used.
     </dd><dt class="description">
<span 
class="cmbx-10">max-processes</span> </dt><dd 
class="description">FAIR_SHARE and FIXED_SHARE only. This is the largest number of FIXED-SHARE, non-preemptable
     shares any single job may be assigned.
     <!--l. 273--><p class="noindent" >Omit this property, or set it to 0 to disable the cap.
     </dd><dt class="description">
<span 
class="cmbx-10">max-machines</span> </dt><dd 
class="description">RESERVE only. This specifies the maximum number of full machines that may be reserved by any single
     job.
     <!--l. 278--><p class="noindent" >Omit this property, or set it to 0 to disable the cap.
     </dd><dt class="description">
<span 
class="cmbx-10">prediction-fudge</span> </dt><dd 
class="description">FAIR_SHARE only. When the scheduler is considering expanding the number of processes for a job
     it tries to determine if the job may complete before those processes are allocated and initialized. The
     <span 
class="cmti-10">prediction-fudge </span>adds some amount of time (in milliseconds) to the projected completion time. This allows
     installations to prevent jobs from expanding when they were otherwise going to end in a few minutes
     anyway.
     <!--l. 287--><p class="noindent" >If not specified, the global value set in <a 
href="#x1-17800012.2">ducc.properties</a> is used.
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">nodepool</span> </dt><dd 
class="description">If specified, jobs for this class are assigned to nodes in this nodepool. The value must be the name of one of the
     configured nodepools.
     </dd><dt class="description">
<span 
class="cmbx-10">policy</span> </dt><dd 
class="description">This is the scheduling policy, one of FAIR_SHARE, FIXED_SHARE, or RESERVE. This attribute is required (there
     is no default).
     </dd><dt class="description">
<span 
class="cmbx-10">priority</span> </dt><dd 
class="description">This is the scheduling priority for jobs in this class.
     </dd><dt class="description">
<span 
class="cmbx-10">weight</span> </dt><dd 
class="description">FAIR_SHARE only. This is the fair-share weight for jobs in this class.
     </dd></dl>
<!--l. 301--><p class="noindent" >The following figure illustrates a representative class configuration for a large cluster, consisting of mixed Intel and Power
nodes. This class definition assumes the <a 
href="#x1-192007r4">nodepool configuration</a> shown above. FAIR_SHARE, FIXED_SHARE,
and RESERVE classes are defined over each machine architecture, Intel and Power, and over the combined
pool.
<!--l. 307--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-193001r5"></a>
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-122">
#&#x00A0;---------------------&#x00A0;Fair&#x00A0;share&#x00A0;definitions&#x00A0;---------------
&#x00A0;<br />Class&#x00A0;fair-base&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;policy&#x00A0;=&#x00A0;FAIR_SHARE
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;nodepool&#x00A0;=&#x00A0;intel
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;priority&#x00A0;=&#x00A0;10
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;weight&#x00A0;=&#x00A0;100
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;abstract&#x00A0;=&#x00A0;true
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;debug&#x00A0;=&#x00A0;fixed
&#x00A0;<br />}
&#x00A0;<br />
&#x00A0;<br />Class&#x00A0;nightly-test&#x00A0;&#x00A0;&#x00A0;fair-base&#x00A0;&#x00A0;{&#x00A0;weight&#x00A0;=&#x00A0;100;&#x00A0;nodepool&#x00A0;nightly-test;&#x00A0;priority&#x00A0;=&#x00A0;7}
&#x00A0;<br />
&#x00A0;<br />Class&#x00A0;background&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;fair-base&#x00A0;&#x00A0;{&#x00A0;weight&#x00A0;=&#x00A0;20&#x00A0;}
&#x00A0;<br />Class&#x00A0;low&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;fair-base&#x00A0;&#x00A0;{&#x00A0;weight&#x00A0;=&#x00A0;50&#x00A0;}
&#x00A0;<br />Class&#x00A0;normal&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;fair-base&#x00A0;&#x00A0;{&#x00A0;weight&#x00A0;=&#x00A0;100;&#x00A0;default&#x00A0;=&#x00A0;true&#x00A0;}
&#x00A0;<br />Class&#x00A0;high&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;fair-base&#x00A0;&#x00A0;{&#x00A0;weight&#x00A0;=&#x00A0;200&#x00A0;}
&#x00A0;<br />Class&#x00A0;weekly&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;fair-base&#x00A0;&#x00A0;{&#x00A0;weight&#x00A0;=&#x00A0;400&#x00A0;}
&#x00A0;<br />
&#x00A0;<br />Class&#x00A0;background-p7&#x00A0;&#x00A0;background&#x00A0;{&#x00A0;nodepool&#x00A0;=&#x00A0;power&#x00A0;}
&#x00A0;<br />Class&#x00A0;low-p7&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;low&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;{&#x00A0;nodepool&#x00A0;=&#x00A0;power&#x00A0;}
&#x00A0;<br />Class&#x00A0;normal-p7&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;normal&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;{&#x00A0;nodepool&#x00A0;=&#x00A0;power&#x00A0;}
&#x00A0;<br />Class&#x00A0;high-p7&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;high&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;{&#x00A0;nodepool&#x00A0;=&#x00A0;power&#x00A0;}
&#x00A0;<br />Class&#x00A0;weekly-p7&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;weekly&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;{&#x00A0;nodepool&#x00A0;=&#x00A0;power&#x00A0;}
&#x00A0;<br />
&#x00A0;<br />Class&#x00A0;background-all&#x00A0;background&#x00A0;{&#x00A0;nodepool&#x00A0;=&#x00A0;--default--&#x00A0;}
&#x00A0;<br />Class&#x00A0;low-all&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;low&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;{&#x00A0;nodepool&#x00A0;=&#x00A0;--default--&#x00A0;}
&#x00A0;<br />Class&#x00A0;normal-all&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;normal&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;{&#x00A0;nodepool&#x00A0;=&#x00A0;--default--&#x00A0;}
&#x00A0;<br />Class&#x00A0;high-all&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;high&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;{&#x00A0;nodepool&#x00A0;=&#x00A0;--default--&#x00A0;}
&#x00A0;<br />Class&#x00A0;weekly-all&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;weekly&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;{&#x00A0;nodepool&#x00A0;=&#x00A0;--default--&#x00A0;}
&#x00A0;<br />
&#x00A0;<br />#&#x00A0;---------------------&#x00A0;Fixed&#x00A0;share&#x00A0;definitions&#x00A0;---------------
&#x00A0;<br />Class&#x00A0;fixed-base&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;policy&#x00A0;=&#x00A0;FIXED_SHARE
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;nodepool&#x00A0;=&#x00A0;intel
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;priority&#x00A0;=&#x00A0;5
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;abstract&#x00A0;=&#x00A0;true
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;max-processes&#x00A0;=&#x00A0;10
&#x00A0;<br />}
&#x00A0;<br />
&#x00A0;<br />Class&#x00A0;fixed&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;fixed-base&#x00A0;{&#x00A0;}
&#x00A0;<br />Class&#x00A0;fixed-p7&#x00A0;&#x00A0;fixed-base&#x00A0;{&#x00A0;nodepool&#x00A0;=&#x00A0;power;&#x00A0;&#x00A0;&#x00A0;&#x00A0;default&#x00A0;=&#x00A0;true;&#x00A0;}
&#x00A0;<br />Class&#x00A0;JobDriver&#x00A0;fixed-base&#x00A0;{&#x00A0;nodepool&#x00A0;=&#x00A0;jobdriver;&#x00A0;priority&#x00A0;=&#x00A0;0&#x00A0;}
&#x00A0;<br />
&#x00A0;<br />#&#x00A0;---------------------&#x00A0;Reserve&#x00A0;definitions&#x00A0;---------------
&#x00A0;<br />Class&#x00A0;reserve-base&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;policy&#x00A0;=&#x00A0;RESERVE
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;nodepool&#x00A0;=&#x00A0;intel
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;priority&#x00A0;=&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;enforce&#x00A0;=&#x00A0;true
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;abstract&#x00A0;=&#x00A0;true
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;max-machines&#x00A0;=&#x00A0;10
&#x00A0;<br />}
                                                                                                
                                                                                                
&#x00A0;<br />
&#x00A0;<br />Class&#x00A0;reserve&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;reserve-base&#x00A0;{&#x00A0;}
&#x00A0;<br />Class&#x00A0;reserve-p7&#x00A0;&#x00A0;reserve-base&#x00A0;{&#x00A0;nodepool&#x00A0;=&#x00A0;power&#x00A0;}
&#x00A0;<br />Class&#x00A0;timing-p7&#x00A0;&#x00A0;&#x00A0;reserve-base&#x00A0;{&#x00A0;nodepool&#x00A0;=&#x00A0;timing-p7&#x00A0;}</div>
<!--l. 365--><p class="nopar" >
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;12.5: </span><span  
class="content">Sample Class Configuration</span></div><!--tex4ht:label?: x1-193001r5 -->
                                                                                                
                                                                                                
<!--l. 368--><p class="noindent" ></div><hr class="endfigure">
<h4 class="subsectionHead"><span class="titlemark">12.3.3   </span> <a 
 id="x1-19400012.3.3"></a>Validation</h4>
<!--l. 372--><p class="noindent" >The administrative command, <a 
href="#x1-21100012.5.3"><span 
class="cmti-10">check</span><span 
class="cmti-10">_ducc</span></a> may be used to validate a configuration, with the <span 
class="cmti-10">-c </span>option. This reads the
entire configuration and nodefiles, validates consistency of the definitions and insures the nodepools do not
overlap.
<!--l. 376--><p class="noindent" >During start-up, the <a 
href="#x1-21100012.5.3"><span 
class="cmti-10">start</span><span 
class="cmti-10">_ducc</span></a> command always runs full validation, and if the configuration is found to be incorrect, the
cluster is not started.
<!--l. 379--><p class="noindent" >Configuration checking is done internally by the DUCC java utility <span 
class="cmti-10">org.apache.uima.ducc.commonNodeConfiguration</span>.
This utility contains a public API as described in the Javadoc. It may be invoked from the command line as
follows:
<!--l. 383--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-19500012.3.3"></a><span 
class="cmbx-10">Usage:</span></span>
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-123">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;java&#x00A0;org.apache.uima.ducc.commonNodeConfiguration&#x00A0;[-p]&#x00A0;[-v&#x00A0;nodefile]&#x00A0;configfile</div>
<!--l. 386--><p class="nopar" >
<!--l. 388--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-19600012.3.3"></a><span 
class="cmbx-10">Options:</span></span>
     <dl class="description"><dt class="description">
<span 
class="cmsy-10">-</span><span 
class="cmmi-10">p</span> </dt><dd 
class="description">Pretty-print  the  compiled  configuration  to  stdout.  This  illustrates  nodepool  nesting,  and  shows  the
     fully-completed scheduling classes after inheritance.
     </dd><dt class="description">
<span 
class="cmsy-10">-</span><span 
class="cmmi-10">v </span><span 
class="cmbx-10">nodefile</span> </dt><dd 
class="description">This should be the master nodelist used to start DUCC. This is assumed to be constructed to reflect
     the nodepool organization as <a 
href="#x1-19700012.4">described here</a>. If provided, the nodepools are validated and checked for overlaps.
     </dd><dt class="description">
<span 
class="cmbx-10">configfile</span> </dt><dd 
class="description">This is the name of the file containing the configuration.</dd></dl>
<!--l. 19--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">12.4   </span> <a 
 id="x1-19700012.4"></a>Ducc Node Definitions</h3>
<!--l. 21--><p class="noindent" >The DUCC node definitions are specified by default in the file <span 
class="cmti-10">ducc.nodes</span>.
<!--l. 23--><p class="noindent" >The DUCC node list is used to configure the nodes used to run jobs and assign reservations. When DUCC is started, the
nodelist is read an a DUCC Agent is started on every node in the list.
<!--l. 26--><p class="noindent" >The node list can be composed of multiple node lists to assist organization of the DUCC cluster. All the administrative
commands operate upon node lists. By carefully organized these lists it is possible to administer portions of a cluster
independently.
<!--l. 30--><p class="noindent" >In particular, it is highly recommended that the nodelists reflect the nodepool structure. In this way, the configuration used
to start DUCC is guaranteed to match the nodeppool definitions.
<!--l. 33--><p class="noindent" >Several types of records are permitted in nodelists:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Comments</span> </dt><dd 
class="description">A comment starts with the symbol &#8220;#&#8221;. All text on the line following this symbol is ignored.
     </dd><dt class="description">
<span 
class="cmbx-10">import</span> </dt><dd 
class="description">If a line starts with the symbol <span 
class="cmti-10">import</span>, the next symbol on that line is expected to be the name of another
     node list. This permits the DUCC cluster&#8217;s nodes to be configured in a structured manner.
     <!--l. 43--><p class="noindent" >For instance, the file <span 
class="cmti-10">ducc.nodes </span>might consist entirely of <span 
class="cmti-10">import </span>statements naming all of the nodepool files.
     </dd><dt class="description">
<span 
class="cmbx-10">domain</span> </dt><dd 
class="description">This must be the first line of the file. If specified, it should name the default domain to be used for all the
     nodes in this file, and the nodes named in imported files. If not specified, then during start-up, nodes without
     domain names are assigned domain names according to the global domain name specified in the <a 
href="#x1-19200012.3.1">Resource
     Manager configuration</a> file, and if none is specified there, the domain name on the host starting DUCC is used.
     </dd><dt class="description">
<span 
class="cmbx-10">nodename</span> </dt><dd 
class="description">This is a single token consisting of the name of a node on which an agent it to be started.
                                                                                                
                                                                                                
     </dd></dl>
<!--l. 56--><p class="noindent" >The example below shows a partial, hypothetical node configuration corresponding to the <a 
href="#x1-192007r4">nodepool configuration</a>
above.
<!--l. 59--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
<a 
 id="x1-197001r6"></a>
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-124">
&#x003E;&#x00A0;cat&#x00A0;ducc.nodes
&#x00A0;<br />#&#x00A0;import&#x00A0;all&#x00A0;the&#x00A0;nodes&#x00A0;corresponding&#x00A0;to&#x00A0;my&#x00A0;nodepools
&#x00A0;<br />domain&#x00A0;my.domain
&#x00A0;<br />import&#x00A0;intel.nodes
&#x00A0;<br />import&#x00A0;power.nodes
&#x00A0;<br />import&#x00A0;jobdriver.nodes
&#x00A0;<br />import&#x00A0;nightly-test.nodes
&#x00A0;<br />import&#x00A0;timing-p7.nodes
&#x00A0;<br />
&#x00A0;<br />&#x003E;&#x00A0;cat&#x00A0;intel.nodes
&#x00A0;<br />#&#x00A0;import&#x00A0;the&#x00A0;intel&#x00A0;nodes,&#x00A0;by&#x00A0;frame
&#x00A0;<br />import&#x00A0;intel-frame1.nodes
&#x00A0;<br />import&#x00A0;intel-frame2.nodes
&#x00A0;<br />import&#x00A0;intel-frame3.nodes
&#x00A0;<br />
&#x00A0;<br />&#x003E;cat&#x00A0;intel-frame1.nodes
&#x00A0;<br />#import&#x00A0;the&#x00A0;specific&#x00A0;nodes&#x00A0;from&#x00A0;frame1
&#x00A0;<br />r1s1node1
&#x00A0;<br />r1s1node2
&#x00A0;<br />r1s1node3
&#x00A0;<br />r1s1node4</div>
<!--l. 83--><p class="nopar" >
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;12.6: </span><span  
class="content">Sample Node Configuration</span></div><!--tex4ht:label?: x1-197001r6 -->
                                                                                                
                                                                                                
<!--l. 87--><p class="noindent" ></div><hr class="endfigure">
<h3 class="sectionHead"><span class="titlemark">12.5   </span> <a 
 id="x1-19800012.5"></a>Administrative Commands</h3>
<!--l. 22--><p class="noindent" >The administrative commands include a command to start DUCC, one to stop it, and one to verify the configuration and
query the state of the cluster.
<!--l. 25--><p class="noindent" >Note: The scripting that supports these functions runs (by default) in multi-threaded mode so large clusters can be started,
stopped, and queried quickly. If DUCC is running on an older system, the threading may not work right, in which case the
scripts detect this and run single-threaded. As well, all these commands support a &#8220;&#8211;nothreading&#8221; option to manually disable
the threading.
<!--l. 31--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.5.1   </span> <a 
 id="x1-19900012.5.1"></a>start_ducc</h4>
<!--l. 34--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-20000012.5.1"></a><span 
class="cmti-10">Description</span></h5>
<!--l. 35--><p class="noindent" >The command $DUCC_HOME/admin/start_ducc is used to start DUCC processes. If run with no parameters it takes the
following actions:
     <ul class="itemize1">
     <li class="itemize">Starts the management processes Resource Manager, Orchestrator, Process Manager, Services Manager, and
     Web Server on the local node (where start_ducc is executed.
     </li>
     <li class="itemize">Starts an agent process on every node named in the default node list.</li></ul>
<!--l. 43--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-20100012.5.1"></a><span 
class="cmti-10">Usage</span></h5>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">start</span><span 
class="cmbx-10">_ducc [options]</span> </dt><dd 
class="description">                                                                                                         <br 
class="newline" />If no options are given, all DUCC processes are started, using the default node list, <span 
class="cmti-10">ducc.nodes</span>.
     </dd></dl>
<!--l. 52--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-20200012.5.1"></a><span 
class="cmti-10">Options: </span></h5>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">-n, &#8211;nodelist [nodefile]</span>  </dt><dd 
class="description">                                                                                                     <br 
class="newline" />Start agents on the nodes in the nodefile. Multiple nodefiles may be specified:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-125">
     start\_ducc&#x00A0;-n&#x00A0;foo.nodes&#x00A0;-n&#x00A0;bar.nodes&#x00A0;-n&#x00A0;baz.nodes</div>
     <!--l. 59--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmbx-10">-s, &#8211;singleuser</span> </dt><dd 
class="description">                                                                                                                <br 
class="newline" />Start DUCC in &#8220;single-user&#8221; mode. This inhibits certain checks that are ususally needed running in multi-user mode;
     specifically, permissions on the ducc_ling utility are not verified. In this mode all jobs are usually run as whatever user
     is used to start DUCC.
     </dd><dt class="description">
<span 
class="cmbx-10">-c, &#8211;component [component]</span>  </dt><dd 
class="description">                                                                                             <br 
class="newline" />Start a specific DUCC component, optionally on a specific node. If the component name is qualified with a nodename,
     the component is started on that node. To qualify a component name with a destination node, use the notation
     component@nodename. Multiple components may be specified:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-126">
     start\_ducc&#x00A0;-c&#x00A0;sm&#x00A0;-c&#x00A0;pm&#x00A0;-c&#x00A0;rm&#x00A0;-c&#x00A0;or@bj22&#x00A0;-c&#x00A0;agent@n1&#x00A0;-c&#x00A0;agent@n2</div>
     <!--l. 75--><p class="nopar" >
     <!--l. 77--><p class="noindent" >Components include:
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">rm</span> </dt><dd 
class="description">The Resource Manager
         </dd><dt class="description">
     <span 
class="cmbx-10">or</span> </dt><dd 
class="description">The Orchestrator
         </dd><dt class="description">
     <span 
class="cmbx-10">pm</span> </dt><dd 
class="description">The Process Manager
         </dd><dt class="description">
     <span 
class="cmbx-10">sm</span> </dt><dd 
class="description">The Service Manager
         </dd><dt class="description">
     <span 
class="cmbx-10">ws</span> </dt><dd 
class="description">The Web Server
         </dd><dt class="description">
     <span 
class="cmbx-10">agent</span> </dt><dd 
class="description">Node Agents</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">&#8211;nothreading</span> </dt><dd 
class="description">If specified, the command does not run in multi-threaded mode even if it is supported on the local
     platform.
     </dd></dl>
<!--l. 92--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-20300012.5.1"></a><span 
class="cmti-10">Notes: </span></h5>
<!--l. 93--><p class="noindent" >A different nodelist may be used to specify where Agents are started. As well multiple node lists may be specified, in which
case Agents are started on all the nodes in the multiple node lists.
<!--l. 97--><p class="noindent" >To start only agents, run start_ducc specifying a nodelist explicitly. When started like this, the management daemons are not
started unless explicitly requested.
<!--l. 100--><p class="noindent" >To start only management processes, run start_ducc with the -m or &#8211;management flags. When started like the the agents are
not started unless explicitly requested.
<!--l. 103--><p class="noindent" >To start a specific management process, run start_ducc with the -c component parameter, specify the component that should
be started.
<!--l. 106--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-20400012.5.1"></a><span 
class="cmti-10">Examples: </span></h5>
<!--l. 108--><p class="noindent" >Start some nodes from two different nodelist. This doesn&#8217;t start any of the management processes but it does insure the
ActiveMQ Broker is available.
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-127">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;start\_ducc&#x00A0;-n&#x00A0;foo.nodes&#x00A0;-n&#x00A0;bar.nodes</div>
<!--l. 112--><p class="nopar" >
<!--l. 114--><p class="noindent" >Start an agent on a specific node:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-128">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;start\_ducc&#x00A0;-c&#x00A0;agent@a.specific.node</div>
<!--l. 117--><p class="nopar" >
<!--l. 119--><p class="noindent" >Start the webserver on node &#8217;bingle&#8217;:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-129">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;start\_ducc&#x00A0;-c&#x00A0;ws@bingle</div>
<!--l. 122--><p class="nopar" >
<!--l. 124--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-20500012.5.1"></a><span 
class="cmti-10">Debugging:</span></h5>
<!--l. 126--><p class="noindent" >Sometimes something will not start and it can be difficult to understand why. To diagnose, it is helpful to know that
<span 
class="cmti-10">start</span><span 
class="cmti-10">_ducc </span>is simply a wrapper around a lower-level bit of scripting that does the actual work. That lower-level code can be
invoked stand-alone, in which case console messages that <span 
class="cmti-10">check</span><span 
class="cmti-10">_ducc </span>will have suppressed are presented to the
console.
<!--l. 131--><p class="noindent" >The lower-level script is called <span 
class="cmti-10">ducc.py </span>and accepts the same <span 
class="cmti-10">-c component </span>flag as start_ducc. If some component will not
start, try running <span 
class="cmti-10">ducc.py -c component </span>directly. It will start in the foreground and usually the cause of the problem becomes
evident from the console.
<!--l. 136--><p class="noindent" >For example, suppose the Resource Manager will not start. Run the following:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-130">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;./ducc.py&#x00A0;-c&#x00A0;rm</div>
<!--l. 139--><p class="nopar" > and examine the output. Use <span 
class="cmti-10">CTL-C </span>to stop the component when done.
<!--l. 143--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.5.2   </span> <a 
 id="x1-20600012.5.2"></a>stop_ducc</h4>
<!--l. 145--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-20700012.5.2"></a><span 
class="cmti-10">Description:</span></h5>
<!--l. 146--><p class="noindent" >Stop_ducc is used to stop DUCC processes. If run with no parameters it takes the following actions: <span 
class="cmcsc-10x-x-144">TODO: </span>Garbled by
maven or docbook, update this
<!--l. 150--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-20800012.5.2"></a><span 
class="cmti-10">Usage:</span></h5>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">stop</span><span 
class="cmbx-10">_ducc [options]</span> </dt><dd 
class="description">                                                                                                         <br 
class="newline" />If no options are given, help text is presented. At least one option is required, to avoid accidental cluster
     shutdown.</dd></dl>
<!--l. 159--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-20900012.5.2"></a>Options:</h5>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">-a &#8211;all</span> </dt><dd 
class="description">                                                                                                                           <br 
class="newline" />Stop all the DUCC processes, including agents and management processes. This broadcasts a &#8221;shutdown&#8221;
     command to all DUCC processes. Shutdown is normally performed gracefully will all process including job
     processes given time to save state. All user processes, both jobs and services, are sent shutdown signals. Job
     and service processes which do not shutdown within a designated grace period are then forcibly terminated
     with kill -9.
     </dd><dt class="description">
<span 
class="cmbx-10">-n, &#8211;nodelist [nodefile</span> </dt><dd 
class="description">]                                                                                                                     <br 
class="newline" />Only the DUCC agents in the designated nodelists are shutdown. The processes are sent kill -INT signals which
     triggers the Java shutdown hooks and enables graceful shutdown. All user processes on the indicated nodes,
     both jobs and services, are sent &#8221;shutdown&#8221; signals and are given a minute to shutdown gracefully. Job and
     service processes which do not shutdown within a designated grace period are then forcibly terminated with
     kill -9.
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-131">
     stop\_ducc&#x00A0;-n&#x00A0;foo.nodes&#x00A0;-n&#x00A0;bar.nodes&#x00A0;-n&#x00A0;baz.nodes</div>
     <!--l. 179--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmbx-10">-c, &#8211;component [component</span> </dt><dd 
class="description">]                                                                                                            <br 
class="newline" />Stop a specific DUCC component.
     <!--l. 184--><p class="noindent" >This may be used to stop an errant management component and subsequently restart it (with start_ducc).
     <!--l. 187--><p class="noindent" >This may also be used to stop a specific agent and the job and services processes it is managing, without the need to
     specify a nodelist.
     <!--l. 190--><p class="noindent" >Examples:
     <!--l. 192--><p class="noindent" >Stop agents on nodes n1 and n2:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-132">
     stop_ducc&#x00A0;-c&#x00A0;agent@n1&#x00A0;-c&#x00A0;agent@n2</div>
     <!--l. 195--><p class="nopar" >
     <!--l. 197--><p class="noindent" >Stop and restart the rm:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-133">
     stop_ducc&#x00A0;-c&#x00A0;rm
     &#x00A0;<br />start_ducc&#x00A0;-c&#x00A0;rmc</div>
     <!--l. 201--><p class="nopar" >
     <!--l. 203--><p class="noindent" >Components include:
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">rm</span> </dt><dd 
class="description">The Resource Manager.
         </dd><dt class="description">
     <span 
class="cmbx-10">or</span> </dt><dd 
class="description">The Orchestrator.
         </dd><dt class="description">
     <span 
class="cmbx-10">pm</span> </dt><dd 
class="description">The Process Manager.
         </dd><dt class="description">
     <span 
class="cmbx-10">sm</span> </dt><dd 
class="description">The Service Manager.
         </dd><dt class="description">
     <span 
class="cmbx-10">ws</span> </dt><dd 
class="description">The Web Server.
         </dd><dt class="description">
     <span 
class="cmbx-10">agentnode</span> </dt><dd 
class="description">Node Agent on the specified node.</dd></dl>
     </dd><dt class="description">
<span 
class="cmbx-10">&#8211;nothreading</span> </dt><dd 
class="description">If specified, the command does not run in multi-threaded mode even if it is supported on the local
     platform.
     </dd></dl>
<!--l. 218--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-21000012.5.2"></a><span 
class="cmti-10">Notes:</span></h5>
<!--l. 219--><p class="noindent" >Sometimes problems in the network or elsewhere prevent the DUCC components from stopping properly. The <span 
class="cmti-10">check</span><span 
class="cmti-10">_ducc</span>
command, described in the following section, contains options to query the existance of DUCC processes in the cluster, to
forcibly (<span 
class="cmti-10">kill -9</span>) terminate them, and to more gracefully terminate them (<span 
class="cmti-10">kill -INT</span>).
<!--l. 226--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.5.3   </span> <a 
 id="x1-21100012.5.3"></a>check_ducc</h4>
<!--l. 228--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-21200012.5.3"></a><span 
class="cmti-10">Description:</span></h5>
<!--l. 230--><p class="noindent" >Check_ducc is used to verify the integrity of the DUCC installation and to find and report on DUCC processes. It identifies
processes owned by ducc (management processes, agents, and job processes), and processes started by DUCC on behalf of
users.
                                                                                                
                                                                                                
<!--l. 234--><p class="noindent" >Check_ducc can also be used to clean up errant DUCC processes when stop_ducc is unable to do so. The difference is that
stop_ducc generally tries more gracefully stop processes. check_ducc is used as a last resort, or if a fast but graceless
shutdown is desired.
<!--l. 238--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-21300012.5.3"></a><span 
class="cmti-10">Usage: </span></h5>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">check</span><span 
class="cmbx-10">_ducc [options]</span> </dt><dd 
class="description">If no options are given this is the equivalent of:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-134">
     check_ducc&#x00A0;-c&#x00A0;-n&#x00A0;../resources/ducc.nodes</div>
     <!--l. 245--><p class="nopar" >
     <!--l. 247--><p class="noindent" >This verifies the integrity of the DUCC installation and searches for all the processes owned by user <span 
class="cmti-10">ducc </span>and started by
     DUCC on all the nodes in ducc.nodes.</dd></dl>
<!--l. 251--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-21400012.5.3"></a><span 
class="cmti-10">Options:</span></h5>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">-n &#8211;nodelist [nodefile]</span> </dt><dd 
class="description">Only the nodes specified in the nodefile are searched. The option may be specified multiple times
     for multiple nodefiles. Note that the &#8221;local&#8221; node is always checked as well.
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-135">
     check_ducc&#x00A0;-n&#x00A0;nlist1&#x00A0;-n&#x00A0;nlist2</div>
     <!--l. 258--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmbx-10">-c &#8211;configuration</span> </dt><dd 
class="description">Verify the <a 
href="#x1-18800012.3">Resource Manager configuration</a>.
     </dd><dt class="description">
<span 
class="cmbx-10">-p &#8211;pids</span> </dt><dd 
class="description">Rewrite the PID file. The PID file contains the process ids of all known DUCC management and agent processes.
     The PID file is normally managed by start_ducc and stop_ducc and is stored in the file <span 
class="cmti-10">ducc.pids </span>in directory
     <span 
class="cmti-10">ducc</span><span 
class="cmti-10">_runtime/state</span>.
     <!--l. 268--><p class="noindent" >Occasionally the PID file can become partially or fully corrupted; for example, if a DUCC process dies spontaneously.
     Use check_ducc -p to search the cluster for processes and refresh the PID file.
     </dd><dt class="description">
<span 
class="cmbx-10">-i, &#8211;int</span> </dt><dd 
class="description">                                                                                                                          <br 
class="newline" />Use this to send a shutdown signal (<span 
class="cmti-10">kill -INT</span>) to all the DUCC processes. The DUCC processes catch this signal, close
     their resources and exit. Some resources take some time to close, or in case of problems, are unable to close, in which
     case the DUCC processes will unconditionally exit.
     <!--l. 277--><p class="noindent" >Sometimes problems in the network or elsewhere prevent <span 
class="cmti-10">check</span><span 
class="cmti-10">_ducc -i </span>from terminating the DUCC processes. In this
     case, use <span 
class="cmti-10">check</span><span 
class="cmti-10">_ducc -k</span>, described below.
     </dd><dt class="description">
<span 
class="cmbx-10">-k, &#8211;kill</span> </dt><dd 
class="description">                                                                                                                         <br 
class="newline" />Use this to forcibly kill a component using kill -9. This should only be used if <span 
class="cmti-10">stop</span><span 
class="cmti-10">_ducc </span>or <span 
class="cmti-10">check</span><span 
class="cmti-10">_ducc -i </span>does not
     work.
     </dd><dt class="description">
<span 
class="cmbx-10">-s, &#8211;single</span><span 
class="cmbx-10">_user</span> </dt><dd 
class="description">                                                                                                               <br 
class="newline" />Bypass the multi-user permission checks normally done on the ducc_ling utility.
     </dd><dt class="description">
<span 
class="cmbx-10">&#8211;nothreading</span> </dt><dd 
class="description">If specified, the command does not run in multi-threaded mode even if it is supported on the local
     platform.
     </dd></dl>
<!--l. 22--><p class="noindent" ><a name='DUCC_RM'></a>
                                                                                                
                                                                                                
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;13</span><br /><a 
 id="x1-21500013"></a>Resource Management</h2>
<h3 class="sectionHead"><span class="titlemark">13.1   </span> <a 
 id="x1-21600013.1"></a>Overview</h3>
<!--l. 28--><p class="noindent" >The DUCC Resource Manager is responsible for allocating cluster resources among the various requests for work in the
system. DUCC recognizes several classes of work:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Managed Jobs</span> </dt><dd 
class="description">Managed jobs are Java applications implemented in the UIMA framework. and are scaled out by
     DUCC using UIMA-AS. Managed jobs are executed as some number of discrete processes distributed over the
     cluster resources. All processes of all jobs are by definition preemptable; the number of processes is allowed to
     increase and decrease over time in order to provide all users access to the computing resources.
     </dd><dt class="description">
<span 
class="cmbx-10">Services</span> </dt><dd 
class="description">Services are long-running processes which perform some function on behalf of jobs or other services. Most
     DUCC services are UIMA-AS assigned to a non-preemptable resource class, as defined below.
     </dd><dt class="description">
 </dt><dd 
class="description">Reservations A reservation provides non-preemptable, persistent, dedicated use of a full machine or some part of a
     machine to a specific user.
     </dd><dt class="description">
 </dt><dd 
class="description">Arbitrary Processes An <span 
class="cmti-10">arbitrary process </span>or <span 
class="cmti-10">managed reservation </span>is any process at all, which may or may not have
     anything to do with UIMA. These processes are usually used for services, or to launch very large Eclipse
     work-spaces for debugging. DUCC supports this type of process but is not optimized for it. These processes are
     usually scheduled to be non-preemptable, occupying either a dedicated machine or some portion of a machine.
     </dd></dl>
<!--l. 56--><p class="noindent" >In order to apportion the cumulative memory resource among requests, the Resource Manager defines some minimum unit of
memory and allocates machines such that a &#8221;fair&#8221; number of &#8221;memory units&#8221; are awarded to every user of the system. This
minimum quantity is called a share quantum, or simply, a share. The scheduling goal is to award an equitable number of
memory shares to every user of the system.
<!--l. 62--><p class="noindent" >The Resource Manager awards shares according to a fair share policy. The memory shares in a system are divided equally
among all the users who have work in the system. Once an allocation is assigned to a user, that user&#8217;s jobs are then also
assigned an equal number of shares, out of the user&#8217;s allocation. Finally, the Resource Manager maps the share allotments to
physical resources.
<!--l. 67--><p class="noindent" >To map a share allotment to physical resources, the Resource Manager considers the amount of memory that each job
declares it requires for each process. That per-process memory requirement is translated into the minimum number of
collocated quantum shares required for the process to run.
<!--l. 72--><p class="noindent" >For example, suppose the share quantum is 15GB. A job that declares it requires 14GB per process is assigned one quantum
share per process. If that job is assigned 20 shares, it will be allocated 20 processes across the cluster. A job that declares
28GB per process would be assigned two quanta per process. If that job is assigned 20 shares, it is allocated 10 processes
across the cluster. Both jobs occupy the same amount of memory; they consume the same level of system resources. The
second job does so in half as many processes however.
<!--l. 79--><p class="noindent" >The output of each scheduling cycle is always in terms of processes, where each process is allowed to occupy some number of
shares. The DUCC agents implement a mechanism to ensure that no user&#8217;s job processes exceed their allocated memory
assignments.
<!--l. 83--><p class="noindent" >Some work may be deemed to be more &#8221;important&#8221; than other work. To accommodate this, DUCC allows jobs to be
submitted with an indication of their relative importance: more important jobs are assigned a higher &#8221;weight&#8221;; less important
jobs are assigned a lower weight. During the fair share calculations, jobs with higher weights are assigned more shares
proportional to their weights; jobs with lower weights are assigned proportionally fewer shares. Jobs with equal weights are
assigned an equal number of shares. This weighed adjustment of fair-share assignments is called weighted fair
                                                                                                
                                                                                                
share.
<!--l. 91--><p class="noindent" >The abstraction used to organized jobs by importance is the job class or simply &#8220;class&#8221;. As jobs enter the system they are
grouped with other jobs of the same importance and assigned to a common class. The class abstraction and its attributes are
described in <a 
href="#x1-22200013.5">subsequent sections</a>.
<!--l. 95--><p class="noindent" >The scheduler executes in two phases:
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">The How-Much phase: every job is assigned some number of shares, which is converted to the number of
     processes of the declared size.
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">The What-Of phase: physical machines are found which can accommodate the number of processes allocated by
     the How-Much phase. Jobs are mapped to physical machines such that the total declared per-process amount
     of memory does not exceed the physical memory on the machine.</dd></dl>
<!--l. 105--><p class="noindent" >The How-Much phase is itself subdivided into three phases:
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">Class counts:Apply weighed fair-share to all the job classes that have jobs assigned to them. This apportions
     all shares in the system among all the classes according to their weights.
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">User counts: For each class, collect all the users with jobs submitted to that class, and apply fair-share (with
     equal weights) to equally divide all the class shares among the users. This apportions all shares assigned to the
     class among the users in this class. A user may have jobs in more than one class, in which case that user&#8217;s fair
     share is calculated independently within each class.
     </dd><dt class="enumerate-enumitem">
  3. </dt><dd 
class="enumerate-enumitem">Job counts: For each user, collect all jobs assigned to that user and equally divide all the user&#8217;s shares among
     the jobs. This apportions all shares given to this user for each class among the user&#8217;s jobs in that class.</dd></dl>
<!--l. 123--><p class="noindent" >Reservations are relatively simple. If the number of shares or machines requested is available the reservation succeeds
immediately. If a sufficient number of co-located shares can be made available through preemption of fair-share jobs,
preemptions are scheduled and the reservation is deferred until space becomes available. resources are allocated. If space
cannot be found by means of preemption, the reservation fails.
<!--l. 130--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">13.2   </span> <a 
 id="x1-21700013.2"></a>Scheduling Policies</h3>
<!--l. 132--><p class="noindent" >The Resource Manager implements three coexistent scheduling policies.
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">FAIR</span><span 
class="cmbx-10">_SHARE</span> </dt><dd 
class="description">This is the weighted-fair-share policy described in detail above.
     </dd><dt class="description">
<span 
class="cmbx-10">FIXED</span><span 
class="cmbx-10">_SHARE</span> </dt><dd 
class="description">The  FIXED_SHARE  policy  is  used  to  reserve  a  portion  of  a  machine.  The  allocation  is
     non-preemptable and remains active until it is canceled.
     <!--l. 139--><p class="noindent" >FIXED_SHARE allocations have several uses:
         <ul class="itemize1">
         <li class="itemize">As reservations. In this case DUCC starts no work in the share(s); the user must log in (or run something
         via ssh), and then manually release the reservation to free the resources. This is often used for testing and
         debugging.
         </li>
         <li class="itemize">For services. If a service is registered to run in a FIXED_SHARE allocation, DUCC allocates the resources,
         starts and manages the service, and releases the resource if the service is stopped or unregistered.
                                                                                                
                                                                                                
         </li>
         <li class="itemize">For UIMA jobs. A &#8220;normal&#8221; UIMA job may be submitted to a FIXED_SHARE class. In this case, the
         processes are never preempted, allowing constant and predictable execution of the job. The resources are
         automatically released when the job exits.</li></ul>
     <!--l. 153--><p class="noindent" ><span 
class="cmti-10">Note: </span>A fixed-share request specifies a number of processes of a given size, for example, &#8221;10 processes of 32GB each&#8221;.
     The ten processes may or may not be collocated on the same machine. Note that the resource manager attempts to
     minimize fragmentation so if there is a very large machine with few allocations, it is likely that there will be some
     collocation of the assigned processes.
     <!--l. 159--><p class="noindent" ><span 
class="cmti-10">Note: </span>A fixed-share allocation may be thought of a reservation for a &#8221;partial&#8221; machine.
     </dd><dt class="description">
<span 
class="cmbx-10">RESERVE</span> </dt><dd 
class="description">The RESERVE policy is used to reserve a full machine. It always returns an allocation for an entire
     machine. The reservation is permanent (until it is canceled) and it cannot be preempted by any other
     request.
     <!--l. 165--><p class="noindent" >Reservations may also be used for services or UIMA jobs in the same way as FIXED_SHARE allocations, the
     difference being that a reservation occupies full machines and FIXED_SHARE occupies portions of a
     machine.
     <!--l. 169--><p class="noindent" ><span 
class="cmti-10">Note: </span>It is possible to configure the scheduling policy so that a reservation returns any machine in the cluster that is
     available, or to restrict it to machines of the size specified in the reservation request.</dd></dl>
<!--l. 174--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">13.3   </span> <a 
 id="x1-21800013.3"></a>Priority vs Weight</h3>
<!--l. 176--><p class="noindent" >It is possible that the various policies may interfere with each other. It is also possible that the fair share weights are not
sufficient to guarantee sufficient resources are allocated to high importance jobs. Priorities are used to resolve these
conflicts
<!--l. 180--><p class="noindent" >Simply: priority is used to specify the order of evaluation of the job classes. Weight is used to proportionally allocate the
number of shares to each class under the weighted fair-share policies.
<!--l. 184--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-21900013.3"></a><span 
class="cmbx-10">Priority.</span></span>
It is possible that conflicts may arise in scheduling policies. For example, it may be desired that reservations be fulfilled
before any fair-share jobs are scheduled. It may be desired that some types of jobs are so important that when they enter the
system all other fair-share jobs be evicted. Other such examples can be found.
<!--l. 189--><p class="noindent" >To resolve this, the Resource Manager allows job classes to be prioritized. Priority is used to determine the order of
evaluation of the scheduling classes.
<!--l. 192--><p class="noindent" >When a scheduling cycle starts, the scheduling classes are ordered from &#8221;best&#8221; to &#8221;worst&#8221; priority. The scheduler then
attempts to allocate ALL of the system&#8217;s resources to the &#8221;best&#8221; priority class. If any resources are left, the scheduler
proceeds to schedule classes in the next best priority, and so on, until either all the resources are exhausted or there is no
more work to schedule.
<!--l. 198--><p class="noindent" >It is possible to have multiple job classes of the same priority. What this means is that resources are allocated for the set of
job classes from the same set of resources. Resources for higher priority classes will have already been allocated, resources for
lower priority classes may never become available.
<!--l. 203--><p class="noindent" >To constrain high priority jobs from completely monopolizing the system, class caps may be assigned. Higher priority
guarantees that some resources will be available (or made available) but doesn&#8217;t require that all resources necessarily be
used.
                                                                                                
                                                                                                
<!--l. 207--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-22000013.3"></a><span 
class="cmbx-10">Weight.</span></span>
Weight is used to determine the relative importance of jobs in a set of job classes of the same priority when doing fair-share
allocation. All job classes of the same priority are assigned shares from the full set of available resources according to their
weights using weighted fair-share. Weights are used only for fair-share allocation.
<!--l. 212--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">13.4   </span> <a 
 id="x1-22100013.4"></a>Node Pools</h3>
<!--l. 213--><p class="noindent" >It may be desired or necessary to constrain certain types of resource allocations to a specific subset of the resources. Some
nodes may have special hardware, or perhaps it is desired to prevent certain types of jobs from being scheduled on some
specific set of machines. Nodepools are designed to provide this function.
<!--l. 218--><p class="noindent" >Nodepools impose hierarchical partitioning on the set of available machines. A nodepool is a subset of the full set of machines
in the cluster. Nodepools may not overlap. A nodepool may itself contain non-overlapping subpools. It is possible to define
and schedule work to multiple, independent nodepools.
<!--l. 223--><p class="noindent" >Job classes are associated with nodepools. During scheduling, a job may be assigned resources from its associated nodepool,
or from any of the subpools which divide the associated nodepool. The scheduler attempts to fully exhaust
resources in the associated nodepool before allocating within the subpools, and during eviction, attempts to
first evict from the subpools. The scheduler ensures that the nodepool mechanism does not disrupt fair-share
allocation.
<!--l. 229--><p class="noindent" >More information on nodepools and their configuration can be <a 
href="#x1-18900012.3.1">found here</a>.
<!--l. 231--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">13.5   </span> <a 
 id="x1-22200013.5"></a>Job Classes</h3>
<!--l. 233--><p class="noindent" >The primary abstraction to control and configure the scheduler is the class. A class is simply a set of rules used to
parametrize how resources are assigned to jobs. Every job that enters the system is associated with a single job
class.
<!--l. 237--><p class="noindent" >The job class defines the following rules:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">Priority</span> </dt><dd 
class="description">This is the order of evaluation and assignment of resources to this class. See the discussion of priority vs
     Weight for details.
     </dd><dt class="description">
<span 
class="cmbx-10">Weight</span> </dt><dd 
class="description">This defines the &#8221;importance&#8221; of jobs in this class and is used in the weighted fair-share calculations.
     </dd><dt class="description">
<span 
class="cmbx-10">Scheduling Policy</span> </dt><dd 
class="description">This defines the policy, fair share, fixed share, or reserve used to schedule the jobs in this class.
     </dd><dt class="description">
<span 
class="cmbx-10">Cap</span> </dt><dd 
class="description">Class caps limit the total resources assigned to a class. This is designed to prevent high importance and high
     priority job classes from fully monopolizing the resources. It can be used to limit the total resources available
     to lower importance and lower priority classes.
     </dd><dt class="description">
<span 
class="cmbx-10">Nodepool</span> </dt><dd 
class="description">A class may be associated with exactly one nodepool. Jobs submitted to the class are assigned only
     resources which lie in that nodepool, or in any of the subpools defined within that nodepool.
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">Prediction</span> </dt><dd 
class="description">For the type of work that DUCC is designed to run, new processes typically take a great deal of time
     initializing. It is not unusual to experience 30 minutes or more of initialization before work items start to be
     processed.
     <!--l. 261--><p class="noindent" >When a job is expanding (i.e. the number of assigned processes is allowed to dynamically increase), it may be
     that the job will complete before the new processes can be assigned and the work items within them complete
     initialization. In this situation it is wasteful to allow the job to expand, even if its fair-share is greater than the
     number of processes it currently has assigned.
     <!--l. 267--><p class="noindent" >By enabling prediction, the scheduler will consider the average initialization time for processes in this job,
     current rate of work completion, and predict the number of processes needed to complete the job in the optimal
     amount of time. If this number is less than the job&#8217;s fair, share, the fair share is capped by the predicted needs.
     </dd><dt class="description">
<span 
class="cmbx-10">Prediction Fudge</span> </dt><dd 
class="description">When doing prediction, it may be desired to look some time into the future past initialization
     times to predict if the job will end soon after it is expanded. The prediction fudge specifies a time past the
     expected initialization time that is used to predict the number of future shares needed.
     </dd><dt class="description">
<span 
class="cmbx-10">Initialization cap</span> </dt><dd 
class="description">Because of the long initialization time of processes in most DUCC jobs, process failure during
     the initialization phase can be very expensive in terms of wasted resources. If a process is going to fail because
     of bugs, missing services, or any other reason, it is best to catch it early.
     <!--l. 282--><p class="noindent" >The initialization cap is used to limit the number of processes assigned to a job until it is known that at least
     one process has successfully passed from initialization to running. As soon as this occurs the scheduler will
     proceed to assign the job its full fair-share of resources.
     </dd><dt class="description">
<span 
class="cmbx-10">Expand By Doubling</span> </dt><dd 
class="description">Even after initialization has succeeded, it may be desired to throttle the rate of expansion
     of a job into new processes.
     <!--l. 289--><p class="noindent" >When expand-by-doubling is enabled, the scheduler allocates either twice the number of resources a job currently
     has, or its fair-share of resources, whichever is smallest.
     </dd><dt class="description">
<span 
class="cmbx-10">Maximum Shares</span> </dt><dd 
class="description">This is for FIXED_SHARE policies only. Because fixed share allocations are not preemptable,
     it may be desirable to limit the number of shares that any given request is allowed to receive.
     </dd><dt class="description">
<span 
class="cmbx-10">Enforce Memory</span> </dt><dd 
class="description">This is for RESERVE policies only. It may be desired to allow a reservation request receive any
     machine in the cluster, regardless of its memory capacity. It may also be desired to require that an exact size
     be specified (to ensure the right size of machine is allocated). The enforce memory rule allows installations to
     create reservation classes for either policy.</dd></dl>
<!--l. 303--><p class="noindent" >More information on nodepools and their configuration can be <a 
href="#x1-19300012.3.2">found here</a>.
<!--l. 22--><p class="noindent" ><a name='DUCC\protect \unhbox \voidb@x {\unhbox \voidb@x \special {t4ht@95}x}SIM'></a>
                                                                                                
                                                                                                
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;14</span><br /><a 
 id="x1-22300014"></a>Simulation and System Testing</h2> This chapter describes the large-scale testing and cluster-simulation tools supplied
with DUCC. This is of use mostly to contributors and developers of DUCC itself.
<!--l. 30--><p class="noindent" >DUCC is shipped with support for simulating large clusters of arbitrarily configured nodes. A simple control file describes
some number of simulated nodes of arbitrary memory sizes. DUCC&#8217;s design allows multiples of these to be spawned on a
single node, or on a small set of nodes with multiple simulated nodes apiece. The standard testing configuration used for
most of the development of DUCC consisted of four physical 32-GB machines running 52 simulated nodes of varying memory
sizes from 32 to 128-GB each.
<!--l. 39--><p class="noindent" >To simulate job loads, a simple UIMA-AS job that sleeps for some easily configured length of time was constructed. Another
control file is used to generate <a 
href="#x1-260003.5">job specifications</a> requesting randomly-chosen job parameters such as memory requirements,
service dependencies, scheduling classes, and so on.
<!--l. 44--><p class="noindent" >The test suite contains a simple UIMA Analysis Engine called <span 
class="cmtt-10">FixedSleepAE</span>, and a simple Collection Reader called
<span 
class="cmtt-10">FixedSleepCR</span>. The CR reads a set of sleep times, creates CASs, and ships them to the AEs via DUCC&#8217;s Job Driver. The
CAS contains the time to sleep and various parameters regarding error injection.
<!--l. 51--><p class="noindent" >The AE receives a CAS, performs error injection if requested, and sleeps the indicated period of time, simulating actual
computation but requiring very few physical resources. Hence, many of these may be run simultaneously on relatively modest
hardware.
<!--l. 56--><p class="noindent" >Developers may construct arbitrary jobs by creating a file with sleep times designed to exercise what ever is necessary. DUCC
ships with the three primary job collections (test suites) used during initial development. The suites are based on
actual workloads and have shown to be very robust for proving the correctness of the DUCC code under
stress.
<!--l. 63--><p class="noindent" >The cluster simulator has been also been run on a 4GB iMac with 8 simulated Agents, an 8GB MacBook with the same
configuration, a 32GB iMac with up to 40 simulated Agents. It has also been scaled up to run on 8 45GB Intel nodes running
Linux, simulating 20TB of memory.
<!--l. 67--><p class="noindent" >The rest of this chapter describes the mechanics of using these tools.
<h3 class="sectionHead"><span class="titlemark">14.1   </span> <a 
 id="x1-22400014.1"></a>Cluster Simulation</h3>
<!--l. 71--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">14.1.1   </span> <a 
 id="x1-22500014.1.1"></a>Overview</h4>
<!--l. 72--><p class="noindent" >Cluster-based tools such as DUCC are very hard to test and debug because all interesting problems occur only when the
system is under stress. Acquisition of a cluster of sufficient size to expose the interesting problems is usually not
practical.
<!--l. 77--><p class="noindent" >DUCC&#8217;s design divorces all the DUCC processes from specific IP addresses or node names. ActiveMQ is used as a nameserver
and packet router so that all messages can be delivered by name, irrespective of the physical hardware the destination process
may reside upon.
<!--l. 83--><p class="noindent" >A DUCC system is comprised of three types of processes (daemons):
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">The DUCC management daemons:
         <ul class="itemize1">
         <li class="itemize">The Orchestrator (OR). This is the primary point of entry to the system and is responsible for managing
         the life cycle of all work in the system.
         </li>
         <li class="itemize">The Process Manager (PM). This is responsible for managing message flow to and from the DUCC Agents.
                                                                                                
                                                                                                
         </li>
         <li class="itemize">The <a 
href="#x1-21500013">Resource Manager</a> (RM). This is responsible for apportioning system resources among submitted
         work (jobs, reservations, services).
         </li>
         <li class="itemize">The <a 
href="#x1-800005">Service Manager</a> (SM). This is responsible for keeping services active and available as needed.
         </li>
         <li class="itemize">The Web Server (WS). This process listens to all the state messages in the system to provide a coherent
         view of DUCC to the outside world.</li></ul>
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">The DUCC Node Agents, or simply, Agents. There is one Agent running on every physical node.
     </dd><dt class="enumerate-enumitem">
  3. </dt><dd 
class="enumerate-enumitem">The ActiveMQ Broker. All message flow in the system is directed through the ActiveMQ broker, with the exception of
     the CLI, (which uses HTTP).</dd></dl>
<!--l. 108--><p class="noindent" >Normally, the DUCC Agents report the name, IP address, and physical memory of the node they actually do
reside upon. This is simply for convenience. It is possible to parametrize the DUCC Agents to report any
arbitrary name and address to the DUCC. DUCC components that need to know about Node Agents establish
subscriptions to the Agent publications with ActiveMQ and build up their internal structures from the node
identities in the Agent publications. Processes which normally establish agent listeners are are the RM, PM, and
WS.
<!--l. 117--><p class="noindent" >It is also possible to parametrize a DUCC agent to cause it to report any arbitrary memory size. Thus, an agent running on a
2GB machine can be started so that it reports 32GB of memory. This parametrization is specifically for testing, of
course.
<!--l. 122--><p class="noindent" >The ability to parametrize agent identities and memory sizes is what enables cluster simulation. A control file is used by
start-up scripting to spawn multiple agents per node, each with unique identities.
<!--l. 126--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">14.1.2   </span> <a 
 id="x1-22600014.1.2"></a>Node Configuration</h4>
<!--l. 128--><p class="noindent" >A Java properties file is used to configure simulated nodes. There are three types o entries in this file:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">nodes</span> </dt><dd 
class="description">This single entry provides the blank-delimited names of the physical nodes participating in the simulated
     cluster.
     </dd><dt class="description">
<span 
class="cmbx-10">memory</span> </dt><dd 
class="description">This single line consists of a blank-delimited set of numbers. Each number corresponds to some memory
     size, in GB, to be simulated.
     </dd><dt class="description">
<span 
class="cmbx-10">node descriptions</span> </dt><dd 
class="description">There are one or more of these. The format of each line is
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-136">
     &#x00A0;&#x00A0;&#x00A0;&#x00A0;[nodename].[memory]&#x00A0;=&#x00A0;[count]</div>
     <!--l. 140--><p class="nopar" > where
         <dl class="description"><dt class="description">
     <span 
class="cmbx-10">nodename</span> </dt><dd 
class="description">is the name of one of the nodes in the <span 
class="cmti-10">nodes </span>line mentioned above.
         </dd><dt class="description">
     <span 
class="cmbx-10">memory</span> </dt><dd 
class="description">is one of the memory sizes given in the <span 
class="cmti-10">memory </span>line mentioned above.
         </dd><dt class="description">
     <span 
class="cmbx-10">count</span> </dt><dd 
class="description">is the number of simulated agents in the indicated node, with the indicated memory, to be simulated.</dd></dl>
     </dd></dl>
<!--l. 152--><p class="noindent" >For example, the following simulated cluster configuration defines twenty (20) simulated nodes, all to be run on the single
physical machine called <span 
class="cmti-10">agentn</span>. The simulated nodes contain a mix of 31GB, 47GB, and 79GB memory sizes. There are 7
31GB nodes, 7 47GB nodes, and 6 79GB nodes.
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-137">
#&#x00A0;names&#x00A0;of&#x00A0;nodes&#x00A0;in&#x00A0;the&#x00A0;test&#x00A0;cluster
&#x00A0;<br />nodes&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;agentn
&#x00A0;<br />
&#x00A0;<br />#&#x00A0;set&#x00A0;of&#x00A0;memory&#x00A0;sizes&#x00A0;to&#x00A0;configure
&#x00A0;<br />memory&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;31&#x00A0;47&#x00A0;79
&#x00A0;<br />
&#x00A0;<br />#&#x00A0;how&#x00A0;to&#x00A0;configure&#x00A0;memories:&#x00A0;node.memsize&#x00A0;=&#x00A0;count
&#x00A0;<br />agentn.31&#x00A0;=&#x00A0;7
&#x00A0;<br />agentn.47&#x00A0;=&#x00A0;7
&#x00A0;<br />agentn.79&#x00A0;=&#x00A0;6</div>
<!--l. 167--><p class="nopar" >
<!--l. 169--><p class="noindent" >The nodenames generated by this means are the name of the physical node where the agent is spawned, and a numeric id
appended, for example,
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-138">
&#x00A0;&#x00A0;agentn-1
&#x00A0;<br />&#x00A0;&#x00A0;agentn-2
&#x00A0;<br />&#x00A0;&#x00A0;agentn-3
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;etc.</div>
<!--l. 176--><p class="nopar" >
<!--l. 178--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">14.1.3   </span> <a 
 id="x1-22700014.1.3"></a>Setting up Test Mode</h4>
<!--l. 180--><p class="noindent" >During simulation and testing it is desirable and usually required that DUCC run in unprivileged mode, with all processes
belonging to a single userid. Unfortunately, this does not exercise any of the multi-user code paths, especially in the Resource
Manager.
<!--l. 185--><p class="noindent" >To accommodate this, DUCC can be configured to run in &#8220;test mode&#8221;, such that work is submitted under &#8220;simulated&#8221;
userid which DUCC treats as discrete IDs. All actual work is executed under the ownership of the tester
however.
<!--l. 189--><p class="noindent" >To establish test mode:
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">Ensure that <span 
class="cmti-10">ducc.properties </span>is configured to point to a non-privileged version of <span 
class="cmti-10">ducc</span><span 
class="cmti-10">_ling</span>. Specifically, configure this
     line in <span 
class="cmti-10">ducc.properties</span>
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-139">
     &#x00A0;&#x00A0;&#x00A0;&#x00A0;ducc.agent.launcher.ducc_spawn_path=/home/ducctest/duccling.dir/amd64/ducc_ling</div>
     <!--l. 195--><p class="nopar" > in this example a version of <span 
class="cmti-10">ducc</span><span 
class="cmti-10">_ling </span>known to not have elevated privileges it configured.
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">Configure test mode in <span 
class="cmti-10">ducc.properties</span>:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-140">
     &#x00A0;&#x00A0;&#x00A0;&#x00A0;ducc.runmode=Test</div>
     <!--l. 201--><p class="nopar" > IMPORTANT: Do not start DUCC with <span 
class="cmti-10">ducc.runmode=Test </span>if <span 
class="cmti-10">ducc</span><span 
class="cmti-10">_ling </span>has elevated privileges. Test mode bypasses
     the authentication and authorization checks that are normally used and the system would run completely
     open.</dd></dl>
<!--l. 207--><p class="noindent" >In test mode, jobs may specify what simulated userid is to be used. Most of DUCC does not pay any attention to the
user so this works fine, and the parts that do care about the user are bypassed when <span 
class="cmti-10">ducc.runmode=Test </span>is
configured.
<!--l. 211--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">14.1.4   </span> <a 
 id="x1-22800014.1.4"></a>Starting a Simulated Cluster</h4>
<!--l. 212--><p class="noindent" >DUCC provides a start-up script in the directory <span 
class="cmtt-10">$DUCC</span><span 
class="cmtt-10">_HOME/examples/systemtest </span>called <span 
class="cmtt-10">start</span><span 
class="cmtt-10">_sim</span>.
<!--l. 215--><p class="noindent" >WARNING: Cluster simulation is intended for DUCC testing, including error injection. It is similar to flying a
high-performance fighter jet. It is intentionally twitchy. Very little checking is done and processes may be started multiple
time regardless of whether is sane to do this.
<!--l. 220--><p class="noindent" >To start a simulated cluster, use the <span 
class="cmti-10">start</span><span 
class="cmti-10">_sim </span>script:
<!--l. 222--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-22900014.1.4"></a><span 
class="cmbx-10">Description:</span></span>
The <span 
class="cmti-10">start</span><span 
class="cmti-10">_sim </span>script is used to start a simulated cluster.
<!--l. 225--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-23000014.1.4"></a><span 
class="cmbx-10">Usage:</span></span>
<span 
class="cmti-10">start</span><span 
class="cmti-10">_sim </span>options
<!--l. 228--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-23100014.1.4"></a><span 
class="cmbx-10">Options:</span></span>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">-n, &#8211;nodelist [nodelist]</span> </dt><dd 
class="description">where the nodelist is a cluster description as described above.
     </dd><dt class="description">
<span 
class="cmbx-10">-c &#8211;components [component list]</span> </dt><dd 
class="description">. The component list is a blank-delimited list of components including <span 
class="cmti-10">or, rm,</span>
     <span 
class="cmti-10">sm, pm, ws, broker </span>to start an individual component, or <span 
class="cmti-10">all </span>to start all of the components. NOTE: It is usually
     an error to start any of these components more than once. However <span 
class="cmti-10">start</span><span 
class="cmti-10">_sim </span>allows it, to permit error injection.
     </dd><dt class="description">
<span 
class="cmbx-10">&#8211;nothreading</span> </dt><dd 
class="description">If specified, the command does not run in multi-threaded mode even if it is supported on the local
     platform.
     </dd></dl>
                                                                                                
                                                                                                
<!--l. 242--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">14.1.5   </span> <a 
 id="x1-23200014.1.5"></a>Stopping a Simulated Cluster</h4>
<!--l. 244--><p class="noindent" >There are two mechanisms for stopping a simulated cluster:
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem"><span 
class="cmti-10">check</span><span 
class="cmti-10">_ducc -k </span>This looks for all DUCC processes on the nodes in $DUCC_HOME/resources/ducc.nodes and
     issues <span 
class="cmti-10">kill -9 </span>to each process. It then removes the Orchestrator lock file. This is the most violent and surest
     way to stop a simulated DUCC cluster. In order for this to work, be sure to include the names of all physical
     nodes used in the simulated cluster in the DUCC configuration file <span 
class="cmsl-10">$</span><span 
class="cmti-10">DUCC</span><span 
class="cmti-10">_HOME/resources/ducc.nodes. </span>It
     is described in the <a 
href="#x1-21100012.5.3">administration section</a> of the book.
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem"><span 
class="cmti-10">stop</span><span 
class="cmti-10">_sim </span>With no arguments, this attempts to stop all the simulated agents and the management daemons
     using <span 
class="cmti-10">kill -INT</span>. It is possible to stop individual agents or management nodes by specifying their component
     IDs. The kill signals <span 
class="cmti-10">-KILL, -STOP </span>and <span 
class="cmti-10">-CONT </span>are all supported. This allows error injection as well as a more
     orderly shutdown than <span 
class="cmti-10">check</span><span 
class="cmti-10">_ducc -k</span>.</dd></dl>
<!--l. 263--><p class="noindent" >Note that <a 
href="#x1-21100012.5.3"><span 
class="cmti-10">check</span><span 
class="cmti-10">_ducc</span></a> is found in <span 
class="cmsl-10">$</span><span 
class="cmti-10">DUCC</span><span 
class="cmti-10">_HOME/admin</span>. The <span 
class="cmti-10">stop</span><span 
class="cmti-10">_sim </span>script is found in <span 
class="cmti-10">duccruntime/examples/systemtest</span>.
<!--l. 268--><p class="noindent" >The <span 
class="cmti-10">start</span><span 
class="cmti-10">_sim </span>script creates a file called <span 
class="cmti-10">sim.pids </span>containing the physical node name, Unix process ID (PID), and component
ID (ws, sm, or, pm, rm) of each started DUCC component. In the case of agents, each agent is assigned a
number as a unique id. These ids are used with <span 
class="cmti-10">stop</span><span 
class="cmti-10">_sim </span>to affect specific processes. If the cluster is stopped
without using <span 
class="cmti-10">stop</span><span 
class="cmti-10">_sim</span>, or if it simply crashes, this PID file will get out of date. Fly more carefully next
time!
<!--l. 276--><p class="noindent" ><span 
class="cmti-10">stop</span><span 
class="cmti-10">_sim </span>works as follows:
<!--l. 277--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-23300014.1.5"></a><span 
class="cmbx-10">Description</span></span>
The <span 
class="cmti-10">stop</span><span 
class="cmti-10">_sim </span>script is used to stop some or all of a simulated cluster.
<!--l. 280--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-23400014.1.5"></a><span 
class="cmbx-10">Usage:</span></span>
<span 
class="cmti-10">stop</span><span 
class="cmti-10">_sim </span>[options]
<!--l. 283--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-23500014.1.5"></a><span 
class="cmbx-10">Options:</span></span>
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">-c, &#8211;component [component name]</span> </dt><dd 
class="description">where the name is one of <span 
class="cmti-10">rm, sm, pm, or. ws,</span>. <span 
class="cmti-10">Kill -INT </span>is used to enable
     orderly shutdown unless overridden with -k, -p, or -r as described below.
     </dd><dt class="description">
<span 
class="cmbx-10">-i, &#8211;instance [instance-id]</span> </dt><dd 
class="description">where the instance-id is one of the agent ids in &#8220;sim.pids&#8221;. <span 
class="cmti-10">Kill -INT </span>is used to enable
     orderly shutdown unless overridden with -k, -p, or -r as described below.
     </dd><dt class="description">
<span 
class="cmbx-10">-k, &#8211;kill</span> </dt><dd 
class="description">Use <span 
class="cmti-10">kill -9 </span>to kill the process.
     </dd><dt class="description">
<span 
class="cmbx-10">-p, &#8211;pause</span> </dt><dd 
class="description">Signal the process with <span 
class="cmti-10">SIGSTOP</span>.
     </dd><dt class="description">
<span 
class="cmbx-10">-r, &#8211;resume</span> </dt><dd 
class="description">Signal the process with <span 
class="cmti-10">SIGCONT</span>.
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">&#8211;nothreading</span> </dt><dd 
class="description">If specified, the command does not run in multi-threaded mode even if it is supported on the local
     platform.
     </dd></dl>
<!--l. 299--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">14.2   </span> <a 
 id="x1-23600014.2"></a>Job Simulation</h3>
<!--l. 301--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">14.2.1   </span> <a 
 id="x1-23700014.2.1"></a>Overview</h4>
<!--l. 302--><p class="noindent" >&#8220;Real&#8221; jobs are highly memory and CPU intensive. For testing and simulation purposes, the jobs need not use
anywhere close to their declared memory, and need not consume any CPU at all. The FixedSleepAE is a UIMA
analytic that is given a time, in milliseconds, and all it does is sleep for that period of time and then exit.
By running many of these in a simulated cluster it is possible to get all the DUCC administrative processes
to behave as if there is a real load on the system when in fact all the nodes and jobs are taking minimal
resources.
<!--l. 311--><p class="noindent" >The FixedSleepAE is delivered CASs by the FixedSleepCR. This CR reads a standard Java properties file, using the property
&#8220;elapsed&#8221; to derive the set of sleep times. On each call to the CR&#8217;s &#8220;getNext()&#8221; method, the next integer from
&#8220;elapsed&#8221; is fetched, packaged into a CAS, and shipped to ActiveMQ where it is picked up by the next available
FixedSleepAE.
<!--l. 317--><p class="noindent" >The test driver is given a control file with the names of all the jobs to be submitted in the current run, and the elapsed time
to wait between submission of each job. Each job name corresponds to a file that is not an actual DUCC
specification, but rather the description of a DUCC specification. Each description is a simple Java properties
file.
<!--l. 323--><p class="noindent" >To submit a job, the test driver reads the next job description file derive the number of threads, the simulated user, the
desired (simulated) memory for the job, (possibly) the service ID, and the scheduling class for the job. From these it
constructs a DUCC <a 
href="#x1-260003.5">job specification</a> and submits it to DUCC.
<!--l. 329--><p class="noindent" >Scripting is used to read the job meta-descriptors and generate a control file that submits the job set with a large set of
variations. The same scripting reads each meta-descriptor and modifies it according to the specific parameters of the run,
adjust things such as scheduling class, memory size, etc.
<!--l. 334--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">14.2.2   </span> <a 
 id="x1-23800014.2.2"></a>Job meta-descriptors</h4>
<!--l. 335--><p class="noindent" >For each simulated job in a run, a meta-descriptor must be constructed. These may be constructed &#8220;by hand&#8221;, or via local
scripting, for example from log analysis. (The packaged meta-descriptors are generated from logs of actual
workloads.)
<!--l. 339--><p class="noindent" >A meta-descriptor must contain the following properties:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">tod</span> </dt><dd 
class="description">This specifies a virtual &#8220;time of day of submission&#8221;, starting from time 0, specified in units of milliseconds, when
     the job is to be submitted. During job generation, this may be used to enforce precise timing of submission of
     the jobs.
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">elapsed</span> </dt><dd 
class="description">This is a blank-delimited set of numbers. Each number represents the elapsed time, in milliseconds, for a single
     work item. There must be one time for each work item. These numbers are placed into CASs by the job&#8217;s Job Driver
     and delivered to each Job Process. For example, if this job is to consist of 5 work items of 1, 2, 3, 4 and 5 seconds each,
     specify
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-141">
     &#x00A0;&#x00A0;&#x00A0;&#x00A0;elapsed&#x00A0;=&#x00A0;1000&#x00A0;2000&#x00A0;3000&#x00A0;4000&#x00A0;5000</div>
     <!--l. 351--><p class="nopar" >
     </dd><dt class="description">
<span 
class="cmbx-10">threads</span> </dt><dd 
class="description">This is the number of threads per Job Process. It is translated to the <span 
class="cmti-10">process</span><span 
class="cmti-10">_thread</span><span 
class="cmti-10">_count </span>parameter in the job
     specification.
     </dd><dt class="description">
<span 
class="cmbx-10">user</span> </dt><dd 
class="description">This is the name of the user who owns the job. It may be any string at all. If DUCC is started in <span 
class="cmti-10">test </span>mode, this will be
     shown as the owner of the job in the webserver and the logs.
     </dd><dt class="description">
<span 
class="cmbx-10">memory</span> </dt><dd 
class="description">This is the amount of memory to be requested for the job, translating to the job specification&#8217;s
     <span 
class="cmti-10">process</span><span 
class="cmti-10">_memory</span><span 
class="cmti-10">_size </span>parameter.
     </dd><dt class="description">
<span 
class="cmbx-10">class</span> </dt><dd 
class="description">This is the scheduling class for the job.
<span 
class="cmbx-10">machines</span> This is the maximum number of processes to be allocated for the job, corresponding to the <span 
class="cmti-10">process</span><span 
class="cmti-10">_deployments</span><span 
class="cmti-10">_max</span>
     parameter.
     </dd></dl>
<!--l. 368--><p class="noindent" >For example:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-142">
tod&#x00A0;=&#x00A0;0
&#x00A0;<br />elapsed&#x00A0;=&#x00A0;253677&#x00A0;344843&#x00A0;349342&#x00A0;392883&#x00A0;276264&#x00A0;560153&#x00A0;162850&#x00A0;744822&#x00A0;431210&#x00A0;91188&#x00A0;840262&#x00A0;843378
&#x00A0;<br />threads&#x00A0;=&#x00A0;4
&#x00A0;<br />user&#x00A0;=&#x00A0;Rodrigo
&#x00A0;<br />memory&#x00A0;=&#x00A0;20
&#x00A0;<br />class&#x00A0;=&#x00A0;normal
&#x00A0;<br />machines&#x00A0;=&#x00A0;11</div>
<!--l. 377--><p class="nopar" >
<!--l. 379--><p class="noindent" >All the job meta-descriptors for a run must be placed into a single directory.
<!--l. 382--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">14.2.3   </span> <a 
 id="x1-23900014.2.3"></a><span 
class="cmti-10">Prepare </span>Descriptors</h4>
<!--l. 384--><p class="noindent" >A <span 
class="cmti-10">prepare descriptor </span>is also a standard Java properties file. This defines where the set of meta descriptors resides, where to
place the modified meta-files, how to assign scheduling classes to the jobs, how to apportion memory sizes, how to apportion
services, how long the total run should last, and how to compress sleep times.
<!--l. 390--><p class="noindent" >All parts of the run are randomized, but the randomization can be made deterministic between runs by specifying a seed to
the random number generator.
<!--l. 393--><p class="noindent" >Properties include
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">random.seed</span> </dt><dd 
class="description">This is the random-number generator seed to be used for creating the run.
     </dd><dt class="description">
<span 
class="cmbx-10">src.dir</span> </dt><dd 
class="description">This is the directory containing the input-set of meta-specification files.
     </dd><dt class="description">
<span 
class="cmbx-10">dest.dir</span> </dt><dd 
class="description">This is the directory that will contain the updated meta-specification files.
     </dd><dt class="description">
<span 
class="cmbx-10">scheduling.classes</span> </dt><dd 
class="description">This is a blank-delimited list of the scheduling classes to be randomly assigned to the jobs.
     </dd><dt class="description">
<span 
class="cmbx-10">scheduling.classes.[name]</span> </dt><dd 
class="description">Here, <span 
class="cmti-10">name </span>is the name of one of the scheduling classes listed above. The value is a
     weight, to be used to affect the distribution of scheduling classes among the jobs.
     </dd><dt class="description">
<span 
class="cmbx-10">job.memory</span> </dt><dd 
class="description">This is a blank-delimited list of memory sizes to be randomly assigned to each job.
     </dd><dt class="description">
<span 
class="cmbx-10">job.memory.[men]</span> </dt><dd 
class="description">] Here, <span 
class="cmti-10">mem </span>is one of the memory sizes specified above. The value is a weight, used to affect
     the distribution of memory sizes among the jobs.
     </dd><dt class="description">
<span 
class="cmbx-10">job.services</span> </dt><dd 
class="description">This is a blank-delimited list of a service id, where the id is one of the services specified in the
     <span 
class="cmti-10">services.boot </span>control file.
     </dd><dt class="description">
<span 
class="cmbx-10">job.services.[id]</span> </dt><dd 
class="description">Here <span 
class="cmti-10">id </span>is one of the ids specified in the job.services line above. The value is a weight, used to
     affect the distribution of services among the jobs.
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">submission.spread</span> </dt><dd 
class="description">This is the time, in seconds the set of job submissions is to be spread across. The jobs are
     submitted at random times such that the total time between submitting the first job and the last job is
     approximately this number.
     </dd><dt class="description">
<span 
class="cmbx-10">compression</span> </dt><dd 
class="description">For each sleep time in the job, divide the actual value by this number. This allows testers to use the
     actual elapsed time from real jobs, and compress the total run time so it fits approximately into the submission
     spread.
     <!--l. 426--><p class="noindent" >For example, if a collection of jobs was originally run over 24 hours, but you want to run a simulation with
     approximately the same type of submission that last only 15 minutes, specify a submission spread of 900 (15
     minutes) and a compression of 96.</dd></dl>
<!--l. 432--><p class="noindent" >Here is a sample run configuration file:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-143">
#&#x00A0;control&#x00A0;file&#x00A0;to&#x00A0;create&#x00A0;a&#x00A0;random-like&#x00A0;submission&#x00A0;of&#x00A0;jobs&#x00A0;for&#x00A0;batch&#x00A0;submission
&#x00A0;<br />#&#x00A0;This&#x00A0;represents&#x00A0;jobs&#x00A0;submitted&#x00A0;over&#x00A0;approximately&#x00A0;36&#x00A0;hours&#x00A0;real&#x00A0;time
&#x00A0;<br />#&#x00A0;Compression&#x00A0;of&#x00A0;96&#x00A0;and&#x00A0;spread&#x00A0;920&#x00A0;gives&#x00A0;a&#x00A0;good&#x00A0;15-20&#x00A0;minute&#x00A0;test&#x00A0;on&#x00A0;test&#x00A0;system&#x00A0;with
&#x00A0;<br />#&#x00A0;136&#x00A0;15GB&#x00A0;shares
&#x00A0;<br />
&#x00A0;<br />random.seed&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;0&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;a&#x00A0;number,&#x00A0;for&#x00A0;determinate&#x00A0;randoms
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;or&#x00A0;TOD,&#x00A0;and&#x00A0;the&#x00A0;seed&#x00A0;will&#x00A0;use
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;current&#x00A0;time&#x00A0;of&#x00A0;day
&#x00A0;<br />
&#x00A0;<br />src.dir&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;jobs.in&#x00A0;&#x00A0;&#x00A0;#&#x00A0;where&#x00A0;the&#x00A0;jobs&#x00A0;are
&#x00A0;<br />dest.dir&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;jobs&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;where&#x00A0;to&#x00A0;put&#x00A0;prepared&#x00A0;jobs
&#x00A0;<br />
&#x00A0;<br />scheduling.classes&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;normal&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;classes
&#x00A0;<br />scheduling.classes.normal&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;100
&#x00A0;<br />
&#x00A0;<br />job.memory&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;28&#x00A0;37&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;memorys&#x00A0;to&#x00A0;assign
&#x00A0;<br />job.memory.28&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;50
&#x00A0;<br />job.memory.37&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;50
&#x00A0;<br />
&#x00A0;<br />job.services&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;0&#x00A0;1&#x00A0;2&#x00A0;3&#x00A0;4&#x00A0;5&#x00A0;6&#x00A0;7
&#x00A0;<br />job.services.0&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;25
&#x00A0;<br />job.services.1&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;25
&#x00A0;<br />job.services.2&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;25
&#x00A0;<br />job.services.3&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;25
&#x00A0;<br />job.services.4&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;25
&#x00A0;<br />job.services.5&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;25
&#x00A0;<br />job.services.6&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;25
&#x00A0;<br />job.services.7&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;25
&#x00A0;<br />
&#x00A0;<br />submission.spread&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;920&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;number&#x00A0;of&#x00A0;*seconds*&#x00A0;to&#x00A0;try&#x00A0;to&#x00A0;spread&#x00A0;submission&#x00A0;over
&#x00A0;<br />
&#x00A0;<br />compression&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;96&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;comporession&#x00A0;for&#x00A0;timings</div>
<!--l. 466--><p class="nopar" >
<!--l. 468--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">14.2.4   </span> <a 
 id="x1-24000014.2.4"></a>Services</h4>
<!--l. 470--><p class="noindent" >It is possible to run the FixedSleepAE as a UIMA-AS service, with each job specifying a dependency on the service, and the
indicated service doing the actual sleeping on behalf of the job.
<!--l. 474--><p class="noindent" >These variants on services are supported:
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">Registered services, started by reference,
     </dd><dt class="enumerate-enumitem">
  2. </dt><dd 
class="enumerate-enumitem">Registered services, started by the simulator,</dd></dl>
<!--l. 480--><p class="noindent" >To use these simulated services, configure a &#8220;service boot&#8221; file and reference the services from the job generation config
file.
                                                                                                
                                                                                                
<!--l. 483--><p class="noindent" >Properties required in the service boot file include:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">register</span> </dt><dd 
class="description">This specifies registered services. The value is a blank delimited list of pseudo IDs for the registered services.
     </dd><dt class="description">
<span 
class="cmbx-10">start</span> </dt><dd 
class="description">This specifies which of the registered services to automatically start. The value is some subset of the pseudo
     IDS specified under <span 
class="cmti-10">register</span>
     </dd><dt class="description">
<span 
class="cmbx-10">instances</span><span 
class="cmbx-10">_[id]</span> </dt><dd 
class="description">Here <span 
class="cmti-10">id </span>is one of the IDs specified for <span 
class="cmti-10">submit, register, </span>or <span 
class="cmti-10">standalone</span>. The value is the number of
     instances of that specific service to set up.</dd></dl>
<!--l. 494--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-24100014.2.4"></a><span 
class="cmbx-10">Service pseudo IDs</span></span>
DUCC is packaged with 10 pre-configured services that use the FixedSleepAE. All of these services behave identically, the
only difference is their endpoints, which allows the simulated runs to activate and use multiple independent services. Because
the endpoints are in the various UIMA XML service descriptors, it is necessary to use exactly these IDs when
generating a test run. Thus, the only valid pseudo-ids for service configuration are <span 
class="cmti-10">0, 1, 2, 3, 4, 5, 6, 7, 8,</span>
<span 
class="cmti-10">9</span>.
<!--l. 502--><p class="noindent" >These <span 
class="cmti-10">service ids </span>are used on the job configuration file to establish a weighted distribution of service use among the
jobs.
<!--l. 505--><p class="noindent" >Here is a sample service configuration file:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-144">
#&#x00A0;register&#x00A0;these&#x00A0;services,&#x00A0;2&#x00A0;instances&#x00A0;each
&#x00A0;<br />register&#x00A0;0&#x00A0;1&#x00A0;2&#x00A0;3
&#x00A0;<br />instances_0&#x00A0;2
&#x00A0;<br />instances_1&#x00A0;2
&#x00A0;<br />instances_2&#x00A0;2
&#x00A0;<br />instances_3&#x00A0;2
&#x00A0;<br />
&#x00A0;<br />#&#x00A0;start&#x00A0;these&#x00A0;registered&#x00A0;services
&#x00A0;<br />start&#x00A0;2&#x00A0;3</div>
<!--l. 516--><p class="nopar" >
<!--l. 518--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">14.2.5   </span> <a 
 id="x1-24200014.2.5"></a>Generating a Job Set</h4>
<!--l. 520--><p class="noindent" >The <span 
class="cmti-10">prepare </span>script, found in $DUCC_HOME/examples/systemtest is used to generate a test run from the control files
described above. To use it, execute
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-145">
prepare&#x00A0;[config-file]</div>
<!--l. 525--><p class="nopar" > where <span 
class="cmti-10">config file </span>is the <a 
href="#x1-23900014.2.3">run description</a> file described above.
<!--l. 529--><p class="noindent" >This script reads the meta-specification in the <span 
class="cmti-10">jobs.in </span>directive of the config-file, generates a set of meta-specification files into
the <span 
class="cmti-10">jobs.out </span>directory, and creates a control file, <span 
class="cmti-10">job.ctl</span>. The <span 
class="cmti-10">job.ctl </span>file is used by the simulation driver to submit all the
jobs.
<!--l. 535--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">14.2.6   </span> <a 
 id="x1-24300014.2.6"></a>Running the Test Driver</h4>
<!--l. 536--><p class="noindent" >A test run is driven from the script <span 
class="cmti-10">runducc </span>which resides in the directory <span 
class="cmsl-10">$</span><span 
class="cmti-10">DUCC</span><span 
class="cmti-10">_HOME/examples/systemtest</span>. This script
supports a large number of options intended to inject errors and otherwise perturb a run.
<!--l. 541--><p class="noindent" >To use the test driver, first create a job collection as described above. This will generate a file called <span 
class="cmti-10">job.ctl </span>in the test
directory containing the <span 
class="cmti-10">prepare </span>file.
<!--l. 545--><p class="noindent" >Then execute:
                                                                                                
                                                                                                
<div class="verbatim" id="verbatim-146">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;runducc&#x00A0;-d&#x00A0;jobdir&#x00A0;-b&#x00A0;batchfile&#x00A0;options...</div>
<!--l. 548--><p class="nopar" > where the various parameters and options include:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">-d jobdir</span> </dt><dd 
class="description">The jobdir is the directory containing the <span 
class="cmti-10">prepare </span>file and the <span 
class="cmti-10">job.ctl </span>file as describe in the previous
     section.
     </dd><dt class="description">
<span 
class="cmbx-10">-b batchfile</span> </dt><dd 
class="description">The batchfile is usually <span 
class="cmti-10">job.ctl </span>as generated by the prepare script. (This file may be hand-edited to
     create custom runs outside of the <span 
class="cmti-10">prepare </span>script.)
     </dd><dt class="description">
<span 
class="cmbx-10">&#8211;AE</span> </dt><dd 
class="description">This specifies to run all jobs as CR and AE. This is the default and need not be specified.
     </dd><dt class="description">
<span 
class="cmbx-10">&#8211;DD</span> </dt><dd 
class="description">This specifies to run all jobs as CR and DD. The jobs are generated as DD-style jobs, as opposed to AE.
     </dd><dt class="description">
<span 
class="cmbx-10">&#8211;SE cfg</span> </dt><dd 
class="description">This specifies to run all jobs using services, as generated by the <span 
class="cmti-10">prepare </span>script. The parameter is the <a 
href="#x1-24000014.2.4">service
     config file</a> as described above. When specified, the driver starts the services as configured, pauses a bit to let
     them start up, and generated every job with a dependency on one of the services.
     </dd><dt class="description">
<span 
class="cmbx-10">-i time-in-sec</span> </dt><dd 
class="description">If specified, this forces each AE to spend a minimum of the indicated time in it&#8217;s initialization method
     (also a sleep). If not specified, the default is 10 seconds. The actual time is controlled by the <span 
class="cmti-10">-r </span>(range) option.
     </dd><dt class="description">
<span 
class="cmbx-10">&#8211;init</span><span 
class="cmbx-10">_fail</span><span 
class="cmbx-10">_cap count</span> </dt><dd 
class="description">This sets the job property <span 
class="cmti-10">process</span><span 
class="cmti-10">_initialization</span><span 
class="cmti-10">_failures</span><span 
class="cmti-10">_cap </span>to the the indicated value, to
     control the number of initialization failures to be tolerated before terminating the job.
     </dd><dt class="description">
<span 
class="cmbx-10">&#8211;int</span><span 
class="cmbx-10">_timeout seconds</span> </dt><dd 
class="description">This sets the job property <span 
class="cmti-10">process</span><span 
class="cmti-10">_initialization</span><span 
class="cmti-10">_time</span><span 
class="cmti-10">_max </span>to the indicated value, to control
     the time allowed in initialization before failure is reported.
     </dd><dt class="description">
<span 
class="cmbx-10">-r time-in-sec</span> </dt><dd 
class="description">This specifies the top range for initialization. The service will spend the time specified in <span 
class="cmti-10">-i</span>, PLUS
     a random value from 1 to the time specified in <span 
class="cmti-10">-r </span>in its initialization phase.
     </dd><dt class="description">
<span 
class="cmbx-10">&#8211;IB</span> </dt><dd 
class="description">The Job Process will leak memory in it&#8217;s initialization phase until it is killed, hopefully by DUCC, but possibly
     by the operating system. <span 
class="cmti-10">Use with care.</span>.
     </dd><dt class="description">
<span 
class="cmbx-10">&#8211;PB</span> </dt><dd 
class="description">The job Process will leak memory in it&#8217;s processing phase until it is killed, hopefully by DUCC, but possibly
     by the operation system. <span 
class="cmti-10">Use with care.</span>
     </dd><dt class="description">
<span 
class="cmbx-10">-m size-in-gb</span> </dt><dd 
class="description">Memory override. Use this value for all jobs, overriding the value in the generated meta-specification
     file.
     </dd><dt class="description">
<span 
class="cmbx-10">-n max-Number-of-processes</span> </dt><dd 
class="description">Max machine override. If specified, this overrides the configured process max from
     the job control file. Specify the max as 0 and no maximum will be submitted with the job, causing the scheduler
     to try to allocated the largest possible number of processes to the job.
     </dd><dt class="description">
<span 
class="cmbx-10">-p time-in-seconds</span> </dt><dd 
class="description">If specified the job property <span 
class="cmti-10">process</span><span 
class="cmti-10">_per</span><span 
class="cmti-10">_item</span><span 
class="cmti-10">_time</span><span 
class="cmti-10">_max</span>, which sets a timeout on work items,
     is set to the indicated time.
                                                                                                
                                                                                                
     </dd><dt class="description">
<span 
class="cmbx-10">-w, &#8211;watch</span> </dt><dd 
class="description">Submit every job with the <span 
class="cmti-10">wait</span><span 
class="cmti-10">_for</span><span 
class="cmti-10">_completion </span>flag. This runs the driver in multi-threaded mode, with
     each thread monitoring the progress of a job.
     </dd><dt class="description">
<span 
class="cmbx-10">-x rate</span> </dt><dd 
class="description">This specifies an expected error rate for execution phase in a job process, from 0-100 (a percentage). When
     specified, each job process uses a random number generator to determine the probability that is would crash,
     if if that probability is within the specified rate, it generates a random exception.
     </dd><dt class="description">
<span 
class="cmbx-10">-y rate</span> </dt><dd 
class="description">This specifies an expected error rate for initialization phase in a job process, from 0-100 (a percentage).
     When specified, each job process uses a random number generator to determine the probability that is would
     crash, if if that probability is within the specified rate, it generates a random exception.</dd></dl>
<!--l. 599--><p class="noindent" >For an expected error-free run, only the -b and -d options are needed.
<!--l. 602--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">14.3   </span> <a 
 id="x1-24400014.3"></a>Pre-Packaged Tests</h3>
<!--l. 603--><p class="noindent" >Three test suites are provided using the mechanisms described in the previous section:
     <ul class="itemize1">
     <li class="itemize">A 15-minute run comprising approximately 30 jobs. This includes configuration for single-class submission,
     mixed class submission, and one configured to maximize resource fragmentation.
     </li>
     <li class="itemize">A 30-minute run comprising approximately 33 jobs. This includes a single configuration.
     </li>
     <li class="itemize">a 24-hour run comprising approximately 260 jobs. This also includes configurations for single-class submission,
     mixed  classes,  and  fragmentation.  <span 
class="cmti-10">Note: this run has been reconfigured to run in 12 hours, and has been</span>
     <span 
class="cmti-10">successfully been configured to complete in 6 hours. This can create a significant load on the DUCC processes.</span></li></ul>
<!--l. 616--><p class="noindent" >The configurations are found in the $DUCC_HOME/examples/systemtest directory and are in sub directories
called,
     <ul class="itemize1">
     <li class="itemize">mega-15-min
     </li>
     <li class="itemize">mega-30-min
     </li>
     <li class="itemize">mega-24-hour</li></ul>
<!--l. 624--><p class="noindent" >To run these tests:
     <dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
  1. </dt><dd 
class="enumerate-enumitem">Create a node configuration. A sample configuration to generate 52 simulated nodes, and which assumes the
     physical machines for the simulation are called <span 
class="cmti-10">sys290, sys291, sys292, sys293 </span>and <span 
class="cmti-10">sys534 </span>is supplied in
     $DUCC_HOME/examples/systemtest. Change the node names to the names of real machines, making any other
     adjustments needed.
  2. Update your <span 
class="cmsl-10">$</span><span 
class="cmti-10">DUCC</span><span 
class="cmti-10">_HOME/resources/ducc.nodes </span>so that all the real node names specified int the simulated node file
     are included.
  3. Update your <span 
class="cmsl-10">$</span><span 
class="cmti-10">DUCC</span><span 
class="cmti-10">_HOME/resources/ducc.properties </span>so the <span 
class="cmti-10">ducc.head </span>is specified as the <span 
class="cmti-10">real, physical </span>machine where
     you will start the simulated cluster.
                                                                                                
                                                                                                
  4. Be sure the <span 
class="cmti-10">job driver </span>nodepool, if configured in <span 
class="cmsl-10">$</span><span 
class="cmti-10">DUCC</span><span 
class="cmti-10">_HOME/resources/ducc.classes</span>, specifies the name of
     one of the simulated nodes. When first running these tests it is usually best that the job driver NOT
     be configured on a specific node in <span 
class="cmti-10">ducc.classes </span>as it can be confusing to get this right on simulated
     clusters.
     <!--l. 647--><p class="noindent" >Specifically, in <span 
class="cmti-10">ducc.classes</span>, configure the <span 
class="cmti-10">JobDriver </span>class thus:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-147">
     &#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Class&#x00A0;JobDriver&#x00A0;fixed-base&#x00A0;{&#x00A0;}</div>
     <!--l. 651--><p class="nopar" > This allows DUCC to schedule the job driver on any node in the simulated cluster.
  5. Generate the job set. For example, to generate the job set for the 15-minute run,
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-148">
     &#x00A0;&#x00A0;&#x00A0;cd&#x00A0;$DUCC_HOME/examples/systemtest
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;./prepare&#x00A0;mega-15-min/jobs.prepare</div>
     <!--l. 660--><p class="nopar" >
  6. Start the simulated cluster (Assuming your simulated node file is called <span 
class="cmti-10">52.simulated.nodes</span>:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-149">
     &#x00A0;&#x00A0;&#x00A0;cd&#x00A0;$DUCC_HOME/examples/systemtest
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;./start_sim&#x00A0;-c&#x00A0;all&#x00A0;-n&#x00A0;52.simulated.nodes</div>
     <!--l. 666--><p class="nopar" >
  7. Use the webserver (or for advanced users, log files), to ensure everything came up and the job driver node has been
     assigned.
  8. Start the run:
                                                                                                
                                                                                                
     <div class="verbatim" id="verbatim-150">
     &#x00A0;&#x00A0;&#x00A0;cd&#x00A0;$DUCC_HOME/examples/systemtest
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;./runducc&#x00A0;-d&#x00A0;mega-15-min&#x00A0;-b&#x00A0;job.ctl</div>
     <!--l. 673--><p class="nopar" >
                                                                                                
                                                                                                
<!--l. 92--><p class="noindent" >
                                                                                                
                                                                                                
<h1 class="partHead"><span class="titlemark">Part&#x00A0;V<br /></span><a 
 id="x1-245000V"></a>Ducc Principles of Operation</h1>
                                                                                                
                                                                                                
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;15</span><br /><a 
 id="x1-24600015"></a>Platform</h2>
<!--l. 26--><p class="noindent" >The Distributed UIMA&#x00A0;Cluster Computing&#x00A0;(DUCC) platform comprises software designed to facilitate the scale-out of
Unstructured Information Management Architecture&#x00A0;(UIMA) pipelines on a collection of nodes (machines,
computers)&#x00A0;shared &#8221;fairly&#8221; by a group of users.
<!--l. 31--><p class="noindent" >The major components of DUCC&#x00A0;are the Orchestrator&#x00A0;(OR), the JobDriver&#x00A0;(JD), the Resource Manager&#x00A0;(RM), the Process
Manager&#x00A0;(PM), the Services Manager&#x00A0;(SM), the Agents, the Command Line Interface&#x00A0;(CLI), the Application Program
Interface&#x00A0;(API), and the WebServer&#x00A0;(WS).
<h3 class="sectionHead"><span class="titlemark">15.1   </span> <a 
 id="x1-24700015.1"></a>Highlights</h3>
<!--l. 38--><p class="noindent" >DUCC&#x00A0;was conceived to address the following:
     <ul class="itemize1">
     <li class="itemize">manage a cluster of machines for UIMA&#x00A0;workloads
     </li>
     <li class="itemize">highly configurable &#8221;fair-share&#8221; resource allocation system
     </li>
     <li class="itemize">application code runs with credentials of submitting user
     </li>
     <li class="itemize">&#8221;virtual machine&#8221; resources for user processes allocated instantaneously via Linux Control Groups
     </li>
     <li class="itemize">extensive Web, CLI&#x00A0;and API&#x00A0;interfaces
     </li>
     <li class="itemize">rich debugging support for user processes</li></ul>
<!--l. 49--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">15.2   </span> <a 
 id="x1-24800015.2"></a>Architecture</h3>
<!--l. 51--><p class="noindent" >The DUCC&#x00A0;platform employs building-block software from the open-source community where possible to achieve it
goals. Foremost and not surprisingly DUCC&#x00A0;employs in its foundation UIMA-AS, which in-turn relies upon
UIMA-Core.
<!--l. 55--><p class="noindent" >Additionally, Camel&#x00A0;is used for inter-component communications. ActiveMQ&#x00A0;is employed to process work
items amongst a distributed set of work item processors. Logging is facilitated by Log4J. Jetty&#x00A0;is used for the
WebServer&#x00A0;and jQuery&#x00A0;is deployed to web browsers. And various other open-source softwares are likewise
employed.
<!--l. 60--><p class="noindent" >By employing reliable open-source code where possible, the amount of custom code needed to develop and maintain
DUCC&#x00A0;functionality is minimized. And substitution of implementation for equivalent functionality is possible, for example
replacing Apache Active MQ&#x00A0;with IBM WebSphere MQ.
<!--l. 65--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                                
                                                                                                
                                                                                                
                                                                                                

<!--l. 67--><p class="noindent" ><img 
src="images/ducc-arch.jpg" alt="PIC"  
>
                                                                                                
                                                                                                
<!--l. 69--><p class="noindent" ></div><hr class="endfigure">
<h3 class="sectionHead"><span class="titlemark">15.3   </span> <a 
 id="x1-24900015.3"></a>Jobs</h3>
<!--l. 81--><p class="noindent" >The main focus of the system is running &#8221;batch&#8221; Jobs&#x00A0;comprising UIMA&#x00A0;pipelines.
<!--l. 83--><p class="noindent" >Users submit Jobs&#x00A0;to the system to be deployed and executed. Jobs&#x00A0;have a life-cycle from birth to death during which time a
(normally) finite collection of work items are processed by one or more UIMA&#x00A0;pipelines. Jobs&#x00A0;consist of two parts: a
singleton work item supplier, known in UIMA&#x00A0;parlance as a <span 
class="cmti-10">Collection Reader</span>&#x00A0;(CR); and one or more pipelines, each known
in UIMA&#x00A0;parlance as an <span 
class="cmti-10">Analysis Engine</span>&#x00A0;(AE).
<!--l. 90--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">15.3.1   </span> <a 
 id="x1-25000015.3.1"></a>Characteristics</h4>
<!--l. 92--><p class="noindent" >DUCC&#x00A0;facilitates &#8221;fair-share&#8221; UIMA&#x00A0;pipeline scale-out.
<!--l. 94--><p class="noindent" >The UIMA&#x00A0;pipelines comprising a Job&#x00A0;represent &#8221;embarrassingly parallel&#8221; deployments. Over time, a Job&#x00A0;may expand and
contract with respect to the number of UIMA&#x00A0;pipelines deployed during its lifetime. This may be due to the introduction or
completion of other Jobs, the rise and fall of other resource consumers such as Reservations&#x00A0;or Services, and the addition or
removal of computer resources to the cluster.
<!--l. 101--><p class="noindent" >With respect to contraction, each UIMA&#x00A0;pipeline must be prepared to process work items that may have been partially
processed previously.
<!--l. 104--><p class="noindent" >Pipelines themselves may comprise one or more duplicate threads, such that each pipeline can simultaneously process
multiple work items. The number of pipelines and threads per pipeline are configurable per Job.
<!--l. 108--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">15.3.2   </span> <a 
 id="x1-25100015.3.2"></a>Performance</h4>
<!--l. 110--><p class="noindent" >For the distributed environment, DUCC&#x00A0;relies upon a Network File System&#x00A0;(NFS) for file access to work items. High
performance is achieved through NFS&#x00A0;data sharing and (via ActiveMQ) the passing of data-handles that are utilized by the
&#8221;embarrassingly parallel&#8221; pipelines.
<!--l. 115--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">15.4   </span> <a 
 id="x1-25200015.4"></a>Reservations</h3>
<!--l. 117--><p class="noindent" >To help support Jobs, DUCC&#x00A0;provides facilities for Reservations&#x00A0;of two types: Managed and Unmanaged. Reservations, once
allocated, are preserved until canceled.
<!--l. 121--><p class="noindent" >Managed Reservations&#x00A0;(MRs) comprise &#8221;arbitrary&#8221; processes, for example Java programs, c-programs, bash shells,
etc.
<!--l. 124--><p class="noindent" >Unmanaged Reservations&#x00A0;(URs) comprise a resource that can be utilized for any purpose, subject to the limitations of the
assigned <span 
class="cmti-10">DUCC-Share</span>&#x00A0;or <span 
class="cmti-10">DUCC-Shares</span>.
                                                                                                
                                                                                                
<!--l. 127--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">15.5   </span> <a 
 id="x1-25300015.5"></a>Services</h3>
<!--l. 129--><p class="noindent" >To help support Jobs, DUCC&#x00A0;provides facilities for Services&#x00A0;of two types: UIMA&#x00A0;and Ping-Only. Services&#x00A0;can be predefined
in a registry, and Jobs&#x00A0;can declare dependency on one or more of them.
<!--l. 133--><p class="noindent" >Services&#x00A0;can be shared by my multiple Jobs&#x00A0;or can be tied to just one. Services&#x00A0;can be started at DUCC-boot time or at
Service-definition time or at Job&#x00A0;launch time.
<!--l. 137--><p class="noindent" >Services&#x00A0;can be expanded and contracted by command or on-demand. Services&#x00A0;can be stopped by command or due to
absence of demand.
<!--l. 140--><p class="noindent" >Services&#x00A0;nominally exists for reasons of efficiency due to high start-up costs or high resource consumption. Benefits of cost
amortization are realized by sharing Services&#x00A0;amongst a collection of Jobs&#x00A0;rather than employing a private copy for
each.
<!--l. 145--><p class="noindent" >The lifecycle of each UIMA&#x00A0;Service&#x00A0;is managed by DUCC, which is not the case for Ping-Only&#x00A0;Services.
However, each comprises a &#8221;pinger&#8221; which adheres to a standard interface and provides health and statistical
information.
<!--l. 149--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">15.6   </span> <a 
 id="x1-25400015.6"></a>Management</h3>
<!--l. 151--><p class="noindent" >The DUCC&#x00A0;system employs several management techniques to fairly apportion resources.
<!--l. 154--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">15.6.1   </span> <a 
 id="x1-25500015.6.1"></a>Memory Shares</h4>
<!--l. 156--><p class="noindent" >The DUCC&#x00A0;system partitions the entire set of available resources comprising nodes (machines, computers)&#x00A0;into
<span 
class="cmti-10">DUCC-Shares</span>.
<!--l. 159--><p class="noindent" >Partitioning of the available nodes (machines, computers)&#x00A0;into <span 
class="cmti-10">DUCC-Shares</span>&#x00A0;facilitates multitenancy amongst a collection
of DUCC-managed user applications consisting of UIMA&#x00A0;pipelines.
<!--l. 163--><p class="noindent" >One or more <span 
class="cmti-10">DUCC-Shares</span>&#x00A0;are allocated and sub-partitioned into <span 
class="cmti-10">JD-Shares</span>.
<!--l. 165--><p class="noindent" >Users submit Jobs&#x00A0;to the DUCC&#x00A0;system specifying a requisite memory size. Each Job&#x00A0;is allocated one <span 
class="cmti-10">JD-Share</span>&#x00A0;and, based
upon user specified memory size, one or more <span 
class="cmti-10">DUCC-Shares</span>. Likewise, users submit Reservations&#x00A0;and Services&#x00A0;also
comprising memory size information. These are assigned <span 
class="cmti-10">DUCC-Shares</span>&#x00A0;only.
<!--l. 171--><p class="noindent" >New Jobs, Reservations&#x00A0;and Services&#x00A0;may only enter the system when there are sufficient unallocated <span 
class="cmti-10">DUCC-Shares</span>&#x00A0;available.
To make room for newly arriving submissions, the Resource Manager&#x00A0;may preempt use of already previously assigned
<span 
class="cmti-10">DUCC-Shares</span>&#x00A0;for re-assignment.
<!--l. 176--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">15.6.2   </span> <a 
 id="x1-25600015.6.2"></a>Linux Control Groups</h4>
<!--l. 178--><p class="noindent" >If available, DUCC&#x00A0;employs Linux Control Groups&#x00A0;to enforce limits on deployed applications. Exceeding limits penalizes
only the offender. For example, if a user application exceeds its memory <span 
class="cmti-10">DUCC-Share</span>&#x00A0;size then it is forced to swap while
other co-resident applications remain unaffected.
                                                                                                
                                                                                                
<!--l. 183--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">15.6.3   </span> <a 
 id="x1-25700015.6.3"></a>Preemption</h4>
<!--l. 185--><p class="noindent" >Preemption is employed by DUCC&#x00A0;to re-apportion <span 
class="cmti-10">DUCC-Shares</span>&#x00A0;when new work is submitted.
<!--l. 187--><p class="noindent" >For example, presume a simple DUCC&#x00A0;system with just one preemptable scheduling class and resources comprising 11
<span 
class="cmti-10">DUCC-Shares</span>. Further, suppose that 1 <span 
class="cmti-10">DUCC-Share</span>&#x00A0;is allocated for partitioning into <span 
class="cmti-10">JD-Shares</span>. When the Job #1 is
submitted it is entitled to all remaining 10 shares. When Job #2 arrives, each job is entitled to only 5 shares. Thus, 5
<span 
class="cmti-10">DUCC-Shares</span>&#x00A0;from Job #1 are preempted and reassigned to Job #2.
                                                                                                
                                                                                                
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;16</span><br /><a 
 id="x1-25800016"></a>System Organization</h2>
<h3 class="sectionHead"><span class="titlemark">16.1   </span> <a 
 id="x1-25900016.1"></a>Single System Image</h3>
<!--l. 198--><p class="noindent" >DUCC&#x00A0;runs on Linux. It can be run on a single system in simulation-mode or on a cluster (two or more machines). For
clusters, DUCC&#x00A0;replies upon these requirements:
     <ul class="itemize1">
     <li class="itemize">common userids across the cluster
     <!--l. 205--><p class="noindent" >Each userid must have the same definition on all machines participating in the DUCC&#x00A0;cluster.
     </li>
     <li class="itemize">a shared filesystem for user and DUCC&#x00A0;data across the cluster
     <!--l. 210--><p class="noindent" >Each  machine  shares  a  filesystem  (commonly  provided  by  NFS)  with  all  machines  participating  in  the
     DUCC&#x00A0;cluster.
     </li></ul>
<!--l. 215--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">16.2   </span> <a 
 id="x1-26000016.2"></a>Communications</h3>
<!--l. 217--><p class="noindent" >DUCC&#x00A0;comprises a collection of singleton and distributed daemons that need to coordinate activities. This coordination is
accomplished via messaging.
<!--l. 220--><p class="noindent" >The system is fault tolerant with respect to lost messages, since publications occur at regular intervals and each message
encapsulates the current and/or desired state for the target audience. As such, actions may be be delayed but will be carried
out as soon as the next message arrives.
<!--l. 226--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">16.3   </span> <a 
 id="x1-26100016.3"></a>Daemons</h3>
<!--l. 228--><p class="noindent" >DUCC&#x00A0;is implemented through a collection of configurable singleton and distributed daemons.
<!--l. 20--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">16.3.1   </span> <a 
 id="x1-26200016.3.1"></a>Orchestrator&#x00A0;(OR)</h4>
<!--l. 22--><p class="noindent" >There is one Orchestrator&#x00A0;per DUCC&#x00A0;cluster.
<!--l. 24--><p class="noindent" >The duties of the Orchestrator&#x00A0;are:
     <dl class="description"><dt class="description">
 </dt><dd 
class="description"><span 
class="cmti-10">receive and act upon user submitted application requests;</span>
     </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmti-10">manage and publish common state to a set of distributed components;</span>
     </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmti-10">maintain checkpoint and historical state;</span>
                                                                                                
                                                                                                
     </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmti-10">manage the lifecycle of jobs, services, and reservations.</span></dd></dl>
<!--l. 29--><p class="noindent" >The Orchestrator&#x00A0;provides essential functionality for operation of the DUCC&#x00A0;system. It is configurable and
tunable.
<!--l. 33--><p class="noindent" >The Orchestrator&#x00A0;receives user requests to start, stop and modify Jobs, Services and Reservations. It manages the life-cycles
of these entities, each deployed to a managed cluster of machines (nodes, computers).
<!--l. 38--><p class="noindent" >The Orchestrator&#x00A0;both publishes and receive reports. The Orchestrator&#x00A0;publication is also known as the <span 
class="cmtt-10">OR-map</span>, which is
the final authority on the state of Jobs, Reservations, and Services. All other DUCC&#x00A0;components respect the state published
by the Orchestrator&#x00A0;and each carries out its assigned duties accordingly.
<!--l. 44--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-26300016.3.1"></a>Controller</h5>
<!--l. 47--><p class="noindent" >The Orchestrator&#x00A0;Controller responsibilities entail receiving user submitted requests and processing them to completion in
accordance with an instance of the appropriate state machine.
<!--l. 51--><p class="noindent" >User submitted requests comprise:
     <ul class="itemize1">
     <li class="itemize">Job <span 
class="cmsy-10">{ </span>Start, Stop, Modify <span 
class="cmsy-10">}</span>
     </li>
     <li class="itemize">Reservation <span 
class="cmsy-10">{ </span>Start, Stop, Modify <span 
class="cmsy-10">}</span>
     </li>
     <li class="itemize">Service <span 
class="cmsy-10">{ </span>Start, Stop, Modify <span 
class="cmsy-10">}</span>
     </li>
     <li class="itemize">Individual Process <span 
class="cmsy-10">{ </span>Stop <span 
class="cmsy-10">}</span></li></ul>
<!--l. 60--><p class="noindent" >The Controller responsibilities further entail receiving status messages from other DUCC&#x00A0;components and advancing the
state machines of user submitted Jobs, Reservations, and Services as necessary.
<!--l. 64--><p class="noindent" >Additionally and importantly, the Controller is the final authority for the DUCC&#x00A0;system state comprising active Jobs,
Reservations, and Services. The Controller publishes DUCC&#x00A0;system state at regular intervals for consumption and use by all
other DUCC&#x00A0;components.
<!--l. 69--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-26400016.3.1"></a>Authenticator</h5>
<!--l. 71--><p class="noindent" >The authenticator determines whether or not the requesting user is a DUCC&#x00A0;administrator. Such users have special
privileges, such as:
     <ul class="itemize1">
     <li class="itemize">the ability to control DUCC&#x00A0;system functions
     </li>
     <li class="itemize">the ability to act on behalf of other users</li></ul>
<!--l. 79--><p class="noindent" >The file <span 
class="cmtt-10">ducc.administrators</span>&#x00A0;comprises the list of privileged DUCC&#x00A0;users.
                                                                                                
                                                                                                
<!--l. 81--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-26500016.3.1"></a>Validation</h5>
<!--l. 83--><p class="noindent" >Each request to submit, cancel or modify is validated against a set of criteria that define acceptableness. In the case of
missing information, a default value may be employed.
<!--l. 87--><p class="noindent" >Presently, the following keys are validated by the Orchestrator:
     <ul class="itemize1">
     <li class="itemize"><span 
class="cmtt-10">process</span><span 
class="cmtt-10">_thread</span><span 
class="cmtt-10">_count</span>
     </li>
     <li class="itemize"><span 
class="cmtt-10">number</span><span 
class="cmtt-10">_of</span><span 
class="cmtt-10">_instances</span>
     </li>
     <li class="itemize"><span 
class="cmtt-10">scheduling</span><span 
class="cmtt-10">_class</span></li></ul>
<!--l. 95--><p class="noindent" >Other keys are validated by the Command Line Interface, prior to arrival at the Orchestrator.
<!--l. 98--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-26600016.3.1"></a>Factory</h5>
<!--l. 100--><p class="noindent" >Once accepted, submit requests proceed through a corresponding factory to have a state machine representation entered into
the published <span 
class="cmtt-10">OR-map</span>&#x00A0;with initial state of <span 
class="cmtt-10">Received</span>. The request remains active until it advances to final state
<span 
class="cmtt-10">Completed</span>.
<!--l. 105--><p class="noindent" >Each factory-created representation comprises appropriate information as follows:
     <ul class="itemize1">
     <li class="itemize">
         <ul class="itemize2">
         <li class="itemize">standard information
             <ul class="itemize3">
             <li class="itemize">unique identifier (assigned by DUCC)
             </li>
             <li class="itemize">type Job, Reservation, Service
             </li>
             <li class="itemize">user name
             </li>
             <li class="itemize">submitting <span 
class="cmtt-10">PID</span>
             </li>
             <li class="itemize">date of submission
             </li>
             <li class="itemize">date of completion (initially <span 
class="cmti-10">null</span>)
             </li>
             <li class="itemize">description (text supplied by user)</li></ul>
         </li>
         <li class="itemize">scheduling information
                                                                                                
                                                                                                
             <ul class="itemize3">
             <li class="itemize">scheduling class
             </li>
             <li class="itemize">scheduling priority
             </li>
             <li class="itemize">scheduling max shares
             </li>
             <li class="itemize">scheduling min shares
             </li>
             <li class="itemize">scheduling threads per share
             </li>
             <li class="itemize">scheduling memory size
             </li>
             <li class="itemize">scheduling memory units</li></ul>
         </li>
         <li class="itemize">job driver information
             <ul class="itemize3">
             <li class="itemize">java command
             </li>
             <li class="itemize">java classpath
             </li>
             <li class="itemize">environment variables
             </li>
             <li class="itemize">user log directory
             </li>
             <li class="itemize">MQ broker
             </li>
             <li class="itemize">MQ queue
             </li>
             <li class="itemize"><span 
class="cmti-10">Collection Reader</span>&#x00A0;descriptor
             </li>
             <li class="itemize"><span 
class="cmti-10">Collection Reader</span>&#x00A0;overrides
             </li>
             <li class="itemize">getMeta timeout value
             </li>
             <li class="itemize">work item processing timeout value
             </li>
             <li class="itemize">work item processing exception handler
             </li>
             <li class="itemize">node identity
             </li>
             <li class="itemize">Linux Control Group&#x00A0;limits
             </li>
             <li class="itemize">state</li></ul>
                                                                                                
                                                                                                
         </li>
         <li class="itemize">job process information (one or more instances)
             <ul class="itemize3">
             <li class="itemize">java command
             </li>
             <li class="itemize">java classpath
             </li>
             <li class="itemize">environment variables
             </li>
             <li class="itemize">user log directory
             </li>
             <li class="itemize">MQ broker
             </li>
             <li class="itemize">MQ queue
             </li>
             <li class="itemize">deployment descriptor or aggregate data
             </li>
             <li class="itemize">initialization failure limits
             </li>
             <li class="itemize">node identity
             </li>
             <li class="itemize">Linux Control Group&#x00A0;limits
             </li>
             <li class="itemize">state
             </li>
             <li class="itemize">service dependencies</li></ul>
         </li>
         <li class="itemize">service information (one or more instances)
             <ul class="itemize3">
             <li class="itemize">See job process information above.</li></ul>
         </li>
         <li class="itemize">managed reservation information TBD
         </li>
         <li class="itemize">unmanaged reservation information TBD
         </li></ul>
     </li></ul>
<!--l. 180--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-26700016.3.1"></a>Checkpoint Supervisor</h5>
<!--l. 182--><p class="noindent" >The Checkpoint Supervisor provides functions to save and restore state information to/from persistent storage. State is
stored whenever a significant change occurs. State is restored at Orchestrator&#x00A0;boot time.
<!--l. 186--><p class="noindent" >Saving and restoration of state facilitates reasonable continuity of service between Orchestrator&#x00A0;lifetimes.
                                                                                                
                                                                                                
<!--l. 189--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-26800016.3.1"></a>State Supervisor</h5>
<!--l. 191--><p class="noindent" >The State Supervisor receives and examines publications from other DUCC&#x00A0;components, records and distributes pertinent
information obtained or derived, and advances state machines appropriately.
<!--l. 195--><p class="noindent" >Publications are received from these components:
     <ul class="itemize1">
     <li class="itemize">Job Driver(s)
     </li>
     <li class="itemize">Resource Manager
     </li>
     <li class="itemize">Services Manager
     </li>
     <li class="itemize">Agent(s) Inventory
     </li></ul>
<!--l. 206--><p class="noindent" >Information from these sources is recorded in the <span 
class="cmtt-10">OR-map</span>. Based on information derived from all sources, the
Orchestrator&#x00A0;advances the state machines of currently active entities (Jobs, Reservations, Services). Once the
<span 
class="cmtt-10">Completed</span>&#x00A0;state is reached, the entity is no longer active on the cluster.
<!--l. 213--><p class="noindent" >Note that <span 
class="cmtt-10">OR-map</span>&#x00A0;is, in-turn, published at regular intervals for use by the other DUCC&#x00A0;singleton and distributed
components. The <span 
class="cmtt-10">OR-map</span>&#x00A0;is the &#8221;final authority&#8221; on the state of each Job, Reservation and Service currently or formerly
deployed. See <a 
href="#x1-26300016.3.1">16.3.1<!--tex4ht:ref: Controller --></a> <span 
class="cmtt-10">Controller</span>.
<!--l. 219--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-26900016.3.1"></a>State Accounting Supervisor</h5>
<!--l. 221--><p class="noindent" >The State Accounting Supervisor manages finite state machine for Jobs, Services, and Reservations. It provides functions
to:
     <dl class="description"><dt class="description">
 </dt><dd 
class="description">Advance from the current state to a next valid state
     </dd><dt class="description">
 </dt><dd 
class="description">Advance from the current state immediately to the <span 
class="cmtt-10">Completed</span>&#x00A0;state
     </dd></dl>
<!--l. 231--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-27000016.3.1"></a>Linux Control Group&#x00A0;Supervisor</h5>
<!--l. 233--><p class="noindent" >The Linux Control Group&#x00A0;Supervisor assigns a maximum size (in bytes) and a composite unique identity to each
<span 
class="cmti-10">DUCC-Share</span>. This information is published for use by Agents to enforce Linux Control Group&#x00A0;limitations on storage used by
the corresponding running entity (for example, UIMA&#x00A0;pipeline).
                                                                                                
                                                                                                
<!--l. 238--><p class="noindent" >Employing Linux Control Groups&#x00A0; is analogous to defining virtual machines of a certain size such that exceeding limits
causes only the offending process to suffer any performance penalties, while other co-located well-behaved processes run
unaffected.
<!--l. 243--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-27100016.3.1"></a>Host Supervisor</h5>
<!--l. 245--><p class="noindent" >The Host Supervisor is responsible for obtaining sufficient resource for deploying the Job Drivers for all submitted Jobs. It
interacts with the Resource Manager to allocate and de-allocate resources for this purpose. It assigns a <span 
class="cmti-10">JD-Share</span>&#x00A0;to each
active Job.
<!--l. 250--><p class="noindent" >A <span 
class="cmti-10">JD-Share</span>&#x00A0;is a Linux Control Group&#x00A0;controlled <span 
class="cmti-10">DUCC-Share</span>&#x00A0;of sufficient size into which a Job Driver can be deployed. A
<span 
class="cmti-10">JD-Share</span>&#x00A0;is usually significantly smaller than a normal <span 
class="cmti-10">DUCC-Share</span>.
<!--l. 254--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-27200016.3.1"></a>Logging / As-User</h5>
<!--l. 256--><p class="noindent" >The Logging and As-User modules permit the Orchestrator&#x00A0;to write logging data into a file contained in &#8221;user-space&#8221;,
meaning a file into a directory writable by the submitting user, during processing of the submitted entity (Job, Managed
Reservation...).
<!--l. 261--><p class="noindent" >The Logging module also facilitates the recording to persistent storage of noteworthy events occurring during the
Orchestrator&#x00A0;lifetime. Noteworthiness is configurable as various levels, such as <span 
class="cmtt-10">INFO</span>, <span 
class="cmtt-10">DEBUG</span>&#x00A0;and <span 
class="cmtt-10">TRACE</span>.
<!--l. 265--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-27300016.3.1"></a>Administrators</h5>
<!--l. 267--><p class="noindent" >The Administrators module grants users defined in the <span 
class="cmtt-10">ducc.administrators</span>&#x00A0;file special privileges, such a being able cancel
to any user&#8217;s Job.
<!--l. 270--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-27400016.3.1"></a>Maintenance</h5>
<!--l. 272--><p class="noindent" >The maintenance thread wakes-up at regular intervals to perform the following tasks:
     <dl class="description"><dt class="description">
 </dt><dd 
class="description">Health
     <!--l. 279--><p class="noindent" >The Orchestrator&#x00A0;automatically caps Jobs and Services that exceed initialization error thresholds, and cancels
     those that exceed processing error thresholds.
     </dd><dt class="description">
 </dt><dd 
class="description">MQ Reaper
     <!--l. 284--><p class="noindent" >The Orchestrator&#x00A0;cleans-up unused JobDriver&#x00A0;AMQ permanent queues for Jobs that have completed.
                                                                                                
                                                                                                
     </dd><dt class="description">
 </dt><dd 
class="description">Publication Pruning
     <!--l. 288--><p class="noindent" >The Orchestrator&#x00A0;regularly publishes state for all active entities (Jobs, Reservations, Services). It also publishes
     state for recently completed ones. Pruning removes from regular Orchestrator&#x00A0;publication completed entities
     that have been competed past a time threshold, nominally one minute.
     </dd><dt class="description">
 </dt><dd 
class="description">Node Accounting
     <!--l. 295--><p class="noindent" >This module keeps track of each node&#8217;s state, up or down. Nodes that do not report for a time exceeding a
     threshold, typically a few minutes, are considered down. This information is used for Jobs whose Job Driver
     advanced to the <span 
class="cmtt-10">Completed</span>&#x00A0;state, whereby corresponding Job Processes on nodes that are reported down are
     marked as stopped by the Orchestrator, as opposed to waiting (potentially forever) for the corresponding Agent
     to report. This prevents Jobs from becoming unnecessarily stuck in the completing state.
     </dd></dl>
<!--l. 20--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">16.3.2   </span> <a 
 id="x1-27500016.3.2"></a>Resource Manager&#x00A0;(RM, also known as the Scheduler)</h4>
<!--l. 22--><p class="noindent" >There is one Resource Manager&#x00A0;per DUCC&#x00A0;cluster.
<!--l. 24--><p class="noindent" >The duties of the Resource Manager&#x00A0;are:
     <dl class="description"><dt class="description">
 </dt><dd 
class="description"><span 
class="cmti-10">fairly allocate constrained resources amongst valid user requests over time.</span></dd></dl>
<!--l. 29--><p class="noindent" >The Resource Manager&#x00A0;provides essential functionality for operation of the DUCC&#x00A0;system. It is configurable and tunable. It
is also plug-replaceable.
<!--l. 34--><p class="noindent" >The Resource Manager&#x00A0;both publishes and receive reports. The Resource Manager&#x00A0;receives Orchestrator&#x00A0;publications
comprising Jobs, Reservations, and Services as well as Agent&#x00A0;publications comprising inventory and metrics. The Resource
Manager&#x00A0;publication occurs at regular intervals, each representing at the time of its publication the desired allocation of
resources.
<!--l. 42--><p class="noindent" >The Resource Manager&#x00A0;considers various factors to make assignments, including:
     <dl class="description"><dt class="description">
 </dt><dd 
class="description">supply of available nodes;
     </dd><dt class="description">
 </dt><dd 
class="description">memory size of each available node;
     </dd><dt class="description">
 </dt><dd 
class="description">demand for resource in terms of memory size and class of service comprising Jobs, Reservations and Services;
     </dd><dt class="description">
 </dt><dd 
class="description">the most recent previous assignments and desirability for continuity;</dd></dl>
<!--l. 50--><p class="noindent" >The Orchestrator&#x00A0;is the primary consumer of the Resource Manager&#x00A0;publication which it uses to bring the cluster into
compliance with the allocation assignments.
<!--l. 53--><p class="noindent" >The Resource Manager&#x00A0;adheres to the <span 
class="cmtt-10">IScheduler</span>&#x00A0;interface. Algorithms adhering to this interface are eligible for replacing
the DUCC&#x00A0;supplied one.
                                                                                                
                                                                                                
<!--l. 57--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-27600016.3.2"></a>Job Manager Converter</h5>
<!--l. 59--><p class="noindent" >The Job Manager Converter module receives Orchestrator&#x00A0;publications and updates its internal state with new, changed,
and removed map entries comprising Jobs, Reservations and Services.
<!--l. 63--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-27700016.3.2"></a>Node Stability</h5>
<!--l. 65--><p class="noindent" >The Node Status module evaluates the health of the nodes within the cluster for consideration during resource scheduling.
Any node deemed unhealthy is removed from the collection of available resources until such time as it is once again deemed
healthy.
<!--l. 70--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-27800016.3.2"></a>Node Status</h5>
<!--l. 72--><p class="noindent" >The Node Status module receives Agent&#x00A0;publications and updates its internal state with new, changed, and removed node
status entries.
<!--l. 75--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-27900016.3.2"></a>Resource Manager</h5>
<!--l. 77--><p class="noindent" >The Resource Manager&#x00A0;performs the following:
     <dl class="description"><dt class="description">
 </dt><dd 
class="description">receive resource availability reports from Agents;
     </dd><dt class="description">
 </dt><dd 
class="description">receive resource need requests the Orchestrator;
     </dd><dt class="description">
 </dt><dd 
class="description">employ a scheduling algorithm at discrete time intervals to:
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">consider the resource supply;
         </dd><dt class="description">
      </dt><dd 
class="description">consider the most recent allocation set;
         </dd><dt class="description">
      </dt><dd 
class="description">consider new, changed and removed resource demands;
         </dd><dt class="description">
      </dt><dd 
class="description">assign a resource to a request;
         </dd><dt class="description">
      </dt><dd 
class="description">remove a resource from a request;
         </dd><dt class="description">
      </dt><dd 
class="description">publish current allocation set;</dd></dl>
     </dd></dl>
                                                                                                
                                                                                                
<!--l. 93--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-28000016.3.2"></a>Scheduler</h5>
<!--l. 95--><p class="noindent" >The Scheduler&#x00A0;runs at discrete time intervals. It assembles information about available nodes in the cluster. Each node,
based upon its memory size is partitioned into zero or more <span 
class="cmti-10">DUCC-Shares</span>. Each request (Job, Reservation and Service) is
assessed as to the number of <span 
class="cmti-10">DUCC-Shares</span>&#x00A0;required based upon user-specified memory size. In addition, each request is
assessed with respect to the user-specified class-of-service.
<!--l. 102--><p class="noindent" >The Scheduler&#x00A0;considers the most recent previous allocations along with changes to supply and demand. It then produces a
new allocation set which the Resource Manager&#x00A0;publishes as directions to the Orchestrator.
<!--l. 20--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">16.3.3   </span> <a 
 id="x1-28100016.3.3"></a>Services Manager&#x00A0;(SM)</h4>
<!--l. 22--><p class="noindent" >There is one Services Manager&#x00A0;per DUCC&#x00A0;cluster.
<!--l. 24--><p class="noindent" >The duties of the Services Manager&#x00A0;are:
     <dl class="description"><dt class="description">
 </dt><dd 
class="description"><span 
class="cmti-10">facilitate services definition and persistence;</span>
     </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmti-10">monitor and control services as dependencies on-demand.</span></dd></dl>
<!--l. 29--><p class="noindent" >The Services Manager&#x00A0;provides additional functionality for operation of the DUCC&#x00A0;system. It is configurable and
tunable.
<!--l. 33--><p class="noindent" >Although not essential for the main purpose of the DUCC&#x00A0;system, in practical terms for large systems the Services
Manager&#x00A0;is highly desirable for improved resource utilization. By using shared services, resources are more effectively
employed and work items processing is completed sooner.
<!--l. 39--><p class="noindent" >Some dimensions:
     <ul class="itemize1">
     <li class="itemize">long warm-up time
     <!--l. 45--><p class="noindent" >When the service takes a long time to warm-up, the Job&#x00A0;in progress may have to sit idle for a long time before
     the first work item can be processed until the service upon which it depends has initialized and is ready. If the
     service is already up and ready, this delay can be avoided and the Job&#x00A0;experiences no service delay.
     </li>
     <li class="itemize">large storage use
     <!--l. 54--><p class="noindent" >When the service has a large memory footprint, it can be far more efficient to have multiple Jobs&#x00A0;share the
     service rather than having separate copies for each.
     </li>
     <li class="itemize">short processing time
     <!--l. 60--><p class="noindent" >Related to large storage use, if the time to process a work item is relatively short, again it can be much more
     efficient to share the service amongst multiple Jobs.
     </li>
     <li class="itemize">not used
                                                                                                
                                                                                                
     <!--l. 66--><p class="noindent" >If a service has not been used for a relatively long time, it may be better to shut it down and reclaim the
     resources for use elsewhere, especially on a busy cluster.
     </li></ul>
<!--l. 72--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-28200016.3.3"></a>Ping Driver</h5>
<!--l. 74--><p class="noindent" >This runs the watchdog thread for custom service pingers. It ascertains the liveness and healthiness of each service known to
DUCC.
<!--l. 78--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-28300016.3.3"></a>Service Handler</h5>
<!--l. 80--><p class="noindent" >Carries out Service Manager validated request operations.
<!--l. 82--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-28400016.3.3"></a>Service Manager, API Handler</h5>
<!--l. 84--><p class="noindent" >Receives and validates service request operations:
     <ul class="itemize1">
     <li class="itemize">register
     </li>
     <li class="itemize">unregister
     </li>
     <li class="itemize">start
     </li>
     <li class="itemize">stop
     </li>
     <li class="itemize">query
     </li>
     <li class="itemize">modify</li></ul>
<!--l. 95--><p class="noindent" >The Services Manager&#x00A0;maintains a registry of services. The attributes of these services may include one of more of the
following:
     <dl class="description"><dt class="description">
 </dt><dd 
class="description"><span 
class="cmtt-10">permanent </span>A permanent service is one that is kept up so long as the DUCC&#x00A0;system is running.
     </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmtt-10">on-demand </span>An on-demand service is one that is kept up only during the lifetime of one or more Jobs&#x00A0;that declare
     a dependency on the service
     </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmtt-10">lingering </span>A lingering service is one that continues for some limited time beyond the lifetime of the last dependent
     Job&#x00A0;in anticipation of another Job&#x00A0;arrival in the near future.
                                                                                                
                                                                                                
     </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmtt-10">dynamic </span>A dynamic service is one that automatically expands and contracts in terms of number of instances to
     meet demand.
     </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmtt-10">registered </span>A registered service is one that is pre-defined, whose definition is kept persistently and whose lifecycle
     is managed by DUCC.
     </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmtt-10">custom </span>A custom (unregistered) service is one that is not pre-defined, whose definition is not kept persistently and
     whose lifecycle is not managed by DUCC.</dd></dl>
<!--l. 121--><p class="noindent" >The Services Manager&#x00A0;keeps within its registry information of two types: <span 
class="cmtt-10">service </span>and <span 
class="cmtt-10">meta</span>.
<!--l. 124--><p class="noindent" >Type <span 
class="cmtt-10">service </span>information includes the following attributes:
     <ul class="itemize1">
     <li class="itemize">classpath
     </li>
     <li class="itemize">description
     </li>
     <li class="itemize">environment
     </li>
     <li class="itemize">jvm
     </li>
     <li class="itemize">jvm args
     </li>
     <li class="itemize">log directory
     </li>
     <li class="itemize">deployment descriptor
     </li>
     <li class="itemize">failures limit
     </li>
     <li class="itemize">memory size
     </li>
     <li class="itemize">scheduling class
     </li>
     <li class="itemize">linger time
     </li>
     <li class="itemize">pinger classpath
     </li>
     <li class="itemize">pinger log
     </li>
     <li class="itemize">pinger timeout
     </li>
     <li class="itemize">service endpoint
     </li>
     <li class="itemize">working directory</li></ul>
<!--l. 144--><p class="noindent" >Type <span 
class="cmtt-10">meta </span>information includes the following attributes:
                                                                                                
                                                                                                
     <ul class="itemize1">
     <li class="itemize">autostart
     </li>
     <li class="itemize">endpoint
     </li>
     <li class="itemize">implementors
     </li>
     <li class="itemize">instances (count)
     </li>
     <li class="itemize">identifier (number)
     </li>
     <li class="itemize">ping-active
     </li>
     <li class="itemize">ping-only
     </li>
     <li class="itemize">service-active
     </li>
     <li class="itemize">service-class
     </li>
     <li class="itemize">service-health
     </li>
     <li class="itemize">service-state
     </li>
     <li class="itemize">service-statistics
     </li>
     <li class="itemize">service-type
     </li>
     <li class="itemize">stopped
     </li>
     <li class="itemize">user
     </li>
     <li class="itemize">uuid
     </li>
     <li class="itemize">work-instances (PID list)</li></ul>
<!--l. 20--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">16.3.4   </span> <a 
 id="x1-28500016.3.4"></a>Process Manager(PM)</h4>
<!--l. 22--><p class="noindent" >There is one Process Manager&#x00A0;per DUCC&#x00A0;cluster.
<!--l. 24--><p class="noindent" >The duties of the Process Manager&#x00A0;are:
     <dl class="description"><dt class="description">
 </dt><dd 
class="description"><span 
class="cmti-10">monitor and control processes supporting analytic pipelines distributed over a collection of agent-managed nodes.</span></dd></dl>
                                                                                                
                                                                                                
<!--l. 29--><p class="noindent" >The Process Manager&#x00A0;provides essential functionality for operation of the DUCC&#x00A0;system.
<!--l. 32--><p class="noindent" >The Process Manager&#x00A0;both publishes and receive reports. The Process Manager&#x00A0;receives Orchestrator&#x00A0;publications
comprising Jobs, Reservations, and Services. The Process Manager&#x00A0;distributes two publications at regular intervals.
One is heartbeat information to notify the Orchestrator&#x00A0;and WebServer&#x00A0;that the Process Manager&#x00A0;is alive.
The other is compacted Agent-destined information regarding processes that need to be started, stopped or
modified.
<!--l. 41--><p class="noindent" >The main function of the Process Manager&#x00A0;is to efficiently manage the distributed Agents&#x00A0;each of which manages
processes running locally on its own respective node (machine, computer). The Process Manager&#x00A0;interprets the
Orchestrator&#x00A0;publications and redistributes only the essentials to the collection of distributed Agents&#x00A0;who each
independently act to bring the state of locally deployed processes into compliance.
<!--l. 20--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">16.3.5   </span> <a 
 id="x1-28600016.3.5"></a>Agent</h4>
<!--l. 22--><p class="noindent" >There is one Agent&#x00A0;per&#x00A0;node (machine, computer)&#x00A0;per DUCC&#x00A0;cluster. The Agents&#x00A0;collectively provide essential
functionality for operation of the DUCC&#x00A0;system.
<!--l. 26--><p class="noindent" >The duties of the Agent&#x00A0;are:
     <dl class="description"><dt class="description">
 </dt><dd 
class="description"><span 
class="cmti-10">deploy, monitor and control one or more processes supporting analytic pipelines on one node; and</span>
     </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmti-10">publish inventory and metrics.</span></dd></dl>
<!--l. 31--><p class="noindent" >At the direction of the Process Manager, each Agent&#x00A0;is instructed to manage its assigned <span 
class="cmti-10">DUCC-Shares</span>&#x00A0;by means of Linux
Control Groups, and by injecting into them local process elements comprising Job Drivers, Job Processes, Service Processes,
and Managed Processes.
<!--l. 37--><p class="noindent" >The Agent&#x00A0;is subdivided into several responsibility areas:
     <ul class="itemize1">
     <li class="itemize">Core
     </li>
     <li class="itemize">Config
     </li>
     <li class="itemize">Deploy
     </li>
     <li class="itemize">Event
     </li>
     <li class="itemize">Exceptions
     </li>
     <li class="itemize">Launcher
     </li>
     <li class="itemize">Metrics Collectors
     </li>
     <li class="itemize">Monitor
     </li>
     <li class="itemize">Processors</li></ul>
                                                                                                
                                                                                                
<!--l. 51--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-28700016.3.5"></a>Core</h5>
<!--l. 53--><p class="noindent" >The Agent&#x00A0;publishes information about the state of the node (machine, computer)&#x00A0;it controls. It also receives publications
which it interprets to control processes deployed thereon. It also monitors activity on the node (machine, computer)&#x00A0;and
ensures that only sanctioned processes are running.
<!--l. 60--><p class="noindent" >The Agent&#x00A0;is normally launched at DUCC&#x00A0;system start-up time. However, Agents&#x00A0;may be started/stopped independently
over time.
<!--l. 64--><p class="noindent" >DUCC&#x00A0;is only able to deploy user submitted applications to a node (machine, computer)&#x00A0;upon which there exists an active
Agent.
<!--l. 67--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-28800016.3.5"></a>Config</h5>
     <ul class="itemize1">
     <li class="itemize">Agent Configuration
     <!--l. 72--><p class="noindent" >The Agentconfigures itself according to the <span 
class="cmtt-10">ducc.properties</span>&#x00A0;file. Aspects include:
         <ul class="itemize2">
         <li class="itemize">launcher.thread.pool.size
         </li>
         <li class="itemize">launcher.process.stop.timeout
         </li>
         <li class="itemize">rogue.process.exclusion.filter
         <!--l. 80--><p class="noindent" >Processes in this list are exempt for rogue process detection and termination.
         </li>
         <li class="itemize">rogue.process.user.exclusion.filter
         <!--l. 85--><p class="noindent" >Users in this list are exempt for rogue process detection and termination.
         </li></ul>
     <!--l. 90--><p class="noindent" >The Agentpublishes reports at configurable intervals:
         <ul class="itemize2">
         <li class="itemize">Node Inventory
         <!--l. 95--><p class="noindent" >Node Inventory is a report on the Agent-managed processes on this node.
         </li>
         <li class="itemize">Node Metrics
         <!--l. 100--><p class="noindent" >Node Metrics is a report on the Agent-observed metrics on this node.
         </li></ul>
     </li></ul>
                                                                                                
                                                                                                
<!--l. 107--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-28900016.3.5"></a>Deploy</h5>
     <ul class="itemize1">
     <li class="itemize">Managed UIMA Service
     <!--l. 112--><p class="noindent" >The module is the Agent-managed integration between UIMA-AS&#x00A0;and the user supplied application code which
     is deployed thereto.
     </li></ul>
<!--l. 118--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-29000016.3.5"></a>Event</h5>
     <ul class="itemize1">
     <li class="itemize">Event Listener
     <!--l. 123--><p class="noindent" >The module handles publication events:
         <ul class="itemize2">
         <li class="itemize">Process Start
         <!--l. 127--><p class="noindent" >A notification from the Process Manager&#x00A0;to start a user submitted process constrained to a Resource
         Manager&#x00A0;allocated number of <span 
class="cmti-10">DUCC-Shares</span>.
         </li>
         <li class="itemize">Process Stop
         <!--l. 132--><p class="noindent" >A notification from the Process Manager&#x00A0;to stop a user submitted process.
         </li>
         <li class="itemize">Process Modify
         <!--l. 137--><p class="noindent" >A notification from the Process Manager&#x00A0;to modify a user submitted process.
         </li>
         <li class="itemize">Process Purge
         <!--l. 142--><p class="noindent" >A notification from the Process Manager&#x00A0;to purge a user submitted process.
         </li>
         <li class="itemize">Job State
         <!--l. 147--><p class="noindent" >A notification from the Process Manager&#x00A0;comprising abbreviated state of the DUCC-managed collection
         of entities: Jobs, Reservations&#x00A0;and Services.
         </li></ul>
     </li></ul>
                                                                                                
                                                                                                
<!--l. 155--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-29100016.3.5"></a>Launcher</h5>
<!--l. 157--><p class="noindent" >The modules comprising the Launcher package are tasked with starting user processes on the Agent-managed node (machine,
computer). The modules are:
     <ul class="itemize1">
     <li class="itemize">CGroups Manager
     <!--l. 164--><p class="noindent" >This  module  provides  functionality  to  partition  the  Agent-managed  node  (machine,  computer)&#x00A0;into
     <span 
class="cmti-10">DUCC-Shares</span>, each <span 
class="cmti-10">DUCC-Share</span>&#x00A0;with limits on one or more aspects, including but not limited to memory
     and swap space.
     <!--l. 168--><p class="noindent" >The CGroups Manager essentially starts, maintains, and stops instant virtual machines in correspondence with
     Resource Manager&#x00A0;allocated <span 
class="cmti-10">DUCC-Shares</span>&#x00A0;into which user submitted processes are launched.
     </li>
     <li class="itemize">Command Executor
     <!--l. 174--><p class="noindent" >This module is the base class that provides functionality to launch a user specified process within the Resource
     Manager&#x00A0;allocated <span 
class="cmti-10">DUCC-Share</span>.
     </li>
     <li class="itemize">DUCC&#x00A0;Command Executor
     <!--l. 180--><p class="noindent" >This module launches a user specified process within the Resource Manager&#x00A0;allocated <span 
class="cmti-10">DUCC-Share</span>. The process
     may be constrained by a Linux Control Group&#x00A0;and may be spawned as the submitting user.
     </li>
     <li class="itemize">JVM&#x00A0;Args Parser
     <!--l. 187--><p class="noindent" >The JVM&#x00A0;Args Parser module extracts user specified JVM&#x00A0;arguments for use in building an Agent-launchable
     subprocess comprising the user specified executable code.
     </li>
     <li class="itemize">Launcher
     <!--l. 193--><p class="noindent" >The Managed Process module provides virtual Agent&#x00A0;capability.
     <!--l. 195--><p class="noindent" >This module comprises a method used to launch multiple Agents on the same physical machine. It allows for
     the scale up Agents on a single machine to simulate load. Each Agent instance assumes a given name and IP
     address.
     </li>
     <li class="itemize">Managed Process
     <!--l. 202--><p class="noindent" >The Managed Process module manages a state machine for each Agent-managed user process. The states
     comprise:
         <ul class="itemize2">
         <li class="itemize">Starting
         </li>
         <li class="itemize">Initializing
         </li>
         <li class="itemize">Ready
         </li>
         <li class="itemize">Failed
                                                                                                
                                                                                                
         </li>
         <li class="itemize">Stopped</li></ul>
     </li>
     <li class="itemize">Process Stream Consumer
     <!--l. 215--><p class="noindent" >The Process Stream Consumer module captures and redirects user process output to a log file.
     </li></ul>
<!--l. 220--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-29200016.3.5"></a>Metrics Collectors</h5>
<!--l. 222--><p class="noindent" >The modules comprising the Metrics Collectors package observe, calculate or otherwise gather specific metrics. Metrics
collected are relative to these main categories:
     <ul class="itemize1">
     <li class="itemize">Garbage Collection Statistics
     </li>
     <li class="itemize">Node CPU, Node CPU Usage, Node CPU Utilization
     </li>
     <li class="itemize">Node Load Average
     </li>
     <li class="itemize">Node Memory Info
     </li>
     <li class="itemize">Node Users
     </li>
     <li class="itemize">Process CPU Usage
     </li>
     <li class="itemize">Process Major Faults
     </li>
     <li class="itemize">Process Resident Memory
     </li>
     <li class="itemize">Process Swap Usage</li></ul>
<!--l. 238--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-29300016.3.5"></a>Monitor</h5>
<!--l. 240--><p class="noindent" >The modules comprising the Monitor package observe various states and trigger actions when specific events
occur.
     <ul class="itemize1">
     <li class="itemize">Agent&#x00A0;Monitor
     <!--l. 246--><p class="noindent" >When the Agent&#x00A0;detects problems with the network, broker, or ping functions it terminates all Agent&#x00A0;deployed
     processes.
                                                                                                
                                                                                                
     </li>
     <li class="itemize">Rogue Process Detector
     <!--l. 251--><p class="noindent" >The Agent&#x00A0;detects aliens processes, those not expected for running the OS&#x00A0;or DUCC&#x00A0;or user processes deployed by
     DUCC. According to policy, the Agent&#x00A0;may take one or more actions:
         <ul class="itemize2">
         <li class="itemize">log an <span 
class="cmti-10">alien detected</span>&#x00A0;event
         </li>
         <li class="itemize">send notification to subscribers of alien detection events
         </li>
         <li class="itemize">with root privilege, signal the alien process to terminate</li></ul>
     </li></ul>
<!--l. 262--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-29400016.3.5"></a>Processors</h5>
<!--l. 264--><p class="noindent" >The modules comprising the Processors package assemble information for consideration when carrying out the Agent&#x00A0;duties
as well as for publication to other interested DUCC&#x00A0;daemons. Information collected are relative to these main
categories:
     <ul class="itemize1">
     <li class="itemize">Linux Node Metrics
     </li>
     <li class="itemize">Linux Process Metrics
     </li>
     <li class="itemize">Node Inventory
     </li>
     <li class="itemize">Node Metrics
     </li>
     <li class="itemize">Process Lifecycle
     </li>
     <li class="itemize">Process Metrics</li></ul>
<!--l. 20--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">16.3.6   </span> <a 
 id="x1-29500016.3.6"></a>JobDriver(JD)</h4>
<!--l. 22--><p class="noindent" >There is one JobDriver&#x00A0;per Job.
<!--l. 24--><p class="noindent" >The duties of the JobDriver&#x00A0;are:
     <dl class="description"><dt class="description">
 </dt><dd 
class="description"><span 
class="cmti-10">fetch analytic pipeline work items in correspondence with the user specified degree of parallelness;</span>
     </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmti-10">dispatch work items to distributed analytic pipelines;</span>
     </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmti-10">gather and report on performance statistics and errors;</span>
                                                                                                
                                                                                                
     </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmti-10">retry failed recoverable work items; and</span>
     </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmti-10">guarantee that individual work items are not mistakenly simultaneously processed by more than one analytic pipeline.</span></dd></dl>
<!--l. 29--><p class="noindent" >The JobDriver&#x00A0;comprises a container into which the user specified <span 
class="cmti-10">Collection Reader</span>&#x00A0;is deployed. The JobDriver&#x00A0;interacts
with the user specified <span 
class="cmti-10">Collection Reader</span>&#x00A0;to fetch <span 
class="cmti-10">CASes</span>&#x00A0;(or <span 
class="cmti-10">WorkItems</span>) for processing by a corresponding
pipeline.
<!--l. 35--><p class="noindent" >The JobDriver&#x00A0;is deployed into a Resource Manager&#x00A0;allocated <span 
class="cmti-10">JD-Share</span>&#x00A0;managed by a DUCC&#x00A0;Agent.
<!--l. 38--><p class="noindent" >The JobDriver&#x00A0;is subdivided into several responsibility areas:
     <ul class="itemize1">
     <li class="itemize">Core
     </li>
     <li class="itemize">Client
     </li>
     <li class="itemize">Config
     </li>
     <li class="itemize">Event</li></ul>
<!--l. 47--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-29600016.3.6"></a>Core</h5>
     <ul class="itemize1">
     <li class="itemize">Job Driver
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">The JobDriver&#x00A0;module is the main thread. It setups and executes the JobDriver&#x00A0;runtime environment.
             <ul class="itemize2">
             <li class="itemize">initialize
                <dl class="description"><dt class="description">
             </dt><dd 
class="description">The initialize method sets-up all the machinery to fetch and process <span 
class="cmti-10">CASes</span>.</dd></dl>
             </li>
             <li class="itemize">run
                <dl class="description"><dt class="description">
             </dt><dd 
class="description">The run method manages all the machinery to fetch and process <span 
class="cmti-10">CASes</span>.</dd></dl>
                <ul class="itemize3">
                <li class="itemize">wait for eligibility
                  Do not start queuing <span 
class="cmti-10">WorkItems</span>&#x00A0;until at least one <span 
class="cmti-10">Job Process</span>&#x00A0;has initialized.
                </li>
                <li class="itemize">initialize UIMA-AS&#x00A0;client
                                                                                                
                                                                                                
                  <dl class="description"><dt class="description">
                 </dt><dd 
class="description">Create an instance and one thread client for each corresponding <span 
class="cmti-10">Job Process</span>thread.</dd></dl>
                </li>
                <li class="itemize">queue <span 
class="cmti-10">WorkItems</span>
                  <dl class="description"><dt class="description">
                 </dt><dd 
class="description">While terminate conditions are absent, repeat the process of queuing one work item for each
                  thread, then sleeping for an interval, then rechecking for termination and performing additional
                  queuing.</dd></dl>
                </li></ul>
             </li></ul>
         </dd></dl>
     </li>
     <li class="itemize">Job Driver Component
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">This module initializes the JobDriverfunction, receives and evaluates Orchestrator job mapswith respect to
         continuance or termination of the JobDriver, and triggers publication of JobDriverstatus reports.</dd></dl>
     </li>
     <li class="itemize">Job Driver Terminate Exception
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">This  module  provides  a  means  to  identify  the  exception  and  possible  reason  for  same  when  the
         JobDriver&#x00A0;abnormally terminates.</dd></dl>
     </li>
     <li class="itemize">Synchronized Stats
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">This module provides a method for the JobDriver&#x00A0;to accumulate statistics in a thread safe manner. Per
         <span 
class="cmti-10">WorkItem</span>&#x00A0;statistics are maintained and produced:</dd></dl>
         <ul class="itemize2">
         <li class="itemize">number of <span 
class="cmti-10">WorkItems</span>
         </li>
         <li class="itemize">minimum time to complete a <span 
class="cmti-10">WorkItem</span>
         </li>
         <li class="itemize">maximum time to complete a <span 
class="cmti-10">WorkItem</span>
         </li>
         <li class="itemize">average time to complete a <span 
class="cmti-10">WorkItem</span>
         </li>
         <li class="itemize">standard deviation of time to complete a <span 
class="cmti-10">WorkItem</span></li></ul>
     </li></ul>
<!--l. 115--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-29700016.3.6"></a>Client</h5>
                                                                                                
                                                                                                
     <ul class="itemize1">
     <li class="itemize">Callback State
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">This module tracks <span 
class="cmti-10">WorkItem</span>&#x00A0;queuing state.
         </dd><dt class="description">
      </dt><dd 
class="description">Possible states are:
             <ul class="itemize2">
             <li class="itemize"><span 
class="cmti-10">PendingQueued</span>
             </li>
             <li class="itemize"><span 
class="cmti-10">PendingAssigned</span>
             </li>
             <li class="itemize"><span 
class="cmti-10">NotPending</span></li></ul>
         </dd></dl>
     </li>
     <li class="itemize"><span 
class="cmti-10">CAS</span>&#x00A0;Dispatch Map
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">This module tracks <span 
class="cmti-10">WorkItems</span>. It comprises a map of <span 
class="cmti-10">WorkItems</span>&#x00A0;which includes node and Linux&#x00A0;process
         identity.</dd></dl>
     </li>
     <li class="itemize"><span 
class="cmti-10">CAS</span>&#x00A0;Limbo
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">Manage incomplete <span 
class="cmti-10">WorkItems</span>. This module ensures that <span 
class="cmti-10">WorkItems</span>&#x00A0;are not simultaneously processed by
         multiple UIMA&#x00A0;pipelines. It does not release <span 
class="cmti-10">WorkItems</span>&#x00A0;for retry processing elsewhere until confirmation
         is received that the previous attempt has been terminated.</dd></dl>
     </li>
     <li class="itemize"><span 
class="cmti-10">CAS</span>&#x00A0;Source
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">Manage <span 
class="cmti-10">CASes</span>. Employ the user provided CR&#x00A0;to fetch <span 
class="cmti-10">CASes</span>&#x00A0;as needed to keep the available UIMA&#x00A0;pipelines
         full until all <span 
class="cmti-10">CASes</span>&#x00A0;have been processed. Save and restore <span 
class="cmti-10">CASes</span>&#x00A0;that were pre-empted during periods
         of JP&#x00A0;contraction, for example.</dd></dl>
     </li>
     <li class="itemize"><span 
class="cmti-10">CAS</span>&#x00A0;Tuple
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">Manage <span 
class="cmti-10">CAS</span>&#x00A0;instance with meta-data.
             <ul class="itemize2">
             <li class="itemize">UIMA&#x00A0;<span 
class="cmti-10">CAS</span>&#x00A0;object.
             </li>
             <li class="itemize">DUCC&#x00A0;assigned sequence number.
             </li>
             <li class="itemize"><span 
class="cmti-10">CAS</span>&#x00A0;retry status.
             </li>
             <li class="itemize">Job&#x00A0;identifier.</li></ul>
         </dd></dl>
     </li>
     <li class="itemize">Client Thread Factory
                                                                                                
                                                                                                
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">Produce one UIMA-ASclient thread instance for each <span 
class="cmti-10">CAS</span>&#x00A0;in-progress.</dd></dl>
     </li>
     <li class="itemize">Dymanic Thread Pool Executor
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">Maintain a client-size thread pool for processing <span 
class="cmti-10">CASes</span>. Each thread in the pool is assigned and tracks one
         <span 
class="cmti-10">CAS</span>&#x00A0;sent&#x00A0;out for processing via <span 
class="cmti-10">UIMA-AS sendAndReceiveCAS</span>. Each thread in the pool is re-usable once
         processing for the associated <span 
class="cmti-10">CAS</span>&#x00A0;is completed. The thread pool expands and contracts in correlation
         with the number of Resource Manager&#x00A0;assigned <span 
class="cmti-10">DUCC-Shares</span>.</dd></dl>
     </li>
     <li class="itemize"><span 
class="cmti-10">WorkItem</span>
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">The <span 
class="cmti-10">WorkItem</span>&#x00A0;represents one <span 
class="cmti-10">CAS</span>&#x00A0;to be processed, normally by one of the distributed UIMApipelines.
             <ul class="itemize2">
             <li class="itemize">Manage and track the lifecycle of a <span 
class="cmti-10">WorkItem</span>&#x00A0;steps:
                <ul class="itemize3">
                <li class="itemize">start
                </li>
                <li class="itemize">getCas
                </li>
                <li class="itemize"><span 
class="cmti-10">UIMA-AS sendAndReceiveCAS</span>
                </li>
                <li class="itemize">ended or exception</li></ul>
             </li></ul>
         </dd></dl>
     </li>
     <li class="itemize"><span 
class="cmti-10">WorkItem</span>
         Create a new <span 
class="cmti-10">WorkItem</span>&#x00A0;for given CasTuple. Associate a <span 
class="cmti-10">WorkItem</span>&#x00A0;with a UIMA-AS&#x00A0;client thread.
     </li>
     <li class="itemize"><span 
class="cmti-10">WorkItem</span>&#x00A0;Listener
     </li>
     <li class="itemize">
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">
             <ul class="itemize2">
             <li class="itemize">onBeforeMessageSend
                <dl class="description"><dt class="description">
             </dt><dd 
class="description">Process callback that indicates work item has been placed on MQ queue and is awaiting grab by a
                JP.</dd></dl>
             </li>
             <li class="itemize">onBeforeProcessCAS
                <dl class="description"><dt class="description">
             </dt><dd 
class="description">Process callback that indicates work item has been grabbed from MQ queue and is active in a
                UIMA&#x00A0;pipeline. The associated node and Linux&#x00A0;process identity are provided.</dd></dl>
             </li></ul>
                                                                                                
                                                                                                
         </dd></dl>
     </li></ul>
<!--l. 228--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-29800016.3.6"></a>Config</h5>
<!--l. 230--><p class="noindent" >The JobDriver&#x00A0;publishes reports at configurable intervals:
     <ul class="itemize1">
     <li class="itemize">Job Driver Status Report
     <!--l. 235--><p class="noindent" >Job  Driver  Status  Report  is  a  report  on  the  JobDriver-managed  <span 
class="cmti-10">Collection  Reader</span>&#x00A0;sourced  <span 
class="cmti-10">CASes</span>&#x00A0;(or
     <span 
class="cmti-10">WorkItems</span>).
     <!--l. 238--><p class="noindent" >Information includes <span 
class="cmti-10">WorkItems</span>&#x00A0;total-to-process, number-finished, number-failed, number-retried and other
     status.
     </li></ul>
<!--l. 243--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-29900016.3.6"></a>Event</h5>
<!--l. 245--><p class="noindent" >The module receives and handles publication events:
     <ul class="itemize1">
     <li class="itemize"><span 
class="cmtt-10">OR-map</span>
     <!--l. 249--><p class="noindent" >The  Orchestrator&#x00A0;notification  comprising  the  <span 
class="cmtt-10">OR-map</span>&#x00A0;is  the  &#8221;final  authority&#8221;  on  the  state  of  each  Job,
     Reservation and Service currently or formerly deployed to the DUCC-managed cluster.
     </li></ul>
<!--l. 20--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">16.3.7   </span> <a 
 id="x1-30000016.3.7"></a>User Interface (UI)</h4>
<!--l. 22--><p class="noindent" >There is one User Interface&#x00A0;per DUCC&#x00A0;cluster.
<!--l. 24--><p class="noindent" >The duties of the User Interface&#x00A0;are:
     <dl class="description"><dt class="description">
 </dt><dd 
class="description"><span 
class="cmti-10">permit authorized users to submit, cancel and monitor distributed analytics; and</span>
     </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmti-10">permit authorized users to administer the configuration and runtime aspects of the system.</span></dd></dl>
<!--l. 29--><p class="noindent" >The User Interface&#x00A0;provides essential functionality for operation of the DUCC&#x00A0;system. It comprises:
     <ul class="itemize1">
     <li class="itemize">Application Program Interface (API)
     </li>
     <li class="itemize">Command Line Interface (CLI)</li></ul>
                                                                                                
                                                                                                
<!--l. 37--><p class="noindent" >The User Interface&#x00A0;facilities user and administrator operation of the DUCCsystem. Supported operations in create, retrieve,
update, and modify.
<!--l. 40--><p class="noindent" >The User Interface&#x00A0;is subdivided into several responsibility areas:
     <ul class="itemize1">
     <li class="itemize">API
     </li>
     <li class="itemize">CLI
     </li>
     <li class="itemize">AIO
     </li>
     <li class="itemize">WS
     </li>
     <li class="itemize">JSON</li></ul>
<!--l. 50--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-30100016.3.7"></a>API</h5>
<!--l. 52--><p class="noindent" >Provide application program interface to the DUCC&#x00A0;system comprising the ability to manage Jobs, Reservations&#x00A0; and
Services. See <a 
href="#x1-30200016.3.7">16.3.7<!--tex4ht:ref: CLI --></a> CLI.
<!--l. 56--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-30200016.3.7"></a>CLI</h5>
<!--l. 59--><p class="noindent" >Provide command line interface to the DUCC&#x00A0;system comprising the ability to manage Jobs, Reservations&#x00A0; and
Services.
     <ul class="itemize1">
     <li class="itemize">Submit Job
     </li>
     <li class="itemize">Submit Reservation
     </li>
     <li class="itemize">Submit Service
     </li>
     <li class="itemize">Cancel Job
     </li>
     <li class="itemize">Cancel Reservation
     </li>
     <li class="itemize">Cancel Service
     </li>
     <li class="itemize">Modify Job
     </li>
     <li class="itemize">Modify Reservation
                                                                                                
                                                                                                
     </li>
     <li class="itemize">Modify Service
     </li>
     <li class="itemize">Query Job
     </li>
     <li class="itemize">Query Reservation
     </li>
     <li class="itemize">Query Service</li></ul>
<!--l. 77--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-30300016.3.7"></a>AIO</h5>
<!--l. 79--><p class="noindent" >Provide test and debugging support in preparation for distributed deployment to the DUCC&#x00A0;system.
     <ul class="itemize1">
     <li class="itemize">All-In-One
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">Create a process comprising a user submitted Job.
         </dd><dt class="description">
      </dt><dd 
class="description">Install the equivalent of a JobDriver.
         </dd><dt class="description">
      </dt><dd 
class="description">Install the equivalent of a <span 
class="cmti-10">Job Process</span>.
         </dd><dt class="description">
      </dt><dd 
class="description">Process all work items.</dd></dl>
     </li>
     <li class="itemize">All-In-One Launcher
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">Launch an All-In-One process locally or remotely, according to user specification.</dd></dl>
     </li>
     <li class="itemize">CAS Generator
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">Employ the user specified <span 
class="cmti-10">Collection Reader</span>&#x00A0; to produce <span 
class="cmti-10">WorkItems</span>.</dd></dl>
     </li>
     <li class="itemize">CAS Pipeline
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">Employ the user specified <span 
class="cmti-10">Analysis Engine</span>&#x00A0; to process <span 
class="cmti-10">WorkItems</span>.</dd></dl>
     </li>
     <li class="itemize">DD PArser
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">Parse the user specified Deployment Descriptor.
         </dd><dt class="description">
      </dt><dd 
class="description">Extract the <span 
class="cmti-10">import</span>&#x00A0;name.</dd></dl>
     </li>
     <li class="itemize">Message Handler
                                                                                                
                                                                                                
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">User replaceable message handlers for info, debug, error, trace, etc.</dd></dl>
     </li></ul>
<!--l. 113--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-30400016.3.7"></a>WS</h5>
     <ul class="itemize1">
     <li class="itemize">Query Machines
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">Fetch Machine facts.</dd></dl>
     </li>
     <li class="itemize">Query Reservation Facts
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">Fetch Reservation facts.</dd></dl>
     </li>
     <li class="itemize">Query
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">Fetch node facts.</dd></dl>
     </li></ul>
<!--l. 130--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-30500016.3.7"></a>JSON</h5>
     <ul class="itemize1">
     <li class="itemize">Machine Facts
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">Provide  information  management  with  respect  to  each  node  (machine,  computer)&#x00A0;in  the  DUCC&#x00A0;cluster,
         comprising status, ip, name, reserve, memory, swap, aliens, sharesTotal, sharesInuse, and heartbeat.</dd></dl>
     </li>
     <li class="itemize">Reservation Facts
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">Provide information management with respect to each Reservation&#x00A0;in the DUCC&#x00A0;cluster, comprising id, start,
         end, user, rclass, state, reason, allocation, userProcesses, size, list, and description.</dd></dl>
     </li>
     <li class="itemize">Node Facts
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">Provide  information  management  with  respect  to  each  node  (machine,  computer)&#x00A0;in  the  DUCC&#x00A0;cluster,
         comprising a list of nodes and corresponding PIDs.</dd></dl>
     </li></ul>
                                                                                                
                                                                                                
<!--l. 20--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">16.3.8   </span> <a 
 id="x1-30600016.3.8"></a>WebServer&#x00A0;(WS)</h4>
<!--l. 22--><p class="noindent" >There is one WebServer&#x00A0;per DUCC&#x00A0;cluster.
<!--l. 24--><p class="noindent" >The duties of the WebServer&#x00A0;are:
     <dl class="description"><dt class="description">
 </dt><dd 
class="description"><span 
class="cmti-10">facilitate use of the Command Line Interface;</span>
     </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmti-10">facilitate use of the Application Program Interface; and</span>
     </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmti-10">facilitate use of additional complimentary utilities.</span></dd></dl>
<!--l. 29--><p class="noindent" >The WebServer&#x00A0;provides complimentary functionality for operation of the DUCC&#x00A0;system. It comprises:
     <dl class="description"><dt class="description">
 </dt><dd 
class="description">monitor publications and files produced by:
         <ul class="itemize1">
         <li class="itemize">the OR
         </li>
         <li class="itemize">the RM
         </li>
         <li class="itemize">the SM
         </li>
         <li class="itemize">the PM
         </li>
         <li class="itemize">each Agent</li></ul>
     </dd><dt class="description">
 </dt><dd 
class="description">provide user and administrator web pages to:
         <ul class="itemize1">
         <li class="itemize">permit authorized users to submit, cancel and monitor distributed analytics;
         </li>
         <li class="itemize">login and logout
         </li>
         <li class="itemize">monitor and control Jobs
         </li>
         <li class="itemize">monitor and control Services
         </li>
         <li class="itemize">monitor and control Reservations
         </li>
         <li class="itemize">monitor and control DUCC&#x00A0;Administration
         </li>
         <li class="itemize">monitor and control DUCC&#x00A0;Classes
         </li>
         <li class="itemize">monitor and control DUCC&#x00A0;Daemons
                                                                                                
                                                                                                
         </li>
         <li class="itemize">monitor and control DUCC&#x00A0;nodes (machines, computers)
         </li>
         <li class="itemize">display help
         </li>
         <li class="itemize">display manuals
         </li>
         <li class="itemize">control preferences
         </li>
         <li class="itemize">perform queries and filter results</li></ul>
     </dd><dt class="description">
 </dt><dd 
class="description">provide runtime functionality to:
         <ul class="itemize1">
         <li class="itemize">automatically cancel Jobs, Reservationsand Servicesbased upon client inactivity;
         </li>
         <li class="itemize">manage user authentication, sessions, and cookies
         </li>
         <li class="itemize">provide user customizable views
         </li>
         <li class="itemize">provide one-click access to deployed JVMs via jConsole</li></ul>
     </dd></dl>
<!--l. 67--><p class="noindent" >The WebServer&#x00A0;is subdivided into several responsibility areas:
     <ul class="itemize1">
     <li class="itemize">ws
     </li>
     <li class="itemize">config
     </li>
     <li class="itemize">event
     </li>
     <li class="itemize">jConsole
     </li>
     <li class="itemize">registry
     </li>
     <li class="itemize">server
     </li>
     <li class="itemize">types
     </li>
     <li class="itemize">utils
     </li>
     <li class="itemize">root</li></ul>
                                                                                                
                                                                                                
<!--l. 81--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-30700016.3.8"></a>ws</h5>
     <ul class="itemize1">
     <li class="itemize">Boot
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">Initialize cache of Jobs, Reservation and Services from checkpoint and historical data repositories.</dd></dl>
     </li>
     <li class="itemize">Daemons Data
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">Track DUCC daemons: status, name, boot time, host name, host ip, PID, publication size and max, heartbeat
         last and max, and JConsole URL.</dd></dl>
     </li>
     <li class="itemize">Ducc Data
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">Track Jobs, Reservation and Services from Orchestrator&#x00A0;publications.</dd></dl>
     </li>
     <li class="itemize">Machines Data
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">Track machines: status, machine name, machine IP, reserve size, memory size, alied PIDs, DUCC shares total
         and inuse, heartbeat last</dd></dl>
     </li></ul>
<!--l. 102--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-30800016.3.8"></a>config</h5>
<!--l. 104--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-30900016.3.8"></a>event</h5>
<!--l. 106--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-31000016.3.8"></a>jConsole</h5>
<!--l. 108--><p class="noindent" >JConsoleWrapper provides the facility to one-click on a DUCC&#x00A0;WebServerpage and be taken to the JConsole for the
corresponding process.
<!--l. 111--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-31100016.3.8"></a>registry</h5>
<!--l. 113--><p class="noindent" >Manage user and administrator access to the Services Registry, comprising service and meta data.
                                                                                                
                                                                                                
<h5 class="subsubsectionHead"><a 
 id="x1-31200016.3.8"></a>server</h5>
     <ul class="itemize1">
     <li class="itemize">As User Employ <span 
class="cmti-10">setuid</span>&#x00A0;program to act on behalf of the user as the user, such as for writing log files.
     </li>
     <li class="itemize">Cookies
     </li>
     <li class="itemize">Handler
     </li>
     <li class="itemize">Json Format
     </li>
     <li class="itemize">Classic Format
     </li>
     <li class="itemize">Web Monitor
     </li>
     <li class="itemize">Web Properties
     </li>
     <li class="itemize">Web Server
     </li>
     <li class="itemize">Web Sessions Manage user sessions with the WebServer&#x00A0;allowing privileged actions in the role of a user or an
     administrator. Provide login and logout facilities.</li></ul>
<!--l. 133--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-31300016.3.8"></a>types</h5>
<!--l. 135--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-31400016.3.8"></a>util</h5>
<!--l. 137--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x1-31500016.3.8"></a>root</h5>
<!--l. 240--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">16.4   </span> <a 
 id="x1-31600016.4"></a>Interfaces</h3>
<!--l. 242--><p class="noindent" >Interfaces description.
                                                                                                
                                                                                                
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;17</span><br /><a 
 id="x1-31700017"></a>Runtime</h2>
<h3 class="sectionHead"><span class="titlemark">17.1   </span> <a 
 id="x1-31800017.1"></a>State Machines</h3>
<!--l. 248--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">17.1.1   </span> <a 
 id="x1-31900017.1.1"></a>Job State Machine</h4>
<div class="table">
                                                                                                
                                                                                                
<!--l. 250--><p class="noindent" ><a 
 id="x1-319001r1"></a><hr class="float"><div class="float" 
>
                                                                                                
                                                                                                
 <div class="caption" 
><span class="id">Table&#x00A0;17.1: </span><span  
class="content">Job State Machine</span></div><!--tex4ht:label?: x1-319001r1 -->
<div class="tabular"> <table id="TBL-2" class="tabular" 
cellspacing="0" cellpadding="0"  
><colgroup id="TBL-2-1g"><col 
id="TBL-2-1"><col 
id="TBL-2-2"><col 
id="TBL-2-3"><col 
id="TBL-2-4"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-2-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-1-1"  
class="td11">Id</td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-1-2"  
class="td11">Name                    </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-1-3"  
class="td11">Next  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-1-4"  
class="td11">Description                                                                               </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-2-1"  
class="td11">1  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-2-2"  
class="td11">Received                </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-2-3"  
class="td11">2, 7   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-2-4"  
class="td11">Job has been vetted, persisted, and assigned unique Id                      </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-3-1"  
class="td11">2  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-3-2"  
class="td11">WaitingForDriver     </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-3-3"  
class="td11">3, 4, 7</td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-3-4"  
class="td11">Process Manager is launching Job Driver                                        </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-4-1"  
class="td11">3  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-4-2"  
class="td11">WaitingForServices  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-4-3"  
class="td11">4, 7   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-4-4"  
class="td11">Service Manager is checking/starting service dependencies for Job       </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-5-1"  
class="td11">4  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-5-2"  
class="td11">WaitingForResources</td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-5-3"  
class="td11">5, 7   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-5-4"  
class="td11">Scheduler is assigning resources to Job                                           </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-6-1"  
class="td11">5  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-6-2"  
class="td11">Initializing              </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-6-3"  
class="td11">6, 7   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-6-4"  
class="td11">Process Agents are initializing pipelines                                         </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-7-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-7-1"  
class="td11">6  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-7-2"  
class="td11">Running                </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-7-3"  
class="td11">7       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-7-4"  
class="td11">At least one Process Agent has reported process initialization complete</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-8-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-8-1"  
class="td11">7  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-8-2"  
class="td11">Completing            </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-8-3"  
class="td11">8       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-8-4"  
class="td11">Job processing is completing                                                        </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-9-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-9-1"  
class="td11">8  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-9-2"  
class="td11">Completed             </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-9-3"  
class="td11">     </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-9-4"  
class="td11">Job processing is completed                                                         </td></tr></table>
</div>
                                                                                                
                                                                                                
</div><hr class="endfloat" />
</div>
<h4 class="subsectionHead"><span class="titlemark">17.1.2   </span> <a 
 id="x1-32000017.1.2"></a>Service State Machine</h4>
<div class="table">
                                                                                                
                                                                                                
<!--l. 268--><p class="noindent" ><a 
 id="x1-320001r2"></a><hr class="float"><div class="float" 
>
                                                                                                
                                                                                                
 <div class="caption" 
><span class="id">Table&#x00A0;17.2: </span><span  
class="content">Service State Machine</span></div><!--tex4ht:label?: x1-320001r2 -->
<div class="tabular"> <table id="TBL-3" class="tabular" 
cellspacing="0" cellpadding="0"  
><colgroup id="TBL-3-1g"><col 
id="TBL-3-1"><col 
id="TBL-3-2"><col 
id="TBL-3-3"><col 
id="TBL-3-4"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-3-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-1-1"  
class="td11">Id</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-1-2"  
class="td11">Name                    </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-1-3"  
class="td11">Next  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-1-4"  
class="td11">Description                                                                               </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-2-1"  
class="td11">1  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-2-2"  
class="td11">Received                </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-2-3"  
class="td11">2, 3, 6</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-2-4"  
class="td11">Service has been vetted, persisted, and assigned unique Id                 </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-3-1"  
class="td11">2  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-3-2"  
class="td11">WaitingForServices  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-3-3"  
class="td11">3, 6   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-3-4"  
class="td11">Service Manager is checking/starting service dependencies for Service  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-4-1"  
class="td11">3  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-4-2"  
class="td11">WaitingForResources</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-4-3"  
class="td11">4, 6   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-4-4"  
class="td11">Scheduler is assigning resources to Service                                      </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-5-1"  
class="td11">4  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-5-2"  
class="td11">Initializing              </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-5-3"  
class="td11">5, 6   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-5-4"  
class="td11">Process Agents are initializing pipelines                                         </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-6-1"  
class="td11">5  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-6-2"  
class="td11">Running                </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-6-3"  
class="td11">6       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-6-4"  
class="td11">At least one Process Agent has reported process initialization complete</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-7-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-7-1"  
class="td11">6  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-7-2"  
class="td11">Completing            </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-7-3"  
class="td11">7       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-7-4"  
class="td11">Service processing is completing                                                    </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-8-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-8-1"  
class="td11">7  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-8-2"  
class="td11">Completed             </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-8-3"  
class="td11">     </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-8-4"  
class="td11">Service processing is completed                                                     </td></tr></table>
</div>
                                                                                                
                                                                                                
</div><hr class="endfloat" />
</div>
<h4 class="subsectionHead"><span class="titlemark">17.1.3   </span> <a 
 id="x1-32100017.1.3"></a>Reservation State Machines</h4>
<div class="table">
                                                                                                
                                                                                                
<!--l. 285--><p class="noindent" ><a 
 id="x1-321001r3"></a><hr class="float"><div class="float" 
>
                                                                                                
                                                                                                
 <div class="caption" 
><span class="id">Table&#x00A0;17.3: </span><span  
class="content">Unmanaged Reservation State Machine</span></div><!--tex4ht:label?: x1-321001r3 -->
<div class="tabular"> <table id="TBL-4" class="tabular" 
cellspacing="0" cellpadding="0"  
><colgroup id="TBL-4-1g"><col 
id="TBL-4-1"><col 
id="TBL-4-2"><col 
id="TBL-4-3"><col 
id="TBL-4-4"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-4-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-4-1-1"  
class="td11">Id</td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-1-2"  
class="td11">Name       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-1-3"  
class="td11">Next</td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-1-4"  
class="td11">Description                                                                   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-4-2-1"  
class="td11">1  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-2-2"  
class="td11">Received   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-2-3"  
class="td11">2, 3  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-2-4"  
class="td11">Reservation has been vetted, persisted, and assigned unique Id</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-4-3-1"  
class="td11">2  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-3-2"  
class="td11">Assigned   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-3-3"  
class="td11">3     </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-3-4"  
class="td11"><span 
class="cmti-10">DUCC-Shares</span>&#x00A0;are assigned                                              </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-4-4-1"  
class="td11">3  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-4-2"  
class="td11">Completed</td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-4-3"  
class="td11">    </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-4-4"  
class="td11"><span 
class="cmti-10">DUCC-Shares</span>&#x00A0;not assigned                                              </td></tr></table>
</div>
                                                                                                
                                                                                                
</div><hr class="endfloat" />
</div>
<div class="table">
                                                                                                
                                                                                                
<!--l. 296--><p class="noindent" ><a 
 id="x1-321002r4"></a><hr class="float"><div class="float" 
>
                                                                                                
                                                                                                
 <div class="caption" 
><span class="id">Table&#x00A0;17.4: </span><span  
class="content">Managed Reservation State Machine</span></div><!--tex4ht:label?: x1-321002r4 -->
<div class="tabular"> <table id="TBL-5" class="tabular" 
cellspacing="0" cellpadding="0"  
><colgroup id="TBL-5-1g"><col 
id="TBL-5-1"><col 
id="TBL-5-2"><col 
id="TBL-5-3"><col 
id="TBL-5-4"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-5-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-5-1-1"  
class="td11">Id</td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-1-2"  
class="td11">Name                    </td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-1-3"  
class="td11">Next  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-1-4"  
class="td11">Description                                                                                  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-5-2-1"  
class="td11">1  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-2-2"  
class="td11">Received                </td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-2-3"  
class="td11">2, 3, 5</td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-2-4"  
class="td11">Reservation has been vetted, persisted, and assigned unique Id               </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-5-3-1"  
class="td11">2  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-3-2"  
class="td11">WaitingForServices  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-3-3"  
class="td11">3, 5   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-3-4"  
class="td11">Service Manager is checking/starting service dependencies for Reservation</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-5-4-1"  
class="td11">3  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-4-2"  
class="td11">WaitingForResources</td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-4-3"  
class="td11">4, 5   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-4-4"  
class="td11">Scheduler is assigning resources to Reservation                                    </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-5-5-1"  
class="td11">4  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-5-2"  
class="td11">Running                </td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-5-3"  
class="td11">5       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-5-4"  
class="td11">Process Agent has reported program launched                                     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-5-6-1"  
class="td11">5  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-6-2"  
class="td11">Completing            </td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-6-3"  
class="td11">6       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-6-4"  
class="td11">Reservation processing is completing                                                 </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-7-"><td  style="white-space:nowrap; text-align:left;" id="TBL-5-7-1"  
class="td11">6  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-7-2"  
class="td11">Completed             </td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-7-3"  
class="td11">     </td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-7-4"  
class="td11">Reservation processing is completed                                                  </td></tr></table>
</div>
                                                                                                
                                                                                                
</div><hr class="endfloat" />
</div>
<h3 class="sectionHead"><span class="titlemark">17.2   </span> <a 
 id="x1-32200017.2"></a>Dependencies</h3>
<!--l. 312--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">17.3   </span> <a 
 id="x1-32300017.3"></a>Scheduling</h3>
<!--l. 314--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">17.4   </span> <a 
 id="x1-32400017.4"></a>Monitoring and Control</h3>
<!--l. 316--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">17.4.1   </span> <a 
 id="x1-32500017.4.1"></a>Automatic</h4>
<!--l. 318--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">17.4.2   </span> <a 
 id="x1-32600017.4.2"></a>Manual</h4>
<!--l. 320--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">17.5   </span> <a 
 id="x1-32700017.5"></a>Logging</h3>
<!--l. 322--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">17.5.1   </span> <a 
 id="x1-32800017.5.1"></a>System</h4>
<!--l. 324--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">17.5.2   </span> <a 
 id="x1-32900017.5.2"></a>User</h4>
                                                                                                
                                                                                                
<!--l. 326--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">17.6   </span> <a 
 id="x1-33000017.6"></a>Recovery</h3>
<!--l. 328--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">17.6.1   </span> <a 
 id="x1-33100017.6.1"></a>System</h4>
<!--l. 330--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">17.6.2   </span> <a 
 id="x1-33200017.6.2"></a>User</h4>
 
</body></html> 

                                                                                                


