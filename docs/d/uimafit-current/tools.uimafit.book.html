<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="author" content="Apache UIMA™ Development Community">
<title>Apache uimaFIT™</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Apache uimaFIT™</h1>
<div class="details">
<span id="author" class="author">Apache UIMA™ Development Community</span><br>
<span id="revnumber">version 3.4.0</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">User Guide</div>
<ul class="sectlevel1">
<li><a href="#_ugr.tools.uimafit.introduction">Introduction</a>
<ul class="sectlevel2">
<li><a href="#_simplify_component_implementation">Simplify Component Implementation</a></li>
<li><a href="#_simplify_component_instantiation">Simplify Component Instantiation</a>
<ul class="sectlevel3">
<li><a href="#_from_a_class">From a class</a></li>
<li><a href="#_from_an_xml_descriptor">From an XML descriptor</a></li>
</ul>
</li>
<li><a href="#_is_this_cheating">Is this cheating?</a></li>
<li><a href="#_conclusion">Conclusion</a></li>
</ul>
</li>
<li><a href="#_ugr.tools.uimafit.gettingstarted">Getting Started</a>
<ul class="sectlevel2">
<li><a href="#_adding_uimafit_to_your_project">Adding uimaFIT to your project</a>
<ul class="sectlevel3">
<li><a href="#_maven_users">Maven users</a></li>
<li><a href="#_non_maven_users">Non-Maven users</a></li>
</ul>
</li>
<li><a href="#_a_simple_analysis_engine_implementation">A simple analysis engine implementation</a></li>
<li><a href="#_running_the_analysis_engine">Running the analysis engine</a></li>
<li><a href="#_generate_a_descriptor_file">Generate a descriptor file</a></li>
</ul>
</li>
<li><a href="#_ugr.tools.uimafit.pipelines">Pipelines</a>
<ul class="sectlevel2">
<li><a href="#_examples">Examples</a></li>
<li><a href="#_tips_tricks">Tips &amp; Tricks</a></li>
</ul>
</li>
<li><a href="#_ugr.tools.uimafit.validation">Validating CASes</a>
<ul class="sectlevel2">
<li><a href="#_example_use_case">Example use case</a></li>
<li><a href="#_defining_a_validation_check">Defining a validation check</a></li>
<li><a href="#_registering_the_check_for_auto_detection">Registering the check for auto-detection</a></li>
<li><a href="#_validating_a_cas">Validating a CAS</a></li>
</ul>
</li>
<li><a href="#_ugr.tools.uimafit.experiments">Running Experiments</a></li>
<li><a href="#_ugr.tools.uimafit.casutil">CAS Utilities</a>
<ul class="sectlevel2">
<li><a href="#_access_methods">Access methods</a></li>
</ul>
</li>
<li><a href="#_ugr.tools.uimafit.configurationparameters">Configuration Parameters</a></li>
<li><a href="#_ugr.tools.uimafit.externalresources">External Resources</a>
<ul class="sectlevel2">
<li><a href="#_resource_injection">Resource injection</a>
<ul class="sectlevel3">
<li><a href="#_regular_uima_components">Regular UIMA components</a></li>
<li><a href="#_uimafit_aware_components">uimaFIT-aware components</a></li>
<li><a href="#_resources_extending_resource_implbase">Resources extending Resource_ImplBase</a></li>
<li><a href="#_resources_implementing_sharedresourceobject">Resources implementing SharedResourceObject</a></li>
<li><a href="#_note_on_injecting_resources_into_resources">Note on injecting resources into resources</a></li>
</ul>
</li>
<li><a href="#_resource_locators">Resource locators</a></li>
</ul>
</li>
<li><a href="#_ugr.tools.uimafit.typesystem">Type System Detection</a>
<ul class="sectlevel2">
<li><a href="#_making_types_auto_detectable">Making types auto-detectable</a>
<ul class="sectlevel3">
<li><a href="#_using_the_java_service_provide_interface">Using the Java Service Provide Interface</a></li>
<li><a href="#_legacy_approach">Legacy approach</a></li>
</ul>
</li>
<li><a href="#_making_index_definitions_and_type_priorities_auto_detectable">Making index definitions and type priorities auto-detectable</a></li>
<li><a href="#_using_type_auto_detection">Using type auto-detection</a></li>
<li><a href="#_multiple_meta_inforg_apache_uima_fittypes_txt_files">Multiple META-INF/org.apache.uima.fit/types.txt files</a></li>
<li><a href="#_performance_note_and_caching">Performance note and caching</a></li>
<li><a href="#_potential_problems">Potential problems</a>
<ul class="sectlevel3">
<li><a href="#_m2eclipse_fails_to_copy_descriptors_to_targetclasses">m2eclipse fails to copy descriptors to target/classes</a></li>
<li><a href="#_class_version_conflicts">Class version conflicts</a></li>
<li><a href="#_classes_and_resources_in_the_default_package">Classes and resources in the default package</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_ugr.tools.uimafit.packaging">Building an executable JAR</a></li>
<li><a href="#_tools.uimafit.maven">uimaFIT Maven Plugin</a>
<ul class="sectlevel2">
<li><a href="#_enhance_goal">enhance goal</a></li>
<li><a href="#_generate_goal">generate goal</a></li>
</ul>
</li>
<li><a href="#_ugr.tools.uimafit.migration">Migration Guide</a>
<ul class="sectlevel2">
<li><a href="#_version_3_0_x_to_3_1_x">Version 3.0.x to 3.1.x</a></li>
<li><a href="#_version_2_x_to_3_x">Version 2.x to 3.x</a></li>
<li><a href="#_version_2_3_0_to_2_4_0">Version 2.3.0 to 2.4.0</a></li>
<li><a href="#_version_2_2_0_to_2_3_0">Version 2.2.0 to 2.3.0</a></li>
<li><a href="#_version_2_1_0_to_2_2_0">Version 2.1.0 to 2.2.0</a></li>
<li><a href="#_version_2_0_0_to_2_1_0">Version 2.0.0 to 2.1.0</a></li>
<li><a href="#_version_1_4_0_to_2_0_0">Version 1.4.0 to 2.0.0</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The document is a manual for users of uimaFIT, a friendly API to the Apache UIMA framework.</p>
</div>
<h4 id="_license_and_disclaimer" class="discrete">License and Disclaimer</h4>
<div class="paragraph">
<p>The ASF licenses this documentation to you under the Apache License, Version 2.0 (the "License");
you may not use this documentation except in compliance with the License.  You may obtain a copy of
the License at</p>
</div>
<div class="paragraph text-center">
<p><a href="http://www.apache.org/licenses/LICENSE-2.0" class="bare">http://www.apache.org/licenses/LICENSE-2.0</a></p>
</div>
<div class="paragraph">
<p>Unless required by applicable law or agreed to in writing, this documentation and its contents are
distributed under the License on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
either express or implied.  See the License for the specific language governing permissions and
limitations under the License.</p>
</div>
<h4 id="_trademarks" class="discrete">Trademarks</h4>
<div class="paragraph">
<p>All terms mentioned in the text that are known to be trademarks or service marks have been
appropriately capitalized.  Use of such terms in this book should not be regarded as affecting the
validity of the the trademark or service mark.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ugr.tools.uimafit.introduction"><a class="anchor" href="#_ugr.tools.uimafit.introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While uimaFIT provides many features for a UIMA developer, there are two overarching themes that most features fall under.
These two sides of uimaFIT are,while complementary, largely independent of each other.
One of the beauties of uimaFIT is that a developer that uses one side of uimaFIT extensively is not required to use the other side at all.</p>
</div>
<div class="sect2">
<h3 id="_simplify_component_implementation"><a class="anchor" href="#_simplify_component_implementation"></a>Simplify Component Implementation</h3>
<div class="paragraph">
<p>The first broad theme of uimaFIT provides features that <em>simplify component
        implementation</em>.
Our favorite example of this is the <code class="class">@ConfigurationParameter</code> annotation which allows you to annotate a member variable as a configuration parameter.
This annotation in combination with the method <code class="method">ConfigurationParameterInitializer.initialize()</code> completely automates the process of initializing member variables with values from the <code class="interface">UimaContext</code> passed into your analysis engine&#8217;s initialize method.
Similarly, the annotation <code class="class">@ExternalResource</code> annotation in combination with the method <code class="method">ExternalResourceInitializer.initialize()</code> completely automates the binding of an external resource as defined in the <code class="interface">UimaContext</code> to a member variable.
Dispensing with manually writing the code that performs these two tasks reduces effort, eliminates verbose and potentially buggy boiler-plate code, and makes implementing a UIMA component more enjoyable.
Consider, for example, a member variable that is of type <code class="class">Locale</code>.
With uimaFIT you can simply annotate the member variable with <code class="class">@ConfigurationParameter</code> and have your initialize method automatically initialize the variable correctly with a string value in the <code class="interface">UimaContext</code> such as <code>en_US</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_simplify_component_instantiation"><a class="anchor" href="#_simplify_component_instantiation"></a>Simplify Component Instantiation</h3>
<div class="paragraph">
<p>The second broad theme of uimaFIT provides features that <em>simplify component
        instantiation</em>.
Working with UIMA, have you ever said to yourself &#8220;but I
        just want to tag some text!?&#8221; What does it take to &#8220;just tag some text?&#8221; Here&#8217;s a list of things you must do with the traditional approach:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>wrap your tagger as a UIMA analysis engine</p>
</li>
<li>
<p>write a descriptor file for your analysis engine</p>
</li>
<li>
<p>write a CAS consumer that produces the desired output</p>
</li>
<li>
<p>write another descriptor file for the CAS consumer</p>
</li>
<li>
<p>write a descriptor file for a collection reader</p>
</li>
<li>
<p>write a descriptor file that describes a pipeline</p>
</li>
<li>
<p>invoke the Collection Processing Manager with your pipeline descriptor file</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_from_a_class"><a class="anchor" href="#_from_a_class"></a>From a class</h4>
<div class="paragraph">
<p>Each of these steps has its own pitfalls and can be rather time consuming.
This is a rather unsatisfying answer to our simple desire to just tag some text.
With uimaFIT you can literally eliminate all of these steps.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s a simple snippet of Java code that illustrates &#8220;tagging some text&#8221; with uimaFIT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">import static org.apache.uima.fit.factory.JCasFactory.createJCas;
import static org.apache.uima.fit.pipeline.SimplePipeline.runPipeline;
import static
 org.apache.uima.fit.factory.AnalysisEngineFactory.createEngineDescription;

JCas jCas = createJCas();

jCas.setDocumentText("some text");

runPipeline(jCas,
    createEngineDescription(MyTokenizer.class),
    createEngineDescription(MyTagger.class));

for (Token token : iterate(jCas, Token.class)){
    System.out.println(token.getTag());
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code uses several static method imports for brevity.
And while the terseness of this code won&#8217;t make a Python programmer blush - it is certainly much easier than the seven steps outlined above!</p>
</div>
</div>
<div class="sect3">
<h4 id="_from_an_xml_descriptor"><a class="anchor" href="#_from_an_xml_descriptor"></a>From an XML descriptor</h4>
<div class="paragraph">
<p>uimaFIT provides mechanisms to instantiate and run UIMA components programmatically with or without descriptor files.
For example, if you have a descriptor file for your analysis engine defined by <code class="class">MyTagger</code> (as shown above), then you can instead instantiate the analysis engine with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">AnalysisEngineDescription tagger = createEngineDescription(
    "mypackage.MyTagger");</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will find the descriptor file <em class="path">mypackage/MyTagger.xml</em> by name.
Similarly, you can find a descriptor file by location with <code class="method">createEngineDescriptionFromPath()</code>.
However, if you want to dispense with XML descriptor files altogether (and you probably do), you can use the method <code class="method">createEngineDescription()</code> as shown above.
One of the driving motivations for creating the second side of uimaFIT is our frustration with descriptor files and our desire to eliminate them.
Descriptor files are difficult to maintain because they are generally tightly coupled with java code, they decay without warning, they are wearisome to test, and they proliferate, among other reasons.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_is_this_cheating"><a class="anchor" href="#_is_this_cheating"></a>Is this cheating?</h3>
<div class="paragraph">
<p>One question that is often raised by new uimaFIT users is whether or not it breaks the <em>UIMA way</em>.
That is, does adopting uimaFIT lead me down a path of creating UIMA components and systems that are incompatible with the traditional UIMA approach? The answer to this question is <em>no</em>.
For starters, uimaFIT does not skirt the UIMA mechanism of describing components - it only skips the XML part of it.
For example, when the method <code class="method">createEngineDescription()</code> is called (as shown above) an <code class="interface">AnalysisEngineDescription</code> is created for the analysis engine.
This is the same object type that is instantiated when a descriptor file is used.
So, instead of parsing XML to instantiate an analysis engine description from XML, uimaFIT uses a factory method to instantiate it from method parameters.
One of the happy benefits of this approach is that for a given <code class="interface">AnalysisEnginedDescription</code> you can generate an XML descriptor file using <code class="method">AnalysisEngineDescription.toXML()</code>.
So, uimaFIT actually provides a very simple and direct path for <em>generating</em> XML descriptor files rather than manually creating and maintaining them!</p>
</div>
<div class="paragraph">
<p>It is also useful to clarify that if you only want to use one side or the other of uimaFIT, then you are free to do so.
This is possible precisely because uimaFIT does not workaround UIMA&#8217;s mechanisms for describing components but rather uses them directly.
For example, if the only thing you want to use in uimaFIT is the <code class="class">@ConfigurationParameter</code>, then you can do so without worrying about what effect this will have on your descriptor files.
This is because your analysis engine will be initialized with exactly the same <code class="interface">UimaContext</code> regardless of whether you instantiate your analysis engine in the <em>UIMA way</em> or use one of uimaFIT&#8217;s factory methods.
Similarly, a UIMA component does not need to be annotated with <code class="class">@ConfiguratioParameter</code> for you to make use of the <code class="method">createEngineDescription()</code> method.
This is because when you pass configuration parameter values in to the <code class="method">createEngineDescription()</code> method, they are added to an <code class="interface">AnalysisEngineDescription</code> which is used by UIMA to populate a <code class="interface">UimaContext</code> - just as it would if you used a descriptor file.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conclusion"><a class="anchor" href="#_conclusion"></a>Conclusion</h3>
<div class="paragraph">
<p>Because uimaFIT can be used to simplify component implementation and instantiation it is easy to assume that you can&#8217;t do one without the other.
This page has demonstrated that while these two sides of uimaFIT complement each other, they are not coupled together and each can be effectively used without the other.
Similarly, by understanding how uimaFIT uses the UIMA component description mechanisms directly, one can be assured that uimaFIT enables UIMA development that is compatible and consistent with the UIMA standard and APIs.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ugr.tools.uimafit.gettingstarted"><a class="anchor" href="#_ugr.tools.uimafit.gettingstarted"></a>Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This quick start tutorial demonstrates how to use uimaFIT to define and set a configuration parameter in an analysis engine, run it, and generate a descriptor file for it.
The complete code for this example can be found in the <em>uimaFIT-examples</em> module.</p>
</div>
<div class="sect2">
<h3 id="_adding_uimafit_to_your_project"><a class="anchor" href="#_adding_uimafit_to_your_project"></a>Adding uimaFIT to your project</h3>
<div class="paragraph">
<p>The following instructions describe how to add uimaFIT to your project&#8217;s classpath.</p>
</div>
<div class="sect3">
<h4 id="_maven_users"><a class="anchor" href="#_maven_users"></a>Maven users</h4>
<div class="paragraph">
<p>If you use Maven, then uimaFIT can be added to your project by simply adding uimaFIT as a project dependency by adding the following snippet of XML to your pom.xml file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.uima&lt;/groupId&gt;
  &lt;artifactId&gt;uimafit-core&lt;/artifactId&gt;
  &lt;version&gt;3.4.0&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>uimaFIT distributions are hosted by Maven Central and so no repository needs to be added to your pom.xml file.</p>
</div>
</div>
<div class="sect3">
<h4 id="_non_maven_users"><a class="anchor" href="#_non_maven_users"></a>Non-Maven users</h4>
<div class="paragraph">
<p>If you do not build with Maven, then download uimaFIT from the <a href="http://uima.apache.org/downloads.cgi">Apache UIMA downloads page</a>.
The file name should be uimafit&#8212;&#8203;bin.zip.
Download and unpack this file.
The contents of the resulting upacked directory will contain a directory called <em class="path">lib</em>.
Add all of the files in this directory to your classpath.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_a_simple_analysis_engine_implementation"><a class="anchor" href="#_a_simple_analysis_engine_implementation"></a>A simple analysis engine implementation</h3>
<div class="paragraph">
<p>Here is the complete analysis engine implementation for this example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class GetStartedQuickAE
    extends org.apache.uima.fit.component.JCasAnnotator_ImplBase {

  public static final String PARAM_STRING = "stringParam";
  @ConfigurationParameter(name = PARAM_STRING)
  private String stringParam;

  @Override
  public void process(JCas jCas) throws AnalysisEngineProcessException {
    System.out.println("Hello world!  Say 'hi' to " + stringParam);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first thing to note is that the member variable <code class="var">stringParam</code> is annotated with <code class="class">@ConfigurationParameter</code> which tells uimaFIT that this is an analysis engine configuration parameter.
It is best practice to create a public constant for the parameter name, here <code>PARAM_STRING</code> The second thing to note is that we extend uimaFIT&#8217;s version of the <code class="class">JCasAnnotator_ImplBase</code>.
The initialize method of this super class calls:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ConfigurationParameterInitializer.initializeConfigurationParameters(
  Object, UimaContext)</code></pre>
</div>
</div>
<div class="paragraph">
<p>which populates the configuration parameters with the appropriate contents of the <code class="interface">UimaContext</code>.
If you do not want to extend uimaFIT&#8217;s <code class="class">JCasAnnotator_ImplBase</code>, then you can call this method directly in the <code class="method">initialize</code> method of your analysis engine or any class that implements <code class="interface">Initializable</code>.
You can call this method for an instance of any class that has configuration parameters.</p>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_analysis_engine"><a class="anchor" href="#_running_the_analysis_engine"></a>Running the analysis engine</h3>
<div class="paragraph">
<p>The following lines of code demonstrate how to instantiate and run the analysis engine from a main method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JCas jCas = JCasFactory.createJCas();

AnalysisEngine analysisEngine = AnalysisEngineFactory.createEngine(
  GetStartedQuickAE.class,
  GetStartedQuickAE.PARAM_STRING, "uimaFIT");

analysisEngine.process(jCas);</code></pre>
</div>
</div>
<div class="paragraph">
<p>In a more involved example, we would probably instantiate a collection reader and run this analysis engine over a collection of documents.
Here, it suffices to simply create a <code class="interface">JCas</code>.
Line 3 instantiates the analysis engine using <code class="class">AnalysisEngineFactory</code> and sets the string parameter named <code class="parameter">stringParam</code> to the value <code>uimaFIT</code>.
Running this simple program sends the following output to the console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Hello world!  Say 'hi' to uimaFIT</code></pre>
</div>
</div>
<div class="paragraph">
<p>Normally you would be using a type system with your analysis components.
When using uimaFIT, it is easiest to keep your type system descriptors in your source folders and make them known to uimaFIT.
To do so, create a file <em class="path">META-INF/org.apache.uima.fit/types.txt</em> in a source folder and add references to all your type descriptors to the file, one per line.
You can also use wildcards.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>classpath*:org/apache/uima/fit/examples/type/Token.xml
classpath*:org/apache/uima/fit/examples/type/Sentence.xml
classpath*:org/apache/uima/fit/examples/tutorial/type/*.xml</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_generate_a_descriptor_file"><a class="anchor" href="#_generate_a_descriptor_file"></a>Generate a descriptor file</h3>
<div class="paragraph">
<p>The following lines of code demonstrate how a descriptor file can be generated using the class definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">AnalysisEngine analysisEngine = AnalysisEngineFactory.createEngine(
  GetStartedQuickAE.class,
  GetStartedQuickAE.PARAM_STRING, "uimaFIT");

analysisEngineDescription.toXML(
  new FileOutputStream("GetStartedQuickAE.xml"));</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you open the resulting descriptor file you will see that the configuration parameter <code class="parameter">stringParam</code> is defined with the value set to <code>uimaFIT</code>.
We could now instantiate an analysis engine using this descriptor file with a line of code like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">AnalysisEngineFactory.createEngine("GetStartedQuickAE");</code></pre>
</div>
</div>
<div class="paragraph">
<p>But, of course, we really wouldn&#8217;t want to do that now that we can instantiate analysis engines using the class definition as was done above!</p>
</div>
<div class="paragraph">
<p>This chapter, of course, did not demonstrate every feature of uimaFIT which provides support for annotating external resources, creating aggregate engines, running pipelines, testing components, among others.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ugr.tools.uimafit.pipelines"><a class="anchor" href="#_ugr.tools.uimafit.pipelines"></a>Pipelines</h2>
<div class="sectionbody">
<div class="paragraph">
<p>UIMA is a component-based architecture that allows composing various processing components into a complex processing pipeline.
A pipeline typically involves a <em>collection
      reader</em> which ingests documents and <em>analysis engines</em> that do the actual processing.</p>
</div>
<div class="paragraph">
<p>Normally, you would run a pipeline using a UIMA Collection Processing Engine or using UIMA AS.
uimaFIT offers a third alternative that is much simpler to use and well suited for embedding UIMA pipelines into applications or for writing tests.</p>
</div>
<div class="paragraph">
<p>As uimaFIT does not supply any readers or processing components, we just assume that we have written three components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="class">TextReader</code> - reads text files from a directory</p>
</li>
<li>
<p><code class="class">Tokenizer</code> - annotates tokens</p>
</li>
<li>
<p><code class="class">TokenFrequencyWriter</code> - writes a list of tokens and their frequency to a file</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We create descriptors for all components and run them as a pipeline:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">CollectionReaderDescription reader =
  CollectionReaderFactory.createReaderDescription(
    TextReader.class,
    TextReader.PARAM_INPUT, "/home/uimafit/documents");

AnalysisEngineDescription tokenizer =
  AnalysisEngineFactory.createEngineDescription(
    Tokenizer.class);

AnalysisEngineDescription tokenFrequencyWriter =
  AnalysisEngineFactory.createEngineDescription(
    TokenFrequencyWriter.class,
    TokenFrequencyWriter.PARAM_OUTPUT, "counts.txt");

SimplePipeline.runPipeline(reader, tokenizer, writer);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Instead of running the full pipeline end-to-end, we can also process one document at a time and inspect the analysis results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">CollectionReaderDescription reader =
  CollectionReaderFactory.createReaderDescription(
    TextReader.class,
    TextReader.PARAM_INPUT, "/home/uimafit/documents");

AnalysisEngineDescription tokenizer =
  AnalysisEngineFactory.createEngineDescription(
    Tokenizer.class);

for (JCas jcas : SimplePipeline.iteratePipeline(reader, tokenizer)) {
  System.out.printf("Found %d tokens%n",
    JCasUtil.select(jcas, Token.class).size());
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>[[_ugr.tools.uimafit.testing"]]
= Testing UIMA components</p>
</div>
<div class="paragraph">
<p>Writing tests without uimaFIT can be a laborious process that results in fragile tests that are very verbose and break easily when code is refactored. This page demonstrates how you can write tests that are both concise and robust. Here is an outline of how you might create a test for a UIMA component <em>without</em> uimaFIT:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>write a descriptor file that configures your component appropriately for the test. This requires a minimum of 30-50 lines of XML.</p>
</li>
<li>
<p>begin a test with 5-10 lines of code that instantiate the e.g. analysis engine.</p>
</li>
<li>
<p>run the analysis engine against some text and test the contents of the CAS.</p>
</li>
<li>
<p>repeat steps 1-3 for your next test usually by copying the descriptor file, renaming it, and changing e.g. configuration parameters.&lt;/para&gt;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you have gone through the pain of creating tests like these and then decided you should refactor your code, then you know how tedious it is to maintain them.</p>
</div>
<div class="paragraph">
<p>Instead of pasting variants of the setup code (see step 2) into other tests we began to create a library of utility methods that we could call which helped shorten our code. We extended these methods so that we could instantiate our components directly without a descriptor file. These utility methods became the initial core of uimaFIT.</p>
</div>
<div class="sect2">
<h3 id="_examples"><a class="anchor" href="#_examples"></a>Examples</h3>
<div class="paragraph">
<p>There are several examples that can be found in the <em>uimafit-examples</em> module.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>There are a number of examples of unit tests in both the test suite for the <em>uimafit-core</em> module and the <em>uimafit-examples</em> module. In particular, there are some well-documented unit tests in the latter which can be found in <code>RoomNumberAnnotator1Test</code>.</p>
</li>
<li>
<p>You can improve your testing strategy by introducing a <code>TestBase</code> class such as the one found in <code>ExamplesTestBase</code>. This class is intended as a super class for your other test classes and sets up a <code>JCas</code> that is always ready to use along with a <code>TypeSystemDescription</code> and a <code>TypePriorities</code>. An example test that subclasses from <code>ExamplesTestBase</code> is <code>RoomNumberAnnotator2Test</code>.</p>
</li>
<li>
<p>Most analysis engines that you want to test will generally be downstream of many other components that add annotations to the CAS. These annotations will likely need to be in the CAS so that a downstream analysis engine will do something sensible. This poses a problem for tests because it may be undesirable to set up and run an entire pipeline every time you want to test a downstream analysis engine. Furthermore, such tests can become fragile in the face of behavior changes to upstream components. For this reason, it can be advantageous to serialize a CAS as an XMI file and use this as a starting point rather than running an entire pipeline. An example of this approach can be found in <code>XmiTest</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_tips_tricks"><a class="anchor" href="#_tips_tricks"></a>Tips &amp; Tricks</h3>
<div class="paragraph">
<p>The package &lt;package&gt;org.apache.uima.fit.testing&lt;/package&gt; provides some utility classes that can be handy when writing tests for UIMA components. You may find the following suggestions useful:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>add a <code>TokenBuilder</code> to your <code>TestBase</code> class. An example of this can be found in <code>ComponentTestBase</code>. This makes it easy to add tokens and sentences to the CAS you are testing which is a common task for many tests.</p>
</li>
<li>
<p>use a <code>JCasBuilder</code> to add text and annotations incrementally to a JCas instead of first setting the text and then adding all annotations.</p>
</li>
<li>
<p>use a <code>CasDumpWriter</code> to write the CAS contents is a human readable format to a file or to the console. Compare this with a previously written and manually verified file to see if changes in the component result in changes of the components output.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ugr.tools.uimafit.validation"><a class="anchor" href="#_ugr.tools.uimafit.validation"></a>Validating CASes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The uimaFIT CAS validation feature allows you to define consistency rules for your type system and
to automatically check that CASes comply with these rules.</p>
</div>
<div class="sect2">
<h3 id="_example_use_case"><a class="anchor" href="#_example_use_case"></a>Example use case</h3>
<div class="paragraph">
<p>Imagine a system which uses machine learning to automatically identify persons in a text. Such a
system might define an annotation type called <code>Person</code> having a feature called <code>confidence</code> of type
<code>float</code>. However, a requirement of the system should be that the confidence score must be within
range from 0 to 1. Any value outside that range would probably be a bug in the systems
implementation. Now imagine that you want to implement not only one, but a bunch of different UIMA analysis engines,
each based on a different machine learning approach and plug these into the system. Instead of
repeating the test code that checks the range of the confidence feature with each implementation, it
would be much nicer if the range check could be included with the type system that all these
implementations share. The unit tests should be able to pick this check (any any other consistency
checks) up automatically and use them.</p>
</div>
</div>
<div class="sect2">
<h3 id="_defining_a_validation_check"><a class="anchor" href="#_defining_a_validation_check"></a>Defining a validation check</h3>
<div class="paragraph">
<p>To define a validation check, all you need to do is to create a class implementing the
<code>org.apache.uima.fit.validation.CasValidationCheck</code> interface. This interfaces defines a single
method <code>List&lt;CasValidationResult&gt; check(CAS cas)</code>. Or if you prefer working against the JCas API,
you can implement the <code>org.apache.uima.fit.validation.JCasValidationCheck</code> interface.
Implementations of both interfaces (<code>CasValidationCheck</code> and <code>JCasValidationCheck</code>) can be applied
to CAS as well as JCas instances - so it does not matter against which interface you build your
check.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class ConfidenceRangeCheck implements JCasValidationCheck {
  @Override
  public List&lt;ValidationResult&gt; validate(JCas aJCas) throws ValidationException {
    List&lt;ValidationResult&gt; results = new ArrayList&lt;&gt;();
    for (Person person : JCasUtil.select(aJCas, Person.class)) {
      if (person.getConfidence() &lt; 0.0d || person.getConfidence() &gt; 1.0d) {
        results.add(ValidationResult.error(this, "Invalid confidence score (%f) on %s at [%d,%d]",
                person.getConfidence(), person.getType().getName(),
                person.getBegin(), person.getEnd()));
      }
    }
    return results;
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Checks are instantiated by the system as singletons. This means that their implementations must be
stateless and must have a zero-argument constructor (or no constructor at all).</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_registering_the_check_for_auto_detection"><a class="anchor" href="#_registering_the_check_for_auto_detection"></a>Registering the check for auto-detection</h3>
<div class="paragraph">
<p>uimaFIT uses the Java Service Locator mechanism to locate validation check implementations. So to
make a check available for auto-detection, its fully-qualified class name must be added to a file
<code>META-INF/services/org.apache.uima.fit.validation.ValidationCheck</code>. Multiple checks can be added by
putting each class name on separate lines.</p>
</div>
</div>
<div class="sect2">
<h3 id="_validating_a_cas"><a class="anchor" href="#_validating_a_cas"></a>Validating a CAS</h3>
<div class="paragraph">
<p>The <code>org.apache.uima.fit.validation.Validator</code> class can be used to validate your (J)CASes. This
class is typically constructed using a builder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">CAS cas = ...

// By default, the builder auto-detects all registered checks
Validator validator = new Validator.Builder().build();

// You could also pass in a JCas here instead of a CAS
ValidationSummary summary = validator.check(cas);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output of a check is a <code>ValidationSummary</code> which contains a bunch of <code>ValidationResult</code> items.
A <code>ValidationResult</code> essentially is a message with a severity level. When a summary contains any
result with an error-level severity, the validation should be considered as failed.</p>
</div>
<div class="paragraph">
<p>The <code>Validator.Builder</code> can be configured, e.g. to exclude certain checks or to entirely disable the
auto-detection of checks and instead work with only a set of explicitly specified checks.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ugr.tools.uimafit.experiments"><a class="anchor" href="#_ugr.tools.uimafit.experiments"></a>Running Experiments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <em>uimafit-examples</em> module contains a package <span class="package">org.apache.uima.fit.examples.experiment.pos</span> which demonstrates a very simple experimental setup for testing a part-of-speech tagger.
You may find this example more accessible if you check out the code from subversion and build it in your own environment.</p>
</div>
<div class="paragraph">
<p>The documentation for this example can be found in the code itself.
Please refer to <code class="class">RunExperiment</code> as a starting point.
The following is copied from the javadoc comments of that file:</p>
</div>
<div class="quoteblock">
<blockquote>
<code>RunExperiment</code> demonstrates a very common (though simplified) experimental setup in which gold
standard data is available for some task and you want to evaluate how well your analysis engine
works against that data. Here we are evaluating <code>BaselineTagger</code> which is a (ridiculously)
simple part-of-speech tagger against the part-of-speech tags found in
<code>src/main/resources/org/apache/uima/fit/examples/pos/sample-gold.txt</code>
</blockquote>
</div>
<div class="paragraph">
<p>The basic strategy is as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>post the data <em>as is</em> into the default view,</p>
</li>
<li>
<p>parse the gold-standard tokens and part-of-speech tags and put the results into another view we will call <em>GOLD_VIEW</em>,</p>
</li>
<li>
<p>create another view called <em>SYSTEM_VIEW</em> and copy the text and <code class="class">Token</code> annotations from the <em>GOLD_VIEW</em> into this view,</p>
</li>
<li>
<p>run the <code class="class">BaselineTagger</code> on the <em>SYSTEM_VIEW</em> over the copied <code class="class">Token</code> annoations,</p>
</li>
<li>
<p>evaluate the part-of-speech tags found in the <em>SYSTEM_VIEW</em> with those in the <em>GOLD_VIEW.</em></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ugr.tools.uimafit.casutil"><a class="anchor" href="#_ugr.tools.uimafit.casutil"></a>CAS Utilities</h2>
<div class="sectionbody">
<div class="paragraph">
<p>uimaFIT facilitates working with the CAS and JCas by offering various convenient methods for accessing and navigating annotations and feature structures.
Additionally, the the convenience methods for JCas access are fully type-safe and return the JCas type or a collection of the JCas type which you wanted to access.</p>
</div>
<div class="sect2">
<h3 id="_access_methods"><a class="anchor" href="#_access_methods"></a>Access methods</h3>
<div class="paragraph">
<p>uimaFIT supports the following convenience methods for accessing CAS and JCas structures.
All methods respect the UIMA index definitions and return annotations or feature structures in the order defined by the indexes.
Unless the default UIMA index for annotations has been overwritten, annotations are returned sorted by begin (increasing) and end (decreasing).</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>select(cas, type)</code> - fetch all annotations of the given type from the CAS/JCas. Variants of this method also exist to fetch annotations from a <code class="type">FSList</code> or <code class="type">FSArray</code>.</p>
</li>
<li>
<p><code>selectAll(cas)</code> - fetch all annotations from the CAS or fetch all feature structures from the JCas.</p>
</li>
<li>
<p><code>selectBetween(type, annotation1, annotation2)</code>* - fetch all annotations between the given two annotations.</p>
</li>
<li>
<p><code>selectCovered(type, annotation)</code>* - fetch all annotations covered by the given annotation. If this operation is used intensively, <code>indexCovered(&#8230;&#8203;)</code> should be used to pre-calculate annotation covering information.</p>
</li>
<li>
<p><code>selectCovering(type, annotation)*</code> - fetch all annotations covering the given annotation. If this operation is used intensively, <code>indexCovering(&#8230;&#8203;)</code> should be used to pre-calculate annotation covering information.</p>
</li>
<li>
<p><code>selectByIndex(cas, type, n)</code> - fetch the n-th feature structure of the given type.</p>
</li>
<li>
<p><code>selectSingle(cas, type)</code> - fetch the single feature structure of the given type. An exception is thrown if there is not exactly one feature structure of the type.</p>
</li>
<li>
<p><code>selectSingleRelative(type, annotation, n)</code>* - fetch a single annotation relative to the given annotation. A positive <code class="parameter">n</code> fetches the n-th annotation right of the specified annotation, while the a negative <code class="parameter">n</code> fetches to the left.</p>
</li>
<li>
<p><code>selectPreceding(type, annotation, n)</code>* - fetch the n annotations preceding the given annotation. If there are less then n preceding annotations, all preceding annotations are returned.</p>
</li>
<li>
<p><code>selectFollowing(type, annotation, n)</code>* - fetch the n annotations following the given annotation. If there are less then n following annotations, all following annotations are returned.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For historical reasons, the method marked with * also exist in a version that accepts a CAS/JCas as the first argument.
These may not work as expected when the annoation arguments provided to the method are from a different CAS/JCas/view.
Also, for any method accepting two annotations, these should come from the same CAS/JCas/view.
In future, the potentially problematic signatures may be deprecated, removed, or throw exeptions if these conditions are not met.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You should expect the structures returned by these methods to be backed by the CAS/JCas contents.
In particular, if you remove any feature structures from the CAS while iterating over these structures may cause failures.
For this reason, you should also not hold on to these structures longer than necessary, as is the case for UIMA <code>FSIterator</code>s as well.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Depending on whether one works with a CAS or JCas, the respective methods are available from the JCasUtil or CasUtil classes.</p>
</div>
<div class="paragraph">
<p>JCasUtil expect a JCas wrapper class for the <code class="parameter">type</code> argument, e.g. <code>select(jcas, Token.class)</code> and return this type or a collection using this generic type.
Any subtypes of the specified type are returned as well.
CasUtil expects a UIMA <code class="type">Type</code> instance.
For conveniently getting these, CasUtil offers the methods <code>getType(CAS, Class&lt;?&gt;)</code> or <code>getType(CAS, String)</code> which fetch a type either by its JCas wrapper class or by its name.</p>
</div>
<div class="paragraph">
<p>Unless annotations are specifically required, e.g.
because begin/end offsets are required, the JCasUtil methods can be used to access any feature structure inheriting from <code class="type">TOP</code>, not only annotations.
The CasUtil methods generally work only on annotations.
Alternative methods ending in "FS" are provided for accessing arbitrary feature structures, e.g. <code>selectFS</code>.</p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">// CAS version
Type tokenType = CasUtil.getType(cas, "my.Token");
for (AnnotationFS token : CasUtil.select(cas, tokenType)) {
  ...
}

// JCas version
for (Token token : JCasUtil.select(jcas, Token.class)) {
  ...
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ugr.tools.uimafit.configurationparameters"><a class="anchor" href="#_ugr.tools.uimafit.configurationparameters"></a>Configuration Parameters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>uimaFIT defines the <code>@ConfigurationParameter</code> annotation which can be used to annotate the fields of an analysis engine or collection reader.
The purpose of this annotation is twofold:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>injection of parameters from the UIMA context into fields</p>
</li>
<li>
<p>declaration of parameter metadata (mandatory, default value, description) which can be used to generate XML descriptors</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In a regular UIMA component, parameters need to be manually extracted from the UIMA context, typically requiring a type cast.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">class MyAnalysisEngine extends CasAnnotator_ImplBase {
  public static final String PARAM_SOURCE_DIRECTORY = "sourceDirectory";
  private File sourceDirectory;

  public void initialize(UimaContext context)
      throws ResourceInitializationException {

    sourceDirectory = new File((String) context.getConfigParameterValue(
      PARAM_SOURCE_DIRECTORY));
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The component has no way to declare a default value or to declare if a parameter is optional or mandatory.
In addition, any documentation needs to be maintained in !JavaDoc and in the XML descriptor for the component.</p>
</div>
<div class="paragraph">
<p>With uimaFIT, all this information can be declared in the component using the <code class="class">@ConfigurationParameter</code> annotation.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. <code>@ConfigurationParameter</code> annotation</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">parameter name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name of annotated field</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">description of the parameter</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mandatory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">whether a non-null value must be specified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">defaultValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the default value if no value is specified</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">class MyAnalysisEngine
    extends org.apache.uima.fit.component.CasAnnotator_ImplBase {

  /**
   * Directory to read the data from.
   */
  public static final String PARAM_SOURCE_DIRECTORY = "sourceDirectory";
  @ConfigurationParameter(name=PARAM_SOURCE_DIRECTORY, defaultValue=".")
  private File sourceDirectory;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note, that it is no longer necessary to implement the <code class="method">initialize()</code> method.
uimaFIT takes care of locating the parameter <code class="parameter">sourceDirectory</code> in the UIMA context.
It recognizes that the <code class="class">File</code> class has a <code class="class">String</code> constructor and uses that to instantiate a new <code class="class">File</code> object from the parameter.
A parameter is mandatory unless specified otherwise.
If a mandatory parameter is not specified in the context, an exception is thrown.</p>
</div>
<div class="paragraph">
<p>The <code>defaultValue</code> is used when generating an UIMA component description from the class.
It should be pointed out in particular, that uimaFIT does not make use of the default value when injecting parameters into fields.
For this reason, it is possible to have a parameter that is mandatory but does have a default value.
The default value is used as a parameter value when a component description is generated via the uimaFIT factories unless a parameter is specified in the factory call.
If a component description in created manually without specifying a value for a mandatory parameter, uimaFIT will generate an exception.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can use the <em>enhance</em> goal of the uimaFIT Maven plugin to pick up the parameter description from the JavaDoc and post it to the <code class="parameter">description</code> field of the <code class="class">@ConfigurationParameter</code> annotation.
This should be preferred to specifying the description explicitly as part of the annotation.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The parameter injection mechanism is implemented in the <code>ConfigurationParameterInitializer</code> class.
uimaFIT provides several base classes that already come with an <code>initialize()</code> method using the initializer:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>CasAnnotator_ImplBase</code></p>
</li>
<li>
<p><code>CasCollectionReader_ImplBase</code></p>
</li>
<li>
<p><code>CasConsumer_ImplBase</code></p>
</li>
<li>
<p><code>CasFlowController_ImplBase</code></p>
</li>
<li>
<p><code>CasMultiplier_ImplBase</code></p>
</li>
<li>
<p><code>JCasAnnotator_ImplBase</code></p>
</li>
<li>
<p><code>JCasCollectionReader_ImplBase</code></p>
</li>
<li>
<p><code>JCasConsumer_ImplBase</code></p>
</li>
<li>
<p><code>JCasFlowController_ImplBase</code></p>
</li>
<li>
<p><code>JCasMultiplier_ImplBase</code></p>
</li>
<li>
<p><code>Resource_ImplBase</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>ConfigurationParameterInitializer</code> can also be used with shared resources:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">class MySharedResourceObject implements SharedResourceObject {
  public static final String PARAM_VALUE = "Value";
  @ConfigurationParameter(name = PARAM_VALUE, mandatory = true)
  private String value;

  public void load(DataResource aData)
      throws ResourceInitializationException {

    ConfigurationParameterInitializer.initialize(this, aData);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Fields that can be annotated with the <code>@ConfigurationParameter</code> annotation are any array or collection types (including if they are only typed via interfaces such as <code>List</code> or <code>Set</code>) of primitive types (<code>int</code>, <code>boolean</code>, <code>float</code>, <code>double</code>). Enum types, as well as, fields of the types <code>Charset</code>, <code>File</code>, <code>Locale</code>, <code>Pattern</code>, <code>URI</code>, and <code>URL</code> can also be used.
These can be initialized either using an object value (e.g. <code>StandardChartsets.UTF_8`</code>) or a string value (e.g. <code>"UTF-8"</code>). Additionally it is possible to inject any fields of types that define a constructor accepting a single <code>String</code>.
These must be initialized from a string value.</p>
</div>
<div class="paragraph">
<p>Multi-valued parameters can be initialized from single values without having to wrap these into a container.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ugr.tools.uimafit.externalresources"><a class="anchor" href="#_ugr.tools.uimafit.externalresources"></a>External Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An analysis engine often uses some data model.
This may be as simple as word frequency counts or as complex as the model of a parser.
Often these models can become quite large.
If an analysis engine is deployed multiple times in the same pipeline or runs on multiple CPU cores, memory can be saved by using a shared instance of the data model.
UIMA supports such a scenario by so-called external resources.
The following sections illustrates how external resources can be used with uimaFIT.</p>
</div>
<div class="paragraph">
<p>First create a class for the shared data model.
Usually this class would load its data from some URI and then expose it via its methods.
An example would be to load word frequency counts and to provide a <code>getFrequency()</code> method.
In our simple example we do not load anything from the provided URI - we just offer a method to get the URI from which data be loaded.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">// Simple model that only stores the URI it was loaded from. Normally data
// would be loaded from the URI instead and made accessible through methods
// in this class. This simple example only allows accessing the URI.
public static final class SharedModel implements SharedResourceObject {
  private String uri;

  public void load(DataResource aData)
      throws ResourceInitializationException {

    uri = aData.getUri().toString();
  }

  public String getUri() { return uri; }
}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_resource_injection"><a class="anchor" href="#_resource_injection"></a>Resource injection</h3>
<div class="sect3">
<h4 id="_regular_uima_components"><a class="anchor" href="#_regular_uima_components"></a>Regular UIMA components</h4>
<div class="paragraph">
<p>When an external resource is used in a regular UIMA component, it is usually fetched from the context, cast and copied to a class member variable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">class MyAnalysisEngine extends CasAnnotator_ImplBase {
  final static String MODEL_KEY = "Model";
  private SharedModel model;

  public void initialize(UimaContext context)
      throws ResourceInitializationException {

    configuredResource = (SharedModel)
      getContext().getResourceObject(MODEL_KEY);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>uimaFIT can be used to inject external resources into such traditional components using the <code>createDependencyAndBind()</code> method.
To show that this works with any off-the-shelf UIMA component, the following example uses uimaFIT to configure the OpenNLP Tokenizer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">// Create descriptor
AnalysisEngineDescription tokenizer = createEngineDescription(
  Tokenizer.class,
  UimaUtil.TOKEN_TYPE_PARAMETER, Token.class.getName(),
  UimaUtil.SENTENCE_TYPE_PARAMETER, Sentence.class.getName());

// Create the external resource dependency for the model and bind it
createDependencyAndBind(tokenizer, UimaUtil.MODEL_PARAMETER,
  TokenizerModelResourceImpl.class,
  "http://opennlp.sourceforge.net/models-1.5/en-token.bin");</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>We recommend declaring parameter constants in the classes that use them, e.g.
here in <code>Tokenizer</code>.
This way, the parameters for a class can be found easily.
However, OpenNLP declares parameters centrally in <code>UimaUtil</code>.
Thus, the example above is correct, although unconventional.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Note that uimaFIT is unable to perform type-coercion on parameters if a descriptor is created from a class that does not contain <code>@ConfigurationParameter</code> annotations, such as the OpenNLP <code>Tokenizer</code>.
Such a descriptor does not contain any parameter declarations! However, it is still possible to configure such a component using uimaFIT by passing exactly the expected types as parameter values.
Thus, we need use the <code>getName()</code> method  to get the class name as a string, instead of simply passing the class itself.
Also, setting multi-valued parameter from a list or single value does not work here.
Multi-values parameters must be passed as an array of the required type.
Only the default UIMA types are possible: <code>String</code>, <code>boolean</code>, <code>int</code>, and <code>float</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_uimafit_aware_components"><a class="anchor" href="#_uimafit_aware_components"></a>uimaFIT-aware components</h4>
<div class="paragraph">
<p>uimaFIT provides the <code>@ExternalResource</code> annotation to inject external resources directly into class member variables.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. <code>@ExternalResource</code> annotation</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resource key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">field name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">api</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used when the external resource type is different from the field type, e.g.
                when using an ExternalResourceLocator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">field type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mandatory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether a value must be specified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">// Example annotator that uses the SharedModel. In the process() we only
// test if the model was properly initialized by uimaFIT
public static class Annotator
    extends org.apache.uima.fit.component.JCasAnnotator_ImplBase {

  final static String MODEL_KEY = "Model";
  @ExternalResource(key = MODEL_KEY)
  private SharedModel model;

  public void process(JCas aJCas) throws AnalysisEngineProcessException {
    assertTrue(model.getUri().endsWith("gene_model_v02.bin"));
    // Prints the instance ID to the console - this proves the same
    // instance of the SharedModel is used in both Annotator instances.
    System.out.println(model);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note, that it is no longer necessary to implement the <code>initialize()</code> method.
uimaFIT takes care of locating the external resource <code>Model</code> in the UIMA context and assigns it to the field <code>model</code>.
If a mandatory resource is not present in the context, an exception is thrown.</p>
</div>
<div class="paragraph">
<p>The resource injection mechanism is implemented in the <code>ExternalResourceInitializer</code> class.
uimaFIT provides several base classes that already come with an <code>initialize()</code> method using the initializer:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>CasAnnotator_ImplBase</code></p>
</li>
<li>
<p><code>CasCollectionReader_ImplBase</code></p>
</li>
<li>
<p><code>CasConsumer_ImplBase</code></p>
</li>
<li>
<p><code>CasFlowController_ImplBase</code></p>
</li>
<li>
<p><code>CasMultiplier_ImplBase</code></p>
</li>
<li>
<p><code>JCasAnnotator_ImplBase</code></p>
</li>
<li>
<p><code>JCasCollectionReader_ImplBase</code></p>
</li>
<li>
<p><code>JCasConsumer_ImplBase</code></p>
</li>
<li>
<p><code>JCasFlowController_ImplBase</code></p>
</li>
<li>
<p><code>JCasMultiplier_ImplBase</code></p>
</li>
<li>
<p><code>Resource_ImplBase</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When building a pipeline, external resources can be set of a component just like configuration parameters.
External resources and configuration parameters can be mixed and appear in any order when creating a component description.</p>
</div>
<div class="paragraph">
<p>Note that in the following example, we create only one external resource description and use it to configure two different analysis engines.
Because we only use a single description, also only a single instance of the external resource is created and shared between the two engines.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ExternalResourceDescription extDesc = createSharedResourceDescription(
  SharedModel.class, new File("somemodel.bin"));

// Binding external resource to each Annotator individually
AnalysisEngineDescription aed1 = createEngineDescription(
  Annotator.class,
  Annotator.MODEL_KEY, extDesc);

AnalysisEngineDescription aed2 = createEngineDescription(
  Annotator.class,
  Annotator.MODEL_KEY, extDesc);

// Check the external resource was injected
AnalysisEngineDescription aaed = createEngineDescription(aed1, aed2);
AnalysisEngine ae = createEngine(aaed);
ae.process(ae.newJCas());</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example is given as a full JUnit-based example in the the <em>uimaFIT-examples</em> project.</p>
</div>
</div>
<div class="sect3">
<h4 id="_resources_extending_resource_implbase"><a class="anchor" href="#_resources_extending_resource_implbase"></a>Resources extending Resource_ImplBase</h4>
<div class="paragraph">
<p>One kind of resources extend <code>Resource_ImplBase</code>.
These are the easiest to handle, because uimaFIT&#8217;s version of <code>Resource_ImplBase</code> already implements the necessary logic.
Just be sure to call <code>super.initialize()</code> when overriding <code>initialize()</code>.
Also mind that external resources are not available yet when <code>initialize()</code> is called.
For any initialization logic that requires resources, override and implement <code>afterResourcesInitialized()</code>.
Other than that, injection of external resources works as usual.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public static class ChainableResource extends Resource_ImplBase {
  public final static String PARAM_CHAINED_RESOURCE = "chainedResource";
  @ExternalResource(key = PARAM_CHAINED_RESOURCE)
  private ChainableResource chainedResource;

  public void afterResourcesInitialized() {
    // init logic that requires external resources
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_resources_implementing_sharedresourceobject"><a class="anchor" href="#_resources_implementing_sharedresourceobject"></a>Resources implementing SharedResourceObject</h4>
<div class="paragraph">
<p>The other kind of resources implement <code>SharedResourceObject`</code>.
Since this is an interface, uimaFIT cannot provide the initialization logic, so you have to implement a couple of things in the resource:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>implement <code>ExternalResourceAware</code></p>
</li>
<li>
<p>declare a configuration parameter <code>ExternalResourceFactory.PARAM_RESOURCE_NAME</code> and return its value in <code>getResourceName()</code></p>
</li>
<li>
<p>invoke <code>ConfigurationParameterInitializer.initialize()</code> in the <code>load()</code> method.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Again, mind that external resource not properly initialized until uimaFIT invokes <code>afterResourcesInitialized()</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class TestSharedResourceObject implements
    SharedResourceObject, ExternalResourceAware {

  @ConfigurationParameter(name=ExternalResourceFactory.PARAM_RESOURCE_NAME)
  private String resourceName;

  public final static String PARAM_CHAINED_RESOURCE = "chainedResource";
  @ExternalResource(key = PARAM_CHAINED_RESOURCE)
  private ChainableResource chainedResource;

  public String getResourceName() {
    return resourceName;
  }

  public void load(DataResource aData)
      throws ResourceInitializationException {

    ConfigurationParameterInitializer.initialize(this, aData);
    // rest of the init logic that does not require external resources
  }

  public void afterResourcesInitialized() {
   // init logic that requires external resources
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_note_on_injecting_resources_into_resources"><a class="anchor" href="#_note_on_injecting_resources_into_resources"></a>Note on injecting resources into resources</h4>
<div class="paragraph">
<p>Nested resources are only initialized if they are used in a pipeline which contains at least one component that calls <code>ConfigurationParameterInitializer.initialize()</code>.
Any component extending uimaFIT&#8217;s component base classes qualifies.
If you use nested resources in a pipeline without any uimaFIT-aware components, you can just add uimaFIT&#8217;s <code>NoopAnnotator</code> to the pipeline.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resource_locators"><a class="anchor" href="#_resource_locators"></a>Resource locators</h3>
<div class="paragraph">
<p>Normally, in UIMA an external resource needs to implement either <code>SharedResourceObject</code> or <code>Resource</code>.
In order to inject arbitrary objects, uimaFIT has the concept of <code>ExternalResourceLocator</code>.
When a resource implements this interface, not the resource itself is injected, but the method <code>getResource()</code> is called on the resource and the result is injected.
The following example illustrates how to inject an object from JNDI into a UIMA component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">class MyAnalysisEngine2 extends JCasAnnotator_ImplBase {
  static final String RES_DICTIONARY = "dictionary";
  @ExternalResource(key = RES_DICTIONARY)
  Dictionary dictionary;
}

AnalysisEngineDescription desc = createEngineDescription(
  MyAnalysisEngine2.class);

bindResource(desc, MyAnalysisEngine2.RES_DICTIONARY,
  JndiResourceLocator.class,
  JndiResourceLocator.PARAM_NAME, "dictionaries/german");</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ugr.tools.uimafit.typesystem"><a class="anchor" href="#_ugr.tools.uimafit.typesystem"></a>Type System Detection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>UIMA requires that types that are used in the CAS are defined in XML files - so-called <em>type system descriptions</em> (TSD). Whenever a UIMA component is created, it must be associated with such a type system.
While it is possible to manually load the type system descriptors and pass them to each UIMA component and to each created CAS, it is quite inconvenient to do so.
For this reason, uimaFIT supports the automatic detection of such files in the classpath.
Thus is becomes possible for a UIMA component provider to have component&#8217;s type automatically detected and thus the components becomes immediately usable by adding it to the classpath.</p>
</div>
<div class="sect2">
<h3 id="_making_types_auto_detectable"><a class="anchor" href="#_making_types_auto_detectable"></a>Making types auto-detectable</h3>
<div class="sect3">
<h4 id="_using_the_java_service_provide_interface"><a class="anchor" href="#_using_the_java_service_provide_interface"></a>Using the Java Service Provide Interface</h4>
<div class="paragraph">
<p>The Java Service Provide Interface (SPI) mechanism is a standard approach in Java for building
extensible software. In our case, we want to make uimaFIT aware of type system descriptions, index
definitions or type priority lists so that when we create a new CAS or analysis component, they are
automatically pre-configured with these.</p>
</div>
<div class="paragraph">
<p>To enable this auto-detection, the UIMA Core Java SDK provides defines interfaces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.apache.uima.spi.FsIndexCollectionProvider</code></p>
</li>
<li>
<p><code>org.apache.uima.spi.TypePrioritiesProvider</code></p>
</li>
<li>
<p><code>org.apache.uima.spi.TypeSystemDescriptionProvider</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Java code that wants to announce types, indexes or type priorities must implement one or more of
these interfaces in a provider class. We will make an example for type system descriptions. It works
in the same way for indexes and type priorities.</p>
</div>
<div class="paragraph">
<p>The following provider class publishes types from a type system description XML file located it can
access via the classpath at <code>/org/apache/uima/examples/types/TypeSystem.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">import static java.util.Arrays.asList;
import static org.apache.uima.fit.factory.TypeSystemDescriptionFactory.createTypeSystemDescription;

import java.util.List;

import org.apache.uima.resource.metadata.TypeSystemDescription;
import org.apache.uima.spi.TypeSystemDescriptionProvider;

public class MyTypeSystemProvider implements TypeSystemDescriptionProvider {

  @Override
  public List&lt;TypeSystemDescription&gt; listTypeSystemDescriptions() {
    return asList(createTypeSystemDescription("org.apache.uima.examples.types.TypeSystem"));
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You may also consider a slightly more advanced implementation that pre-resolves any imports that
may be contained in the loaded descriptors. This is important if you are in an environment with
multiple classloaders such as an OSGI environment.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">import static java.util.Arrays.asList;
import static org.apache.uima.fit.factory.TypeSystemDescriptionFactory.createTypeSystemDescription;

import java.util.Collections;
import java.util.List;

import org.apache.uima.UIMAFramework;
import org.apache.uima.resource.ResourceManager;
import org.apache.uima.resource.impl.ResourceManager_impl;
import org.apache.uima.resource.metadata.TypeSystemDescription;
import org.apache.uima.spi.TypeSystemDescriptionProvider;
import org.apache.uima.util.InvalidXMLException;

public class MyAdvancedTypeSystemProvider implements TypeSystemDescriptionProvider {

  @Override
  public List&lt;TypeSystemDescription&gt; listTypeSystemDescriptions() {
    ResourceManager resMgr = new ResourceManager_impl(getClass().getClassLoader());
    try {
      TypeSystemDescription tsd = createTypeSystemDescription(
              "org.apache.uima.examples.types.TypeSystem");
      tsd.resolveImports(resMgr);
      return asList(tsd);
    } catch (InvalidXMLException e) {
      UIMAFramework.getLogger().error("Unable to load type system", e);
      return Collections.emptyList();
    } finally {
      resMgr.destroy();
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In a proper implementation, you might care to use a better error handling, use your own loggers
instead of the framework logger, maybe load additional type system descriptions, etc.</p>
</div>
<div class="paragraph">
<p>Once the provider class has been implemented, it needs to be registered with the SPI mechanism.
To do that, create a text file with the name of the implemented interface in <code>META-INF/services</code>, e.g.
<code>META-INF/services/org.apache.uima.spi.TypeSystemDescriptionProvider</code>. Into that file, add the name of
the provider class implementation, e.g. <code>foo.bar.MyTypeSystemProvider</code>. If you have multiple provider
classes for the given interface, add them all, one class per line.</p>
</div>
</div>
<div class="sect3">
<h4 id="_legacy_approach"><a class="anchor" href="#_legacy_approach"></a>Legacy approach</h4>
<div class="paragraph">
<p>The provider of a type system should create a file <em class="path">META-INF/org.apache.uima.fit/types.txt</em> in the classpath.
This file should define the locations of the type system descriptions.
Assume that a type <code>org.apache.uima.fit.type.Token</code> is specified in the TSD <em class="path">org/apache/uima/fit/type/Token.xml</em>, then the file should have the following contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>classpath*:org/apache/uima/fit/type/Token.xml</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Mind that the file <em class="path">types.txt</em> is must be located in <em class="path">META-INF/org.apache.uima.fit</em> where <em class="path">org.apache.uima.fit</em> is the name of a sub-directory inside <em class="path">META-INF</em>. <em>We are not using the Java package notation
          here!</em></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To specify multiple TSDs, add additional lines to the file.
If you have a large number of TSDs, you may prefer to add a pattern.
Assume that we have a large number of TSDs under <em class="path">org/apache/uima/fit/type</em>, we can use the following pattern which recursively scans the package <span class="package">org.apache.uima.fit.type</span> and all sub-packages for XML files and tries to load them as TSDs.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>classpath*:org/apache/uima/fit/type/**/*.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Try to design your packages structure in a way that TSDs and JCas wrapper classes generated from them are separate from the rest of your code.</p>
</div>
<div class="paragraph">
<p>If it is not possible or inconvenient to add the <code>types.txt</code> file, patterns can also be specified using the system property <code class="parameter">org.apache.uima.fit.type.import_pattern</code>.
Multiple patterns may be specified separated by semicolon:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>-Dorg.apache.uima.fit.type.import_pattern=\
  classpath*:org/apache/uima/fit/type/**/*.xml</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>\</code> in the example is used as a line-continuation indicator.
It and all spaces following it should be ommitted.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_making_index_definitions_and_type_priorities_auto_detectable"><a class="anchor" href="#_making_index_definitions_and_type_priorities_auto_detectable"></a>Making index definitions and type priorities auto-detectable</h3>
<div class="paragraph">
<p>Auto-detection also works for index definitions and type priority definitions.
For index definitions, the respective file where to register the index definition XML files is <em class="path">META-INF/org.apache.uima.fit/fsindexes.txt</em> and for type priorities, it is <em class="path">META-INF/org.apache.uima.fit/typepriorities.txt</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_type_auto_detection"><a class="anchor" href="#_using_type_auto_detection"></a>Using type auto-detection</h3>
<div class="paragraph">
<p>The auto-detected type system can be obtained from the <code>TypeSystemDescriptionFactory</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">TypeSystemDescription tsd =
  TypeSystemDescriptionFactory.createTypeSystemDescription()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Popular factory methods also support auto-detection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">AnalysisEngine ae = createEngine(MyEngine.class);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_multiple_meta_inforg_apache_uima_fittypes_txt_files"><a class="anchor" href="#_multiple_meta_inforg_apache_uima_fittypes_txt_files"></a>Multiple META-INF/org.apache.uima.fit/types.txt files</h3>
<div class="paragraph">
<p>uimaFIT supports multiple <em class="path">types.txt</em> files in the classpath (e.g.
in differnt JARs). The <em class="path">types.txt</em> files are located via Spring using the classpath search pattern:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">TYPE_MANIFEST_PATTERN = "classpath*:META-INF/org.apache.uima.fit/types.txt"</code></pre>
</div>
</div>
<div class="paragraph">
<p>This resolves to a list URLs pointing to ALL <em class="path">types.txt</em> files.
The resolved URLs are unique and will point either to a specific point in the file system or into a specific JAR.
These URLs can be handled by the standard Java URL loading mechanism.
Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">jar:/path/to/syntax-types.jar!/META-INF/org.apache.uima.fit/types.txt
jar:/path/to/token-types.jar!/META-INF/org.apache.uima.fit/types.txt</code></pre>
</div>
</div>
<div class="paragraph">
<p>uimaFIT then reads all patters from all of these URLs and uses these to search the classpath again.
The patterns now resolve to a list of URLs pointing to the individual type system XML descriptors.
All of these URLs are collected in a set to avoid duplicate loading (for performance optimization - not strictly necessary because the UIMA type system merger can handle compatible duplicates). Then the descriptors are loaded into memory and merged using the standard UIMA type system merger (<code>CasCreationUtils.mergeTypeSystems()</code>). Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>jar:/path/to/syntax-types.jar!/desc/types/Syntax.xml
jar:/path/to/token-types.jar!/org/foobar/typesystems/Tokens.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Voilá, the result is a type system covering all types could be found in the classpath.</p>
</div>
<div class="paragraph">
<p>It is recommended</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>to put type system descriptors into packages resembling a namespace you "own" and to use a package-scoped wildcard search</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>classpath*:org/apache/uima/fit/type/**/*.xml`</code></pre>
</div>
</div>
</li>
<li>
<p>or when putting descriptors into a "well-known" package like <span class="package">desc.type</span>, that <em class="path">types.txt</em> file should explicitly list all type system descriptors instead of using a wildcard search</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>classpath*:desc/type/Token.xml
classpath*:desc/type/Syntax.xml</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Method 1 should be preferred.
Both methods can be mixed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_performance_note_and_caching"><a class="anchor" href="#_performance_note_and_caching"></a>Performance note and caching</h3>
<div class="paragraph">
<p>Currently uimaFIT evaluates the patterns for TSDs once and caches the locations, but not the actual merged type system description.
A rescan can be forced using <code>TypeSystemDescriptionFactory.forceTypeDescriptorsScan()</code>.
This may change in future.</p>
</div>
</div>
<div class="sect2">
<h3 id="_potential_problems"><a class="anchor" href="#_potential_problems"></a>Potential problems</h3>
<div class="paragraph">
<p>The mechanism works fine.
However, there are specific issues with Java in general that one should be aware of.</p>
</div>
<div class="sect3">
<h4 id="_m2eclipse_fails_to_copy_descriptors_to_targetclasses"><a class="anchor" href="#_m2eclipse_fails_to_copy_descriptors_to_targetclasses"></a>m2eclipse fails to copy descriptors to target/classes</h4>
<div class="paragraph">
<p>There seems to be a bug in some older versions of m2eclipse that causes resources not always to be copied to <em class="path">target/classes</em>.
If UIMA complains about type definitions missing at runtime, try to <em>clean/rebuild</em> your project and carefully check the m2eclipse console in the console view for error messages that might cause m2eclipse to abort.</p>
</div>
</div>
<div class="sect3">
<h4 id="_class_version_conflicts"><a class="anchor" href="#_class_version_conflicts"></a>Class version conflicts</h4>
<div class="paragraph">
<p>A problem can occur if you end up having multiple incompatible versions of the same type system in the classpath.
This is a general problem and not related to the auto-detection feature.
It is the same as when you have incompatible version of a particular class (e.g. <code>JCas</code> wrapper or some third-party-library) in the classpath.
The behavior of the Java Classloader is undefined in that case.
The detection will do its best to try and load everything it can find, but the UIMA type system merger may barf or you may end up with undefined behavior at runtime because one of the class versions is used at random.</p>
</div>
</div>
<div class="sect3">
<h4 id="_classes_and_resources_in_the_default_package"><a class="anchor" href="#_classes_and_resources_in_the_default_package"></a>Classes and resources in the default package</h4>
<div class="paragraph">
<p>It is bad practice to place classes into the default (unnamed) package.
In fact it is not possible to import classes from the default package in another class.
Similarly it is a bad idea to put resources at the root of the classpath.
The Spring documentation on resources <a href="http://static.springsource.org/spring/docs/3.0.x/reference/resources.html#resources-app-ctx-wildcards-in-resource-paths">explains this in detail</a>.</p>
</div>
<div class="paragraph">
<p>For this reason the <em class="path">types.txt</em> resides in <em class="path">/META-INF/org.apache.uima.fit</em> and it is suggest that type system descriptors reside either in a proper package like <em class="path">/org/foobar/typesystems/XXX.xml</em> or in <em class="path">/desc/types/XXX.xml</em>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ugr.tools.uimafit.packaging"><a class="anchor" href="#_ugr.tools.uimafit.packaging"></a>Building an executable JAR</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Building an executable JAR including uimaFIT components typically requires extra care.
Per convention, uimaFIT expects certain information in specific locations on the classpath, e.g.
the <em class="path">types.txt</em> file that controls the <a href="#_ugr.tools.uimafit.packaging">automatic type system detection</a> mechanism must reside at <em class="path">META-INF/org.apache.uima.fit/types.txt</em>.
It often occurs that a project has several dependencies, each supplying its own configuration files at these standard locations.
However, this causes a problem with naive approaches to creating an executable <em>fat-jar</em> merging all dependencies into a single JAR file.
Without extra care, the files supplied by the different dependencies overwrite each other during the packaging process and only one file <em>wins</em> in the end.
As a consequence, the types configured in the other files cannot be detected at runtime.
Such a native approach is taken, for example, by the Maven Assembly Plugin.</p>
</div>
<div class="paragraph">
<p>The Maven Shade Plugin provides a convenient alternative for the creation of executable fat-jars, as it provides a mechanism to concatenate the configuration files from different dependencies while creating the fat-jar.
To use the Maven Shade Plugin with uimaFIT, use the following configuration section in your POM file and make sure to change the <code>mainClass</code> as required for your project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
      &lt;version&gt;2.2&lt;/version&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;phase&gt;package&lt;/phase&gt;
          &lt;goals&gt;&lt;goal&gt;shade&lt;/goal&gt;&lt;/goals&gt;
          &lt;configuration&gt;
            &lt;transformers&gt;
              &lt;!-- Set the main class of the executable JAR --&gt;
              &lt;transformer
                implementation="org.apache.maven.plugins.shade.\
                                resource.ManifestResourceTransformer"&gt;
                &lt;mainClass&gt;org.apache.uima.fit.example.Main&lt;/mainClass&gt;
              &lt;/transformer&gt;
              &lt;!-- Merge the uimaFIT configuration files --&gt;
              &lt;transformer
                implementation="org.apache.maven.plugins.shade.\
                                resource.AppendingTransformer"&gt;
                &lt;resource&gt;\
                  META-INF/org.apache.uima.fit/fsindexes.txt\
                &lt;/resource&gt;
              &lt;/transformer&gt;
              &lt;transformer
                implementation="org.apache.maven.plugins.shade.\
                                resource.AppendingTransformer"&gt;
                &lt;resource&gt;\
                  META-INF/org.apache.uima.fit/types.txt\
                &lt;/resource&gt;
              &lt;/transformer&gt;
              &lt;transformer
                implementation="org.apache.maven.plugins.shade.\
                                resource.AppendingTransformer"&gt;
                &lt;resource&gt;\
                  META-INF/org.apache.uima.fit/typepriorities.txt\
                &lt;/resource&gt;
              &lt;/transformer&gt;
              &lt;!-- Merge CAS validation check registrations --&gt;
              &lt;transformer
                implementation="org.apache.maven.plugins.shade.\
                                resource.ServicesResourceTransformer"/&gt;
            &lt;/transformers&gt;
            &lt;!--
              Prevent huge shaded artifacts from being deployed
              to a Maven repository (remove if not desired)
            --&gt;
            &lt;outputFile&gt;\
              ${project.build.directory}/\
              ${artifactId}-${version}-standalone.jar\
            &lt;/outputFile&gt;
          &lt;/configuration&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Due to formatting constraints in the PDF version of this manual, the example above uses <code>\</code> to indicate a line continuation.
Remove these and join the lines when you copy/paste this example.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You might want to consider also merging additional files, such as LICENSE, NOTICE, or DEPENDENCY files,  configuration files for the Java Service Locator API, or  files used by other frameworks that uses similar conventions for configuration file locations.
Check the documentation of the Maven Shade Plugin, as different kinds of configuration files require different specialized transformers.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tools.uimafit.maven"><a class="anchor" href="#_tools.uimafit.maven"></a>uimaFIT Maven Plugin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>uimaFIT dynamically generates UIMA component descriptions from annotations in the Java source code.
The uimaFIT Maven plugin provides the ability to automatically create such annotations in already compiled classes and to automatically generate XML descriptors from the annotated classes.</p>
</div>
<div class="sect2">
<h3 id="_enhance_goal"><a class="anchor" href="#_enhance_goal"></a>enhance goal</h3>
<div class="paragraph">
<p>The goal enhance allows automatically augmenting compiled classes with uimaFIT annotations.
Information like vendor, copyright, or version can be obtained from the Maven POM.
Additionally, descriptions for parameters and components can be generated from Javadoc comments.
Existing annotations are not overwritten unless forced.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.apache.uima&lt;/groupId&gt;
  &lt;artifactId&gt;uimafit-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;&lt;/version&gt; &lt;!-- change to latest version --&gt;
  &lt;configuration&gt;
    &lt;!-- OPTIONAL --&gt;
    &lt;!-- Override component description in generated descriptors. --&gt;
    &lt;overrideComponentDescription&gt;false&lt;/overrideComponentDescription&gt;

    &lt;!-- OPTIONAL --&gt;
    &lt;!-- Override version in generated descriptors. --&gt;
    &lt;overrideComponentVersion&gt;false&lt;/overrideComponentVersion&gt;

    &lt;!-- OPTIONAL --&gt;
    &lt;!-- Override vendor in generated descriptors. --&gt;
    &lt;overrideComponentVendor&gt;false&lt;/overrideComponentVendor&gt;

    &lt;!-- OPTIONAL --&gt;
    &lt;!-- Override copyright in generated descriptors. --&gt;
    &lt;overrideComponentCopyright&gt;false&lt;/overrideComponentCopyright&gt;

    &lt;!-- OPTIONAL --&gt;
    &lt;!-- Version to use in generated descriptors. --&gt;
    &lt;componentVersion&gt;${project.version}&lt;/componentVersion&gt;

    &lt;!-- OPTIONAL --&gt;
    &lt;!-- Vendor to use in generated descriptors. --&gt;
    &lt;componentVendor&gt;Apache Foundation&lt;/componentVendor&gt;

    &lt;!-- OPTIONAL --&gt;
    &lt;!-- Copyright to use in generated descriptors. --&gt;
    &lt;componentCopyright&gt;Apache Foundation 2013&lt;/componentCopyright&gt;

    &lt;!-- OPTIONAL --&gt;
    &lt;!-- Source file encoding. --&gt;
    &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;

    &lt;!-- OPTIONAL --&gt;
    &lt;!-- Generate a report of missing meta data in
         $project.build.directory/uimafit-missing-meta-data-report.txt --&gt;
    &lt;generateMissingMetaDataReport&gt;true&lt;/generateMissingMetaDataReport&gt;

    &lt;!-- OPTIONAL --&gt;
    &lt;!-- Fail on missing meta data. This setting has no effect unless
         generateMissingMetaDataReport is enabled. --&gt;
    &lt;failOnMissingMetaData&gt;false&lt;/failOnMissingMetaData&gt;

    &lt;!-- OPTIONAL --&gt;
    &lt;!-- Constant name prefixes used for parameters and external resources,
         e.g. "PARAM_". --&gt;
    &lt;parameterNameConstantPrefixes&gt;
      &lt;prefix&gt;PARAM_&lt;prefix/&gt;
    &lt;/parameterNameConstantPrefixes&gt;

    &lt;!-- OPTIONAL --&gt;
    &lt;!-- Fail on missing meta data. This setting has no effect unless
         generateMissingMetaDataReport is enabled. --&gt;
    &lt;externalResourceNameConstantPrefixes&gt;
      &lt;prefix&gt;KEY_&lt;prefix/&gt;
      &lt;prefix&gt;RES_&lt;prefix/&gt;
    &lt;/externalResourceNameConstantPrefixes&gt;

    &lt;!-- OPTIONAL --&gt;
    &lt;!-- Mode of adding type systems found on the classpath via the
         uimaFIT detection mechanism at compile time to the generated
         descriptor. By default, no type systems are added. --&gt;
    &lt;addTypeSystemDescriptions&gt;NONE&lt;/addTypeSystemDescriptions&gt;

  &lt;/configuration&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;id&gt;default&lt;/id&gt;
      &lt;phase&gt;process-classes&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;enhance&lt;/goal&gt;
      &lt;/goals&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>When generating descriptions for configuration parameters or external resources, the plugin supports a common practice of placing the Javadoc on a constant field instead of the parameter or external resource field.
Per default, parameter name constants must be prefixed with <code>PARAM_</code> and external resource key constants must be prefixed with <code>RES_ ` or `KEY_</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">/**
 * Enable or disable my feature.
 */
public static final String PARAM_ENABLE_FEATURE = "enableFeature";
@ConfigurationParameter(name=PARAM_ENABLE_FEATURE)
private boolean enableFeature;

/**
 * My external resource.
 */
public static final String RES_MY_RESOURCE = "resource";
@ExternalResource(key=RES_MY_RESOURCE)
private MyResource resource;</code></pre>
</div>
</div>
<div class="paragraph">
<p>By enabling <code>generateMissingMetaDataReport</code>, the build can be made to fail if meta data such as parameter descriptions are missing.
A report about the missing data is generated in <em class="path">uimafit-missing-meta-data-report.txt</em> in the project build directory.</p>
</div>
</div>
<div class="sect2">
<h3 id="_generate_goal"><a class="anchor" href="#_generate_goal"></a>generate goal</h3>
<div class="paragraph">
<p>The generate goal generates XML component descriptors for UIMA components.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.apache.uima&lt;/groupId&gt;
  &lt;artifactId&gt;uimafit-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;&lt;/version&gt; &lt;!-- change to latest version --&gt;
  &lt;configuration&gt;
    &lt;!-- OPTIONAL --&gt;
    &lt;!-- Path where the generated resources are written. --&gt;
    &lt;outputDirectory&gt;
      ${project.build.directory}/generated-sources/uimafit
    &lt;/outputDirectory&gt;

    &lt;!-- OPTIONAL --&gt;
    &lt;!-- Skip generation of META-INF/org.apache.uima.fit/components.txt --&gt;
    &lt;skipComponentsManifest&gt;false&lt;/skipComponentsManifest&gt;

    &lt;!-- OPTIONAL --&gt;
    &lt;!-- Source file encoding. --&gt;
    &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;
  &lt;/configuration&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;id&gt;default&lt;/id&gt;
      &lt;phase&gt;process-classes&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;generate&lt;/goal&gt;
      &lt;/goals&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to the XML descriptors, a manifest file is written to <code>META-INF/org.apache.uima.fit/components.txt</code>.
This file can be used to conveniently locate the XML descriptors, which are written in the packages next to the classes they describe.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>classpath*:org/apache/uima/fit/examples/ExampleComponent.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is recommended to use both, the enhance and the generate goal.
Both goals should be specified in the same execution, first enhance, then generate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;execution&gt;
  &lt;id&gt;default&lt;/id&gt;
  &lt;phase&gt;process-classes&lt;/phase&gt;
  &lt;goals&gt;
    &lt;goal&gt;enhance&lt;/goal&gt;
    &lt;goal&gt;generate&lt;/goal&gt;
  &lt;/goals&gt;
&lt;/execution&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ugr.tools.uimafit.migration"><a class="anchor" href="#_ugr.tools.uimafit.migration"></a>Migration Guide</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section provides helpful information on incompatible changes between versions.</p>
</div>
<div class="sect2">
<h3 id="_version_3_0_x_to_3_1_x"><a class="anchor" href="#_version_3_0_x_to_3_1_x"></a>Version 3.0.x to 3.1.x</h3>
<div class="paragraph">
<div class="title">Changes to ExternalResourceFactory</div>
<p>The renaming of methods in the <code>ExternalResourceFactory</code> had unfortunately introduced another name
clash between unrelated methods. To fix this clash, the following methods have been renamed from
<code>bindResource</code> to <code>bindResourceOnce</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>void bindResource(ResourceCreationSpecifier aDesc, String aBindTo, ExternalResourceDescription aRes)</code>
was <strong>removed</strong> and replaced by
<code>void bindResourceOnce(ResourceCreationSpecifier aDesc, String aBindTo, ExternalResourceDescription aRes)</code></p>
</li>
<li>
<p><code>void bindResource(ExternalResourceDescription aRes, String aBindTo, ExternalResourceDescription aNestedRes)</code>
was deprecated and replaced by
<code>void bindResourceOnce(ExternalResourceDescription aRes, String aBindTo, ExternalResourceDescription aNestedRes)</code></p>
</li>
<li>
<p><code>void bindResource(ResourceManagerConfiguration aResMgrCfg, String aBindTo, ExternalResourceDescription aRes)</code>
was deprecated and replaced by
<code>void bindResourceOnce(ResourceManagerConfiguration aResMgrCfg, String aBindTo, ExternalResourceDescription aRes)</code></p>
</li>
<li>
<p><code>void bindResource(ResourceCreationSpecifier aDesc, String aBindTo, String aRes)</code>
was <strong>removed</strong> and replaced by
<code>void bindResourceOnceWithoutNested(ResourceCreationSpecifier aDesc, String aBindTo, String aRes)</code></p>
</li>
<li>
<p><code>void bindResource(ResourceManagerConfiguration aResMgrCfg, String aBindTo, String aRes)</code>
was deprecated and replaced by
<code>void bindResourceOnceWithoutNested(ResourceManagerConfiguration aResMgrCfg, String aBindTo, String aRes)</code></p>
</li>
<li>
<p><code>void bindResource(ResourceSpecifier aDesc, String aKey, String aUrl)</code>
was deprecated and replaced by
<code>void bindResourceUsingUrl(ResourceSpecifier aDesc, String aKey, String aUrl)</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_version_2_x_to_3_x"><a class="anchor" href="#_version_2_x_to_3_x"></a>Version 2.x to 3.x</h3>
<div class="paragraph">
<div class="title">Legacy support module removed</div>
<p>The legacy support in uimaFIT 2.x was present allow being compatible with the pre-Apache uimaFIT
versions which were based on UIMA 2.x. Since uimaFIT 3.x is not  compatible with UIMA 2.x anyway,
the legacy module was removed now.</p>
</div>
<div class="paragraph">
<div class="title">Using List instead of Collection</div>
<p>The <code>CasUtil</code>, <code>JCasUtil</code> and <code>FSCollectionFactory</code> classes were adjusted to return results using <code>List</code>
instead of the more general <code>Collection</code>. Often, lists are already used internally and then again
wrapped into new lists in client code. This API change avoids this in the future.</p>
</div>
<div class="paragraph">
<div class="title">Throwing specific exceptions instead of UIMAException</div>
<p>Several uimaFIT methods were throwing the generic <code>UIMAException</code>. These have been adjusted to
declare throwing several of the sub-types of <code>UIMAException</code> to be better able to handle specific
causes of errors in client code.</p>
</div>
<div class="paragraph">
<div class="title">CasUtil.selectSingle signature changed</div>
<p>Signature of <code>CasUtil.selectSingle</code> has been changed to return <code>AnnotationFS</code>. The original signature
is available as <code>selectSingleFS</code></p>
</div>
<div class="paragraph">
<div class="title">Removal of deprecated methods</div>
<p>Various methods that were deprecated in uimaFIT 2.4.0 or earlier have been removed in this release.
For details, please refer to the <code>api-change-report.html</code> file included in the release.</p>
</div>
<div class="paragraph">
<div class="title">Changes to ExternalResourceFactory</div>
<p>Most methods in the <code>ExternalResourceFactory</code> have seen changes to their names and signature to avoid
problematic ambiguities as well as to be shorter. In general, the <code>External</code> component of the method
names was either removed or replaced. So most methods called <code>createExternalResourceDescription</code>
are now called <code>createResourceDescription</code>. However, some have also been given a more specific name
and/or a slightly different order of parameters. For example, this method</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public static ExternalResourceDescription createExternalResourceDescription(
  Class&lt;? extends SharedResourceObject&gt; aInterface, String aUrl, Object... aParams)</code></pre>
</div>
</div>
<div class="paragraph">
<p>was changed to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public static ExternalResourceDescription createSharedResourceDescription(
  String aUrl, Class&lt; extends SharedResourceObject&gt; aInterface, Object... aParams)</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Changes to logging</div>
<p>UIMA v3 has is using SLF4J. As a consequence, the <code>ExtendedLogger</code> which uimaFIT had returned on
calls to <code>getLogger()</code> has been removed and instead the regular UIMA v3 logger class is returned
which offers methods quite compatible with what <code>ExtendedLogger</code> offered before. However, it is
recommended that you go through all your logging calls and replace calls which use string
concatenation to construct the logging message with corresponding calls using placeholders. For
example, replace <code>getLogger().error("Cannot access " + filename, exception);</code> with
<code>getLogger().error("Cannot access {}", filename, exception);</code>.</p>
</div>
<div class="paragraph">
<div class="title">Version requirements</div>
<p>Depends on UIMA 3.0.2, Spring Framework 4.3.22 and Java 8.</p>
</div>
</div>
<div class="sect2">
<h3 id="_version_2_3_0_to_2_4_0"><a class="anchor" href="#_version_2_3_0_to_2_4_0"></a>Version 2.3.0 to 2.4.0</h3>
<div class="paragraph">
<div class="title">Version requirements</div>
<p>Depends on UIMA 2.10.2, Spring Framework 3.2.16 and Java 7.</p>
</div>
<div class="paragraph">
<p>Mind the updated version requirements.
There should be no other potentially problematic changes in this upgrade.</p>
</div>
</div>
<div class="sect2">
<h3 id="_version_2_2_0_to_2_3_0"><a class="anchor" href="#_version_2_2_0_to_2_3_0"></a>Version 2.2.0 to 2.3.0</h3>
<div class="paragraph">
<div class="title">CasIOUtil deprecated</div>
<p>The functionality of the uimaFIT CasIOUtil class has been superseded by the core UIMA class CasIOUtils added in UIMA 2.9.0.
The method signatures in the new class are not the same, but provide more functionality.
CasIOUtil has been deprecated and documentation has been added which of the CasIOUtils methods should be used instead.</p>
</div>
<div class="paragraph">
<div class="title">Version requirements</div>
<p>Depends on UIMA 2.9.1, Spring Framework 3.2.16 and Java 7.</p>
</div>
<div class="paragraph">
<p>Mind the updated version requirements.
There should be no other potentially problematic changes in this upgrade.</p>
</div>
</div>
<div class="sect2">
<h3 id="_version_2_1_0_to_2_2_0"><a class="anchor" href="#_version_2_1_0_to_2_2_0"></a>Version 2.1.0 to 2.2.0</h3>
<div class="paragraph">
<div class="title">Version requirements</div>
<p>Depends on UIMA 2.8.1, Spring Framework 3.2.16 and Java 7.</p>
</div>
<div class="paragraph">
<p>Mind the updated version requirements.
There should be no other potentially problematic changes in this upgrade.</p>
</div>
</div>
<div class="sect2">
<h3 id="_version_2_0_0_to_2_1_0"><a class="anchor" href="#_version_2_0_0_to_2_1_0"></a>Version 2.0.0 to 2.1.0</h3>
<div class="paragraph">
<div class="title">Version requirements</div>
<p>Depends on UIMA 2.6.0 and Java 6.</p>
</div>
<div class="paragraph">
<div class="title">AnnotationFactory.createAnnotation()</div>
<p>No longer throws <code>UIMAExcption</code>.
If this exception was cought, some IDEs may complain here after upgrading to uimaFIT 2.1.0.</p>
</div>
</div>
<div class="sect2">
<h3 id="_version_1_4_0_to_2_0_0"><a class="anchor" href="#_version_1_4_0_to_2_0_0"></a>Version 1.4.0 to 2.0.0</h3>
<div class="paragraph">
<div class="title">Version requirements</div>
<p>Depends on UIMA 2.4.2.</p>
</div>
<div class="paragraph">
<div class="title">Backwards compatibility</div>
<p>Compatibility with legacy annotation is provided by the Legacy support module.</p>
</div>
<div class="paragraph">
<div class="title">Change of Maven groupId and artifactId</div>
<p>The Maven group ID has changed from <code>org.uimafit</code> to <code>org.apache.uima</code>.</p>
</div>
<div class="paragraph">
<p>The artifact ID of the main uimaFIT artifact has been changed from <code>uimafit</code> to <code>uimafit-core</code>.</p>
</div>
<div class="paragraph">
<div class="title">Change of package names</div>
<p>The base package has been renamed from <code>org.uimafit</code> to <code>org.apache.uima.fit</code>.
A global search/replace on Java files with for lines starting with <code>import org.uimafit</code> and replacing that with <code>import org.apache.uima.fit</code> should work.</p>
</div>
<div class="paragraph">
<div class="title">@ConfigurationParameter</div>
<p>The default value for the mandatory attribute now is <code>true</code>.
The default name of configuration parameters is now the name of the annotated field only.
The classname is no longer prefixed.
The method <code>ConfigurationParameterFactory.createConfigurationParameterName()</code> that was used to generate the prefixed name has been removed.</p>
</div>
<div class="paragraph">
<div class="title">Type detection: META-INF/org.uimafit folder</div>
<p>The <code>META-INF/org.uimafit</code> was renamed to <code>META-INF/org.apache.uima.fit</code>.</p>
</div>
<div class="paragraph">
<div class="title">JCasUtil</div>
<p>The deprecated <code>JCasUtil.iterate()</code> methods have been removed. <code>JCasUtil.select()</code> should be used instead.</p>
</div>
<div class="paragraph">
<div class="title">AnalysisEngineFactory</div>
<p>All <code>createAggregateXXX</code> and <code>createPrimitiveXXX</code> methods have been renamed to <code>createEngineXXX</code>.
The old names are deprecated and will be removed in future versions.</p>
</div>
<div class="paragraph">
<p>All <code>createAnalysisEngineXXX</code> methods have been renamed to <code>createEngineXXX</code>.
The old names are deprecated and will be removed in future versions.</p>
</div>
<div class="paragraph">
<div class="title">CollectionReaderFactory</div>
<p>All <code>createDescriptionXXX</code> methods have been renamed to <code>createReaderDescriptionXXX</code>.
The old names are deprecated and will be removed in future versions.</p>
</div>
<div class="paragraph">
<p>All <code>createCollectionReaderXXX</code> methods have been renamed to <code>createReaderXXX</code>.
The old names are deprecated and will be removed in future versions.</p>
</div>
<div class="paragraph">
<div class="title">JCasIterable</div>
<p><code>JCasIterable</code> now only accepts reader and engine descriptions (no instances) and no longer implements the <code>Iterator</code> interface.
Instead, new <code>JCasIterator</code> has been added, which replaces <code>JCasIterable</code> in that respect.</p>
</div>
<div class="paragraph">
<div class="title">CasDumpWriter</div>
<p><code>org.uimafit.component.xwriter.CASDumpWriter</code> has been renamed to <code>org.apache.uima.fit.component.CasDumpWriter</code>.</p>
</div>
<div class="paragraph">
<div class="title">CpePipeline</div>
<p><code>CpePipeline</code> has been moved to a separate module with the artifact ID <code>uimafit-cpe</code> to reduce the dependencies incurred by the main uimaFIT artifact.</p>
</div>
<div class="paragraph">
<div class="title">XWriter removed</div>
<p>The <code>XWriter</code> and associated file namers have been removed as they were much more complex then acutally needed.
As an alternative, <code>CasIOUtil</code> has been introduced providing several convenience methods to read/write JCas/CAS data.</p>
</div>
<div class="paragraph">
<div class="title">JCasFactory</div>
<p>Methods only loading JCas data have been removed from <code>JCasFactory</code>.
The new methods in <code>CasIOUtil</code> can be used instead.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 3.4.0<br>
Last updated 2023-02-03 09:17:57 +0100
</div>
</div>
</body>
</html>