<?xml version="1.0" encoding="UTF-8"?>

<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
 to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<document>

<properties>
<title>One time setup</title>
<author email="dev@uima.apache.org">
 UIMA Documentation Team</author>
</properties>

<body>

<section name="One time setup instructions for working with Apache UIMA source code">
  <p>
    Here you will find information on how to set up various tools used in working with UIMA source code, including:
    <ul>
      <li><a href="#svn-setup">SVN</a></li>
      <li><a href="#maven-setup">Maven</a></li>
      <li><a href="#eclipse-setup">Eclipse</a></li>
    </ul>
  </p>
</section>

<section name="One time setup for SVN" id="svn-setup">
  <p>Install an svn client (not server) to use for command line invocation of SVN from 
    <a class="external" rel="nofollow" target="_blank" 
      href="http://subversion.apache.org/packages.html">http://subversion.apache.org/packages.html</a>.
    Use the 1.6.x or later version.
    For Windows platform, you may find it convenient to also install a windows shell extension for this, such 
    as the one from Tigris.org.</p>
    
  <p>If you are using an IDE, you should obtain the SVN client for that IDE.</p>
</section>

<section name="One time setup for Maven" id="maven-setup">
  <ol><li>Download Maven 3.0 or later from
    <a class="external" rel="nofollow" target="_blank"
      href="http://maven.apache.org/download.html">http://maven.apache.org/download.html</a>.</li>
      <li>Set up your path to use this version.</li>
      <li>(Optional, but is needed for some JVM/platforms, to give the JVM enough room to build things). 
      Add the following environment variable for Maven: <br/>
        <pre>  Variable name: <code>MAVEN_OPTS</code><br/>
  Value: <code>-Xmx800m  -XX:MaxPermSize=256m</code></pre></li>
  
      <li>If you plan to build from "trunk" which contains unreleased as-of-yet artifacts, you'll need
      to have the build get access to UIMA's build tooling.  This can be done in 2 ways:
      <ol><li>Checkout the build tooling from svn (http://svn.apache.org/repos/asf/uima/build/trunk) and 
      build and install it into your local maven repository.  To do the build and install,  
      go into the parent-poms/parent-pom-top directory, and do the "mvn install" command.</li>
      <li>Change your maven settings.xml file to include the Apache snapshot repository in the set of repositories it
      searches for artifacts.  For general information on maven settings files, 
      see <a class="external" rel="nofollow" target="_blank"
      href="http://maven.apache.org/settings.html">http://maven.apache.org/settings.html</a> and
      <a class="external" rel="nofollow" target="_blank"
      href="http://maven.apache.org/ref/3.0/maven-settings/settings.html">
      http://maven.apache.org/ref/3.0/maven-settings/settings.html</a>.
      <p>To follow this approach, create a settings.xml file in the right location (usually ~/.m2/) and 
      add a setting for the repository.apache.org NEXUS snapshot repository. 
      There's an existing settings.xml you can use as a template, in the conf/ directory of the maven install.
      Here's an example of how that could be done:
      <pre><code>&lt;profile>
  &lt;id>local-build-configuration&lt;/id>
  &lt;repositories>
    &lt;repository>
      &lt;id>apache-nexus-snapshot&lt;/id>
      &lt;url>https://repository.apache.org/content/groups/snapshots-group/&lt;/url>
    &lt;/repository>
  &lt;/repositories>
  &lt;pluginRepositories>
    &lt;pluginRepository>
      &lt;id>apache-nexus-snapshot&lt;/id>
      &lt;url>https://repository.apache.org/content/groups/snapshots-group/&lt;/url>
    &lt;/pluginRepository>
  &lt;/pluginRepositories>
&lt;/profile>

&lt;activeProfiles>
  &lt;activeProfile>local-build-configuration&lt;/activeProfile>
&lt;/activeProfiles>
</code></pre></p></li></ol></li>
   </ol>
</section>

<section name="One time setup for Eclipse" id="eclipse-setup">
  
  <p class="note"><b>Note: </b>See below for an alternative one-time setup for Eclipse that works with Eclipse 3.6</p>
  
  <p>Install Eclipse version 3.5.x  
    (these instructions tested with Eclipse 3.5.2).</p>
  <p class="note"><big><b>Don't use Eclipse version 3.6.x (Helios);</b></big> 
    it has issues with the m2eclipse plugin 0.10.0, which
    currently must be the version of m2eclipse used (see below). Eclipse Galileo SR2 - version 3.5.2 is recommended, instead.</p>
  <p>Then:
    <ol>
      <li><p>Install the SVN support plugin <code>Subclipse</code> from
        <a class="external" rel="nofollow" target="_blank"
          href="http://subclipse.tigris.org/">http://subclipse.tigris.org/</a>.
        Be sure to pick the version for 1.6.x SVN client.        
        </p></li>
      <li><p>Install m2Eclipse 0.10.0 (not 0.10.2) from the Eclipse update site: 
        <a class="external" rel="nofollow" target="_blank"
          href="http://m2eclipse.sonatype.org/sites/m2e/">http://m2eclipse.sonatype.org/sites/m2e/</a>.
        </p>
        <p class="note">Version 0.10.2 doesn't support the bug fix (below) as of July 2010,
          so be sure to install version 0.10.0.  To do this, be sure in Eclipse to
          <b>uncheck Show only latest versions</b> in order to see this release.</p>
        <p>Version 0.10.0 has a bug which prevents projects which use XMLBeans from compiling. 
          Until this is fixed, install this "update" after installing the base:
           <ol><li>Download <a class="external" rel="nofollow" target="_blank"
            href="
          https://cit-server.cit.tu-berlin.de/~battre/org.maven.ide.eclipse.site-0.10.1-SNAPSHOT-site.zip">
          https://cit-server.cit.tu-berlin.de/~battre/org.maven.ide.eclipse.site-0.10.1-SNAPSHOT-site.zip</a>
          </li>
          <li>Add the zip file as a local "Software Site" in "Help -> Install New Software".
            Eclipse should give a message to the effect that the install will be changed to an update
            operation, and then it will update the 0.10.0 base to the 0.10.1 level.
            <p>For more details about this bug, see 
          <a class="external" rel="nofollow" target="_blank"
          href="https://issues.sonatype.org/browse/MNGECLIPSE-1694">https://issues.sonatype.org/browse/MNGECLIPSE-1694</a>.
        </p></li>
          <li>You probably also want the m2eclipse SCM integration - this adds menus to SCM such as
            <code>Checkout as Maven project</code>.  To get this, add the Eclipse update site:  
            <a class="external" rel="nofollow" target="_blank"
              href="http://m2eclipse.sonatype.org/sites/m2e-extras">
                    http://m2eclipse.sonatype.org/sites/m2e-extras</a>
              and then select 
              <ul><li>Maven SCM handler for Subclispe</li>
                <li>Maven SCM Integration</li>
                </ul>
           </li>
          </ol>
        </p>
        
      </li>
      <li>Use Eclipse<code> Preferences -> Maven -> Installations </code> to add the Maven 3.0 (or later) installation as the
        default to use.</li>
      <li>(Optional - if you are using m2eclipse plugin to run maven 
          build commands.) Use Eclipse <code>Preferences -> Java -> Installed JREs</code>
          and select the JRE you will be using as the default, and click
          "Edit" and add the default VM arguments from MAVEN_OPTS above.</li>
    </ol>
  </p>
</section>

<section name="Alternate one-time-setup for Eclipse">
  <p>
    This setup installs a later (SNAPSHOT) version of the m2eclipse plugin which fixes the errors mentioned above, and works with 
    the 3.6 version of Eclipse (Helios).
  </p>
  
  <p>
    Proceed as above, except for the install of the m2eclipse main plugin.  For that, use a snapshot version, for instance, from 
    <a href="https://repository.sonatype.org/content/sites/forge-sites/m2e/0.11.1/N/">
      https://repository.sonatype.org/content/sites/forge-sites/m2e/0.11.1/N/
    </a> - these are the "Nightly builds" I think.  I've tried and had luck with 0.11.1.201009041932, for instance.
  </p>
</section>
</body>
</document>
